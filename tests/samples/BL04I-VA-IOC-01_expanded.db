#% macro, __doc__, Create some records for reading IOC statistics and details.
#% macro, IOC, Device prefix

# Used by Channel Access Security to determine access to this IOC.
record(mbbo, "BL04I-VA-IOC-01:ACCESS")
{
  field(DESC, "BL04I-VA-IOC-01 Acc Mode")
  field(PINI, "YES")
  field(ZRST, "Running")
  field(ZRSV, "NO_ALARM")
  field(ONST, "Maintenance")
  field(ONSV, "MINOR")
  field(TWST, "Test")
  field(TWSV, "MINOR")
  field(THST, "OFFLINE")
  field(THSV, "MAJOR")
  info(autosaveFields, "VAL")
}
record(stringin, "BL04I-VA-IOC-01:STARTTOD")
{
    field(DESC, "Time and date of startup")
    field(DTYP, "Soft Timestamp")
    field(PINI, "YES")
    field(INP, "@%Y-%m-%d %H:%M:%S")
}
record(stringin, "BL04I-VA-IOC-01:TOD")
{
    field(DESC, "Current time and date")
    field(DTYP, "Soft Timestamp")
    field(SCAN, "1 second")
    field(INP, "@%Y-%m-%d %H:%M:%S")
}
record(calcout, "BL04I-VA-IOC-01:HEARTBEAT")
{
    field(DESC, "1 Hz counter since startup")
    field(CALC, "(A<2147483647)?A+1:1")
    field(SCAN, "1 second")
    field(INPA, "BL04I-VA-IOC-01:HEARTBEAT")
}
# if autosave is working, START_CNT creates a running count of 
# number of times the IOC was started.
record(calcout, "BL04I-VA-IOC-01:START_CNT")
{
    field(DESC, "Increments at startup")
    field(CALC, "A+1")
    field(PINI, "YES")
    field(INPA, "BL04I-VA-IOC-01:START_CNT")
    info(autosaveFields_pass0, "VAL")
}
#
# Using an existing internal set of subroutines, this
# PV updates the Access Security mechanism dynamically.
# The .acf file is re-read.
#
record( sub, "BL04I-VA-IOC-01:READACF")
{
    field( DESC, "BL04I-VA-IOC-01 ACF Update")
    field( INAM, "asSubInit")
    field( SNAM, "asSubProcess")
    field( BRSV, "INVALID")
}
record(sub, "BL04I-VA-IOC-01:SYSRESET")
{
    alias("BL04I-VA-IOC-01:SysReset")
    field(DESC, "IOC Restart" )
    field(SNAM, "rebootProc")
    field(BRSV,"INVALID")
    field(L,"1")
}

#% archiver 1 Monitor
#% alh
record(ai, "BL04I-VA-IOC-01:CA_CLNT_CNT") {
  field(DESC, "Number of CA Clients")
  field(SCAN, "I/O Intr")
  field(DTYP, "IOC stats")
  field(INP, "@ca_clients")
  field(HOPR, "200")
  field(HIHI, "175")
  field(HIGH, "100")
  field(HHSV, "MAJOR")
  field(HSV, "MINOR")
  info(autosaveFields_pass0, "HOPR LOPR HIHI HIGH LOW LOLO HHSV HSV LSV LLSV")
}

#% archiver 1 Monitor
#% alh
record(ai, "BL04I-VA-IOC-01:CA_CONN_CNT") {
  field(DESC, "Number of CA Connections")
  field(SCAN, "I/O Intr")
  field(DTYP, "IOC stats")
  field(INP, "@ca_connections")
  field(HOPR, "5000")
  field(HIHI, "4500")
  field(HIGH, "4000")
  field(HHSV, "MAJOR")
  field(HSV, "MINOR")
  info(autosaveFields_pass0, "HOPR LOPR HIHI HIGH LOW LOLO HHSV HSV LSV LLSV")
}

record(ai, "BL04I-VA-IOC-01:RECORD_CNT") {
  field(DESC, "Number of Records")
  field(PINI, "YES")
  field(DTYP, "IOC stats")
  field(INP, "@records")
}

record(ai, "BL04I-VA-IOC-01:FD_MAX") {
  field(DESC, "Max File Descriptors")
  field(PINI, "YES")
  field(DTYP, "IOC stats")
  field(INP, "@maxfd")
}

record(ai, "BL04I-VA-IOC-01:FD_CNT") {
  field(DESC, "Allocated File Descriptors")
  field(SCAN, "I/O Intr")
  field(DTYP, "IOC stats")
  field(FLNK, "BL04I-VA-IOC-01:FD_FREE  PP MS")
  field(INP, "@fd")
}

#% archiver 1 Monitor
#% alh
record(calc, "BL04I-VA-IOC-01:FD_FREE") {
  field(DESC, "Available FDs")
  field(CALC, "B>0?B-A:C")
  field(INPA, "BL04I-VA-IOC-01:FD_CNT  NPP MS")
  field(INPB, "BL04I-VA-IOC-01:FD_MAX  NPP MS")
  field(INPC, "1000")
  field(HOPR, "150")
  field(LOLO, "5")
  field(LOW, "20")
  field(LLSV, "MAJOR")
  field(LSV, "MINOR")
  info(autosaveFields_pass0, "HOPR LOPR LOW LOLO LSV LLSV")
}

#% archiver 1 Monitor
record(ai, "BL04I-VA-IOC-01:SYS_CPU_LOAD") {
  field(DESC, "System CPU Load")
  field(SCAN, "I/O Intr")
  field(DTYP, "IOC stats")
  field(INP, "@sys_cpuload")
  field(EGU, "%")
  field(PREC, "1")
  field(HOPR, "100")
  field(HIHI, "80")
  field(HIGH, "70")
  field(HHSV, "MAJOR")
  field(HSV, "MINOR")
  info(autosaveFields_pass0, "HOPR LOPR HIHI HIGH LOW LOLO HHSV HSV LSV LLSV")
}

#% archiver 1 Monitor
#% alh
record(ai, "BL04I-VA-IOC-01:IOC_CPU_LOAD") {
  alias("BL04I-VA-IOC-01:LOAD")
  field(DESC, "IOC CPU Load")
  field(SCAN, "I/O Intr")
  field(DTYP, "IOC stats")
  field(INP, "@ioc_cpuload")
  field(EGU, "%")
  field(PREC, "1")
  field(HOPR, "100")
  field(HIHI, "80")
  field(HIGH, "70")
  field(HHSV, "MAJOR")
  field(HSV, "MINOR")
  info(autosaveFields_pass0, "HOPR LOPR HIHI HIGH LOW LOLO HHSV HSV LSV LLSV")
}

record(ai, "BL04I-VA-IOC-01:CPU_CNT") {
  field(DESC, "Number of CPUs")
  field(DTYP, "IOC stats")
  field(INP, "@no_of_cpus")
  field(PINI, "YES")
}

#% archiver 1 Monitor
#% alh
record(ai, "BL04I-VA-IOC-01:SUSP_TASK_CNT") {
  field(DESC, "Number Suspended Tasks")
  field(SCAN, "I/O Intr")
  field(DTYP, "IOC stats")
  field(INP, "@suspended_tasks")
  field(HIHI, "1")
  field(HHSV, "MAJOR")
  info(autosaveFields_pass0, "HOPR LOPR HIHI HIGH LOW LOLO HHSV HSV LSV LLSV")
}

#% archiver 1 Monitor
record(ai, "BL04I-VA-IOC-01:MEM_USED") {
  field(DESC, "Allocated Memory")
  field(SCAN, "I/O Intr")
  field(DTYP, "IOC stats")
  field(INP, "@allocated_bytes")
  field(EGU, "byte")
}

#% archiver 1 Monitor
record(ai, "BL04I-VA-IOC-01:MEM_FREE") {
  field(DESC, "Free Memory")
  field(SCAN, "I/O Intr")
  field(DTYP, "IOC stats")
  field(INP, "@free_bytes")
  field(EGU, "byte")
  field(LLSV, "MAJOR")
  field(LSV, "MINOR")
  info(autosaveFields_pass0, "HOPR LOPR LOW LOLO LSV LLSV")
}

record(ai, "BL04I-VA-IOC-01:MEM_MAX") {
  field(DESC, "Maximum Memory")
  field(SCAN, "I/O Intr")
  field(DTYP, "IOC stats")
  field(INP, "@total_bytes")
  field(EGU, "byte")
}

record(ao, "BL04I-VA-IOC-01:CA_UPD_TIME") {
  field(DESC, "CA Check Update Period")
  field(DTYP, "IOC stats")
  field(OUT, "@ca_scan_rate")
  field(EGU, "sec")
  field(DRVH, "60")
  field(DRVL, "1")
  field(HOPR, "60")
  field(VAL, "15")
  field(PINI, "YES")
}

record(ao, "BL04I-VA-IOC-01:FD_UPD_TIME") {
  field(DESC, "FD Check Update Period")
  field(DTYP, "IOC stats")
  field(OUT, "@fd_scan_rate")
  field(EGU, "sec")
  field(DRVH, "60")
  field(DRVL, "1")
  field(HOPR, "60")
  field(VAL, "20")
  field(PINI, "YES")
}

record(ao, "BL04I-VA-IOC-01:LOAD_UPD_TIME") {
  field(DESC, "CPU Check Update Period")
  field(DTYP, "IOC stats")
  field(OUT, "@cpu_scan_rate")
  field(EGU, "sec")
  field(DRVH, "60")
  field(DRVL, "1")
  field(HOPR, "60")
  field(VAL, "10")
  field(PINI, "YES")
}

record(ao, "BL04I-VA-IOC-01:MEM_UPD_TIME") {
  field(DESC, "Memory Check Update Period")
  field(DTYP, "IOC stats")
  field(OUT, "@memory_scan_rate")
  field(EGU, "sec")
  field(DRVH, "60")
  field(DRVL, "1")
  field(HOPR, "60")
  field(VAL, "10")
  field(PINI, "YES")
}

record(stringin, "BL04I-VA-IOC-01:ST_SCRIPT1") {
  field(DESC, "Startup Script Part1")
  field(DTYP, "IOC stats")
  field(INP, "@startup_script_1")
  field(PINI, "YES")
}

record(stringin, "BL04I-VA-IOC-01:ST_SCRIPT2") {
  field(DESC, "Startup Script Part2")
  field(DTYP, "IOC stats")
  field(INP, "@startup_script_2")
  field(PINI, "YES")
}

record(waveform, "BL04I-VA-IOC-01:ST_SCRIPT") {
  field(DESC, "Startup Script")
  field(DTYP, "IOC stats")
  field(INP, "@startup_script")
  field(NELM, "120")
  field(FTVL, "CHAR")
  field(PINI, "YES")
}

record(stringin, "BL04I-VA-IOC-01:KERNEL_VERS") {
  field(DESC, "Kernel Version")
  field(DTYP, "IOC stats")
  field(INP, "@kernel_ver")
  field(PINI, "YES")
}

record(stringin, "BL04I-VA-IOC-01:EPICS_VERS") {
  field(DESC, "EPICS Version")
  field(DTYP, "IOC stats")
  field(INP, "@epics_ver")
  field(PINI, "YES")
}

record(waveform, "BL04I-VA-IOC-01:EPICS_VERSION") {
  field(DESC, "EPICS Version")
  field(DTYP, "IOC stats")
  field(INP, "@epics_ver")
  field(NELM, "120")
  field(FTVL, "CHAR")
  field(PINI, "YES")
}

record(stringin, "BL04I-VA-IOC-01:HOSTNAME") {
  field(DESC, "Host Name")
  field(DTYP, "IOC stats")
  field(INP, "@hostname")
  field(PINI, "YES")
}

record(stringin, "BL04I-VA-IOC-01:APP_DIR1") {
  field(DESC, "Application Directory Part 1")
  field(DTYP, "IOC stats")
  field(INP, "@pwd1")
  field(PINI, "YES")
}

record(stringin, "BL04I-VA-IOC-01:APP_DIR2") {
  field(DESC, "Application Directory Part 2")
  field(DTYP, "IOC stats")
  field(INP, "@pwd2")
  field(PINI, "YES")
}

record(waveform, "BL04I-VA-IOC-01:APP_DIR") {
  field(DESC, "Application Directory")
  field(DTYP, "IOC stats")
  field(INP, "@pwd")
  field(NELM, "160")
  field(FTVL, "CHAR")
  field(PINI, "YES")
}

record(stringin, "BL04I-VA-IOC-01:UPTIME") {
  field(DESC, "Elapsed Time since Start")
  field(SCAN, "1 second")
  field(DTYP, "IOC stats")
  field(INP, "@up_time")
  field(PINI, "YES")
}

record(stringin, "BL04I-VA-IOC-01:ENGINEER") {
  field(DESC, "Engineer")
  field(DTYP, "IOC stats")
  field(INP, "@engineer")
  field(PINI, "YES")
}

record(stringin, "BL04I-VA-IOC-01:LOCATION") {
  field(DESC, "Location")
  field(DTYP, "IOC stats")
  field(INP, "@location")
  field(PINI, "YES")
}

record(ai, "BL04I-VA-IOC-01:PROCESS_ID") {
  field(DESC, "Process ID")
  field(PINI, "YES")
  field(DTYP, "IOC stats")
  field(INP, "@proc_id")
}

record(ai, "BL04I-VA-IOC-01:PARENT_ID") {
  field(DESC, "Parent Process ID")
  field(PINI, "YES")
  field(DTYP, "IOC stats")
  field(INP, "@parent_proc_id")
}

record(stringin, "BL04I-VA-IOC-01:DLSVER") {
  field(DESC, "IOC version")
  field(DTYP, "IOC stats")
  field(INP, "@dlsver")
  field(PINI, "YES")
}
record(ai, "BL04I-VA-IOC-01:GTIM_TIME") {
  field(DESC, "Gen Time Secs since 1990")
  field(SCAN, "1 second")
  field(DTYP, "General Time")
  field(PREC, "3")
  field(INP,  "@TIME")
  field(EGU,  "sec")
}

record(bo, "BL04I-VA-IOC-01:GTIM_RESET") {
  field(DESC, "Gen Time Error Reset")
  field(DTYP, "General Time")
  field(OUT,  "@RSTERRCNT")
  field(ZNAM, "Reset")
  field(ONAM, "Reset")
}

record(longin, "BL04I-VA-IOC-01:GTIM_ERR_CNT") {
  field(DESC, "Gen Time Error Count")
  field(DTYP, "General Time")
  field(INP,  "@GETERRCNT")
  field(SCAN, "1 second")
  field(HIHI, "1")
  field(HHSV, "MAJOR")
}

record(stringin, "BL04I-VA-IOC-01:GTIM_CUR_SRC") {
  field(DESC, "Gen Time Current Provider")
  field(DTYP, "General Time")
  field(INP,  "@BESTTCP")
  field(SCAN, "1 second")
}

record(stringin, "BL04I-VA-IOC-01:GTIM_EVT_SRC") {
  field(DESC, "Gen Time Event Provider")
  field(DTYP, "General Time")
  field(INP,  "@BESTTEP")
  field(SCAN, "1 second")
}

record(stringin, "BL04I-VA-IOC-01:GTIM_HI_SRC") {
  field(DESC, "Gen Time Highest Provider")
  field(DTYP, "General Time")
  field(INP,  "@TOPTCP")
  field(SCAN, "1 second")
}
record(ai, "BL04I-VA-IOC-01:MEM_BLK") {
  field(DESC, "Maximum Free Memory Block")
  field(SCAN, "I/O Intr")
  field(DTYP, "IOC stats")
  field(INP, "@max_free")
  field(EGU, "byte")
  field(HOPR, "50000000")
  field(FLNK, "BL04I-VA-IOC-01:MEM_BLK_FREE  PP MS")
}

record(calc, "BL04I-VA-IOC-01:MEM_BLK_FREE") {
  field(DESC, "Maximum Free Memory Block")
  field(CALC, "A>0?A:B")
  field(INPA, "BL04I-VA-IOC-01:MEM_BLK  NPP MS")
  field(INPB, "1000000000")
  field(EGU, "byte")
  field(HOPR, "50000000")
  field(LOLO, "100000")
  field(LOW, "500000")
  field(LLSV, "MAJOR")
  field(LSV, "MINOR")
  info(autosaveFields_pass0, "HOPR LOLO LOW LLSV LSV")
}

record(stringin, "BL04I-VA-IOC-01:BOOTLINE1") {
  field(DESC, "Boot Line Part1")
  field(DTYP, "IOC stats")
  field(INP, "@bootline_1")
  field(PINI, "YES")
}

record(stringin, "BL04I-VA-IOC-01:BOOTLINE2") {
  field(DESC, "Boot Line Part2")
  field(DTYP, "IOC stats")
  field(INP, "@bootline_2")
  field(PINI, "YES")
}

record(stringin, "BL04I-VA-IOC-01:BOOTLINE3") {
  field(DESC, "Boot Line Part3")
  field(DTYP, "IOC stats")
  field(INP, "@bootline_3")
  field(PINI, "YES")
}

record(stringin, "BL04I-VA-IOC-01:BOOTLINE4") {
  field(DESC, "Boot Line Part4")
  field(DTYP, "IOC stats")
  field(INP, "@bootline_4")
  field(PINI, "YES")
}

record(stringin, "BL04I-VA-IOC-01:BOOTLINE5") {
  field(DESC, "Boot Line Part5")
  field(DTYP, "IOC stats")
  field(INP, "@bootline_5")
  field(PINI, "YES")
}

record(stringin, "BL04I-VA-IOC-01:BOOTLINE6") {
  field(DESC, "Boot Line Part6")
  field(DTYP, "IOC stats")
  field(INP, "@bootline_6")
  field(PINI, "YES")
}

record(waveform, "BL04I-VA-IOC-01:BOOTLINE") {
  field(DESC, "Boot Line")
  field(DTYP, "IOC stats")
  field(INP, "@bootline")
  field(NELM, "240")
  field(FTVL, "CHAR")
  field(PINI, "YES")
}

record(ai, "BL04I-VA-IOC-01:SYS_MBUF_FREE") {
  field(DESC, "Min % Free Sys MBUFs")
  field(DTYP, "IOC stats")
  field(SCAN, "I/O Intr")
  field(EGU, "%")
  field(INP, "@min_sys_mbuf")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_0_0")
  info(autosaveFields_pass0, "LOLO LOW LLSV LSV")
}

record(ai, "BL04I-VA-IOC-01:SYS_MBUF_MAX") {
  field(DESC, "Number of System MBUFs")
  field(DTYP, "IOC stats")
  field(INP, "@sys_mbuf")
  field(PINI, "YES")
}

record(ai, "BL04I-VA-IOC-01:IFI_ERR_CNT") {
  field(DESC, "IF Input Errors")
  field(DTYP, "IOC stats")
  field(SCAN, "I/O Intr")
  field(INP, "@inp_errs")
  info(autosaveFields_pass0, "HIHI HIGH HHSV HSV")
}

record(ai, "BL04I-VA-IOC-01:IFO_ERR_CNT") {
  field(DESC, "IF Output Errors")
  field(DTYP, "IOC stats")
  field(SCAN, "I/O Intr")
  field(INP, "@out_errs")
  info(autosaveFields_pass0, "HIHI HIGH HHSV HSV")
}
record(stringin, "BL04I-VA-IOC-01:BSP_REV") {
  field(DESC, "BSP Revision")
  field(DTYP, "IOC stats")
  field(INP, "@bsp_rev")
  field(PINI, "YES")
}

record(ai, "BL04I-VA-IOC-01:DAT_MBUF_FREE") {
  field(DESC, "Min % Free Data MBUFs")
  field(DTYP, "IOC stats")
  field(SCAN, "I/O Intr")
  field(EGU, "%")
  field(HOPR, "100")
  field(LOPR, "0")
  field(INP, "@min_data_mbuf")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_0_0")
  info(autosaveFields_pass0, "LOLO LOW LLSV LSV")
}

record(ai, "BL04I-VA-IOC-01:DAT_MBUF_MAX") {
  field(DESC, "Number of Data MBUFs")
  field(DTYP, "IOC stats")
  field(INP, "@data_mbuf")
  field(PINI, "YES")
}
record(stringin, "BL04I-VA-IOC-01:CA_ADDR_LIST") {
  field(DESC, "EPICS_CA_ADDR_LIST")
  field(DTYP, "IOC epics var")
  field(INP, "@EPICS_CA_ADDR_LIST")
  field(PINI, "YES")
}
record(stringin, "BL04I-VA-IOC-01:CA_CONN_TIME") {
  field(DESC, "EPICS_CA_CONN_TMO")
  field(DTYP, "IOC epics var")
  field(INP, "@EPICS_CA_CONN_TMO")
  field(PINI, "YES")
}
record(stringin, "BL04I-VA-IOC-01:CA_AUTO_ADDR") {
  field(DESC, "EPICS_CA_AUTO_ADDR_LIST")
  field(DTYP, "IOC epics var")
  field(INP, "@EPICS_CA_AUTO_ADDR_LIST")
  field(PINI, "YES")
}
record(stringin, "BL04I-VA-IOC-01:CA_RPTR_PORT") {
  field(DESC, "EPICS_CA_REPEATER_PORT")
  field(DTYP, "IOC epics var")
  field(INP, "@EPICS_CA_REPEATER_PORT")
  field(PINI, "YES")
}
record(stringin, "BL04I-VA-IOC-01:CA_SRVR_PORT") {
  field(DESC, "EPICS_CA_SERVER_PORT")
  field(DTYP, "IOC epics var")
  field(INP, "@EPICS_CA_SERVER_PORT")
  field(PINI, "YES")
}
record(stringin, "BL04I-VA-IOC-01:CA_MAX_ARRAY") {
  field(DESC, "EPICS_CA_MAX_ARRAY_BYTES")
  field(DTYP, "IOC epics var")
  field(INP, "@EPICS_CA_MAX_ARRAY_BYTES")
  field(PINI, "YES")
}
record(stringin, "BL04I-VA-IOC-01:CA_SRCH_TIME") {
  field(DESC, "EPICS_CA_MAX_SEARCH_PERIOD")
  field(DTYP, "IOC epics var")
  field(INP, "@EPICS_CA_MAX_SEARCH_PERIOD")
  field(PINI, "YES")
}
record(stringin, "BL04I-VA-IOC-01:CA_BEAC_TIME") {
  field(DESC, "EPICS_CA_BEACON_PERIOD")
  field(DTYP, "IOC epics var")
  field(INP, "@EPICS_CA_BEACON_PERIOD")
  field(PINI, "YES")
}
record(stringin, "BL04I-VA-IOC-01:TIMEZONE") {
  field(DESC, "EPICS_TIMEZONE")
  field(DTYP, "IOC epics var")
  field(INP, "@EPICS_TIMEZONE")
  field(PINI, "YES")
}
record(stringin, "BL04I-VA-IOC-01:TS_NTP_INET") {
  field(DESC, "EPICS_TS_NTP_INET")
  field(DTYP, "IOC epics var")
  field(INP, "@EPICS_TS_NTP_INET")
  field(PINI, "YES")
}
record(stringin, "BL04I-VA-IOC-01:IOC_LOG_PORT") {
  field(DESC, "EPICS_IOC_LOG_PORT")
  field(DTYP, "IOC epics var")
  field(INP, "@EPICS_IOC_LOG_PORT")
  field(PINI, "YES")
}
record(stringin, "BL04I-VA-IOC-01:IOC_LOG_INET") {
  field(DESC, "EPICS_IOC_LOG_INET")
  field(DTYP, "IOC epics var")
  field(INP, "@EPICS_IOC_LOG_INET")
  field(PINI, "YES")
}
record(ai, "BL04I-VA-IOC-01:CLUST_0_0_0") {
  field(DESC, "DAT Size")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 0 0")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_0_1")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_0_1") {
  field(DESC, "DAT Clusters")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 0 1")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_0_2")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_0_2") {
  field(DESC, "DAT Free")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 0 2")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_0_3")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_0_3") {
  field(DESC, "DAT Usage")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 0 3")
  field(FLNK, "BL04I-VA-IOC-01:DAT_CLUST_AVAIL_0")
}

record(calc, "BL04I-VA-IOC-01:DAT_CLUST_AVAIL_0") {
  field(DESC, "DAT Free percentage")
  field(EGU,  "%")
  field(PREC, "2")
  field(CALC, "A>0?(B/A)*100:B=0?0:-1")
  field(INPA, "BL04I-VA-IOC-01:CLUST_0_0_1 MS")
  field(INPB, "BL04I-VA-IOC-01:CLUST_0_0_2 MS")
  field(LOLO, "-0.1")
  field(LLSV, "INVALID")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_1_0")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_1_0") {
  field(DESC, "DAT Size")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 1 0")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_1_1")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_1_1") {
  field(DESC, "DAT Clusters")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 1 1")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_1_2")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_1_2") {
  field(DESC, "DAT Free")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 1 2")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_1_3")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_1_3") {
  field(DESC, "DAT Usage")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 1 3")
  field(FLNK, "BL04I-VA-IOC-01:DAT_CLUST_AVAIL_1")
}

record(calc, "BL04I-VA-IOC-01:DAT_CLUST_AVAIL_1") {
  field(DESC, "DAT Free percentage")
  field(EGU,  "%")
  field(PREC, "2")
  field(CALC, "A>0?(B/A)*100:B=0?0:-1")
  field(INPA, "BL04I-VA-IOC-01:CLUST_0_1_1 MS")
  field(INPB, "BL04I-VA-IOC-01:CLUST_0_1_2 MS")
  field(LOLO, "-0.1")
  field(LLSV, "INVALID")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_2_0")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_2_0") {
  field(DESC, "DAT Size")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 2 0")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_2_1")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_2_1") {
  field(DESC, "DAT Clusters")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 2 1")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_2_2")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_2_2") {
  field(DESC, "DAT Free")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 2 2")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_2_3")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_2_3") {
  field(DESC, "DAT Usage")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 2 3")
  field(FLNK, "BL04I-VA-IOC-01:DAT_CLUST_AVAIL_2")
}

record(calc, "BL04I-VA-IOC-01:DAT_CLUST_AVAIL_2") {
  field(DESC, "DAT Free percentage")
  field(EGU,  "%")
  field(PREC, "2")
  field(CALC, "A>0?(B/A)*100:B=0?0:-1")
  field(INPA, "BL04I-VA-IOC-01:CLUST_0_2_1 MS")
  field(INPB, "BL04I-VA-IOC-01:CLUST_0_2_2 MS")
  field(LOLO, "-0.1")
  field(LLSV, "INVALID")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_3_0")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_3_0") {
  field(DESC, "DAT Size")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 3 0")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_3_1")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_3_1") {
  field(DESC, "DAT Clusters")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 3 1")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_3_2")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_3_2") {
  field(DESC, "DAT Free")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 3 2")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_3_3")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_3_3") {
  field(DESC, "DAT Usage")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 3 3")
  field(FLNK, "BL04I-VA-IOC-01:DAT_CLUST_AVAIL_3")
}

record(calc, "BL04I-VA-IOC-01:DAT_CLUST_AVAIL_3") {
  field(DESC, "DAT Free percentage")
  field(EGU,  "%")
  field(PREC, "2")
  field(CALC, "A>0?(B/A)*100:B=0?0:-1")
  field(INPA, "BL04I-VA-IOC-01:CLUST_0_3_1 MS")
  field(INPB, "BL04I-VA-IOC-01:CLUST_0_3_2 MS")
  field(LOLO, "-0.1")
  field(LLSV, "INVALID")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_4_0")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_4_0") {
  field(DESC, "DAT Size")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 4 0")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_4_1")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_4_1") {
  field(DESC, "DAT Clusters")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 4 1")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_4_2")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_4_2") {
  field(DESC, "DAT Free")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 4 2")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_4_3")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_4_3") {
  field(DESC, "DAT Usage")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 4 3")
  field(FLNK, "BL04I-VA-IOC-01:DAT_CLUST_AVAIL_4")
}

record(calc, "BL04I-VA-IOC-01:DAT_CLUST_AVAIL_4") {
  field(DESC, "DAT Free percentage")
  field(EGU,  "%")
  field(PREC, "2")
  field(CALC, "A>0?(B/A)*100:B=0?0:-1")
  field(INPA, "BL04I-VA-IOC-01:CLUST_0_4_1 MS")
  field(INPB, "BL04I-VA-IOC-01:CLUST_0_4_2 MS")
  field(LOLO, "-0.1")
  field(LLSV, "INVALID")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_5_0")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_5_0") {
  field(DESC, "DAT Size")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 5 0")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_5_1")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_5_1") {
  field(DESC, "DAT Clusters")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 5 1")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_5_2")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_5_2") {
  field(DESC, "DAT Free")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 5 2")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_5_3")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_5_3") {
  field(DESC, "DAT Usage")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 5 3")
  field(FLNK, "BL04I-VA-IOC-01:DAT_CLUST_AVAIL_5")
}

record(calc, "BL04I-VA-IOC-01:DAT_CLUST_AVAIL_5") {
  field(DESC, "DAT Free percentage")
  field(EGU,  "%")
  field(PREC, "2")
  field(CALC, "A>0?(B/A)*100:B=0?0:-1")
  field(INPA, "BL04I-VA-IOC-01:CLUST_0_5_1 MS")
  field(INPB, "BL04I-VA-IOC-01:CLUST_0_5_2 MS")
  field(LOLO, "-0.1")
  field(LLSV, "INVALID")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_6_0")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_6_0") {
  field(DESC, "DAT Size")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 6 0")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_6_1")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_6_1") {
  field(DESC, "DAT Clusters")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 6 1")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_6_2")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_6_2") {
  field(DESC, "DAT Free")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 6 2")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_6_3")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_6_3") {
  field(DESC, "DAT Usage")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 6 3")
  field(FLNK, "BL04I-VA-IOC-01:DAT_CLUST_AVAIL_6")
}

record(calc, "BL04I-VA-IOC-01:DAT_CLUST_AVAIL_6") {
  field(DESC, "DAT Free percentage")
  field(EGU,  "%")
  field(PREC, "2")
  field(CALC, "A>0?(B/A)*100:B=0?0:-1")
  field(INPA, "BL04I-VA-IOC-01:CLUST_0_6_1 MS")
  field(INPB, "BL04I-VA-IOC-01:CLUST_0_6_2 MS")
  field(LOLO, "-0.1")
  field(LLSV, "INVALID")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_7_0")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_7_0") {
  field(DESC, "DAT Size")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 7 0")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_7_1")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_7_1") {
  field(DESC, "DAT Clusters")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 7 1")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_7_2")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_7_2") {
  field(DESC, "DAT Free")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 7 2")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_0_7_3")
}

record(ai, "BL04I-VA-IOC-01:CLUST_0_7_3") {
  field(DESC, "DAT Usage")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 0 7 3")
  field(FLNK, "BL04I-VA-IOC-01:DAT_CLUST_AVAIL_7")
}

record(calc, "BL04I-VA-IOC-01:DAT_CLUST_AVAIL_7") {
  field(DESC, "DAT Free percentage")
  field(EGU,  "%")
  field(PREC, "2")
  field(CALC, "A>0?(B/A)*100:B=0?0:-1")
  field(INPA, "BL04I-VA-IOC-01:CLUST_0_7_1 MS")
  field(INPB, "BL04I-VA-IOC-01:CLUST_0_7_2 MS")
  field(LOLO, "-0.1")
  field(LLSV, "INVALID")
  field(FLNK, "")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_0_0") {
  field(DESC, "SYS Size")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 0 0")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_0_1")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_0_1") {
  field(DESC, "SYS Clusters")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 0 1")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_0_2")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_0_2") {
  field(DESC, "SYS Free")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 0 2")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_0_3")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_0_3") {
  field(DESC, "SYS Usage")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 0 3")
  field(FLNK, "BL04I-VA-IOC-01:SYS_CLUST_AVAIL_0")
}

record(calc, "BL04I-VA-IOC-01:SYS_CLUST_AVAIL_0") {
  field(DESC, "SYS Free percentage")
  field(EGU,  "%")
  field(PREC, "2")
  field(CALC, "A>0?(B/A)*100:B=0?0:-1")
  field(INPA, "BL04I-VA-IOC-01:CLUST_1_0_1 MS")
  field(INPB, "BL04I-VA-IOC-01:CLUST_1_0_2 MS")
  field(LOLO, "-0.1")
  field(LLSV, "INVALID")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_1_0")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_1_0") {
  field(DESC, "SYS Size")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 1 0")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_1_1")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_1_1") {
  field(DESC, "SYS Clusters")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 1 1")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_1_2")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_1_2") {
  field(DESC, "SYS Free")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 1 2")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_1_3")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_1_3") {
  field(DESC, "SYS Usage")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 1 3")
  field(FLNK, "BL04I-VA-IOC-01:SYS_CLUST_AVAIL_1")
}

record(calc, "BL04I-VA-IOC-01:SYS_CLUST_AVAIL_1") {
  field(DESC, "SYS Free percentage")
  field(EGU,  "%")
  field(PREC, "2")
  field(CALC, "A>0?(B/A)*100:B=0?0:-1")
  field(INPA, "BL04I-VA-IOC-01:CLUST_1_1_1 MS")
  field(INPB, "BL04I-VA-IOC-01:CLUST_1_1_2 MS")
  field(LOLO, "-0.1")
  field(LLSV, "INVALID")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_2_0")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_2_0") {
  field(DESC, "SYS Size")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 2 0")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_2_1")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_2_1") {
  field(DESC, "SYS Clusters")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 2 1")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_2_2")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_2_2") {
  field(DESC, "SYS Free")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 2 2")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_2_3")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_2_3") {
  field(DESC, "SYS Usage")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 2 3")
  field(FLNK, "BL04I-VA-IOC-01:SYS_CLUST_AVAIL_2")
}

record(calc, "BL04I-VA-IOC-01:SYS_CLUST_AVAIL_2") {
  field(DESC, "SYS Free percentage")
  field(EGU,  "%")
  field(PREC, "2")
  field(CALC, "A>0?(B/A)*100:B=0?0:-1")
  field(INPA, "BL04I-VA-IOC-01:CLUST_1_2_1 MS")
  field(INPB, "BL04I-VA-IOC-01:CLUST_1_2_2 MS")
  field(LOLO, "-0.1")
  field(LLSV, "INVALID")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_3_0")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_3_0") {
  field(DESC, "SYS Size")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 3 0")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_3_1")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_3_1") {
  field(DESC, "SYS Clusters")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 3 1")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_3_2")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_3_2") {
  field(DESC, "SYS Free")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 3 2")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_3_3")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_3_3") {
  field(DESC, "SYS Usage")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 3 3")
  field(FLNK, "BL04I-VA-IOC-01:SYS_CLUST_AVAIL_3")
}

record(calc, "BL04I-VA-IOC-01:SYS_CLUST_AVAIL_3") {
  field(DESC, "SYS Free percentage")
  field(EGU,  "%")
  field(PREC, "2")
  field(CALC, "A>0?(B/A)*100:B=0?0:-1")
  field(INPA, "BL04I-VA-IOC-01:CLUST_1_3_1 MS")
  field(INPB, "BL04I-VA-IOC-01:CLUST_1_3_2 MS")
  field(LOLO, "-0.1")
  field(LLSV, "INVALID")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_4_0")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_4_0") {
  field(DESC, "SYS Size")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 4 0")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_4_1")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_4_1") {
  field(DESC, "SYS Clusters")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 4 1")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_4_2")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_4_2") {
  field(DESC, "SYS Free")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 4 2")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_4_3")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_4_3") {
  field(DESC, "SYS Usage")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 4 3")
  field(FLNK, "BL04I-VA-IOC-01:SYS_CLUST_AVAIL_4")
}

record(calc, "BL04I-VA-IOC-01:SYS_CLUST_AVAIL_4") {
  field(DESC, "SYS Free percentage")
  field(EGU,  "%")
  field(PREC, "2")
  field(CALC, "A>0?(B/A)*100:B=0?0:-1")
  field(INPA, "BL04I-VA-IOC-01:CLUST_1_4_1 MS")
  field(INPB, "BL04I-VA-IOC-01:CLUST_1_4_2 MS")
  field(LOLO, "-0.1")
  field(LLSV, "INVALID")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_5_0")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_5_0") {
  field(DESC, "SYS Size")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 5 0")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_5_1")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_5_1") {
  field(DESC, "SYS Clusters")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 5 1")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_5_2")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_5_2") {
  field(DESC, "SYS Free")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 5 2")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_5_3")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_5_3") {
  field(DESC, "SYS Usage")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 5 3")
  field(FLNK, "BL04I-VA-IOC-01:SYS_CLUST_AVAIL_5")
}

record(calc, "BL04I-VA-IOC-01:SYS_CLUST_AVAIL_5") {
  field(DESC, "SYS Free percentage")
  field(EGU,  "%")
  field(PREC, "2")
  field(CALC, "A>0?(B/A)*100:B=0?0:-1")
  field(INPA, "BL04I-VA-IOC-01:CLUST_1_5_1 MS")
  field(INPB, "BL04I-VA-IOC-01:CLUST_1_5_2 MS")
  field(LOLO, "-0.1")
  field(LLSV, "INVALID")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_6_0")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_6_0") {
  field(DESC, "SYS Size")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 6 0")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_6_1")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_6_1") {
  field(DESC, "SYS Clusters")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 6 1")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_6_2")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_6_2") {
  field(DESC, "SYS Free")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 6 2")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_6_3")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_6_3") {
  field(DESC, "SYS Usage")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 6 3")
  field(FLNK, "BL04I-VA-IOC-01:SYS_CLUST_AVAIL_6")
}

record(calc, "BL04I-VA-IOC-01:SYS_CLUST_AVAIL_6") {
  field(DESC, "SYS Free percentage")
  field(EGU,  "%")
  field(PREC, "2")
  field(CALC, "A>0?(B/A)*100:B=0?0:-1")
  field(INPA, "BL04I-VA-IOC-01:CLUST_1_6_1 MS")
  field(INPB, "BL04I-VA-IOC-01:CLUST_1_6_2 MS")
  field(LOLO, "-0.1")
  field(LLSV, "INVALID")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_7_0")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_7_0") {
  field(DESC, "SYS Size")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 7 0")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_7_1")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_7_1") {
  field(DESC, "SYS Clusters")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 7 1")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_7_2")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_7_2") {
  field(DESC, "SYS Free")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 7 2")
  field(FLNK, "BL04I-VA-IOC-01:CLUST_1_7_3")
}

record(ai, "BL04I-VA-IOC-01:CLUST_1_7_3") {
  field(DESC, "SYS Usage")
  field(DTYP, "IOC stats clusts")
  field(INP, "@clust_info 1 7 3")
  field(FLNK, "BL04I-VA-IOC-01:SYS_CLUST_AVAIL_7")
}

record(calc, "BL04I-VA-IOC-01:SYS_CLUST_AVAIL_7") {
  field(DESC, "SYS Free percentage")
  field(EGU,  "%")
  field(PREC, "2")
  field(CALC, "A>0?(B/A)*100:B=0?0:-1")
  field(INPA, "BL04I-VA-IOC-01:CLUST_1_7_1 MS")
  field(INPB, "BL04I-VA-IOC-01:CLUST_1_7_2 MS")
  field(LOLO, "-0.1")
  field(LLSV, "INVALID")
  field(FLNK, "")
}

#% macro, __doc__, Create some records for reading IOC statistics and details.
#% macro, IOC, Device prefix

record(bo, "BL04I-VA-IOC-01:01HZ_MODE") {
	field(DESC, "01HZ Mode")
	field(DOL, "1")
	field(PINI, "YES")
	field(ZNAM, "Relative")
	field(ONAM, "Absolute")
}
record(sub, "BL04I-VA-IOC-01:01HZ_UPD_TIME") {
	field(DESC, "01HZ Update Time")
	field(SCAN, "10 second")
	field(EGU, "second")
	field(PREC, "5")
	field(MDEL, "0.00001")
	field(HYST, "0.00002")
	field(INAM, "scanMonInit")
	field(SNAM, "scanMon")
	field(HHSV, "MAJOR")
	field(HSV, "MINOR")
	field(LSV, "MINOR")
	field(LLSV, "MAJOR")
	field(BRSV, "INVALID")
	field(INPA, "BL04I-VA-IOC-01:01HZ_MODE")
	field(B,    "1.0")
	field(C,    "5.0")
}
#% macro, __doc__, Create some records for reading IOC statistics and details.
#% macro, IOC, Device prefix

record(bo, "BL04I-VA-IOC-01:02HZ_MODE") {
	field(DESC, "02HZ Mode")
	field(DOL, "1")
	field(PINI, "YES")
	field(ZNAM, "Relative")
	field(ONAM, "Absolute")
}
record(sub, "BL04I-VA-IOC-01:02HZ_UPD_TIME") {
	field(DESC, "02HZ Update Time")
	field(SCAN, "5 second")
	field(EGU, "second")
	field(PREC, "5")
	field(MDEL, "0.00001")
	field(HYST, "0.00002")
	field(INAM, "scanMonInit")
	field(SNAM, "scanMon")
	field(HHSV, "MAJOR")
	field(HSV, "MINOR")
	field(LSV, "MINOR")
	field(LLSV, "MAJOR")
	field(BRSV, "INVALID")
	field(INPA, "BL04I-VA-IOC-01:02HZ_MODE")
	field(B,    "1.0")
	field(C,    "5.0")
}
#% macro, __doc__, Create some records for reading IOC statistics and details.
#% macro, IOC, Device prefix

record(bo, "BL04I-VA-IOC-01:05HZ_MODE") {
	field(DESC, "05HZ Mode")
	field(DOL, "1")
	field(PINI, "YES")
	field(ZNAM, "Relative")
	field(ONAM, "Absolute")
}
record(sub, "BL04I-VA-IOC-01:05HZ_UPD_TIME") {
	field(DESC, "05HZ Update Time")
	field(SCAN, "2 second")
	field(EGU, "second")
	field(PREC, "5")
	field(MDEL, "0.00001")
	field(HYST, "0.00002")
	field(INAM, "scanMonInit")
	field(SNAM, "scanMon")
	field(HHSV, "MAJOR")
	field(HSV, "MINOR")
	field(LSV, "MINOR")
	field(LLSV, "MAJOR")
	field(BRSV, "INVALID")
	field(INPA, "BL04I-VA-IOC-01:05HZ_MODE")
	field(B,    "1.0")
	field(C,    "5.0")
}
#% macro, __doc__, Create some records for reading IOC statistics and details.
#% macro, IOC, Device prefix

record(bo, "BL04I-VA-IOC-01:1HZ_MODE") {
	field(DESC, "1HZ Mode")
	field(DOL, "1")
	field(PINI, "YES")
	field(ZNAM, "Relative")
	field(ONAM, "Absolute")
}
record(sub, "BL04I-VA-IOC-01:1HZ_UPD_TIME") {
	field(DESC, "1HZ Update Time")
	field(SCAN, "1 second")
	field(EGU, "second")
	field(PREC, "5")
	field(MDEL, "0.00001")
	field(HYST, "0.00002")
	field(INAM, "scanMonInit")
	field(SNAM, "scanMon")
	field(HHSV, "MAJOR")
	field(HSV, "MINOR")
	field(LSV, "MINOR")
	field(LLSV, "MAJOR")
	field(BRSV, "INVALID")
	field(INPA, "BL04I-VA-IOC-01:1HZ_MODE")
	field(B,    "1.0")
	field(C,    "5.0")
}
#% macro, __doc__, Create some records for reading IOC statistics and details.
#% macro, IOC, Device prefix

record(bo, "BL04I-VA-IOC-01:2HZ_MODE") {
	field(DESC, "2HZ Mode")
	field(DOL, "1")
	field(PINI, "YES")
	field(ZNAM, "Relative")
	field(ONAM, "Absolute")
}
record(sub, "BL04I-VA-IOC-01:2HZ_UPD_TIME") {
	field(DESC, "2HZ Update Time")
	field(SCAN, ".5 second")
	field(EGU, "second")
	field(PREC, "5")
	field(MDEL, "0.00001")
	field(HYST, "0.00002")
	field(INAM, "scanMonInit")
	field(SNAM, "scanMon")
	field(HHSV, "MAJOR")
	field(HSV, "MINOR")
	field(LSV, "MINOR")
	field(LLSV, "MAJOR")
	field(BRSV, "INVALID")
	field(INPA, "BL04I-VA-IOC-01:2HZ_MODE")
	field(B,    "1.0")
	field(C,    "5.0")
}
#% macro, __doc__, Create some records for reading IOC statistics and details.
#% macro, IOC, Device prefix

record(bo, "BL04I-VA-IOC-01:5HZ_MODE") {
	field(DESC, "5HZ Mode")
	field(DOL, "1")
	field(PINI, "YES")
	field(ZNAM, "Relative")
	field(ONAM, "Absolute")
}
record(sub, "BL04I-VA-IOC-01:5HZ_UPD_TIME") {
	field(DESC, "5HZ Update Time")
	field(SCAN, ".2 second")
	field(EGU, "second")
	field(PREC, "5")
	field(MDEL, "0.00001")
	field(HYST, "0.00002")
	field(INAM, "scanMonInit")
	field(SNAM, "scanMon")
	field(HHSV, "MAJOR")
	field(HSV, "MINOR")
	field(LSV, "MINOR")
	field(LLSV, "MAJOR")
	field(BRSV, "INVALID")
	field(INPA, "BL04I-VA-IOC-01:5HZ_MODE")
	field(B,    "1.0")
	field(C,    "5.0")
}
#% macro, __doc__, Create some records for reading IOC statistics and details.
#% macro, IOC, Device prefix

record(bo, "BL04I-VA-IOC-01:10HZ_MODE") {
	field(DESC, "10HZ Mode")
	field(DOL, "1")
	field(PINI, "YES")
	field(ZNAM, "Relative")
	field(ONAM, "Absolute")
}
record(sub, "BL04I-VA-IOC-01:10HZ_UPD_TIME") {
	field(DESC, "10HZ Update Time")
	field(SCAN, ".1 second")
	field(EGU, "second")
	field(PREC, "5")
	field(MDEL, "0.00001")
	field(HYST, "0.00002")
	field(INAM, "scanMonInit")
	field(SNAM, "scanMon")
	field(HHSV, "MAJOR")
	field(HSV, "MINOR")
	field(LSV, "MINOR")
	field(LLSV, "MAJOR")
	field(BRSV, "INVALID")
	field(INPA, "BL04I-VA-IOC-01:10HZ_MODE")
	field(B,    "1.0")
	field(C,    "5.0")
}

record(calc, "BL04I-VA-IOC-01:SCANMON_SEVR") {
    field(DESC, "ScanMon Max Severity")
    field(SCAN, "1 second")
    field(CALC, "0")
    field(INPA, "BL04I-VA-IOC-01:01HZ_UPD_TIME.SEVR MS")
    field(INPB, "BL04I-VA-IOC-01:02HZ_UPD_TIME.SEVR MS")
    field(INPC, "BL04I-VA-IOC-01:05HZ_UPD_TIME.SEVR MS")
    field(INPD, "BL04I-VA-IOC-01:1HZ_UPD_TIME.SEVR MS")
    field(INPE, "BL04I-VA-IOC-01:2HZ_UPD_TIME.SEVR MS")
    field(INPF, "BL04I-VA-IOC-01:5HZ_UPD_TIME.SEVR MS")
    field(INPG, "BL04I-VA-IOC-01:10HZ_UPD_TIME.SEVR MS")
}

# % macro, name, name for gui elements
# % macro, EDM_FILE, edm screen, defaults to ioc_stats_softdls.edl
# % macro, IOC, ioc name

# % gui, VA1.OB1, edm, ioc_stats_softdls.edl, ioc=BL04I-VA-IOC-01
# % gui, VA1.OB1, edmembed, ioc_embed.edl, ioc=BL04I-VA-IOC-01,EDM_FILE=ioc_stats_softdls.edl



# This associates BOY screens with the template
# % gui, VA1.OB1, boydetail, devIocStatsApp_opi/iocStats_detail.opi, desc=BL04I-VA-IOC-01, IOC=BL04I-VA-IOC-01, name=VA1.OB1
# % gui, VA1.OB1, boyembed, devIocStatsApp_opi/iocStats_embed.opi, desc=BL04I-VA-IOC-01,  IOC=BL04I-VA-IOC-01, name=VA1.OB1
# % gui, VA1.OB1, boyembed, devIocStatsApp_opi/iocStats_embed_box.opi, desc=BL04I-VA-IOC-01,  IOC=BL04I-VA-IOC-01, name=VA1.OB1

# These define what PVs a detail screen should contain
# % gui, VA1.OB1, readback, Startup Time,BL04I-VA-IOC-01:STARTOD
# % gui, VA1.OB1, readback, Current Time,BL04I-VA-IOC-01:TOD
# % gui, VA1.OB1, readback, Up Time,BL04I-VA-IOC-01:UPTIME
# % gui, VA1.OB1, readback, Heartbeat,BL04I-VA-IOC-01:HEARTBEAT
# % gui, VA1.OB1, readback, Records,BL04I-VA-IOC-01:RECORD_CNT
# % gui, VA1.OB1, readback, Host Name,BL04I-VA-IOC-01:HOSTNAME
# % gui, VA1.OB1, readback, User Name,BL04I-VA-IOC-01:ENGINEER
# % gui, VA1.OB1, readback, Location,BL04I-VA-IOC-01:LOCATION
# % gui, VA1.OB1, readback, CA Clients,BL04I-VA-IOC-01:CA_CLNT_CNT
# % gui, VA1.OB1, readback, CA PV Conns,BL04I-VA-IOC-01:CA_CONN_CNT
# % gui, VA1.OB1, readback, Susp Tasks,BL04I-VA-IOC-01:SUSP_TASK_CNT
# % gui, VA1.OB1, readback, EPICS Version,BL04I-VA-IOC-01:EPICS_VERS
# % gui, VA1.OB1, readback, OS Version,BL04I-VA-IOC-01:KERNEL_VERS
# % gui, VA1.OB1, readback, Application Directory,BL04I-VA-IOC-01:APP_DIR1
# % gui, VA1.OB1, readback, Startup Script,BL04I-VA-IOC-01:ST_SCRIPT1
# % gui, VA1.OB1, readback, Memory Free,BL04I-VA-IOC-01:MEM_FREE
# % gui, VA1.OB1, readback, Memory Used,BL04I-VA-IOC-01:MEM_USED
# % gui, VA1.OB1, readback, Memory Max,BL04I-VA-IOC-01:MEM_MAX
# % gui, VA1.OB1, readback, File Handles Free,BL04I-VA-IOC-01:FD_FREE
# % gui, VA1.OB1, readback, File Handles Max,BL04I-VA-IOC-01:FD_MAX
# % gui, VA1.OB1, readback, IOC CPU Load,BL04I-VA-IOC-01:IOC_CPU_LOAD
# % gui, VA1.OB1, readback, All CPUs Load,BL04I-VA-IOC-01:SYS_CPU_LOAD
# % gui, VA1.OB1, readback, System CPUs,BL04I-VA-IOC-01:CPU_CNT

#% macro, __doc__, Provides basic information about the IOC, supplementing the 
# information provided by vxStats: provides temperature information.
#% macro, device, Device name
#% macro, high, Temperature for MINOR severity alarm, default 50 deg
#% macro, hihi, Temperature for MAJOR severity alarm, default 60 deg
#% macro, hyst, Alarm deadband value, default 2 deg

#% archiver 10 Monitor
#% alh
#% alh $SEVRCOMMAND UP_MAJOR dls-alh-handler.py BL04I-VA-IOC-01:SYSTEMP

record(ai, "BL04I-VA-IOC-01:SYSTEMP")
{
	field(SCAN, "10 second")
	field(DTYP, "IOCinfo")
	field(INP,  "@SYSTEMP")
	field(PINI, "YES")
	field(EGU,  "C")
	field(HOPR, "80")
	field(LOPR, "20")
	field(DESC, "System Temperature")
	field(PREC, "1")
	field(HIHI, "60")
	field(HIGH, "50")
	field(HHSV, "MAJOR")
	field(HSV,  "MINOR")
	field(ADEL, "0.5")
	field(HYST, "2")
}

record(longin, "BL04I-VA-IOC-01:CPUSLOT")
{
	field(DESC, "VME Slot")
	field(PINI, "YES")
	field(DTYP, "IOCinfo")
	field(INP,  "@CPUSLOT")
	field(EGU,  "Slot")
	field(HOPR, "21")
	field(LOPR, "1")
	field(HIHI, "21")
	field(LOLO, "0")
	field(HHSV, "MAJOR")
	field(LLSV, "MAJOR")
}

#% archiver 60 Monitor

record(longin, "BL04I-VA-IOC-01:BATTERY")
{
	field(DESC, "Battery voltage <2.5V")
	field(PINI, "YES")
	field(DTYP, "IOCinfo")
	field(INP,  "@BATTERY")
	field(SCAN, "10 second")
	field(HIGH, "1")
	field(HSV,  "MINOR")
}
record(stringout,"BL04I-VA-IOC-01:0:NAME") {
	field(VAL,"Not In Use")
	field(DTYP,"Soft Channel")
}
record(longout,"BL04I-VA-IOC-01:0:STATE") {
	field(DTYP,"Soft Channel")
}

#% archiver 10 Monitor VAL
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-VA-IOC-01:0:STATUS
record(mbbo,"BL04I-VA-IOC-01:0:STATUS") {
	field(DTYP,"Soft Channel")
	field(NOBT,"3")
	field(ONVL,"1")
	field(TWVL,"2")
	field(THVL,"3")
	field(FRVL,"4")
	field(ZRST,"No Status")
	field(ONST,"Failure")
	field(TWST,"Warning")
	field(THST,"Seq Fail")
	field(FRST,"Ok")
	field(ONSV, "MAJOR")
	field(TWSV, "MINOR")
	field(THSV, "MINOR")
}
record(stringout,"BL04I-VA-IOC-01:0:STATUSST") {
	field(DTYP,"Soft Channel")
	field(VAL,"Status unknown")
}
record(stringout,"BL04I-VA-IOC-01:0:TIME") {
	field(DTYP,"Soft Channel")
	field(VAL,"Not yet saved")
}
record(stringout,"BL04I-VA-IOC-01:1:NAME") {
	field(VAL,"Not In Use")
	field(DTYP,"Soft Channel")
}
record(longout,"BL04I-VA-IOC-01:1:STATE") {
	field(DTYP,"Soft Channel")
}

#% archiver 10 Monitor VAL
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-VA-IOC-01:1:STATUS
record(mbbo,"BL04I-VA-IOC-01:1:STATUS") {
	field(DTYP,"Soft Channel")
	field(NOBT,"3")
	field(ONVL,"1")
	field(TWVL,"2")
	field(THVL,"3")
	field(FRVL,"4")
	field(ZRST,"No Status")
	field(ONST,"Failure")
	field(TWST,"Warning")
	field(THST,"Seq Fail")
	field(FRST,"Ok")
	field(ONSV, "MAJOR")
	field(TWSV, "MINOR")
	field(THSV, "MINOR")
}
record(stringout,"BL04I-VA-IOC-01:1:STATUSST") {
	field(DTYP,"Soft Channel")
	field(VAL,"Status unknown")
}
record(stringout,"BL04I-VA-IOC-01:1:TIME") {
	field(DTYP,"Soft Channel")
	field(VAL,"Not yet saved")
}
record(stringout,"BL04I-VA-IOC-01:2:NAME") {
	field(VAL,"Not In Use")
	field(DTYP,"Soft Channel")
}
record(longout,"BL04I-VA-IOC-01:2:STATE") {
	field(DTYP,"Soft Channel")
}

#% archiver 10 Monitor VAL
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-VA-IOC-01:2:STATUS
record(mbbo,"BL04I-VA-IOC-01:2:STATUS") {
	field(DTYP,"Soft Channel")
	field(NOBT,"3")
	field(ONVL,"1")
	field(TWVL,"2")
	field(THVL,"3")
	field(FRVL,"4")
	field(ZRST,"No Status")
	field(ONST,"Failure")
	field(TWST,"Warning")
	field(THST,"Seq Fail")
	field(FRST,"Ok")
	field(ONSV, "MAJOR")
	field(TWSV, "MINOR")
	field(THSV, "MINOR")
}
record(stringout,"BL04I-VA-IOC-01:2:STATUSST") {
	field(DTYP,"Soft Channel")
	field(VAL,"Status unknown")
}
record(stringout,"BL04I-VA-IOC-01:2:TIME") {
	field(DTYP,"Soft Channel")
	field(VAL,"Not yet saved")
}
# This associates an edm screen with the template
# % gui, BL04I-VA-IOC-01.AUTOSAVE, edm, save_restoreStatus_more.edl, P=BL04I-VA-IOC-01

# This associates BOY screens with the template
# % gui, BL04I-VA-IOC-01.AUTOSAVE, boydetail, asApp_opi/autosave_detail.opi, desc=BL04I-VA-IOC-01, device=BL04I-VA-IOC-01, name=BL04I-VA-IOC-01.AUTOSAVE
# % gui, BL04I-VA-IOC-01.AUTOSAVE, boyembed, asApp_opi/autosave_embed.opi, desc=BL04I-VA-IOC-01, device=BL04I-VA-IOC-01, name=BL04I-VA-IOC-01.AUTOSAVE
# % gui, BL04I-VA-IOC-01.AUTOSAVE, boyembed, asApp_opi/autosave_embed_box.opi, desc=BL04I-VA-IOC-01, device=BL04I-VA-IOC-01, name=BL04I-VA-IOC-01.AUTOSAVE

# These define what PVs a detail screen should contain
# % gui, BL04I-VA-IOC-01.AUTOSAVE, readback, General Status, BL04I-VA-IOC-01:SRSTATUSST
# % gui, BL04I-VA-IOC-01.AUTOSAVE, readback, Recently, BL04I-VA-IOC-01:SRRECENTST
# % gui, BL04I-VA-IOC-01.AUTOSAVE, readback, Reboot Status, BL04I-VA-IOC-01:RRSTATUSST
# % gui, BL04I-VA-IOC-01.AUTOSAVE, readback, Reboot time, BL04I-VA-IOC-01:RRTIME
# % gui, BL04I-VA-IOC-01.AUTOSAVE, readback, File 0 Status, BL04I-VA-IOC-01:0:STATUSST
# % gui, BL04I-VA-IOC-01.AUTOSAVE, readback, File 0 Name, BL04I-VA-IOC-01:0:NAME
# % gui, BL04I-VA-IOC-01.AUTOSAVE, readback, File 0 Written, BL04I-VA-IOC-01:0:TIME
# % gui, BL04I-VA-IOC-01.AUTOSAVE, readback, File 1 Status, BL04I-VA-IOC-01:1:STATUSST
# % gui, BL04I-VA-IOC-01.AUTOSAVE, readback, File 1 Name, BL04I-VA-IOC-01:1:NAME
# % gui, BL04I-VA-IOC-01.AUTOSAVE, readback, File 1 Written, BL04I-VA-IOC-01:1:TIME
# % gui, BL04I-VA-IOC-01.AUTOSAVE, readback, File 2 Status, BL04I-VA-IOC-01:2:STATUSST
# % gui, BL04I-VA-IOC-01.AUTOSAVE, readback, File 2 Name, BL04I-VA-IOC-01:2:NAME
# % gui, BL04I-VA-IOC-01.AUTOSAVE, readback, File 2 Written, BL04I-VA-IOC-01:2:TIME


# This makes the component icon reflect the status and severity
# % gui, BL04I-VA-IOC-01.AUTOSAVE, sevr
#% archiver 10 Monitor VAL
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-VA-IOC-01:RRSTATUS
record(mbbo,"BL04I-VA-IOC-01:RRSTATUS") {
	field(DTYP,"Soft Channel")
	field(NOBT,"3")
	field(ONVL,"1")
	field(TWVL,"2")
	field(THVL,"3")
	field(FRVL,"4")
	field(ZRST,"No Status")
	field(ONST,"Failure")
	field(TWST,"Warning")
	field(THST,"Seq Fail")
	field(FRST,"Ok")
	field(ONSV, "MAJOR")
	field(TWSV, "MINOR")
	field(THSV, "MINOR")
}

record(stringout,"BL04I-VA-IOC-01:RRSTATUSST") {
	field(DTYP,"Soft Channel")
	field(VAL,"Status unknown")
}

record(stringout,"BL04I-VA-IOC-01:RRTIME") {
	field(DTYP,"Soft Channel")
	field(VAL,"Not yet saved")
}

# % gui, BL04I-VA-IOC-01.AUTOSAVE, sevr
#% archiver 10 Monitor VAL
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-VA-IOC-01:SRSTATUS
record(mbbo,"BL04I-VA-IOC-01:SRSTATUS") {
	field(DTYP,"Soft Channel")
	field(NOBT,"3")
	field(ONVL,"1")
	field(TWVL,"2")
	field(THVL,"3")
	field(FRST,"4")
	field(ZRST,"No Status")
	field(ONST,"Failure")
	field(TWST,"Warning")
	field(THST,"Seq Fail")
	field(FRST,"Ok")
	field(ONSV, "MAJOR")
	field(TWSV, "MINOR")
	field(THSV, "MINOR")
}

record(bo,"BL04I-VA-IOC-01:SRHEARTBT") {
	field(DTYP,"Soft Channel")
}

record(stringout,"BL04I-VA-IOC-01:SRSTATUSST") {
	field(DTYP,"Soft Channel")
	field(VAL,"Status unknown")
}

record(stringout,"BL04I-VA-IOC-01:SRRECENTST") {
	field(DTYP,"Soft Channel")
	field(VAL,"Status unknown")
}
# CMS Ion radiation monitor four hour reset by event receiver

# Front panel output 0	- TTL reset signal (event 0x60)
# Front panel input	- TTL reply signal (event 0x76)

# macros:
#% macro, device, device name e.g <domain>-<technical>-EVR-01, no default
#% macro, rname, record name, default = SET-ER
#% macro, card, EVR card number, default = 1

record(er, "BL04I-VA-EVR-01:SET-ER")
{
	field(DTYP, "MRF Event Receiver")
	field(OUT,  "#C1 S0 @")
	field(ENAB, "YES")
	field(PINI, "YES")
	field(SCAN, "Passive")

	field(DG0E, "Enabled")	# enable extended pulse
	field(DG0D, "0")	# delay
	field(DG0C, "420")	# prescaler
	field(DG0W, "297620")	# width (4*420*297620/499.654e6 = 1 second)
	field(DG0P, "Normal")	# polarity

	field(FPS0, "0")	# reset signal on Front Panel 0
}

# configure the EVR to decode this event

record(erevent, "BL04I-VA-EVR-01:CMS:RESET")
{
	field(DTYP, "MRF Event Receiver")
	field(OUT,  "#C1 S0 @")
	field(ENAB, "Enabled")
	field(ENM,  "0x60")
	field(PRIO, "LOW")
	field(PINI, "YES")

	field(OUT0, "Enabled")		# trigger MAP0
	field(VME,  "Enabled")		# interrupt
}

record(event, "BL04I-VA-EVR-01:CMS:RESET:S")
{
	field(DTYP, "MRF Event Receiver")
	field(INP,  "#C1 S96 @")
	field(SCAN, "I/O Intr")
	field(VAL,  "96")
	field(PRIO, "LOW")
	field(TSE,  "96")
}

# Timestamp for 4hr reset event
#% archiver 1000 Monitor
record(stringin, "BL04I-VA-EVR-01:CMS:RESET:TS")
{
	field(DTYP, "Soft Timestamp")
	field(INP,  "@%Y-%m-%d %H:%M:%S.%06f") # strftime format
	field(SCAN, "Event")
	field(EVNT, "96")
	field(TSE,  "96")
}

# configure the EVR to decode this event

record(erevent, "BL04I-VA-EVR-01:CMS:INPUT")
{
	field(DTYP, "MRF Event Receiver")
	field(OUT,  "#C1 S0 @")
	field(ENAB, "Enabled")
	field(ENM,  "0x76")
	field(PRIO, "LOW")
	field(PINI, "YES")

	field(VME,  "Enabled")		# interrupt
}

record(event, "BL04I-VA-EVR-01:CMS:INPUT:S")
{
	field(DTYP, "MRF Event Receiver")
	field(INP,  "#C1 S118 @")
	field(SCAN, "I/O Intr")
	field(VAL,  "118")
	field(PRIO, "LOW")
	field(TSE,  "118")
}

# Timestamp for feedback from 4hr reset module
#% archiver 1000 Monitor
record(stringin, "BL04I-VA-EVR-01:CMS:INPUT:TS")
{
	field(DTYP, "Soft Timestamp")
	field(INP,  "@%Y-%m-%d %H:%M:%S.%06f")	# strftime format
	field(SCAN, "Event")
	field(EVNT, "118")
	field(TSE,  "118")
} 
# % macro, __doc__, generalTime interface
#
# Macros:
# % macro, device, device name
# % macro, gt, generalTime PV prefix (Default = GT:)
# % macro, scan, scan rate (Default = 10 second)

record(ai, "BL04I-VA-IOC-01:GT:CURTIME")
{
	field(DESC, "Get Time")
	field(DTYP, "General Time")
	field(INP,  "@TIME")
	field(SCAN, "10 second")
}

record(bo, "BL04I-VA-IOC-01:GT:RSTERR")
{
	field(DESC, "Reset ErrorCounts")
	field(DTYP, "General Time")
	field(OUT,  "@RSTERRCNT")
}

record(longin, "BL04I-VA-IOC-01:GT:ERRCNT")
{
	field(DESC, "Get ErrorCounts")
	field(DTYP, "General Time")
	field(INP,  "@GETERRCNT")
	field(SCAN, "10 second")
}

record(stringin, "BL04I-VA-IOC-01:GT:BESTTCP")
{
	field(DESC, "Best Time-Current-Provider")
	field(DTYP, "General Time")
	field(INP,  "@BESTTCP")
	field(SCAN, "10 second")
}

record(stringin, "BL04I-VA-IOC-01:GT:BESTTEP")
{
	field(DESC, "Best Time-Event-Provider")
	field(DTYP, "General Time")
	field(INP,  "@BESTTEP")
	field(SCAN, "10 second")
}

record(stringin, "BL04I-VA-IOC-01:GT:TOPTCP")
{
	field(DESC, "Hight Priority Time-Provider")
	field(DTYP, "General Time")
	field(INP,  "@TOPTCP")
	field(SCAN, "10 second")
}
# % macro, SYSTEM, Device prefix
# % macro, device, Device prefix

# decrement the event counter at a constant rate

record(calcout, "BL04I-VA-EVR-01:HBT-CHECK")
{
	field(SCAN, ".5 second")
	field(CALC, "(VAL>0)?VAL-1:0")

	field(LOLO, "1")
	field(LLSV, "MAJOR")
}

# reset our event counter each time we receive the Linac heart beat event

record(calcout, "BL04I-VA-EVR-01:HBT-COUNT")
{
	field(SCAN, "Event")
	field(EVNT, "37")
	
	field(CALC, "5")
	field(OUT,  "BL04I-VA-EVR-01:HBT-CHECK")
}
# mks937a.db
#% macro, __doc__, Template database for an MKS937A Multi-Sensor System
# Pete Owens - 9/3/04
#
# substitutions:
#% macro, device, Device name
#% macro, port,   Asyn Port name, e.g. ty_40_0
################################################################################
# Line Frequency
#
#% controldesk Line Frequency readback
record(ai, "BL04I-VA-GCTLR-02:F")
{
    field(DESC, "Line Frequency")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol freq ty_40_6 0")
    field(SCAN, "10 second")
    field(EGU,  "Hz")
    field(PREC, "0")
    field(HOPR, "50")
    field(LOPR, "60")
}
################################################################################
# Pressure Unit
#
#% controldesk Pressure Unit readback
record(stringin, "BL04I-VA-GCTLR-02:UNIT")
{
    field(DESC, "Pressure Unit")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol unit ty_40_6 0")
    field(SCAN, "10 second")
}
################################################################################
# Controller Version
#
#% archiver 10 Monitor
#% controldesk Controller Version readback
record(ai, "BL04I-VA-GCTLR-02:CTLV")
{
    field(DESC, "Controller Version")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol ctlv ty_40_6 0")
    field(SCAN, "10 second")
    field(PREC, "2")
}
################################################################################
# Communications Module Version
#
#% controldesk Communications Version readback
record(ai, "BL04I-VA-GCTLR-02:COMV")
{
    field(DESC, "Communications Version")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol comv ty_40_6 0")
    field(SCAN, "10 second")
    field(PREC, "2")
}
################################################################################
# Module in Slot CC
#
#% controldesk Slot CC smon
record(mbbi, "BL04I-VA-GCTLR-02:MCC")
{
    field(DESC, "Slot CC")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol modcc ty_40_6 0")
    field(SCAN, "10 second")
    field(ZRST, "Hot Cathode")
    field(ONST, "Cold Cathode")
    field(TWST, "Dual Pirani")
    field(THST, "Dual Cnv Pirani")
    field(FRST, "Dual Thermocpl")
    field(FVST, "Dual Cap Manmtr")
    field(SXST, "Sngl Pirani")
    field(SVST, "Sngl Cnv Pirani")
    field(EIST, "Sngl Thrmcpl")
    field(NIST, "Sngl Cap Manmtr")
    field(TEST, "No Module")
    field(ELST, "Wrong Module")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "NO_ALARM")
    field(FVSV, "NO_ALARM")
    field(SXSV, "NO_ALARM")
    field(SVSV, "NO_ALARM")
    field(EISV, "NO_ALARM")
    field(NISV, "NO_ALARM")
    field(TESV, "NO_ALARM")
    field(ELSV, "MAJOR")
}
################################################################################
# Module in Slot A
#
#% controldesk Slot A smon
record(mbbi, "BL04I-VA-GCTLR-02:MA")
{
    field(DESC, "Slot A")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol moda ty_40_6 0")
    field(SCAN, "10 second")
    field(ZRST, "Hot Cathode")
    field(ONST, "Cold Cathode")
    field(TWST, "Dual Pirani")
    field(THST, "Dual Cnv Pirani")
    field(FRST, "Dual Thermocpl")
    field(FVST, "Dual Cap Manmtr")
    field(SXST, "Sngl Pirani")
    field(SVST, "Sngl Cnv Pirani")
    field(EIST, "Sngl Thrmcpl")
    field(NIST, "Sngl Cap Manmtr")
    field(TEST, "No Module")
    field(ELST, "Wrong Module")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "NO_ALARM")
    field(FVSV, "NO_ALARM")
    field(SXSV, "NO_ALARM")
    field(SVSV, "NO_ALARM")
    field(EISV, "NO_ALARM")
    field(NISV, "NO_ALARM")
    field(TESV, "NO_ALARM")
    field(ELSV, "MAJOR")
}
################################################################################
# Module in Slot B
#
#% controldesk Slot B smon
record(mbbi, "BL04I-VA-GCTLR-02:MB")
{
    field(DESC, "Slot B")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol modb ty_40_6 0")
    field(SCAN, "10 second")
    field(ZRST, "Hot Cathode")
    field(ONST, "Cold Cathode")
    field(TWST, "Dual Pirani")
    field(THST, "Dual Cnv Pirani")
    field(FRST, "Dual Thermocpl")
    field(FVST, "Dual Cap Manmtr")
    field(SXST, "Sngl Pirani")
    field(SVST, "Sngl Cnv Pirani")
    field(EIST, "Sngl Thrmcpl")
    field(NIST, "Sngl Cap Manmtr")
    field(TEST, "No Module")
    field(ELST, "Wrong Module")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "NO_ALARM")
    field(FVSV, "NO_ALARM")
    field(SXSV, "NO_ALARM")
    field(SVSV, "NO_ALARM")
    field(EISV, "NO_ALARM")
    field(NISV, "NO_ALARM")
    field(TESV, "NO_ALARM")
    field(ELSV, "MAJOR")
}
################################################################################
################################################################################
# Text error message
#
record(stringin, "BL04I-VA-GCTLR-02:ERROR")
    {
    field(DESC, "Last error message")
    }

# PINI set to ensure the record is initialised with TIMEOUT status,
# which will only change to OK once communication starts.
record(mbbi, "BL04I-VA-GCTLR-02:COMMS")
    {
    field(DESC, "Communication Status")
    field(DTYP, "Soft Channel")
    field(SCAN, "Passive")
    field(ZRST, "TIMEOUT")
    field(ONST, "OK")
    field(INP, "0")
    field(PINI, "YES")
    }

record(scalcout, "BL04I-VA-GCTLR-02:COMMSMATCH")
    {
    field(INAA, "BL04I-VA-GCTLR-02:F.STAT MS CP")
    field(CALC, "printf('%d',AA!='TIMEOUT'?1:0)")
    field(OOPT, "Every Time")
    field(DOPT, "Use CALC")
    field(OUT, "BL04I-VA-GCTLR-02:COMMS PP MS")
    }
# mks937a.db
#% macro, __doc__, Template database for an MKS937A Multi-Sensor System
# Pete Owens - 9/3/04
#
# substitutions:
#% macro, device, Device name
#% macro, port,   Asyn Port name, e.g. ty_40_0
################################################################################
# Line Frequency
#
#% controldesk Line Frequency readback
record(ai, "BL04I-VA-GCTLR-03:F")
{
    field(DESC, "Line Frequency")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol freq ty_40_7 0")
    field(SCAN, "10 second")
    field(EGU,  "Hz")
    field(PREC, "0")
    field(HOPR, "50")
    field(LOPR, "60")
}
################################################################################
# Pressure Unit
#
#% controldesk Pressure Unit readback
record(stringin, "BL04I-VA-GCTLR-03:UNIT")
{
    field(DESC, "Pressure Unit")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol unit ty_40_7 0")
    field(SCAN, "10 second")
}
################################################################################
# Controller Version
#
#% archiver 10 Monitor
#% controldesk Controller Version readback
record(ai, "BL04I-VA-GCTLR-03:CTLV")
{
    field(DESC, "Controller Version")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol ctlv ty_40_7 0")
    field(SCAN, "10 second")
    field(PREC, "2")
}
################################################################################
# Communications Module Version
#
#% controldesk Communications Version readback
record(ai, "BL04I-VA-GCTLR-03:COMV")
{
    field(DESC, "Communications Version")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol comv ty_40_7 0")
    field(SCAN, "10 second")
    field(PREC, "2")
}
################################################################################
# Module in Slot CC
#
#% controldesk Slot CC smon
record(mbbi, "BL04I-VA-GCTLR-03:MCC")
{
    field(DESC, "Slot CC")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol modcc ty_40_7 0")
    field(SCAN, "10 second")
    field(ZRST, "Hot Cathode")
    field(ONST, "Cold Cathode")
    field(TWST, "Dual Pirani")
    field(THST, "Dual Cnv Pirani")
    field(FRST, "Dual Thermocpl")
    field(FVST, "Dual Cap Manmtr")
    field(SXST, "Sngl Pirani")
    field(SVST, "Sngl Cnv Pirani")
    field(EIST, "Sngl Thrmcpl")
    field(NIST, "Sngl Cap Manmtr")
    field(TEST, "No Module")
    field(ELST, "Wrong Module")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "NO_ALARM")
    field(FVSV, "NO_ALARM")
    field(SXSV, "NO_ALARM")
    field(SVSV, "NO_ALARM")
    field(EISV, "NO_ALARM")
    field(NISV, "NO_ALARM")
    field(TESV, "NO_ALARM")
    field(ELSV, "MAJOR")
}
################################################################################
# Module in Slot A
#
#% controldesk Slot A smon
record(mbbi, "BL04I-VA-GCTLR-03:MA")
{
    field(DESC, "Slot A")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol moda ty_40_7 0")
    field(SCAN, "10 second")
    field(ZRST, "Hot Cathode")
    field(ONST, "Cold Cathode")
    field(TWST, "Dual Pirani")
    field(THST, "Dual Cnv Pirani")
    field(FRST, "Dual Thermocpl")
    field(FVST, "Dual Cap Manmtr")
    field(SXST, "Sngl Pirani")
    field(SVST, "Sngl Cnv Pirani")
    field(EIST, "Sngl Thrmcpl")
    field(NIST, "Sngl Cap Manmtr")
    field(TEST, "No Module")
    field(ELST, "Wrong Module")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "NO_ALARM")
    field(FVSV, "NO_ALARM")
    field(SXSV, "NO_ALARM")
    field(SVSV, "NO_ALARM")
    field(EISV, "NO_ALARM")
    field(NISV, "NO_ALARM")
    field(TESV, "NO_ALARM")
    field(ELSV, "MAJOR")
}
################################################################################
# Module in Slot B
#
#% controldesk Slot B smon
record(mbbi, "BL04I-VA-GCTLR-03:MB")
{
    field(DESC, "Slot B")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol modb ty_40_7 0")
    field(SCAN, "10 second")
    field(ZRST, "Hot Cathode")
    field(ONST, "Cold Cathode")
    field(TWST, "Dual Pirani")
    field(THST, "Dual Cnv Pirani")
    field(FRST, "Dual Thermocpl")
    field(FVST, "Dual Cap Manmtr")
    field(SXST, "Sngl Pirani")
    field(SVST, "Sngl Cnv Pirani")
    field(EIST, "Sngl Thrmcpl")
    field(NIST, "Sngl Cap Manmtr")
    field(TEST, "No Module")
    field(ELST, "Wrong Module")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "NO_ALARM")
    field(FVSV, "NO_ALARM")
    field(SXSV, "NO_ALARM")
    field(SVSV, "NO_ALARM")
    field(EISV, "NO_ALARM")
    field(NISV, "NO_ALARM")
    field(TESV, "NO_ALARM")
    field(ELSV, "MAJOR")
}
################################################################################
################################################################################
# Text error message
#
record(stringin, "BL04I-VA-GCTLR-03:ERROR")
    {
    field(DESC, "Last error message")
    }

# PINI set to ensure the record is initialised with TIMEOUT status,
# which will only change to OK once communication starts.
record(mbbi, "BL04I-VA-GCTLR-03:COMMS")
    {
    field(DESC, "Communication Status")
    field(DTYP, "Soft Channel")
    field(SCAN, "Passive")
    field(ZRST, "TIMEOUT")
    field(ONST, "OK")
    field(INP, "0")
    field(PINI, "YES")
    }

record(scalcout, "BL04I-VA-GCTLR-03:COMMSMATCH")
    {
    field(INAA, "BL04I-VA-GCTLR-03:F.STAT MS CP")
    field(CALC, "printf('%d',AA!='TIMEOUT'?1:0)")
    field(OOPT, "Every Time")
    field(DOPT, "Use CALC")
    field(OUT, "BL04I-VA-GCTLR-03:COMMS PP MS")
    }
# mks937a.db
#% macro, __doc__, Template database for an MKS937A Multi-Sensor System
# Pete Owens - 9/3/04
#
# substitutions:
#% macro, device, Device name
#% macro, port,   Asyn Port name, e.g. ty_40_0
################################################################################
# Line Frequency
#
#% controldesk Line Frequency readback
record(ai, "BL04I-VA-GCTLR-04:F")
{
    field(DESC, "Line Frequency")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol freq ty_42_0 0")
    field(SCAN, "10 second")
    field(EGU,  "Hz")
    field(PREC, "0")
    field(HOPR, "50")
    field(LOPR, "60")
}
################################################################################
# Pressure Unit
#
#% controldesk Pressure Unit readback
record(stringin, "BL04I-VA-GCTLR-04:UNIT")
{
    field(DESC, "Pressure Unit")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol unit ty_42_0 0")
    field(SCAN, "10 second")
}
################################################################################
# Controller Version
#
#% archiver 10 Monitor
#% controldesk Controller Version readback
record(ai, "BL04I-VA-GCTLR-04:CTLV")
{
    field(DESC, "Controller Version")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol ctlv ty_42_0 0")
    field(SCAN, "10 second")
    field(PREC, "2")
}
################################################################################
# Communications Module Version
#
#% controldesk Communications Version readback
record(ai, "BL04I-VA-GCTLR-04:COMV")
{
    field(DESC, "Communications Version")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol comv ty_42_0 0")
    field(SCAN, "10 second")
    field(PREC, "2")
}
################################################################################
# Module in Slot CC
#
#% controldesk Slot CC smon
record(mbbi, "BL04I-VA-GCTLR-04:MCC")
{
    field(DESC, "Slot CC")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol modcc ty_42_0 0")
    field(SCAN, "10 second")
    field(ZRST, "Hot Cathode")
    field(ONST, "Cold Cathode")
    field(TWST, "Dual Pirani")
    field(THST, "Dual Cnv Pirani")
    field(FRST, "Dual Thermocpl")
    field(FVST, "Dual Cap Manmtr")
    field(SXST, "Sngl Pirani")
    field(SVST, "Sngl Cnv Pirani")
    field(EIST, "Sngl Thrmcpl")
    field(NIST, "Sngl Cap Manmtr")
    field(TEST, "No Module")
    field(ELST, "Wrong Module")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "NO_ALARM")
    field(FVSV, "NO_ALARM")
    field(SXSV, "NO_ALARM")
    field(SVSV, "NO_ALARM")
    field(EISV, "NO_ALARM")
    field(NISV, "NO_ALARM")
    field(TESV, "NO_ALARM")
    field(ELSV, "MAJOR")
}
################################################################################
# Module in Slot A
#
#% controldesk Slot A smon
record(mbbi, "BL04I-VA-GCTLR-04:MA")
{
    field(DESC, "Slot A")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol moda ty_42_0 0")
    field(SCAN, "10 second")
    field(ZRST, "Hot Cathode")
    field(ONST, "Cold Cathode")
    field(TWST, "Dual Pirani")
    field(THST, "Dual Cnv Pirani")
    field(FRST, "Dual Thermocpl")
    field(FVST, "Dual Cap Manmtr")
    field(SXST, "Sngl Pirani")
    field(SVST, "Sngl Cnv Pirani")
    field(EIST, "Sngl Thrmcpl")
    field(NIST, "Sngl Cap Manmtr")
    field(TEST, "No Module")
    field(ELST, "Wrong Module")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "NO_ALARM")
    field(FVSV, "NO_ALARM")
    field(SXSV, "NO_ALARM")
    field(SVSV, "NO_ALARM")
    field(EISV, "NO_ALARM")
    field(NISV, "NO_ALARM")
    field(TESV, "NO_ALARM")
    field(ELSV, "MAJOR")
}
################################################################################
# Module in Slot B
#
#% controldesk Slot B smon
record(mbbi, "BL04I-VA-GCTLR-04:MB")
{
    field(DESC, "Slot B")
    field(DTYP, "stream")
    field(INP,  "@mks937a.protocol modb ty_42_0 0")
    field(SCAN, "10 second")
    field(ZRST, "Hot Cathode")
    field(ONST, "Cold Cathode")
    field(TWST, "Dual Pirani")
    field(THST, "Dual Cnv Pirani")
    field(FRST, "Dual Thermocpl")
    field(FVST, "Dual Cap Manmtr")
    field(SXST, "Sngl Pirani")
    field(SVST, "Sngl Cnv Pirani")
    field(EIST, "Sngl Thrmcpl")
    field(NIST, "Sngl Cap Manmtr")
    field(TEST, "No Module")
    field(ELST, "Wrong Module")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "NO_ALARM")
    field(FVSV, "NO_ALARM")
    field(SXSV, "NO_ALARM")
    field(SVSV, "NO_ALARM")
    field(EISV, "NO_ALARM")
    field(NISV, "NO_ALARM")
    field(TESV, "NO_ALARM")
    field(ELSV, "MAJOR")
}
################################################################################
################################################################################
# Text error message
#
record(stringin, "BL04I-VA-GCTLR-04:ERROR")
    {
    field(DESC, "Last error message")
    }

# PINI set to ensure the record is initialised with TIMEOUT status,
# which will only change to OK once communication starts.
record(mbbi, "BL04I-VA-GCTLR-04:COMMS")
    {
    field(DESC, "Communication Status")
    field(DTYP, "Soft Channel")
    field(SCAN, "Passive")
    field(ZRST, "TIMEOUT")
    field(ONST, "OK")
    field(INP, "0")
    field(PINI, "YES")
    }

record(scalcout, "BL04I-VA-GCTLR-04:COMMSMATCH")
    {
    field(INAA, "BL04I-VA-GCTLR-04:F.STAT MS CP")
    field(CALC, "printf('%d',AA!='TIMEOUT'?1:0)")
    field(OOPT, "Every Time")
    field(DOPT, "Use CALC")
    field(OUT, "BL04I-VA-GCTLR-04:COMMS PP MS")
    }
# mks937b.template
#% macro, __doc__, Template database for an MKS937B Multi-Sensor System
# Ian Gillingham - April 2010
#
# substitutions:
#% macro, device, Device name
#% macro, port,   Asyn Port name, e.g. ty_40_0
#% macro, address, Controller address (001 .. 253)
################################################################################
# Pressure Unit
#
#% controldesk Pressure Unit readback
record(stringin, "BL04I-VA-GCTLR-01:UNIT")
{
    field(DESC, "Pressure Unit")
    field(DTYP, "stream")
    field(INP,  "@mks937b.protocol unit(001) ty_40_5 0")
    field(SCAN, "10 second")
}
################################################################################
# Controller Version
#
#% archiver 10 Monitor
#% controldesk Controller Version readback
record(ai, "BL04I-VA-GCTLR-01:CTLV")
{
    field(DESC, "Controller Version")
    field(DTYP, "stream")
    field(INP,  "@mks937b.protocol ctlv(001) ty_40_5 0")
    field(SCAN, "10 second")
    field(PREC, "2")
}
################################################################################
# Communications Module Version
# !! Note - for the 937B the comms module is integrated and has no ID
# !!        so this record is deprecated and scan is forced to Passive
#% controldesk Communications Version readback
record(ai, "BL04I-VA-GCTLR-01:COMV")
{
    field(DESC, "Communications Version")
    field(DTYP, "stream")
    field(INP,  "@mks937b.protocol comv(001) ty_40_5 0")
    field(SCAN, "Passive")
    #field(SCAN, "10 second")
    field(PREC, "2")
}
################################################################################
# Module in Slot CC
#
#% controldesk Slot CC smon
record(mbbi, "BL04I-VA-GCTLR-01:MCC")
{
    field(DESC, "Slot CC")
    field(DTYP, "stream")
    field(INP,  "@mks937b.protocol modcc(001) ty_40_5 0")
    field(SCAN, "10 second")
    field(ZRST, "Hot Cathode")
    field(ONST, "Cold Cathode")
    field(TWST, "Dual Pirani")
    field(THST, "Dual Cnv Pirani")
    field(FRST, "Dual Thermocpl")
    field(FVST, "Dual Cap Manmtr")
    field(SXST, "Sngl Pirani")
    field(SVST, "Sngl Cnv Pirani")
    field(EIST, "Sngl Thrmcpl")
    field(NIST, "Sngl Cap Manmtr")
    field(TEST, "No Module")
    field(ELST, "Wrong Module")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "NO_ALARM")
    field(FVSV, "NO_ALARM")
    field(SXSV, "NO_ALARM")
    field(SVSV, "NO_ALARM")
    field(EISV, "NO_ALARM")
    field(NISV, "NO_ALARM")
    field(TESV, "NO_ALARM")
    field(ELSV, "MAJOR")
}
################################################################################
# Module in Slot A
#
#% controldesk Slot A smon
record(mbbi, "BL04I-VA-GCTLR-01:MA")
{
    field(DESC, "Slot A")
    field(DTYP, "stream")
    field(INP,  "@mks937b.protocol moda(001) ty_40_5 0")
    field(SCAN, "10 second")
    field(ZRST, "Hot Cathode")
    field(ONST, "Cold Cathode")
    field(TWST, "Dual Pirani")
    field(THST, "Dual Cnv Pirani")
    field(FRST, "Dual Thermocpl")
    field(FVST, "Dual Cap Manmtr")
    field(SXST, "Sngl Pirani")
    field(SVST, "Sngl Cnv Pirani")
    field(EIST, "Sngl Thrmcpl")
    field(NIST, "Sngl Cap Manmtr")
    field(TEST, "No Module")
    field(ELST, "Wrong Module")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "NO_ALARM")
    field(FVSV, "NO_ALARM")
    field(SXSV, "NO_ALARM")
    field(SVSV, "NO_ALARM")
    field(EISV, "NO_ALARM")
    field(NISV, "NO_ALARM")
    field(TESV, "NO_ALARM")
    field(ELSV, "MAJOR")
}
################################################################################
# Module in Slot B
#
#% controldesk Slot B smon
record(mbbi, "BL04I-VA-GCTLR-01:MB")
{
    field(DESC, "Slot B")
    field(DTYP, "stream")
    field(INP,  "@mks937b.protocol modb(001) ty_40_5 0")
    field(SCAN, "10 second")
    field(ZRST, "Hot Cathode")
    field(ONST, "Cold Cathode")
    field(TWST, "Dual Pirani")
    field(THST, "Dual Cnv Pirani")
    field(FRST, "Dual Thermocpl")
    field(FVST, "Dual Cap Manmtr")
    field(SXST, "Sngl Pirani")
    field(SVST, "Sngl Cnv Pirani")
    field(EIST, "Sngl Thrmcpl")
    field(NIST, "Sngl Cap Manmtr")
    field(TEST, "No Module")
    field(ELST, "Wrong Module")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "NO_ALARM")
    field(FVSV, "NO_ALARM")
    field(SXSV, "NO_ALARM")
    field(SVSV, "NO_ALARM")
    field(EISV, "NO_ALARM")
    field(NISV, "NO_ALARM")
    field(TESV, "NO_ALARM")
    field(ELSV, "MAJOR")
}
################################################################################

record(stringin, "BL04I-VA-GCTLR-01:DEBUG")
{
    field(DESC, "Generic command")
    field(DTYP, "stream")
    field(INP,  "@mks937b.protocol debug(001) ty_40_5 0")
    field(SCAN, "Passive")
}

#
# COMMS record to report state of serial communications
# PINI set to ensure the record is initialised with TIMEOUT status,
# which will only change to OK once communication starts.
record(mbbi, "BL04I-VA-GCTLR-01:COMMS")
    {
    field(DESC, "Communication Status")
    field(DTYP, "Soft Channel")
    field(ZRST, "TIMEOUT")
    field(ONST, "OK")
    field(INP, "0")
    field(PINI, "YES")
    }

record(scalcout, "BL04I-VA-GCTLR-01:COMMSMATCH")
    {
    field(INAA, "BL04I-VA-GCTLR-01:UNIT.STAT MS CP")
    field(CALC, "printf('%d',AA!='TIMEOUT'?1:0)")
    field(OOPT, "Every Time")
    field(DOPT, "Use CALC")
    field(OUT, "BL04I-VA-GCTLR-01:COMMS PP MS")
    }

#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937aGauge.db
#% macro, __doc__, Template database for a combination guage connected to 
# two channels of an MKS937A Multi-Sensor System 
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# Run on PHAS 1 to get most up to date values from IMG and Pirani
# 
# required substitutions:
#% macro, dom, Domain 5 char string (e.g. BL11I)
#% macro, id,  ID number as 2 digit string (e.g. 01)
#% macro, c,   ADC card number
#% macro, s,   ADC signal number
# 
#   Note that as of 31st July 2013, the DTYP and INP fields allow flexibility
#   for implementation on non-VME systems, where the analogue input would be 
#   derived from another record and DTYP might be Soft Channel.
#   In the non-VME use case, do not define 'c' and 's', instead define 'aiinp'
#   and 'aitype': typically 'aiinp' -> "0" (or another record) and 'aitype' -> 'Soft Channel'.
#   Ian Gillingham: 31/7/13

#
# gui substitutions:
#% macro, name,        The device's name for gui purposes
#% macro, GCTLR,       The gauge controller PV prefix, for gui purposes
#
# optional substitutions:
#% macro, ctlsp_level, The desired control setpoint value (actually for the Pirg).
#% macro, ctlsp_drvh,  The DRVH field on control setpoint records. 
#                      (limits max value of control setpoint)
#% macro, ctlsp_drvl,  The DRVL field on control setpoint records. 
#                      (limits min value of control setpoint)
#% macro, ctlsp_hopr,  The HOPR field on control setpoint records. 
#                      (high operator value - helps display set correct range).
#% macro, ctlsp_lopr,  The LOPR field on control setpoint records. 
#                      (low operator value - helps display set correct range).
#% macro, ctlsp_desc,  The DESC field on control setpoint records. 
#		               (appears as a label on the Pirg EDM screen).
#
# GCTLR used for the controller button
# % gui, GAUGE3, edm, mks937aGauge.edl, dom=BL04I, id=03, GCTLR=
#
# This associates BOY screens with the template
# % gui, GAUGE3, boydetail, mks937aApp_opi/gauge_detail.opi, dom=BL04I, id=03, GCTLR=, name=GAUGE3
# % gui, GAUGE3, boyembed, mks937aApp_opi/gauge_embed_box.opi, dom=BL04I, id=03, GCTLR=, name=GAUGE3
# % gui, GAUGE3, boyembed, mks937aApp_opi/gauge_embed.opi, dom=BL04I, id=03, GCTLR=, name=GAUGE3

# These define what PVs a valve detail screen should contain
# % gui, GAUGE3, readback, Pressure,   BL04I-VA-GAUGE-03:P
# % gui, GAUGE3, readback, Gauge,  BL04I-VA-GAUGE-03:GAUGE
# % gui, GAUGE3, enum, Setpoints Overwrite,  BL04I-VA-GAUGE-03:ILKSETSP:NOWRITE


################################################################################
# Select Active Gauge (IMG or PIRG)
#
record(calc, "BL04I-VA-GAUGE-03:SEL") {
  field(DESC, "Select Pressure")
  field(SCAN, "1 second")
  field(PHAS, "1")
  field(FLNK, "BL04I-VA-GAUGE-03:GAUGE")
  field(CALC, "A<2?0:(B<2?1:(B=8?1:2))")
  field(INPA, "BL04I-VA-IMG-03:STA")
  field(INPB, "BL04I-VA-PIRG-03:STA")
}

record(mbbi, "BL04I-VA-GAUGE-03:GAUGE") {
  field(DESC, "Active Gauge")
  field(INP, "BL04I-VA-GAUGE-03:SEL")
  field(FLNK, "BL04I-VA-GAUGE-03:P")
  field(ZRST, "IMG")
  field(ONST, "Pirani")
  field(TWST, "No Gauge")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "MINOR")
  field(TWSV, "MAJOR")
}

################################################################################
# Pressure
#   Note that as of 31st July 2013, the DTYP and INP fields allow flexibility
#   for implementation on non-VME systems, where the analogue input would be 
#   derived from another record and DTYP might be Soft Channel.
#   Ian Gillingham: 31/7/13
#
#% archiver 0.1 Monitor
#
# :PLOG processes passively driven by :P at .1 second scan
#       this used to be a hardware support type, but recently has the option
#       of any input source, including other PVs from ADC ai records, which assume
#       a DTYP of Soft Channel. Soft Channel however will not convert or use EGUF, EGUL etc.
#       So for this scenario it is necessary to apply a factor to the input ADC Soft Channel
#       Log value, i.e. add Log(1000/760). (See mks937aPlogADC.template).
#
record(ai, "BL04I-VA-GAUGE-03:PLOG") {
  field(DESC, "log Pressure")
  field(DTYP, "Hy8401ip")
  field(INP, "#C50 S3 @")
  field(EGU, "log")
  field(LINR, "LINEAR")
#  field(EGUF, "4.6")
#  field(EGUL, "-28.6")
# torr to mbar add .15
#  field(EGUF, "4.75")
#  field(EGUL, "-28.45")
# P = (1000/760)*10^((V/0.6)-12)
  field(EGUF, "4.786")
  field(EGUL, "-28.548")
  field(HOPR, "3")
  field(LOPR, "-11")
  field(HIGH, "-7")
  field(HSV, "MINOR")
  field(ADEL, "0.025")
}


#
#% controldesk Pressure readback
#% archiver 0.1 Monitor
#
record(calc, "BL04I-VA-GAUGE-03:P") {
  field(DESC, "Pressure")
  field(EGU, "mbar")
  field(PREC, "11")
  field(CALC, "10^A")
  field(INPA, "BL04I-VA-GAUGE-03:PLOG PP MS")
  field(SCAN, ".1 second")
  field(HOPR, "1000")
  field(LOPR, "1.0E-11")
}

record(calcout, "BL04I-VA-GAUGE-03:ADEL") {
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-GAUGE-03:P.ADEL")
  field(INPA, "BL04I-VA-GAUGE-03:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

################################################################################
# Control - IMG Enable (link from IMG to PIRG)
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-PIRG-03:CTL:SETSP") {
  field(DESC, "IMG Enable")
  field(FLNK, "BL04I-VA-IMG-03:CTL:SETSP")
  field(OUT, "BL04I-VA-IMG-03:CTL:SETSP")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-PIRG-03:ILKSETSP:NOWRITE")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(DRVH, "9.5e-1")
  field(DRVL, "2.7e-3")
  field(DOL, "1.0e-2")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-PIRG-03:CTL:ENABLE") {
  field(DESC, "Enable Control Setpoint")
  field(FLNK, "BL04I-VA-IMG-03:CTL:ENABLE")
  field(OUT, "BL04I-VA-IMG-03:CTL:ENABLE")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  field(SDIS, "BL04I-VA-PIRG-03:ILKSETSP:NOWRITE")
  #field(PINI, "YES")
}

#
#% archiver 10 Monitor
#% controldesk IMG Enable readback
#
record(ai, "BL04I-VA-PIRG-03:CTL:SP") {
  field(DESC, "IMG Enable")
  field(INP, "BL04I-VA-IMG-03:CTL:SP MS")
  field(SCAN, "1 second")
  field(PHAS, "1")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
}

# Readback the state of the instrument to determine the true CTL:ENABLE state
# this is used in the PIRG Override Interlocks EDM screen for the drop-down
# control for IMG Enable
#
record(mbbi, "BL04I-VA-PIRG-03:CTL:GETENABLE") 
  {
  field(DESC, "Read Disable Setpoint")
  field(INP, "BL04I-VA-IMG-03:CTL:GETDISCALC PP")
  field(SCAN, "1 second")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
# This is essentially a copy of the global record below, but in the domain
# of the PIRG instance, so available to EDM screen.
#
record(bi, "BL04I-VA-PIRG-03:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(PHAS, "1")
  field(INP, "BL04I-VA-GAUGE-03:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# NB: INP had to be removed to allow autosave to correctly restore.
#
#% autosave 0 VAL
record(bi, "BL04I-VA-GAUGE-03:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(PHAS, "0")
  #field(INP, "0")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise just once, records that used to use PINI
# This is to ensure that the autoSR PV refered by ilk_write_access_pv
# is correctly established before any other record processing, to potentially
# avoid overwriting setpoints at IOC startup.
#
record(bo, "BL04I-VA-GAUGE-03:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-GAUGE-03:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-GAUGE-03:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-PIRG-03:CTL:ENABLE")
    field(LNK2, "BL04I-VA-GAUGE-03:INITSETSPSDIS")
    field(SELM, "All")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("BL04I-VA-GAUGE-03:SEL",20,46,0,0,"BL04I-VA-GAUGE-03:SEL")
#! Field("BL04I-VA-GAUGE-03:SEL.FLNK",16777215,1,"BL04I-VA-GAUGE-03:SEL.FLNK")
#! Link("BL04I-VA-GAUGE-03:SEL.FLNK","BL04I-VA-GAUGE-03:GAUGE")
#! Field("BL04I-VA-GAUGE-03:SEL.INPA",16777215,1,"BL04I-VA-GAUGE-03:SEL.INPA")
#! Field("BL04I-VA-GAUGE-03:SEL.INPB",16777215,1,"BL04I-VA-GAUGE-03:SEL.INPB")
#! Field("BL04I-VA-GAUGE-03:SEL.VAL",16777215,1,"BL04I-VA-GAUGE-03:SEL.VAL")
#! Record("BL04I-VA-GAUGE-03:GAUGE",300,65,0,0,"BL04I-VA-GAUGE-03:GAUGE")
#! Field("BL04I-VA-GAUGE-03:GAUGE.INP",16777215,0,"BL04I-VA-GAUGE-03:GAUGE.INP")
#! Link("BL04I-VA-GAUGE-03:GAUGE.INP","BL04I-VA-GAUGE-03:SEL.VAL")
#! Field("BL04I-VA-GAUGE-03:GAUGE.FLNK",16777215,1,"BL04I-VA-GAUGE-03:GAUGE.FLNK")
#! Link("BL04I-VA-GAUGE-03:GAUGE.FLNK","BL04I-VA-GAUGE-03:P")
#! Record("BL04I-VA-GAUGE-03:PLOG",500,17,0,0,"BL04I-VA-GAUGE-03:PLOG")
#! Field("BL04I-VA-GAUGE-03:PLOG.VAL",16777215,1,"BL04I-VA-GAUGE-03:PLOG.VAL")
#! Record("BL04I-VA-GAUGE-03:P",780,212,0,0,"BL04I-VA-GAUGE-03:P")
#! Field("BL04I-VA-GAUGE-03:P.INPA",16777215,0,"BL04I-VA-GAUGE-03:P.INPA")
#! Link("BL04I-VA-GAUGE-03:P.INPA","BL04I-VA-GAUGE-03:PLOG.VAL")
#! Field("BL04I-VA-GAUGE-03:P.ADEL",16777215,1,"BL04I-VA-GAUGE-03:P.ADEL")
#! Field("BL04I-VA-GAUGE-03:P.VAL",16777215,1,"BL04I-VA-GAUGE-03:P.VAL")
#! Record("BL04I-VA-GAUGE-03:ADEL",1060,260,0,0,"BL04I-VA-GAUGE-03:ADEL")
#! Field("BL04I-VA-GAUGE-03:ADEL.OUT",16777215,0,"BL04I-VA-GAUGE-03:ADEL.OUT")
#! Link("BL04I-VA-GAUGE-03:ADEL.OUT","BL04I-VA-GAUGE-03:P.ADEL")
#! Field("BL04I-VA-GAUGE-03:ADEL.INPA",16777215,0,"BL04I-VA-GAUGE-03:ADEL.INPA")
#! Link("BL04I-VA-GAUGE-03:ADEL.INPA","BL04I-VA-GAUGE-03:P.VAL")
#! Record("BL04I-VA-PIRG-03:CTL:SETSP",20,345,0,0,"BL04I-VA-PIRG-03:CTL:SETSP")
#! Field("BL04I-VA-PIRG-03:CTL:SETSP.FLNK",16777215,1,"BL04I-VA-PIRG-03:CTL:SETSP.FLNK")
#! Field("BL04I-VA-PIRG-03:CTL:SETSP.OUT",16777215,1,"BL04I-VA-PIRG-03:CTL:SETSP.OUT")
#! Record("BL04I-VA-PIRG-03:CTL:ENABLE",380,331,0,0,"BL04I-VA-PIRG-03:CTL:ENABLE")
#! Field("BL04I-VA-PIRG-03:CTL:ENABLE.FLNK",16777215,1,"BL04I-VA-PIRG-03:CTL:ENABLE.FLNK")
#! Field("BL04I-VA-PIRG-03:CTL:ENABLE.OUT",16777215,1,"BL04I-VA-PIRG-03:CTL:ENABLE.OUT")
#! Record("BL04I-VA-PIRG-03:CTL:SP",200,352,0,0,"BL04I-VA-PIRG-03:CTL:SP")
#! Field("BL04I-VA-PIRG-03:CTL:SP.INP",16777215,1,"BL04I-VA-PIRG-03:CTL:SP.INP")
#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937aGauge.db
#% macro, __doc__, Template database for a combination guage connected to 
# two channels of an MKS937A Multi-Sensor System 
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# Run on PHAS 1 to get most up to date values from IMG and Pirani
# 
# required substitutions:
#% macro, dom, Domain 5 char string (e.g. BL11I)
#% macro, id,  ID number as 2 digit string (e.g. 01)
#% macro, c,   ADC card number
#% macro, s,   ADC signal number
# 
#   Note that as of 31st July 2013, the DTYP and INP fields allow flexibility
#   for implementation on non-VME systems, where the analogue input would be 
#   derived from another record and DTYP might be Soft Channel.
#   In the non-VME use case, do not define 'c' and 's', instead define 'aiinp'
#   and 'aitype': typically 'aiinp' -> "0" (or another record) and 'aitype' -> 'Soft Channel'.
#   Ian Gillingham: 31/7/13

#
# gui substitutions:
#% macro, name,        The device's name for gui purposes
#% macro, GCTLR,       The gauge controller PV prefix, for gui purposes
#
# optional substitutions:
#% macro, ctlsp_level, The desired control setpoint value (actually for the Pirg).
#% macro, ctlsp_drvh,  The DRVH field on control setpoint records. 
#                      (limits max value of control setpoint)
#% macro, ctlsp_drvl,  The DRVL field on control setpoint records. 
#                      (limits min value of control setpoint)
#% macro, ctlsp_hopr,  The HOPR field on control setpoint records. 
#                      (high operator value - helps display set correct range).
#% macro, ctlsp_lopr,  The LOPR field on control setpoint records. 
#                      (low operator value - helps display set correct range).
#% macro, ctlsp_desc,  The DESC field on control setpoint records. 
#		               (appears as a label on the Pirg EDM screen).
#
# GCTLR used for the controller button
# % gui, GAUGE4, edm, mks937aGauge.edl, dom=BL04I, id=04, GCTLR=
#
# This associates BOY screens with the template
# % gui, GAUGE4, boydetail, mks937aApp_opi/gauge_detail.opi, dom=BL04I, id=04, GCTLR=, name=GAUGE4
# % gui, GAUGE4, boyembed, mks937aApp_opi/gauge_embed_box.opi, dom=BL04I, id=04, GCTLR=, name=GAUGE4
# % gui, GAUGE4, boyembed, mks937aApp_opi/gauge_embed.opi, dom=BL04I, id=04, GCTLR=, name=GAUGE4

# These define what PVs a valve detail screen should contain
# % gui, GAUGE4, readback, Pressure,   BL04I-VA-GAUGE-04:P
# % gui, GAUGE4, readback, Gauge,  BL04I-VA-GAUGE-04:GAUGE
# % gui, GAUGE4, enum, Setpoints Overwrite,  BL04I-VA-GAUGE-04:ILKSETSP:NOWRITE


################################################################################
# Select Active Gauge (IMG or PIRG)
#
record(calc, "BL04I-VA-GAUGE-04:SEL") {
  field(DESC, "Select Pressure")
  field(SCAN, "1 second")
  field(PHAS, "1")
  field(FLNK, "BL04I-VA-GAUGE-04:GAUGE")
  field(CALC, "A<2?0:(B<2?1:(B=8?1:2))")
  field(INPA, "BL04I-VA-IMG-04:STA")
  field(INPB, "BL04I-VA-PIRG-04:STA")
}

record(mbbi, "BL04I-VA-GAUGE-04:GAUGE") {
  field(DESC, "Active Gauge")
  field(INP, "BL04I-VA-GAUGE-04:SEL")
  field(FLNK, "BL04I-VA-GAUGE-04:P")
  field(ZRST, "IMG")
  field(ONST, "Pirani")
  field(TWST, "No Gauge")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "MINOR")
  field(TWSV, "MAJOR")
}

################################################################################
# Pressure
#   Note that as of 31st July 2013, the DTYP and INP fields allow flexibility
#   for implementation on non-VME systems, where the analogue input would be 
#   derived from another record and DTYP might be Soft Channel.
#   Ian Gillingham: 31/7/13
#
#% archiver 0.1 Monitor
#
# :PLOG processes passively driven by :P at .1 second scan
#       this used to be a hardware support type, but recently has the option
#       of any input source, including other PVs from ADC ai records, which assume
#       a DTYP of Soft Channel. Soft Channel however will not convert or use EGUF, EGUL etc.
#       So for this scenario it is necessary to apply a factor to the input ADC Soft Channel
#       Log value, i.e. add Log(1000/760). (See mks937aPlogADC.template).
#
record(ai, "BL04I-VA-GAUGE-04:PLOG") {
  field(DESC, "log Pressure")
  field(DTYP, "Hy8401ip")
  field(INP, "#C50 S4 @")
  field(EGU, "log")
  field(LINR, "LINEAR")
#  field(EGUF, "4.6")
#  field(EGUL, "-28.6")
# torr to mbar add .15
#  field(EGUF, "4.75")
#  field(EGUL, "-28.45")
# P = (1000/760)*10^((V/0.6)-12)
  field(EGUF, "4.786")
  field(EGUL, "-28.548")
  field(HOPR, "3")
  field(LOPR, "-11")
  field(HIGH, "-7")
  field(HSV, "MINOR")
  field(ADEL, "0.025")
}


#
#% controldesk Pressure readback
#% archiver 0.1 Monitor
#
record(calc, "BL04I-VA-GAUGE-04:P") {
  field(DESC, "Pressure")
  field(EGU, "mbar")
  field(PREC, "11")
  field(CALC, "10^A")
  field(INPA, "BL04I-VA-GAUGE-04:PLOG PP MS")
  field(SCAN, ".1 second")
  field(HOPR, "1000")
  field(LOPR, "1.0E-11")
}

record(calcout, "BL04I-VA-GAUGE-04:ADEL") {
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-GAUGE-04:P.ADEL")
  field(INPA, "BL04I-VA-GAUGE-04:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

################################################################################
# Control - IMG Enable (link from IMG to PIRG)
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-PIRG-04:CTL:SETSP") {
  field(DESC, "IMG Enable")
  field(FLNK, "BL04I-VA-IMG-04:CTL:SETSP")
  field(OUT, "BL04I-VA-IMG-04:CTL:SETSP")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-PIRG-04:ILKSETSP:NOWRITE")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(DRVH, "9.5e-1")
  field(DRVL, "2.7e-3")
  field(DOL, "1.0e-2")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-PIRG-04:CTL:ENABLE") {
  field(DESC, "Enable Control Setpoint")
  field(FLNK, "BL04I-VA-IMG-04:CTL:ENABLE")
  field(OUT, "BL04I-VA-IMG-04:CTL:ENABLE")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  field(SDIS, "BL04I-VA-PIRG-04:ILKSETSP:NOWRITE")
  #field(PINI, "YES")
}

#
#% archiver 10 Monitor
#% controldesk IMG Enable readback
#
record(ai, "BL04I-VA-PIRG-04:CTL:SP") {
  field(DESC, "IMG Enable")
  field(INP, "BL04I-VA-IMG-04:CTL:SP MS")
  field(SCAN, "1 second")
  field(PHAS, "1")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
}

# Readback the state of the instrument to determine the true CTL:ENABLE state
# this is used in the PIRG Override Interlocks EDM screen for the drop-down
# control for IMG Enable
#
record(mbbi, "BL04I-VA-PIRG-04:CTL:GETENABLE") 
  {
  field(DESC, "Read Disable Setpoint")
  field(INP, "BL04I-VA-IMG-04:CTL:GETDISCALC PP")
  field(SCAN, "1 second")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
# This is essentially a copy of the global record below, but in the domain
# of the PIRG instance, so available to EDM screen.
#
record(bi, "BL04I-VA-PIRG-04:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(PHAS, "1")
  field(INP, "BL04I-VA-GAUGE-04:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# NB: INP had to be removed to allow autosave to correctly restore.
#
#% autosave 0 VAL
record(bi, "BL04I-VA-GAUGE-04:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(PHAS, "0")
  #field(INP, "0")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise just once, records that used to use PINI
# This is to ensure that the autoSR PV refered by ilk_write_access_pv
# is correctly established before any other record processing, to potentially
# avoid overwriting setpoints at IOC startup.
#
record(bo, "BL04I-VA-GAUGE-04:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-GAUGE-04:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-GAUGE-04:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-PIRG-04:CTL:ENABLE")
    field(LNK2, "BL04I-VA-GAUGE-04:INITSETSPSDIS")
    field(SELM, "All")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("BL04I-VA-GAUGE-04:SEL",20,46,0,0,"BL04I-VA-GAUGE-04:SEL")
#! Field("BL04I-VA-GAUGE-04:SEL.FLNK",16777215,1,"BL04I-VA-GAUGE-04:SEL.FLNK")
#! Link("BL04I-VA-GAUGE-04:SEL.FLNK","BL04I-VA-GAUGE-04:GAUGE")
#! Field("BL04I-VA-GAUGE-04:SEL.INPA",16777215,1,"BL04I-VA-GAUGE-04:SEL.INPA")
#! Field("BL04I-VA-GAUGE-04:SEL.INPB",16777215,1,"BL04I-VA-GAUGE-04:SEL.INPB")
#! Field("BL04I-VA-GAUGE-04:SEL.VAL",16777215,1,"BL04I-VA-GAUGE-04:SEL.VAL")
#! Record("BL04I-VA-GAUGE-04:GAUGE",300,65,0,0,"BL04I-VA-GAUGE-04:GAUGE")
#! Field("BL04I-VA-GAUGE-04:GAUGE.INP",16777215,0,"BL04I-VA-GAUGE-04:GAUGE.INP")
#! Link("BL04I-VA-GAUGE-04:GAUGE.INP","BL04I-VA-GAUGE-04:SEL.VAL")
#! Field("BL04I-VA-GAUGE-04:GAUGE.FLNK",16777215,1,"BL04I-VA-GAUGE-04:GAUGE.FLNK")
#! Link("BL04I-VA-GAUGE-04:GAUGE.FLNK","BL04I-VA-GAUGE-04:P")
#! Record("BL04I-VA-GAUGE-04:PLOG",500,17,0,0,"BL04I-VA-GAUGE-04:PLOG")
#! Field("BL04I-VA-GAUGE-04:PLOG.VAL",16777215,1,"BL04I-VA-GAUGE-04:PLOG.VAL")
#! Record("BL04I-VA-GAUGE-04:P",780,212,0,0,"BL04I-VA-GAUGE-04:P")
#! Field("BL04I-VA-GAUGE-04:P.INPA",16777215,0,"BL04I-VA-GAUGE-04:P.INPA")
#! Link("BL04I-VA-GAUGE-04:P.INPA","BL04I-VA-GAUGE-04:PLOG.VAL")
#! Field("BL04I-VA-GAUGE-04:P.ADEL",16777215,1,"BL04I-VA-GAUGE-04:P.ADEL")
#! Field("BL04I-VA-GAUGE-04:P.VAL",16777215,1,"BL04I-VA-GAUGE-04:P.VAL")
#! Record("BL04I-VA-GAUGE-04:ADEL",1060,260,0,0,"BL04I-VA-GAUGE-04:ADEL")
#! Field("BL04I-VA-GAUGE-04:ADEL.OUT",16777215,0,"BL04I-VA-GAUGE-04:ADEL.OUT")
#! Link("BL04I-VA-GAUGE-04:ADEL.OUT","BL04I-VA-GAUGE-04:P.ADEL")
#! Field("BL04I-VA-GAUGE-04:ADEL.INPA",16777215,0,"BL04I-VA-GAUGE-04:ADEL.INPA")
#! Link("BL04I-VA-GAUGE-04:ADEL.INPA","BL04I-VA-GAUGE-04:P.VAL")
#! Record("BL04I-VA-PIRG-04:CTL:SETSP",20,345,0,0,"BL04I-VA-PIRG-04:CTL:SETSP")
#! Field("BL04I-VA-PIRG-04:CTL:SETSP.FLNK",16777215,1,"BL04I-VA-PIRG-04:CTL:SETSP.FLNK")
#! Field("BL04I-VA-PIRG-04:CTL:SETSP.OUT",16777215,1,"BL04I-VA-PIRG-04:CTL:SETSP.OUT")
#! Record("BL04I-VA-PIRG-04:CTL:ENABLE",380,331,0,0,"BL04I-VA-PIRG-04:CTL:ENABLE")
#! Field("BL04I-VA-PIRG-04:CTL:ENABLE.FLNK",16777215,1,"BL04I-VA-PIRG-04:CTL:ENABLE.FLNK")
#! Field("BL04I-VA-PIRG-04:CTL:ENABLE.OUT",16777215,1,"BL04I-VA-PIRG-04:CTL:ENABLE.OUT")
#! Record("BL04I-VA-PIRG-04:CTL:SP",200,352,0,0,"BL04I-VA-PIRG-04:CTL:SP")
#! Field("BL04I-VA-PIRG-04:CTL:SP.INP",16777215,1,"BL04I-VA-PIRG-04:CTL:SP.INP")
#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937aGauge.db
#% macro, __doc__, Template database for a combination guage connected to 
# two channels of an MKS937A Multi-Sensor System 
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# Run on PHAS 1 to get most up to date values from IMG and Pirani
# 
# required substitutions:
#% macro, dom, Domain 5 char string (e.g. BL11I)
#% macro, id,  ID number as 2 digit string (e.g. 01)
#% macro, c,   ADC card number
#% macro, s,   ADC signal number
# 
#   Note that as of 31st July 2013, the DTYP and INP fields allow flexibility
#   for implementation on non-VME systems, where the analogue input would be 
#   derived from another record and DTYP might be Soft Channel.
#   In the non-VME use case, do not define 'c' and 's', instead define 'aiinp'
#   and 'aitype': typically 'aiinp' -> "0" (or another record) and 'aitype' -> 'Soft Channel'.
#   Ian Gillingham: 31/7/13

#
# gui substitutions:
#% macro, name,        The device's name for gui purposes
#% macro, GCTLR,       The gauge controller PV prefix, for gui purposes
#
# optional substitutions:
#% macro, ctlsp_level, The desired control setpoint value (actually for the Pirg).
#% macro, ctlsp_drvh,  The DRVH field on control setpoint records. 
#                      (limits max value of control setpoint)
#% macro, ctlsp_drvl,  The DRVL field on control setpoint records. 
#                      (limits min value of control setpoint)
#% macro, ctlsp_hopr,  The HOPR field on control setpoint records. 
#                      (high operator value - helps display set correct range).
#% macro, ctlsp_lopr,  The LOPR field on control setpoint records. 
#                      (low operator value - helps display set correct range).
#% macro, ctlsp_desc,  The DESC field on control setpoint records. 
#		               (appears as a label on the Pirg EDM screen).
#
# GCTLR used for the controller button
# % gui, GAUGE5, edm, mks937aGauge.edl, dom=BL04I, id=05, GCTLR=
#
# This associates BOY screens with the template
# % gui, GAUGE5, boydetail, mks937aApp_opi/gauge_detail.opi, dom=BL04I, id=05, GCTLR=, name=GAUGE5
# % gui, GAUGE5, boyembed, mks937aApp_opi/gauge_embed_box.opi, dom=BL04I, id=05, GCTLR=, name=GAUGE5
# % gui, GAUGE5, boyembed, mks937aApp_opi/gauge_embed.opi, dom=BL04I, id=05, GCTLR=, name=GAUGE5

# These define what PVs a valve detail screen should contain
# % gui, GAUGE5, readback, Pressure,   BL04I-VA-GAUGE-05:P
# % gui, GAUGE5, readback, Gauge,  BL04I-VA-GAUGE-05:GAUGE
# % gui, GAUGE5, enum, Setpoints Overwrite,  BL04I-VA-GAUGE-05:ILKSETSP:NOWRITE


################################################################################
# Select Active Gauge (IMG or PIRG)
#
record(calc, "BL04I-VA-GAUGE-05:SEL") {
  field(DESC, "Select Pressure")
  field(SCAN, "1 second")
  field(PHAS, "1")
  field(FLNK, "BL04I-VA-GAUGE-05:GAUGE")
  field(CALC, "A<2?0:(B<2?1:(B=8?1:2))")
  field(INPA, "BL04I-VA-IMG-05:STA")
  field(INPB, "BL04I-VA-PIRG-05:STA")
}

record(mbbi, "BL04I-VA-GAUGE-05:GAUGE") {
  field(DESC, "Active Gauge")
  field(INP, "BL04I-VA-GAUGE-05:SEL")
  field(FLNK, "BL04I-VA-GAUGE-05:P")
  field(ZRST, "IMG")
  field(ONST, "Pirani")
  field(TWST, "No Gauge")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "MINOR")
  field(TWSV, "MAJOR")
}

################################################################################
# Pressure
#   Note that as of 31st July 2013, the DTYP and INP fields allow flexibility
#   for implementation on non-VME systems, where the analogue input would be 
#   derived from another record and DTYP might be Soft Channel.
#   Ian Gillingham: 31/7/13
#
#% archiver 0.1 Monitor
#
# :PLOG processes passively driven by :P at .1 second scan
#       this used to be a hardware support type, but recently has the option
#       of any input source, including other PVs from ADC ai records, which assume
#       a DTYP of Soft Channel. Soft Channel however will not convert or use EGUF, EGUL etc.
#       So for this scenario it is necessary to apply a factor to the input ADC Soft Channel
#       Log value, i.e. add Log(1000/760). (See mks937aPlogADC.template).
#
record(ai, "BL04I-VA-GAUGE-05:PLOG") {
  field(DESC, "log Pressure")
  field(DTYP, "Hy8401ip")
  field(INP, "#C50 S5 @")
  field(EGU, "log")
  field(LINR, "LINEAR")
#  field(EGUF, "4.6")
#  field(EGUL, "-28.6")
# torr to mbar add .15
#  field(EGUF, "4.75")
#  field(EGUL, "-28.45")
# P = (1000/760)*10^((V/0.6)-12)
  field(EGUF, "4.786")
  field(EGUL, "-28.548")
  field(HOPR, "3")
  field(LOPR, "-11")
  field(HIGH, "-7")
  field(HSV, "MINOR")
  field(ADEL, "0.025")
}


#
#% controldesk Pressure readback
#% archiver 0.1 Monitor
#
record(calc, "BL04I-VA-GAUGE-05:P") {
  field(DESC, "Pressure")
  field(EGU, "mbar")
  field(PREC, "11")
  field(CALC, "10^A")
  field(INPA, "BL04I-VA-GAUGE-05:PLOG PP MS")
  field(SCAN, ".1 second")
  field(HOPR, "1000")
  field(LOPR, "1.0E-11")
}

record(calcout, "BL04I-VA-GAUGE-05:ADEL") {
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-GAUGE-05:P.ADEL")
  field(INPA, "BL04I-VA-GAUGE-05:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

################################################################################
# Control - IMG Enable (link from IMG to PIRG)
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-PIRG-05:CTL:SETSP") {
  field(DESC, "IMG Enable")
  field(FLNK, "BL04I-VA-IMG-05:CTL:SETSP")
  field(OUT, "BL04I-VA-IMG-05:CTL:SETSP")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-PIRG-05:ILKSETSP:NOWRITE")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(DRVH, "9.5e-1")
  field(DRVL, "2.7e-3")
  field(DOL, "1.0e-2")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-PIRG-05:CTL:ENABLE") {
  field(DESC, "Enable Control Setpoint")
  field(FLNK, "BL04I-VA-IMG-05:CTL:ENABLE")
  field(OUT, "BL04I-VA-IMG-05:CTL:ENABLE")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  field(SDIS, "BL04I-VA-PIRG-05:ILKSETSP:NOWRITE")
  #field(PINI, "YES")
}

#
#% archiver 10 Monitor
#% controldesk IMG Enable readback
#
record(ai, "BL04I-VA-PIRG-05:CTL:SP") {
  field(DESC, "IMG Enable")
  field(INP, "BL04I-VA-IMG-05:CTL:SP MS")
  field(SCAN, "1 second")
  field(PHAS, "1")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
}

# Readback the state of the instrument to determine the true CTL:ENABLE state
# this is used in the PIRG Override Interlocks EDM screen for the drop-down
# control for IMG Enable
#
record(mbbi, "BL04I-VA-PIRG-05:CTL:GETENABLE") 
  {
  field(DESC, "Read Disable Setpoint")
  field(INP, "BL04I-VA-IMG-05:CTL:GETDISCALC PP")
  field(SCAN, "1 second")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
# This is essentially a copy of the global record below, but in the domain
# of the PIRG instance, so available to EDM screen.
#
record(bi, "BL04I-VA-PIRG-05:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(PHAS, "1")
  field(INP, "BL04I-VA-GAUGE-05:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# NB: INP had to be removed to allow autosave to correctly restore.
#
#% autosave 0 VAL
record(bi, "BL04I-VA-GAUGE-05:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(PHAS, "0")
  #field(INP, "0")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise just once, records that used to use PINI
# This is to ensure that the autoSR PV refered by ilk_write_access_pv
# is correctly established before any other record processing, to potentially
# avoid overwriting setpoints at IOC startup.
#
record(bo, "BL04I-VA-GAUGE-05:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-GAUGE-05:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-GAUGE-05:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-PIRG-05:CTL:ENABLE")
    field(LNK2, "BL04I-VA-GAUGE-05:INITSETSPSDIS")
    field(SELM, "All")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("BL04I-VA-GAUGE-05:SEL",20,46,0,0,"BL04I-VA-GAUGE-05:SEL")
#! Field("BL04I-VA-GAUGE-05:SEL.FLNK",16777215,1,"BL04I-VA-GAUGE-05:SEL.FLNK")
#! Link("BL04I-VA-GAUGE-05:SEL.FLNK","BL04I-VA-GAUGE-05:GAUGE")
#! Field("BL04I-VA-GAUGE-05:SEL.INPA",16777215,1,"BL04I-VA-GAUGE-05:SEL.INPA")
#! Field("BL04I-VA-GAUGE-05:SEL.INPB",16777215,1,"BL04I-VA-GAUGE-05:SEL.INPB")
#! Field("BL04I-VA-GAUGE-05:SEL.VAL",16777215,1,"BL04I-VA-GAUGE-05:SEL.VAL")
#! Record("BL04I-VA-GAUGE-05:GAUGE",300,65,0,0,"BL04I-VA-GAUGE-05:GAUGE")
#! Field("BL04I-VA-GAUGE-05:GAUGE.INP",16777215,0,"BL04I-VA-GAUGE-05:GAUGE.INP")
#! Link("BL04I-VA-GAUGE-05:GAUGE.INP","BL04I-VA-GAUGE-05:SEL.VAL")
#! Field("BL04I-VA-GAUGE-05:GAUGE.FLNK",16777215,1,"BL04I-VA-GAUGE-05:GAUGE.FLNK")
#! Link("BL04I-VA-GAUGE-05:GAUGE.FLNK","BL04I-VA-GAUGE-05:P")
#! Record("BL04I-VA-GAUGE-05:PLOG",500,17,0,0,"BL04I-VA-GAUGE-05:PLOG")
#! Field("BL04I-VA-GAUGE-05:PLOG.VAL",16777215,1,"BL04I-VA-GAUGE-05:PLOG.VAL")
#! Record("BL04I-VA-GAUGE-05:P",780,212,0,0,"BL04I-VA-GAUGE-05:P")
#! Field("BL04I-VA-GAUGE-05:P.INPA",16777215,0,"BL04I-VA-GAUGE-05:P.INPA")
#! Link("BL04I-VA-GAUGE-05:P.INPA","BL04I-VA-GAUGE-05:PLOG.VAL")
#! Field("BL04I-VA-GAUGE-05:P.ADEL",16777215,1,"BL04I-VA-GAUGE-05:P.ADEL")
#! Field("BL04I-VA-GAUGE-05:P.VAL",16777215,1,"BL04I-VA-GAUGE-05:P.VAL")
#! Record("BL04I-VA-GAUGE-05:ADEL",1060,260,0,0,"BL04I-VA-GAUGE-05:ADEL")
#! Field("BL04I-VA-GAUGE-05:ADEL.OUT",16777215,0,"BL04I-VA-GAUGE-05:ADEL.OUT")
#! Link("BL04I-VA-GAUGE-05:ADEL.OUT","BL04I-VA-GAUGE-05:P.ADEL")
#! Field("BL04I-VA-GAUGE-05:ADEL.INPA",16777215,0,"BL04I-VA-GAUGE-05:ADEL.INPA")
#! Link("BL04I-VA-GAUGE-05:ADEL.INPA","BL04I-VA-GAUGE-05:P.VAL")
#! Record("BL04I-VA-PIRG-05:CTL:SETSP",20,345,0,0,"BL04I-VA-PIRG-05:CTL:SETSP")
#! Field("BL04I-VA-PIRG-05:CTL:SETSP.FLNK",16777215,1,"BL04I-VA-PIRG-05:CTL:SETSP.FLNK")
#! Field("BL04I-VA-PIRG-05:CTL:SETSP.OUT",16777215,1,"BL04I-VA-PIRG-05:CTL:SETSP.OUT")
#! Record("BL04I-VA-PIRG-05:CTL:ENABLE",380,331,0,0,"BL04I-VA-PIRG-05:CTL:ENABLE")
#! Field("BL04I-VA-PIRG-05:CTL:ENABLE.FLNK",16777215,1,"BL04I-VA-PIRG-05:CTL:ENABLE.FLNK")
#! Field("BL04I-VA-PIRG-05:CTL:ENABLE.OUT",16777215,1,"BL04I-VA-PIRG-05:CTL:ENABLE.OUT")
#! Record("BL04I-VA-PIRG-05:CTL:SP",200,352,0,0,"BL04I-VA-PIRG-05:CTL:SP")
#! Field("BL04I-VA-PIRG-05:CTL:SP.INP",16777215,1,"BL04I-VA-PIRG-05:CTL:SP.INP")
#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937aGauge.db
#% macro, __doc__, Template database for a combination guage connected to 
# two channels of an MKS937A Multi-Sensor System 
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# Run on PHAS 1 to get most up to date values from IMG and Pirani
# 
# required substitutions:
#% macro, dom, Domain 5 char string (e.g. BL11I)
#% macro, id,  ID number as 2 digit string (e.g. 01)
#% macro, c,   ADC card number
#% macro, s,   ADC signal number
# 
#   Note that as of 31st July 2013, the DTYP and INP fields allow flexibility
#   for implementation on non-VME systems, where the analogue input would be 
#   derived from another record and DTYP might be Soft Channel.
#   In the non-VME use case, do not define 'c' and 's', instead define 'aiinp'
#   and 'aitype': typically 'aiinp' -> "0" (or another record) and 'aitype' -> 'Soft Channel'.
#   Ian Gillingham: 31/7/13

#
# gui substitutions:
#% macro, name,        The device's name for gui purposes
#% macro, GCTLR,       The gauge controller PV prefix, for gui purposes
#
# optional substitutions:
#% macro, ctlsp_level, The desired control setpoint value (actually for the Pirg).
#% macro, ctlsp_drvh,  The DRVH field on control setpoint records. 
#                      (limits max value of control setpoint)
#% macro, ctlsp_drvl,  The DRVL field on control setpoint records. 
#                      (limits min value of control setpoint)
#% macro, ctlsp_hopr,  The HOPR field on control setpoint records. 
#                      (high operator value - helps display set correct range).
#% macro, ctlsp_lopr,  The LOPR field on control setpoint records. 
#                      (low operator value - helps display set correct range).
#% macro, ctlsp_desc,  The DESC field on control setpoint records. 
#		               (appears as a label on the Pirg EDM screen).
#
# GCTLR used for the controller button
# % gui, GAUGE6, edm, mks937aGauge.edl, dom=BL04I, id=06, GCTLR=
#
# This associates BOY screens with the template
# % gui, GAUGE6, boydetail, mks937aApp_opi/gauge_detail.opi, dom=BL04I, id=06, GCTLR=, name=GAUGE6
# % gui, GAUGE6, boyembed, mks937aApp_opi/gauge_embed_box.opi, dom=BL04I, id=06, GCTLR=, name=GAUGE6
# % gui, GAUGE6, boyembed, mks937aApp_opi/gauge_embed.opi, dom=BL04I, id=06, GCTLR=, name=GAUGE6

# These define what PVs a valve detail screen should contain
# % gui, GAUGE6, readback, Pressure,   BL04I-VA-GAUGE-06:P
# % gui, GAUGE6, readback, Gauge,  BL04I-VA-GAUGE-06:GAUGE
# % gui, GAUGE6, enum, Setpoints Overwrite,  BL04I-VA-GAUGE-06:ILKSETSP:NOWRITE


################################################################################
# Select Active Gauge (IMG or PIRG)
#
record(calc, "BL04I-VA-GAUGE-06:SEL") {
  field(DESC, "Select Pressure")
  field(SCAN, "1 second")
  field(PHAS, "1")
  field(FLNK, "BL04I-VA-GAUGE-06:GAUGE")
  field(CALC, "A<2?0:(B<2?1:(B=8?1:2))")
  field(INPA, "BL04I-VA-IMG-06:STA")
  field(INPB, "BL04I-VA-PIRG-06:STA")
}

record(mbbi, "BL04I-VA-GAUGE-06:GAUGE") {
  field(DESC, "Active Gauge")
  field(INP, "BL04I-VA-GAUGE-06:SEL")
  field(FLNK, "BL04I-VA-GAUGE-06:P")
  field(ZRST, "IMG")
  field(ONST, "Pirani")
  field(TWST, "No Gauge")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "MINOR")
  field(TWSV, "MAJOR")
}

################################################################################
# Pressure
#   Note that as of 31st July 2013, the DTYP and INP fields allow flexibility
#   for implementation on non-VME systems, where the analogue input would be 
#   derived from another record and DTYP might be Soft Channel.
#   Ian Gillingham: 31/7/13
#
#% archiver 0.1 Monitor
#
# :PLOG processes passively driven by :P at .1 second scan
#       this used to be a hardware support type, but recently has the option
#       of any input source, including other PVs from ADC ai records, which assume
#       a DTYP of Soft Channel. Soft Channel however will not convert or use EGUF, EGUL etc.
#       So for this scenario it is necessary to apply a factor to the input ADC Soft Channel
#       Log value, i.e. add Log(1000/760). (See mks937aPlogADC.template).
#
record(ai, "BL04I-VA-GAUGE-06:PLOG") {
  field(DESC, "log Pressure")
  field(DTYP, "Hy8401ip")
  field(INP, "#C50 S6 @")
  field(EGU, "log")
  field(LINR, "LINEAR")
#  field(EGUF, "4.6")
#  field(EGUL, "-28.6")
# torr to mbar add .15
#  field(EGUF, "4.75")
#  field(EGUL, "-28.45")
# P = (1000/760)*10^((V/0.6)-12)
  field(EGUF, "4.786")
  field(EGUL, "-28.548")
  field(HOPR, "3")
  field(LOPR, "-11")
  field(HIGH, "-7")
  field(HSV, "MINOR")
  field(ADEL, "0.025")
}


#
#% controldesk Pressure readback
#% archiver 0.1 Monitor
#
record(calc, "BL04I-VA-GAUGE-06:P") {
  field(DESC, "Pressure")
  field(EGU, "mbar")
  field(PREC, "11")
  field(CALC, "10^A")
  field(INPA, "BL04I-VA-GAUGE-06:PLOG PP MS")
  field(SCAN, ".1 second")
  field(HOPR, "1000")
  field(LOPR, "1.0E-11")
}

record(calcout, "BL04I-VA-GAUGE-06:ADEL") {
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-GAUGE-06:P.ADEL")
  field(INPA, "BL04I-VA-GAUGE-06:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

################################################################################
# Control - IMG Enable (link from IMG to PIRG)
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-PIRG-06:CTL:SETSP") {
  field(DESC, "IMG Enable")
  field(FLNK, "BL04I-VA-IMG-06:CTL:SETSP")
  field(OUT, "BL04I-VA-IMG-06:CTL:SETSP")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-PIRG-06:ILKSETSP:NOWRITE")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(DRVH, "9.5e-1")
  field(DRVL, "2.7e-3")
  field(DOL, "1.0e-2")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-PIRG-06:CTL:ENABLE") {
  field(DESC, "Enable Control Setpoint")
  field(FLNK, "BL04I-VA-IMG-06:CTL:ENABLE")
  field(OUT, "BL04I-VA-IMG-06:CTL:ENABLE")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  field(SDIS, "BL04I-VA-PIRG-06:ILKSETSP:NOWRITE")
  #field(PINI, "YES")
}

#
#% archiver 10 Monitor
#% controldesk IMG Enable readback
#
record(ai, "BL04I-VA-PIRG-06:CTL:SP") {
  field(DESC, "IMG Enable")
  field(INP, "BL04I-VA-IMG-06:CTL:SP MS")
  field(SCAN, "1 second")
  field(PHAS, "1")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
}

# Readback the state of the instrument to determine the true CTL:ENABLE state
# this is used in the PIRG Override Interlocks EDM screen for the drop-down
# control for IMG Enable
#
record(mbbi, "BL04I-VA-PIRG-06:CTL:GETENABLE") 
  {
  field(DESC, "Read Disable Setpoint")
  field(INP, "BL04I-VA-IMG-06:CTL:GETDISCALC PP")
  field(SCAN, "1 second")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
# This is essentially a copy of the global record below, but in the domain
# of the PIRG instance, so available to EDM screen.
#
record(bi, "BL04I-VA-PIRG-06:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(PHAS, "1")
  field(INP, "BL04I-VA-GAUGE-06:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# NB: INP had to be removed to allow autosave to correctly restore.
#
#% autosave 0 VAL
record(bi, "BL04I-VA-GAUGE-06:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(PHAS, "0")
  #field(INP, "0")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise just once, records that used to use PINI
# This is to ensure that the autoSR PV refered by ilk_write_access_pv
# is correctly established before any other record processing, to potentially
# avoid overwriting setpoints at IOC startup.
#
record(bo, "BL04I-VA-GAUGE-06:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-GAUGE-06:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-GAUGE-06:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-PIRG-06:CTL:ENABLE")
    field(LNK2, "BL04I-VA-GAUGE-06:INITSETSPSDIS")
    field(SELM, "All")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("BL04I-VA-GAUGE-06:SEL",20,46,0,0,"BL04I-VA-GAUGE-06:SEL")
#! Field("BL04I-VA-GAUGE-06:SEL.FLNK",16777215,1,"BL04I-VA-GAUGE-06:SEL.FLNK")
#! Link("BL04I-VA-GAUGE-06:SEL.FLNK","BL04I-VA-GAUGE-06:GAUGE")
#! Field("BL04I-VA-GAUGE-06:SEL.INPA",16777215,1,"BL04I-VA-GAUGE-06:SEL.INPA")
#! Field("BL04I-VA-GAUGE-06:SEL.INPB",16777215,1,"BL04I-VA-GAUGE-06:SEL.INPB")
#! Field("BL04I-VA-GAUGE-06:SEL.VAL",16777215,1,"BL04I-VA-GAUGE-06:SEL.VAL")
#! Record("BL04I-VA-GAUGE-06:GAUGE",300,65,0,0,"BL04I-VA-GAUGE-06:GAUGE")
#! Field("BL04I-VA-GAUGE-06:GAUGE.INP",16777215,0,"BL04I-VA-GAUGE-06:GAUGE.INP")
#! Link("BL04I-VA-GAUGE-06:GAUGE.INP","BL04I-VA-GAUGE-06:SEL.VAL")
#! Field("BL04I-VA-GAUGE-06:GAUGE.FLNK",16777215,1,"BL04I-VA-GAUGE-06:GAUGE.FLNK")
#! Link("BL04I-VA-GAUGE-06:GAUGE.FLNK","BL04I-VA-GAUGE-06:P")
#! Record("BL04I-VA-GAUGE-06:PLOG",500,17,0,0,"BL04I-VA-GAUGE-06:PLOG")
#! Field("BL04I-VA-GAUGE-06:PLOG.VAL",16777215,1,"BL04I-VA-GAUGE-06:PLOG.VAL")
#! Record("BL04I-VA-GAUGE-06:P",780,212,0,0,"BL04I-VA-GAUGE-06:P")
#! Field("BL04I-VA-GAUGE-06:P.INPA",16777215,0,"BL04I-VA-GAUGE-06:P.INPA")
#! Link("BL04I-VA-GAUGE-06:P.INPA","BL04I-VA-GAUGE-06:PLOG.VAL")
#! Field("BL04I-VA-GAUGE-06:P.ADEL",16777215,1,"BL04I-VA-GAUGE-06:P.ADEL")
#! Field("BL04I-VA-GAUGE-06:P.VAL",16777215,1,"BL04I-VA-GAUGE-06:P.VAL")
#! Record("BL04I-VA-GAUGE-06:ADEL",1060,260,0,0,"BL04I-VA-GAUGE-06:ADEL")
#! Field("BL04I-VA-GAUGE-06:ADEL.OUT",16777215,0,"BL04I-VA-GAUGE-06:ADEL.OUT")
#! Link("BL04I-VA-GAUGE-06:ADEL.OUT","BL04I-VA-GAUGE-06:P.ADEL")
#! Field("BL04I-VA-GAUGE-06:ADEL.INPA",16777215,0,"BL04I-VA-GAUGE-06:ADEL.INPA")
#! Link("BL04I-VA-GAUGE-06:ADEL.INPA","BL04I-VA-GAUGE-06:P.VAL")
#! Record("BL04I-VA-PIRG-06:CTL:SETSP",20,345,0,0,"BL04I-VA-PIRG-06:CTL:SETSP")
#! Field("BL04I-VA-PIRG-06:CTL:SETSP.FLNK",16777215,1,"BL04I-VA-PIRG-06:CTL:SETSP.FLNK")
#! Field("BL04I-VA-PIRG-06:CTL:SETSP.OUT",16777215,1,"BL04I-VA-PIRG-06:CTL:SETSP.OUT")
#! Record("BL04I-VA-PIRG-06:CTL:ENABLE",380,331,0,0,"BL04I-VA-PIRG-06:CTL:ENABLE")
#! Field("BL04I-VA-PIRG-06:CTL:ENABLE.FLNK",16777215,1,"BL04I-VA-PIRG-06:CTL:ENABLE.FLNK")
#! Field("BL04I-VA-PIRG-06:CTL:ENABLE.OUT",16777215,1,"BL04I-VA-PIRG-06:CTL:ENABLE.OUT")
#! Record("BL04I-VA-PIRG-06:CTL:SP",200,352,0,0,"BL04I-VA-PIRG-06:CTL:SP")
#! Field("BL04I-VA-PIRG-06:CTL:SP.INP",16777215,1,"BL04I-VA-PIRG-06:CTL:SP.INP")
#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937aGauge.db
#% macro, __doc__, Template database for a combination guage connected to 
# two channels of an MKS937A Multi-Sensor System 
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# Run on PHAS 1 to get most up to date values from IMG and Pirani
# 
# required substitutions:
#% macro, dom, Domain 5 char string (e.g. BL11I)
#% macro, id,  ID number as 2 digit string (e.g. 01)
#% macro, c,   ADC card number
#% macro, s,   ADC signal number
# 
#   Note that as of 31st July 2013, the DTYP and INP fields allow flexibility
#   for implementation on non-VME systems, where the analogue input would be 
#   derived from another record and DTYP might be Soft Channel.
#   In the non-VME use case, do not define 'c' and 's', instead define 'aiinp'
#   and 'aitype': typically 'aiinp' -> "0" (or another record) and 'aitype' -> 'Soft Channel'.
#   Ian Gillingham: 31/7/13

#
# gui substitutions:
#% macro, name,        The device's name for gui purposes
#% macro, GCTLR,       The gauge controller PV prefix, for gui purposes
#
# optional substitutions:
#% macro, ctlsp_level, The desired control setpoint value (actually for the Pirg).
#% macro, ctlsp_drvh,  The DRVH field on control setpoint records. 
#                      (limits max value of control setpoint)
#% macro, ctlsp_drvl,  The DRVL field on control setpoint records. 
#                      (limits min value of control setpoint)
#% macro, ctlsp_hopr,  The HOPR field on control setpoint records. 
#                      (high operator value - helps display set correct range).
#% macro, ctlsp_lopr,  The LOPR field on control setpoint records. 
#                      (low operator value - helps display set correct range).
#% macro, ctlsp_desc,  The DESC field on control setpoint records. 
#		               (appears as a label on the Pirg EDM screen).
#
# GCTLR used for the controller button
# % gui, GAUGE11, edm, mks937aGauge.edl, dom=BL04I, id=11, GCTLR=
#
# This associates BOY screens with the template
# % gui, GAUGE11, boydetail, mks937aApp_opi/gauge_detail.opi, dom=BL04I, id=11, GCTLR=, name=GAUGE11
# % gui, GAUGE11, boyembed, mks937aApp_opi/gauge_embed_box.opi, dom=BL04I, id=11, GCTLR=, name=GAUGE11
# % gui, GAUGE11, boyembed, mks937aApp_opi/gauge_embed.opi, dom=BL04I, id=11, GCTLR=, name=GAUGE11

# These define what PVs a valve detail screen should contain
# % gui, GAUGE11, readback, Pressure,   BL04I-VA-GAUGE-11:P
# % gui, GAUGE11, readback, Gauge,  BL04I-VA-GAUGE-11:GAUGE
# % gui, GAUGE11, enum, Setpoints Overwrite,  BL04I-VA-GAUGE-11:ILKSETSP:NOWRITE


################################################################################
# Select Active Gauge (IMG or PIRG)
#
record(calc, "BL04I-VA-GAUGE-11:SEL") {
  field(DESC, "Select Pressure")
  field(SCAN, "1 second")
  field(PHAS, "1")
  field(FLNK, "BL04I-VA-GAUGE-11:GAUGE")
  field(CALC, "A<2?0:(B<2?1:(B=8?1:2))")
  field(INPA, "BL04I-VA-IMG-11:STA")
  field(INPB, "BL04I-VA-PIRG-11:STA")
}

record(mbbi, "BL04I-VA-GAUGE-11:GAUGE") {
  field(DESC, "Active Gauge")
  field(INP, "BL04I-VA-GAUGE-11:SEL")
  field(FLNK, "BL04I-VA-GAUGE-11:P")
  field(ZRST, "IMG")
  field(ONST, "Pirani")
  field(TWST, "No Gauge")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "MINOR")
  field(TWSV, "MAJOR")
}

################################################################################
# Pressure
#   Note that as of 31st July 2013, the DTYP and INP fields allow flexibility
#   for implementation on non-VME systems, where the analogue input would be 
#   derived from another record and DTYP might be Soft Channel.
#   Ian Gillingham: 31/7/13
#
#% archiver 0.1 Monitor
#
# :PLOG processes passively driven by :P at .1 second scan
#       this used to be a hardware support type, but recently has the option
#       of any input source, including other PVs from ADC ai records, which assume
#       a DTYP of Soft Channel. Soft Channel however will not convert or use EGUF, EGUL etc.
#       So for this scenario it is necessary to apply a factor to the input ADC Soft Channel
#       Log value, i.e. add Log(1000/760). (See mks937aPlogADC.template).
#
record(ai, "BL04I-VA-GAUGE-11:PLOG") {
  field(DESC, "log Pressure")
  field(DTYP, "Hy8401ip")
  field(INP, "#C50 S0 @")
  field(EGU, "log")
  field(LINR, "LINEAR")
#  field(EGUF, "4.6")
#  field(EGUL, "-28.6")
# torr to mbar add .15
#  field(EGUF, "4.75")
#  field(EGUL, "-28.45")
# P = (1000/760)*10^((V/0.6)-12)
  field(EGUF, "4.786")
  field(EGUL, "-28.548")
  field(HOPR, "3")
  field(LOPR, "-11")
  field(HIGH, "-7")
  field(HSV, "MINOR")
  field(ADEL, "0.025")
}


#
#% controldesk Pressure readback
#% archiver 0.1 Monitor
#
record(calc, "BL04I-VA-GAUGE-11:P") {
  field(DESC, "Pressure")
  field(EGU, "mbar")
  field(PREC, "11")
  field(CALC, "10^A")
  field(INPA, "BL04I-VA-GAUGE-11:PLOG PP MS")
  field(SCAN, ".1 second")
  field(HOPR, "1000")
  field(LOPR, "1.0E-11")
}

record(calcout, "BL04I-VA-GAUGE-11:ADEL") {
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-GAUGE-11:P.ADEL")
  field(INPA, "BL04I-VA-GAUGE-11:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

################################################################################
# Control - IMG Enable (link from IMG to PIRG)
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-PIRG-11:CTL:SETSP") {
  field(DESC, "IMG Enable")
  field(FLNK, "BL04I-VA-IMG-11:CTL:SETSP")
  field(OUT, "BL04I-VA-IMG-11:CTL:SETSP")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-PIRG-11:ILKSETSP:NOWRITE")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(DRVH, "9.5e-1")
  field(DRVL, "2.7e-3")
  field(DOL, "1.0e-2")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-PIRG-11:CTL:ENABLE") {
  field(DESC, "Enable Control Setpoint")
  field(FLNK, "BL04I-VA-IMG-11:CTL:ENABLE")
  field(OUT, "BL04I-VA-IMG-11:CTL:ENABLE")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  field(SDIS, "BL04I-VA-PIRG-11:ILKSETSP:NOWRITE")
  #field(PINI, "YES")
}

#
#% archiver 10 Monitor
#% controldesk IMG Enable readback
#
record(ai, "BL04I-VA-PIRG-11:CTL:SP") {
  field(DESC, "IMG Enable")
  field(INP, "BL04I-VA-IMG-11:CTL:SP MS")
  field(SCAN, "1 second")
  field(PHAS, "1")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
}

# Readback the state of the instrument to determine the true CTL:ENABLE state
# this is used in the PIRG Override Interlocks EDM screen for the drop-down
# control for IMG Enable
#
record(mbbi, "BL04I-VA-PIRG-11:CTL:GETENABLE") 
  {
  field(DESC, "Read Disable Setpoint")
  field(INP, "BL04I-VA-IMG-11:CTL:GETDISCALC PP")
  field(SCAN, "1 second")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
# This is essentially a copy of the global record below, but in the domain
# of the PIRG instance, so available to EDM screen.
#
record(bi, "BL04I-VA-PIRG-11:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(PHAS, "1")
  field(INP, "BL04I-VA-GAUGE-11:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# NB: INP had to be removed to allow autosave to correctly restore.
#
#% autosave 0 VAL
record(bi, "BL04I-VA-GAUGE-11:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(PHAS, "0")
  #field(INP, "0")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise just once, records that used to use PINI
# This is to ensure that the autoSR PV refered by ilk_write_access_pv
# is correctly established before any other record processing, to potentially
# avoid overwriting setpoints at IOC startup.
#
record(bo, "BL04I-VA-GAUGE-11:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-GAUGE-11:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-GAUGE-11:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-PIRG-11:CTL:ENABLE")
    field(LNK2, "BL04I-VA-GAUGE-11:INITSETSPSDIS")
    field(SELM, "All")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("BL04I-VA-GAUGE-11:SEL",20,46,0,0,"BL04I-VA-GAUGE-11:SEL")
#! Field("BL04I-VA-GAUGE-11:SEL.FLNK",16777215,1,"BL04I-VA-GAUGE-11:SEL.FLNK")
#! Link("BL04I-VA-GAUGE-11:SEL.FLNK","BL04I-VA-GAUGE-11:GAUGE")
#! Field("BL04I-VA-GAUGE-11:SEL.INPA",16777215,1,"BL04I-VA-GAUGE-11:SEL.INPA")
#! Field("BL04I-VA-GAUGE-11:SEL.INPB",16777215,1,"BL04I-VA-GAUGE-11:SEL.INPB")
#! Field("BL04I-VA-GAUGE-11:SEL.VAL",16777215,1,"BL04I-VA-GAUGE-11:SEL.VAL")
#! Record("BL04I-VA-GAUGE-11:GAUGE",300,65,0,0,"BL04I-VA-GAUGE-11:GAUGE")
#! Field("BL04I-VA-GAUGE-11:GAUGE.INP",16777215,0,"BL04I-VA-GAUGE-11:GAUGE.INP")
#! Link("BL04I-VA-GAUGE-11:GAUGE.INP","BL04I-VA-GAUGE-11:SEL.VAL")
#! Field("BL04I-VA-GAUGE-11:GAUGE.FLNK",16777215,1,"BL04I-VA-GAUGE-11:GAUGE.FLNK")
#! Link("BL04I-VA-GAUGE-11:GAUGE.FLNK","BL04I-VA-GAUGE-11:P")
#! Record("BL04I-VA-GAUGE-11:PLOG",500,17,0,0,"BL04I-VA-GAUGE-11:PLOG")
#! Field("BL04I-VA-GAUGE-11:PLOG.VAL",16777215,1,"BL04I-VA-GAUGE-11:PLOG.VAL")
#! Record("BL04I-VA-GAUGE-11:P",780,212,0,0,"BL04I-VA-GAUGE-11:P")
#! Field("BL04I-VA-GAUGE-11:P.INPA",16777215,0,"BL04I-VA-GAUGE-11:P.INPA")
#! Link("BL04I-VA-GAUGE-11:P.INPA","BL04I-VA-GAUGE-11:PLOG.VAL")
#! Field("BL04I-VA-GAUGE-11:P.ADEL",16777215,1,"BL04I-VA-GAUGE-11:P.ADEL")
#! Field("BL04I-VA-GAUGE-11:P.VAL",16777215,1,"BL04I-VA-GAUGE-11:P.VAL")
#! Record("BL04I-VA-GAUGE-11:ADEL",1060,260,0,0,"BL04I-VA-GAUGE-11:ADEL")
#! Field("BL04I-VA-GAUGE-11:ADEL.OUT",16777215,0,"BL04I-VA-GAUGE-11:ADEL.OUT")
#! Link("BL04I-VA-GAUGE-11:ADEL.OUT","BL04I-VA-GAUGE-11:P.ADEL")
#! Field("BL04I-VA-GAUGE-11:ADEL.INPA",16777215,0,"BL04I-VA-GAUGE-11:ADEL.INPA")
#! Link("BL04I-VA-GAUGE-11:ADEL.INPA","BL04I-VA-GAUGE-11:P.VAL")
#! Record("BL04I-VA-PIRG-11:CTL:SETSP",20,345,0,0,"BL04I-VA-PIRG-11:CTL:SETSP")
#! Field("BL04I-VA-PIRG-11:CTL:SETSP.FLNK",16777215,1,"BL04I-VA-PIRG-11:CTL:SETSP.FLNK")
#! Field("BL04I-VA-PIRG-11:CTL:SETSP.OUT",16777215,1,"BL04I-VA-PIRG-11:CTL:SETSP.OUT")
#! Record("BL04I-VA-PIRG-11:CTL:ENABLE",380,331,0,0,"BL04I-VA-PIRG-11:CTL:ENABLE")
#! Field("BL04I-VA-PIRG-11:CTL:ENABLE.FLNK",16777215,1,"BL04I-VA-PIRG-11:CTL:ENABLE.FLNK")
#! Field("BL04I-VA-PIRG-11:CTL:ENABLE.OUT",16777215,1,"BL04I-VA-PIRG-11:CTL:ENABLE.OUT")
#! Record("BL04I-VA-PIRG-11:CTL:SP",200,352,0,0,"BL04I-VA-PIRG-11:CTL:SP")
#! Field("BL04I-VA-PIRG-11:CTL:SP.INP",16777215,1,"BL04I-VA-PIRG-11:CTL:SP.INP")
# mks937aGaugeGroup.template
#% macro, __doc__, Template database for a group of up to 8 MKS937A 
# combination gauges
# Pete Owens - 5/5/05
#
# substitutions:
#% macro, device, device name
#% macro, gauge1, gauge 1 device name
#% macro, gauge2, gauge 2 device name
#% macro, gauge3, gauge 3 device name
#% macro, gauge4, gauge 4 device name
#% macro, gauge5, gauge 5 device name
#% macro, gauge6, gauge 6 device name
#% macro, gauge7, gauge 7 device name
#% macro, gauge8, gauge 8 device name
#% macro, SELM, Defaults to 1 (High Signal). Set to 0 (Specified) and specify 
#               SELN in order to specify a particular gauge input to pass to 
#               the space template
#% macro, SELN, Use this to select which gauge to look at if you set SELM=0
################################################################################
# Select Active Gauge (IMG or PIRG)
#
record(sel, "BL04I-VA-GGAUG-98:SEL")
{
    field(DESC, "Select Pressure")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GGAUG-01:SEL MS")
    field(INPB, "BL04I-VA-GAUGE-03:SEL MS")
    field(INPC, "BL04I-VA-GAUGE-04:SEL MS")
    field(INPD, "BL04I-VA-GAUGE-05:SEL MS")
    field(INPE, "BL04I-VA-GAUGE-05:SEL MS")
    field(INPF, "BL04I-VA-GAUGE-05:SEL MS")
    field(INPG, "BL04I-VA-GAUGE-05:SEL MS")
    field(INPH, "BL04I-VA-GAUGE-05:SEL MS")
}
record(mbbi, "BL04I-VA-GGAUG-98:GAUGE")
{
    field(DESC, "Active Gauge")
    field(INP,  "BL04I-VA-GGAUG-98:SEL PP")
    field(SCAN, "1 second")
    field(ZRST, "IMG")
    field(ONST, "Pirani")
    field(TWST, "No Gauge")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "MINOR")
    field(TWSV, "MAJOR")
}
################################################################################
# Pressure
#
record(sel, "BL04I-VA-GGAUG-98:PLOG")
{
    field(DESC, "log Pressure")
    field(SELM, "1")
    field(INPA, "BL04I-VA-GGAUG-01:PLOG MS")
    field(INPB, "BL04I-VA-GAUGE-03:PLOG MS")
    field(INPC, "BL04I-VA-GAUGE-04:PLOG MS")
    field(INPD, "BL04I-VA-GAUGE-05:PLOG MS")
    field(INPE, "BL04I-VA-GAUGE-05:PLOG MS")
    field(INPF, "BL04I-VA-GAUGE-05:PLOG MS")
    field(INPG, "BL04I-VA-GAUGE-05:PLOG MS")
    field(INPH, "BL04I-VA-GAUGE-05:PLOG MS")
    field(EGU,  "log")
    field(HOPR, "3")
    field(LOPR, "-11")
    field(ADEL, "0.003")
    field(SELN, "0")
}
record(calc, "BL04I-VA-GGAUG-98:P")
{
    field(DESC, "Pressure")
    field(EGU,  "mbar")
    field(CALC, "10^A")
    field(INPA, "BL04I-VA-GGAUG-98:PLOG PP MS")
    field(SCAN, "1 second")
    field(HOPR, "1000")
    field(LOPR, "1.0E-11")
}

################################################################################
# If any gauges in group have setpoint write inhibit set, then 
# set the group status to 'Inhibit'
# In the :NOWRITE bi record, 'Inhibit' => 1 so can use 'High Signal' to select
# IJG 10 Dec. 14
#
record(sel, "BL04I-VA-GGAUG-98:NWRSEL")
{
    field(DESC, "Select Inhibit status")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GGAUG-01:ILKSETSP:NOWRITE MS")
    field(INPB, "BL04I-VA-GAUGE-03:ILKSETSP:NOWRITE MS")
    field(INPC, "BL04I-VA-GAUGE-04:ILKSETSP:NOWRITE MS")
    field(INPD, "BL04I-VA-GAUGE-05:ILKSETSP:NOWRITE MS")
    field(INPE, "BL04I-VA-GAUGE-05:ILKSETSP:NOWRITE MS")
    field(INPF, "BL04I-VA-GAUGE-05:ILKSETSP:NOWRITE MS")
    field(INPG, "BL04I-VA-GAUGE-05:ILKSETSP:NOWRITE MS")
    field(INPH, "BL04I-VA-GAUGE-05:ILKSETSP:NOWRITE MS")
}
record(mbbi, "BL04I-VA-GGAUG-98:ILKSETSP:NOWRITE")
{
    field(DESC, "ILK setpoint write status")
    field(INP,  "BL04I-VA-GGAUG-98:NWRSEL PP")
    field(SCAN, "1 second")
    field(ZRST, "Allow")
    field(ONST, "Inhibit")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(UNSV, "NO_ALARM")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
}
# mks937aGaugeGroup.template
#% macro, __doc__, Template database for a group of up to 8 MKS937A 
# combination gauges
# Pete Owens - 5/5/05
#
# substitutions:
#% macro, device, device name
#% macro, gauge1, gauge 1 device name
#% macro, gauge2, gauge 2 device name
#% macro, gauge3, gauge 3 device name
#% macro, gauge4, gauge 4 device name
#% macro, gauge5, gauge 5 device name
#% macro, gauge6, gauge 6 device name
#% macro, gauge7, gauge 7 device name
#% macro, gauge8, gauge 8 device name
#% macro, SELM, Defaults to 1 (High Signal). Set to 0 (Specified) and specify 
#               SELN in order to specify a particular gauge input to pass to 
#               the space template
#% macro, SELN, Use this to select which gauge to look at if you set SELM=0
################################################################################
# Select Active Gauge (IMG or PIRG)
#
record(sel, "BL04I-VA-GGAUG-99:SEL")
{
    field(DESC, "Select Pressure")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GAUGE-06:SEL MS")
    field(INPB, "BL04I-VA-GAUGE-06:SEL MS")
    field(INPC, "BL04I-VA-GAUGE-06:SEL MS")
    field(INPD, "BL04I-VA-GAUGE-06:SEL MS")
    field(INPE, "BL04I-VA-GAUGE-06:SEL MS")
    field(INPF, "BL04I-VA-GAUGE-06:SEL MS")
    field(INPG, "BL04I-VA-GAUGE-06:SEL MS")
    field(INPH, "BL04I-VA-GAUGE-06:SEL MS")
}
record(mbbi, "BL04I-VA-GGAUG-99:GAUGE")
{
    field(DESC, "Active Gauge")
    field(INP,  "BL04I-VA-GGAUG-99:SEL PP")
    field(SCAN, "1 second")
    field(ZRST, "IMG")
    field(ONST, "Pirani")
    field(TWST, "No Gauge")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "MINOR")
    field(TWSV, "MAJOR")
}
################################################################################
# Pressure
#
record(sel, "BL04I-VA-GGAUG-99:PLOG")
{
    field(DESC, "log Pressure")
    field(SELM, "1")
    field(INPA, "BL04I-VA-GAUGE-06:PLOG MS")
    field(INPB, "BL04I-VA-GAUGE-06:PLOG MS")
    field(INPC, "BL04I-VA-GAUGE-06:PLOG MS")
    field(INPD, "BL04I-VA-GAUGE-06:PLOG MS")
    field(INPE, "BL04I-VA-GAUGE-06:PLOG MS")
    field(INPF, "BL04I-VA-GAUGE-06:PLOG MS")
    field(INPG, "BL04I-VA-GAUGE-06:PLOG MS")
    field(INPH, "BL04I-VA-GAUGE-06:PLOG MS")
    field(EGU,  "log")
    field(HOPR, "3")
    field(LOPR, "-11")
    field(ADEL, "0.003")
    field(SELN, "0")
}
record(calc, "BL04I-VA-GGAUG-99:P")
{
    field(DESC, "Pressure")
    field(EGU,  "mbar")
    field(CALC, "10^A")
    field(INPA, "BL04I-VA-GGAUG-99:PLOG PP MS")
    field(SCAN, "1 second")
    field(HOPR, "1000")
    field(LOPR, "1.0E-11")
}

################################################################################
# If any gauges in group have setpoint write inhibit set, then 
# set the group status to 'Inhibit'
# In the :NOWRITE bi record, 'Inhibit' => 1 so can use 'High Signal' to select
# IJG 10 Dec. 14
#
record(sel, "BL04I-VA-GGAUG-99:NWRSEL")
{
    field(DESC, "Select Inhibit status")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GAUGE-06:ILKSETSP:NOWRITE MS")
    field(INPB, "BL04I-VA-GAUGE-06:ILKSETSP:NOWRITE MS")
    field(INPC, "BL04I-VA-GAUGE-06:ILKSETSP:NOWRITE MS")
    field(INPD, "BL04I-VA-GAUGE-06:ILKSETSP:NOWRITE MS")
    field(INPE, "BL04I-VA-GAUGE-06:ILKSETSP:NOWRITE MS")
    field(INPF, "BL04I-VA-GAUGE-06:ILKSETSP:NOWRITE MS")
    field(INPG, "BL04I-VA-GAUGE-06:ILKSETSP:NOWRITE MS")
    field(INPH, "BL04I-VA-GAUGE-06:ILKSETSP:NOWRITE MS")
}
record(mbbi, "BL04I-VA-GGAUG-99:ILKSETSP:NOWRITE")
{
    field(DESC, "ILK setpoint write status")
    field(INP,  "BL04I-VA-GGAUG-99:NWRSEL PP")
    field(SCAN, "1 second")
    field(ZRST, "Allow")
    field(ONST, "Inhibit")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(UNSV, "NO_ALARM")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
}
# mks937bHy8401.template
#% macro, __doc__, Template database for an Hy8401 VME ADC instance
# used to provide the 0-10V from the combination gauge log pressure of an MKS937B Multi-Sensor System.
# This is a change from the previous method, where the Hy8401 ADC interface was hard coded as part of
# the mks937bGauge.template. To allow the mks937bGauge.template to be generic to any analogue interface (e.g EtherCAT)
# this new template is simply a helper to users of the old Hy8401 interface.
# The mks937bGauge.template expects an input to PLOG in the range 0 to +32767, representing 0 to +10V.
# The record is scan PP and is triggered via the :P record.
#
# required substitutions:
#% macro, device, Full name of ADC reading PV.
#% macro, c     , ADC card number
#% macro, s     , ADC signal number
#
#

record(ai, "BL04I-VA-ADC-01:CH1") 
{
  field(DESC, "ADC Reading")
  field(DTYP, "Hy8401ip")
  field(INP, "#C50 S1 @")
  field(LINR, "LINEAR")
  field(EGUF, "32767")
  field(EGUL, "-32768")
  field(HOPR, "32767")
  field(LOPR, "-32768")
}
# mks937bHy8401.template
#% macro, __doc__, Template database for an Hy8401 VME ADC instance
# used to provide the 0-10V from the combination gauge log pressure of an MKS937B Multi-Sensor System.
# This is a change from the previous method, where the Hy8401 ADC interface was hard coded as part of
# the mks937bGauge.template. To allow the mks937bGauge.template to be generic to any analogue interface (e.g EtherCAT)
# this new template is simply a helper to users of the old Hy8401 interface.
# The mks937bGauge.template expects an input to PLOG in the range 0 to +32767, representing 0 to +10V.
# The record is scan PP and is triggered via the :P record.
#
# required substitutions:
#% macro, device, Full name of ADC reading PV.
#% macro, c     , ADC card number
#% macro, s     , ADC signal number
#
#

record(ai, "BL04I-VA-ADC-01:CH2") 
{
  field(DESC, "ADC Reading")
  field(DTYP, "Hy8401ip")
  field(INP, "#C50 S2 @")
  field(LINR, "LINEAR")
  field(EGUF, "32767")
  field(EGUL, "-32768")
  field(HOPR, "32767")
  field(LOPR, "-32768")
}
# mks937bGauge.template
#
#% macro, __doc__, Template database for a combination gauge connected to 
# two channels of an MKS937B Multi-Sensor System 
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# Run on PHAS 1 to get most up to date values from IMG and Pirani
# 
# required substitutions:
#% macro, dom,          Domain 5 char string (e.g. BL11I)
#% macro, id,           ID number as 2 digit string (e.g. 01)
#% macro, plog_adc_pv,  Link to ADC record - the ADC records need instantiating
#                       in the application from either the ethercat support module templates
#                       or (if using Hy8401 VME IP) mks937bHy8401.template
#
# gui substitutions:
#% macro, name,        The device's name for gui purposes
#% macro, GCTLR,       The gauge controller PV prefix, for gui purposes
#
# optional substitutions:
#% macro, ctlsp_level, The desired control setpoint value (actually for the Pirg).
#% macro, ctlsp_drvh,  The DRVH field on control setpoint records. 
#                      (limits max value of control setpoint)
#% macro, ctlsp_drvl,  The DRVL field on control setpoint records. 
#                      (limits min value of control setpoint)
#% macro, ctlsp_hopr,  The HOPR field on control setpoint records. 
#                      (high operator value - helps display set correct range).
#% macro, ctlsp_lopr,  The LOPR field on control setpoint records. 
#                      (low operator value - helps display set correct range).
#% macro, ctlsp_desc,  The DESC field on control setpoint records. 
#                      (appears as a label on the Pirg EDM screen).
#% macro, ctlspoff_desc,  The DESC field on control setpoint off records. 
#                      (appears as a label on the Pirg CSS screen).
#
# GCTLR used for the controller button
# % gui, GAUGE1, edm, mks937bGauge.edl, dom=BL04I, id=01, GCTLR=

# This associates BOY screens with the template
# % gui, GAUGE1, boydetail, mks937bApp_opi/gauge_detail.opi, dom=BL04I, id=01, GCTLR=, name=GAUGE1
# % gui, GAUGE1, boyembed, mks937bApp_opi/gauge_embed_box.opi, dom=BL04I, id=01, GCTLR=, name=GAUGE1
# % gui, GAUGE1, boyembed, mks937bApp_opi/gauge_embed.opi, dom=BL04I, id=01, GCTLR=, name=GAUGE1

# These define what PVs a valve detail screen should contain
# % gui, GAUGE1, readback, Pressure,   BL04I-VA-GAUGE-01:P
# % gui, GAUGE1, readback, Gauge,  BL04I-VA-GAUGE-01:GAUGE
# % gui, GAUGE1, enum, Setpoints Overwrite,  BL04I-VA-GAUGE-01:ILKSETSP:NOWRITE

# Force processing of slow PP records 
record(fanout, "BL04I-VA-GAUGE-01:FAN10S")
{
    field(DESC, "10s Scan fanout")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-PIRG-01:CTL:SP")
    field(LNK2, "BL04I-VA-PIRG-01:CTL:HYST")
    field(SELM, "All")
}


################################################################################
# Select Active Gauge (IMG or PIRG)
#
record(calc, "BL04I-VA-GAUGE-01:SEL") {
  field(DESC, "Select Pressure")
  field(SCAN, "1 second")
  field(PHAS, "1")
  field(FLNK, "BL04I-VA-GAUGE-01:GAUGE PP")
  field(CALC, "A<2?0:(B<2?1:(B=8?1:2))")
  field(INPA, "BL04I-VA-IMG-01:STA")
  field(INPB, "BL04I-VA-PIRG-01:STA")
}

record(mbbi, "BL04I-VA-GAUGE-01:GAUGE") {
  field(DESC, "Active Gauge")
  field(INP, "BL04I-VA-GAUGE-01:SEL")
  field(FLNK, "BL04I-VA-GAUGE-01:P")
  field(ZRST, "IMG")
  field(ONST, "Pirani")
  field(TWST, "No Gauge")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "MINOR")
  field(TWSV, "MAJOR")
}

################################################################################
# Pressure
#
#% archiver 0.1 Monitor
#
# CALC: ADC is 16bit representing -10 to +10 V. We only use 0 to 10V from gauge controller.
#       Divide A by 32767 (positive range used) to give fraction of 10V range.
#       Multiply result by 10 to give true input voltage.
#       From MKS937 Operation Manual, log(p)  = (V-B)/A, where B = 7.2 volts and A = 0.6
#       log(p) = (V/0.6) - (7.2/0.6) = (V/0.6) - 12.0
#
record(calc, "BL04I-VA-GAUGE-01:PLOG")
	{
  	field(DESC, "log Pressure")
  	field(INPA, "BL04I-VA-ADC-01:CH1 PP MS")
  	field(EGU, "log")
  	field(CALC, "((10.0*(A/32767.0))/0.6) - 12.0")
  	field(HOPR, "3")
  	field(LOPR, "-11")
  	field(HIGH, "-7")
  	field(HSV, "MINOR")
  	field(ADEL, "0.025")
	}

#
#% controldesk Pressure readback
#% archiver 0.1 Monitor
#
record(calc, "BL04I-VA-GAUGE-01:P") {
  field(DESC, "Pressure")
  field(EGU, "mbar")
  field(PREC, "11")
  field(CALC, "10^A")
  field(INPA, "BL04I-VA-GAUGE-01:PLOG PP MS")
  field(SCAN, ".1 second")
  field(HOPR, "1000")
  field(LOPR, "1.0E-11")
}

record(calcout, "BL04I-VA-GAUGE-01:ADEL") {
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-GAUGE-01:P.ADEL")
  field(INPA, "BL04I-VA-GAUGE-01:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

################################################################################
# Control - IMG Enable (link from IMG to PIRG)
#

# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSP record just once
# at startup.
#
record(bo, "BL04I-VA-PIRG-01:CTL:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-PIRG-01:CTL:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-PIRG-01:CTL:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-PIRG-01:ILKSETSP:NOWRITE")
    field(LNK2, "BL04I-VA-PIRG-01:CTL:SETSP")
    field(LNK3, "BL04I-VA-PIRG-01:CTL:INITSETSPSDIS")
    field(SELM, "All")
}


#% archiver 10 Monitor
#
record(ao, "BL04I-VA-PIRG-01:CTL:SETSP") 
{
  field(DESC, "IMG Enable")
  field(FLNK, "BL04I-VA-IMG-01:CTL:OUTSP.PROC")
  field(OUT, "BL04I-VA-IMG-01:CTL:OUTSP")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(DRVH, "9.5e-1")
  field(DRVL, "2.7e-3")
  field(SDIS, "BL04I-VA-PIRG-01:ILKSETSP:NOWRITE PP")
  #field(PINI, "YES")
  field(DOL, "1.0e-2")
}

#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-PIRG-01:CTL:SETSPOFF") 
{
  field(DESC, "IMG Enable Off")
  field(FLNK, "BL04I-VA-IMG-01:CTL:SETHYST.PROC")
  field(OUT, "BL04I-VA-IMG-01:CTL:SETHYST")
  field(EGU, "mbar")
  field(PREC, "1")
  field(SDIS, "BL04I-VA-PIRG-01:ILKSETSP:NOWRITE")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(DRVH, "9.5e-1")
  field(DRVL, "2.7e-3")
}


#
#% archiver 10 Monitor
#% controldesk IMG Enable readback
#
record(ai, "BL04I-VA-PIRG-01:CTL:SP") 
{
  field(DESC, "IMG Enable")
  field(INP, "BL04I-VA-IMG-01:CTL:SP MS")
  field(SCAN, "Passive")
  field(PHAS, "1")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
}

#% archiver 10 Monitor
#% controldesk IMG Enable hysteresis readback
#
record(ai, "BL04I-VA-PIRG-01:CTL:HYST") 
{
  field(DESC, "IMG Enable Off")
  field(INP, "BL04I-VA-IMG-01:CTL:HYST MS")
  field(SCAN, "Passive")
  field(PHAS, "1")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
}

# When the controller hysteresis changes internally
# set the value in the SETHYST text entry box accordingly
record(seq, "BL04I-VA-PIRG-01:CTL:HYSTSEQ") 
{
  field(DESC, "Hysteresis Sequence")
  field(SELM, "All")
  field(DOL1, "BL04I-VA-PIRG-01:CTL:HYST PP")
  field(LNK1, "BL04I-VA-PIRG-01:CTL:SETSPOFF.VAL PP")
}

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
# This is essentially a copy of the global record be but in the domain
# of the PIRG instance, so available to EDM screen.
#
record(bi, "BL04I-VA-PIRG-01:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-01:ILKSETSP:NOWRITE CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# NB: INP had to be removed to allow autosave to correctly restore.
#
#% autosave 0 VAL
record(bi, "BL04I-VA-GAUGE-01:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  #field(INP, "0")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("BL04I-VA-GAUGE-01:SEL",20,46,0,0,"BL04I-VA-GAUGE-01:SEL")
#! Field("BL04I-VA-GAUGE-01:SEL.FLNK",16777215,1,"BL04I-VA-GAUGE-01:SEL.FLNK")
#! Link("BL04I-VA-GAUGE-01:SEL.FLNK","BL04I-VA-GAUGE-01:GAUGE")
#! Field("BL04I-VA-GAUGE-01:SEL.INPA",16777215,1,"BL04I-VA-GAUGE-01:SEL.INPA")
#! Field("BL04I-VA-GAUGE-01:SEL.INPB",16777215,1,"BL04I-VA-GAUGE-01:SEL.INPB")
#! Field("BL04I-VA-GAUGE-01:SEL.VAL",16777215,1,"BL04I-VA-GAUGE-01:SEL.VAL")
#! Record("BL04I-VA-GAUGE-01:GAUGE",300,65,0,0,"BL04I-VA-GAUGE-01:GAUGE")
#! Field("BL04I-VA-GAUGE-01:GAUGE.INP",16777215,0,"BL04I-VA-GAUGE-01:GAUGE.INP")
#! Link("BL04I-VA-GAUGE-01:GAUGE.INP","BL04I-VA-GAUGE-01:SEL.VAL")
#! Field("BL04I-VA-GAUGE-01:GAUGE.FLNK",16777215,1,"BL04I-VA-GAUGE-01:GAUGE.FLNK")
#! Link("BL04I-VA-GAUGE-01:GAUGE.FLNK","BL04I-VA-GAUGE-01:P")
#! Record("BL04I-VA-GAUGE-01:PLOG",500,17,0,0,"BL04I-VA-GAUGE-01:PLOG")
#! Field("BL04I-VA-GAUGE-01:PLOG.VAL",16777215,1,"BL04I-VA-GAUGE-01:PLOG.VAL")
#! Record("BL04I-VA-GAUGE-01:P",780,212,0,0,"BL04I-VA-GAUGE-01:P")
#! Field("BL04I-VA-GAUGE-01:P.INPA",16777215,0,"BL04I-VA-GAUGE-01:P.INPA")
#! Link("BL04I-VA-GAUGE-01:P.INPA","BL04I-VA-GAUGE-01:PLOG.VAL")
#! Field("BL04I-VA-GAUGE-01:P.ADEL",16777215,1,"BL04I-VA-GAUGE-01:P.ADEL")
#! Field("BL04I-VA-GAUGE-01:P.VAL",16777215,1,"BL04I-VA-GAUGE-01:P.VAL")
#! Record("BL04I-VA-GAUGE-01:ADEL",1060,260,0,0,"BL04I-VA-GAUGE-01:ADEL")
#! Field("BL04I-VA-GAUGE-01:ADEL.OUT",16777215,0,"BL04I-VA-GAUGE-01:ADEL.OUT")
#! Link("BL04I-VA-GAUGE-01:ADEL.OUT","BL04I-VA-GAUGE-01:P.ADEL")
#! Field("BL04I-VA-GAUGE-01:ADEL.INPA",16777215,0,"BL04I-VA-GAUGE-01:ADEL.INPA")
#! Link("BL04I-VA-GAUGE-01:ADEL.INPA","BL04I-VA-GAUGE-01:P.VAL")
#! Record("BL04I-VA-PIRG-01:CTL:SETSP",20,345,0,0,"BL04I-VA-PIRG-01:CTL:SETSP")
#! Field("BL04I-VA-PIRG-01:CTL:SETSP.FLNK",16777215,1,"BL04I-VA-PIRG-01:CTL:SETSP.FLNK")
#! Field("BL04I-VA-PIRG-01:CTL:SETSP.OUT",16777215,1,"BL04I-VA-PIRG-01:CTL:SETSP.OUT")
#! Record("BL04I-VA-PIRG-01:CTL:ENABLE",380,331,0,0,"BL04I-VA-PIRG-01:CTL:ENABLE")
#! Field("BL04I-VA-PIRG-01:CTL:ENABLE.FLNK",16777215,1,"BL04I-VA-PIRG-01:CTL:ENABLE.FLNK")
#! Field("BL04I-VA-PIRG-01:CTL:ENABLE.OUT",16777215,1,"BL04I-VA-PIRG-01:CTL:ENABLE.OUT")
#! Record("BL04I-VA-PIRG-01:CTL:SP",200,352,0,0,"BL04I-VA-PIRG-01:CTL:SP")
#! Field("BL04I-VA-PIRG-01:CTL:SP.INP",16777215,1,"BL04I-VA-PIRG-01:CTL:SP.INP")
# mks937bGauge.template
#
#% macro, __doc__, Template database for a combination gauge connected to 
# two channels of an MKS937B Multi-Sensor System 
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# Run on PHAS 1 to get most up to date values from IMG and Pirani
# 
# required substitutions:
#% macro, dom,          Domain 5 char string (e.g. BL11I)
#% macro, id,           ID number as 2 digit string (e.g. 01)
#% macro, plog_adc_pv,  Link to ADC record - the ADC records need instantiating
#                       in the application from either the ethercat support module templates
#                       or (if using Hy8401 VME IP) mks937bHy8401.template
#
# gui substitutions:
#% macro, name,        The device's name for gui purposes
#% macro, GCTLR,       The gauge controller PV prefix, for gui purposes
#
# optional substitutions:
#% macro, ctlsp_level, The desired control setpoint value (actually for the Pirg).
#% macro, ctlsp_drvh,  The DRVH field on control setpoint records. 
#                      (limits max value of control setpoint)
#% macro, ctlsp_drvl,  The DRVL field on control setpoint records. 
#                      (limits min value of control setpoint)
#% macro, ctlsp_hopr,  The HOPR field on control setpoint records. 
#                      (high operator value - helps display set correct range).
#% macro, ctlsp_lopr,  The LOPR field on control setpoint records. 
#                      (low operator value - helps display set correct range).
#% macro, ctlsp_desc,  The DESC field on control setpoint records. 
#                      (appears as a label on the Pirg EDM screen).
#% macro, ctlspoff_desc,  The DESC field on control setpoint off records. 
#                      (appears as a label on the Pirg CSS screen).
#
# GCTLR used for the controller button
# % gui, GAUGE2, edm, mks937bGauge.edl, dom=BL04I, id=02, GCTLR=

# This associates BOY screens with the template
# % gui, GAUGE2, boydetail, mks937bApp_opi/gauge_detail.opi, dom=BL04I, id=02, GCTLR=, name=GAUGE2
# % gui, GAUGE2, boyembed, mks937bApp_opi/gauge_embed_box.opi, dom=BL04I, id=02, GCTLR=, name=GAUGE2
# % gui, GAUGE2, boyembed, mks937bApp_opi/gauge_embed.opi, dom=BL04I, id=02, GCTLR=, name=GAUGE2

# These define what PVs a valve detail screen should contain
# % gui, GAUGE2, readback, Pressure,   BL04I-VA-GAUGE-02:P
# % gui, GAUGE2, readback, Gauge,  BL04I-VA-GAUGE-02:GAUGE
# % gui, GAUGE2, enum, Setpoints Overwrite,  BL04I-VA-GAUGE-02:ILKSETSP:NOWRITE

# Force processing of slow PP records 
record(fanout, "BL04I-VA-GAUGE-02:FAN10S")
{
    field(DESC, "10s Scan fanout")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-PIRG-02:CTL:SP")
    field(LNK2, "BL04I-VA-PIRG-02:CTL:HYST")
    field(SELM, "All")
}


################################################################################
# Select Active Gauge (IMG or PIRG)
#
record(calc, "BL04I-VA-GAUGE-02:SEL") {
  field(DESC, "Select Pressure")
  field(SCAN, "1 second")
  field(PHAS, "1")
  field(FLNK, "BL04I-VA-GAUGE-02:GAUGE PP")
  field(CALC, "A<2?0:(B<2?1:(B=8?1:2))")
  field(INPA, "BL04I-VA-IMG-02:STA")
  field(INPB, "BL04I-VA-PIRG-02:STA")
}

record(mbbi, "BL04I-VA-GAUGE-02:GAUGE") {
  field(DESC, "Active Gauge")
  field(INP, "BL04I-VA-GAUGE-02:SEL")
  field(FLNK, "BL04I-VA-GAUGE-02:P")
  field(ZRST, "IMG")
  field(ONST, "Pirani")
  field(TWST, "No Gauge")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "MINOR")
  field(TWSV, "MAJOR")
}

################################################################################
# Pressure
#
#% archiver 0.1 Monitor
#
# CALC: ADC is 16bit representing -10 to +10 V. We only use 0 to 10V from gauge controller.
#       Divide A by 32767 (positive range used) to give fraction of 10V range.
#       Multiply result by 10 to give true input voltage.
#       From MKS937 Operation Manual, log(p)  = (V-B)/A, where B = 7.2 volts and A = 0.6
#       log(p) = (V/0.6) - (7.2/0.6) = (V/0.6) - 12.0
#
record(calc, "BL04I-VA-GAUGE-02:PLOG")
	{
  	field(DESC, "log Pressure")
  	field(INPA, "BL04I-VA-ADC-01:CH2 PP MS")
  	field(EGU, "log")
  	field(CALC, "((10.0*(A/32767.0))/0.6) - 12.0")
  	field(HOPR, "3")
  	field(LOPR, "-11")
  	field(HIGH, "-7")
  	field(HSV, "MINOR")
  	field(ADEL, "0.025")
	}

#
#% controldesk Pressure readback
#% archiver 0.1 Monitor
#
record(calc, "BL04I-VA-GAUGE-02:P") {
  field(DESC, "Pressure")
  field(EGU, "mbar")
  field(PREC, "11")
  field(CALC, "10^A")
  field(INPA, "BL04I-VA-GAUGE-02:PLOG PP MS")
  field(SCAN, ".1 second")
  field(HOPR, "1000")
  field(LOPR, "1.0E-11")
}

record(calcout, "BL04I-VA-GAUGE-02:ADEL") {
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-GAUGE-02:P.ADEL")
  field(INPA, "BL04I-VA-GAUGE-02:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

################################################################################
# Control - IMG Enable (link from IMG to PIRG)
#

# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSP record just once
# at startup.
#
record(bo, "BL04I-VA-PIRG-02:CTL:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-PIRG-02:CTL:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-PIRG-02:CTL:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-PIRG-02:ILKSETSP:NOWRITE")
    field(LNK2, "BL04I-VA-PIRG-02:CTL:SETSP")
    field(LNK3, "BL04I-VA-PIRG-02:CTL:INITSETSPSDIS")
    field(SELM, "All")
}


#% archiver 10 Monitor
#
record(ao, "BL04I-VA-PIRG-02:CTL:SETSP") 
{
  field(DESC, "IMG Enable")
  field(FLNK, "BL04I-VA-IMG-02:CTL:OUTSP.PROC")
  field(OUT, "BL04I-VA-IMG-02:CTL:OUTSP")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(DRVH, "9.5e-1")
  field(DRVL, "2.7e-3")
  field(SDIS, "BL04I-VA-PIRG-02:ILKSETSP:NOWRITE PP")
  #field(PINI, "YES")
  field(DOL, "1.0e-2")
}

#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-PIRG-02:CTL:SETSPOFF") 
{
  field(DESC, "IMG Enable Off")
  field(FLNK, "BL04I-VA-IMG-02:CTL:SETHYST.PROC")
  field(OUT, "BL04I-VA-IMG-02:CTL:SETHYST")
  field(EGU, "mbar")
  field(PREC, "1")
  field(SDIS, "BL04I-VA-PIRG-02:ILKSETSP:NOWRITE")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(DRVH, "9.5e-1")
  field(DRVL, "2.7e-3")
}


#
#% archiver 10 Monitor
#% controldesk IMG Enable readback
#
record(ai, "BL04I-VA-PIRG-02:CTL:SP") 
{
  field(DESC, "IMG Enable")
  field(INP, "BL04I-VA-IMG-02:CTL:SP MS")
  field(SCAN, "Passive")
  field(PHAS, "1")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
}

#% archiver 10 Monitor
#% controldesk IMG Enable hysteresis readback
#
record(ai, "BL04I-VA-PIRG-02:CTL:HYST") 
{
  field(DESC, "IMG Enable Off")
  field(INP, "BL04I-VA-IMG-02:CTL:HYST MS")
  field(SCAN, "Passive")
  field(PHAS, "1")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
}

# When the controller hysteresis changes internally
# set the value in the SETHYST text entry box accordingly
record(seq, "BL04I-VA-PIRG-02:CTL:HYSTSEQ") 
{
  field(DESC, "Hysteresis Sequence")
  field(SELM, "All")
  field(DOL1, "BL04I-VA-PIRG-02:CTL:HYST PP")
  field(LNK1, "BL04I-VA-PIRG-02:CTL:SETSPOFF.VAL PP")
}

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
# This is essentially a copy of the global record be but in the domain
# of the PIRG instance, so available to EDM screen.
#
record(bi, "BL04I-VA-PIRG-02:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-02:ILKSETSP:NOWRITE CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# NB: INP had to be removed to allow autosave to correctly restore.
#
#% autosave 0 VAL
record(bi, "BL04I-VA-GAUGE-02:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  #field(INP, "0")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("BL04I-VA-GAUGE-02:SEL",20,46,0,0,"BL04I-VA-GAUGE-02:SEL")
#! Field("BL04I-VA-GAUGE-02:SEL.FLNK",16777215,1,"BL04I-VA-GAUGE-02:SEL.FLNK")
#! Link("BL04I-VA-GAUGE-02:SEL.FLNK","BL04I-VA-GAUGE-02:GAUGE")
#! Field("BL04I-VA-GAUGE-02:SEL.INPA",16777215,1,"BL04I-VA-GAUGE-02:SEL.INPA")
#! Field("BL04I-VA-GAUGE-02:SEL.INPB",16777215,1,"BL04I-VA-GAUGE-02:SEL.INPB")
#! Field("BL04I-VA-GAUGE-02:SEL.VAL",16777215,1,"BL04I-VA-GAUGE-02:SEL.VAL")
#! Record("BL04I-VA-GAUGE-02:GAUGE",300,65,0,0,"BL04I-VA-GAUGE-02:GAUGE")
#! Field("BL04I-VA-GAUGE-02:GAUGE.INP",16777215,0,"BL04I-VA-GAUGE-02:GAUGE.INP")
#! Link("BL04I-VA-GAUGE-02:GAUGE.INP","BL04I-VA-GAUGE-02:SEL.VAL")
#! Field("BL04I-VA-GAUGE-02:GAUGE.FLNK",16777215,1,"BL04I-VA-GAUGE-02:GAUGE.FLNK")
#! Link("BL04I-VA-GAUGE-02:GAUGE.FLNK","BL04I-VA-GAUGE-02:P")
#! Record("BL04I-VA-GAUGE-02:PLOG",500,17,0,0,"BL04I-VA-GAUGE-02:PLOG")
#! Field("BL04I-VA-GAUGE-02:PLOG.VAL",16777215,1,"BL04I-VA-GAUGE-02:PLOG.VAL")
#! Record("BL04I-VA-GAUGE-02:P",780,212,0,0,"BL04I-VA-GAUGE-02:P")
#! Field("BL04I-VA-GAUGE-02:P.INPA",16777215,0,"BL04I-VA-GAUGE-02:P.INPA")
#! Link("BL04I-VA-GAUGE-02:P.INPA","BL04I-VA-GAUGE-02:PLOG.VAL")
#! Field("BL04I-VA-GAUGE-02:P.ADEL",16777215,1,"BL04I-VA-GAUGE-02:P.ADEL")
#! Field("BL04I-VA-GAUGE-02:P.VAL",16777215,1,"BL04I-VA-GAUGE-02:P.VAL")
#! Record("BL04I-VA-GAUGE-02:ADEL",1060,260,0,0,"BL04I-VA-GAUGE-02:ADEL")
#! Field("BL04I-VA-GAUGE-02:ADEL.OUT",16777215,0,"BL04I-VA-GAUGE-02:ADEL.OUT")
#! Link("BL04I-VA-GAUGE-02:ADEL.OUT","BL04I-VA-GAUGE-02:P.ADEL")
#! Field("BL04I-VA-GAUGE-02:ADEL.INPA",16777215,0,"BL04I-VA-GAUGE-02:ADEL.INPA")
#! Link("BL04I-VA-GAUGE-02:ADEL.INPA","BL04I-VA-GAUGE-02:P.VAL")
#! Record("BL04I-VA-PIRG-02:CTL:SETSP",20,345,0,0,"BL04I-VA-PIRG-02:CTL:SETSP")
#! Field("BL04I-VA-PIRG-02:CTL:SETSP.FLNK",16777215,1,"BL04I-VA-PIRG-02:CTL:SETSP.FLNK")
#! Field("BL04I-VA-PIRG-02:CTL:SETSP.OUT",16777215,1,"BL04I-VA-PIRG-02:CTL:SETSP.OUT")
#! Record("BL04I-VA-PIRG-02:CTL:ENABLE",380,331,0,0,"BL04I-VA-PIRG-02:CTL:ENABLE")
#! Field("BL04I-VA-PIRG-02:CTL:ENABLE.FLNK",16777215,1,"BL04I-VA-PIRG-02:CTL:ENABLE.FLNK")
#! Field("BL04I-VA-PIRG-02:CTL:ENABLE.OUT",16777215,1,"BL04I-VA-PIRG-02:CTL:ENABLE.OUT")
#! Record("BL04I-VA-PIRG-02:CTL:SP",200,352,0,0,"BL04I-VA-PIRG-02:CTL:SP")
#! Field("BL04I-VA-PIRG-02:CTL:SP.INP",16777215,1,"BL04I-VA-PIRG-02:CTL:SP.INP")
# mks937bGaugeGroup.template
#% macro, __doc__, Template database for a group of up to 8 MKS937B 
# combination gauges
# Pete Owens - 5/5/05
#
# substitutions:
#% macro, device, device name
#% macro, gauge1, gauge 1 device name
#% macro, gauge2, gauge 2 device name
#% macro, gauge3, gauge 3 device name
#% macro, gauge4, gauge 4 device name
#% macro, gauge5, gauge 5 device name
#% macro, gauge6, gauge 6 device name
#% macro, gauge7, gauge 7 device name
#% macro, gauge8, gauge 8 device name
#% macro, SELM, Defaults to 1 (High Signal). Set to 0 (Specified) and specify 
#               SELN in order to specify a particular gauge input to pass to 
#               the space template
#% macro, SELN, Use this to select which gauge to look at if you set SELM=0
################################################################################
# Select Active Gauge (IMG or PIRG)
#
record(sel, "BL04I-VA-GGAUG-01:SEL")
{
    field(DESC, "Select Pressure")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GAUGE-01:SEL MS")
    field(INPB, "BL04I-VA-GAUGE-02:SEL MS")
    field(INPC, "BL04I-VA-GAUGE-02:SEL MS")
    field(INPD, "BL04I-VA-GAUGE-02:SEL MS")
    field(INPE, "BL04I-VA-GAUGE-02:SEL MS")
    field(INPF, "BL04I-VA-GAUGE-02:SEL MS")
    field(INPG, "BL04I-VA-GAUGE-02:SEL MS")
    field(INPH, "BL04I-VA-GAUGE-02:SEL MS")
}
record(mbbi, "BL04I-VA-GGAUG-01:GAUGE")
{
    field(DESC, "Active Gauge")
    field(INP,  "BL04I-VA-GGAUG-01:SEL PP")
    field(SCAN, "1 second")
    field(ZRST, "IMG")
    field(ONST, "Pirani")
    field(TWST, "No Gauge")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "MINOR")
    field(TWSV, "MAJOR")
}
################################################################################
# Pressure
#
record(sel, "BL04I-VA-GGAUG-01:PLOG")
{
    field(DESC, "log Pressure")
    field(SELM, "1")
    field(INPA, "BL04I-VA-GAUGE-01:PLOG MS")
    field(INPB, "BL04I-VA-GAUGE-02:PLOG MS")
    field(INPC, "BL04I-VA-GAUGE-02:PLOG MS")
    field(INPD, "BL04I-VA-GAUGE-02:PLOG MS")
    field(INPE, "BL04I-VA-GAUGE-02:PLOG MS")
    field(INPF, "BL04I-VA-GAUGE-02:PLOG MS")
    field(INPG, "BL04I-VA-GAUGE-02:PLOG MS")
    field(INPH, "BL04I-VA-GAUGE-02:PLOG MS")
    field(EGU,  "log")
    field(HOPR, "3")
    field(LOPR, "-11")
    field(ADEL, "0.003")
    field(SELN, "0")
}
record(calc, "BL04I-VA-GGAUG-01:P")
{
    field(DESC, "Pressure")
    field(EGU,  "mbar")
    field(CALC, "10^A")
    field(INPA, "BL04I-VA-GGAUG-01:PLOG PP MS")
    field(SCAN, "1 second")
    field(HOPR, "1000")
    field(LOPR, "1.0E-11")
}

################################################################################
# If any gauges in group have setpoint write inhibit set, then 
# set the group status to 'Inhibit'
# In the :NOWRITE bi record, 'Inhibit' => 1 so can use 'High Signal' to select
# IJG 10 Dec. 14
#
record(sel, "BL04I-VA-GGAUG-01:NWRSEL")
{
    field(DESC, "Select Inhibit status")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GAUGE-01:ILKSETSP:NOWRITE MS")
    field(INPB, "BL04I-VA-GAUGE-02:ILKSETSP:NOWRITE MS")
    field(INPC, "BL04I-VA-GAUGE-02:ILKSETSP:NOWRITE MS")
    field(INPD, "BL04I-VA-GAUGE-02:ILKSETSP:NOWRITE MS")
    field(INPE, "BL04I-VA-GAUGE-02:ILKSETSP:NOWRITE MS")
    field(INPF, "BL04I-VA-GAUGE-02:ILKSETSP:NOWRITE MS")
    field(INPG, "BL04I-VA-GAUGE-02:ILKSETSP:NOWRITE MS")
    field(INPH, "BL04I-VA-GAUGE-02:ILKSETSP:NOWRITE MS")
}
record(mbbi, "BL04I-VA-GGAUG-01:ILKSETSP:NOWRITE")
{
    field(DESC, "ILK setpoint write status")
    field(INP,  "BL04I-VA-GGAUG-01:NWRSEL PP")
    field(SCAN, "1 second")
    field(ZRST, "Allow")
    field(ONST, "Inhibit")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(UNSV, "NO_ALARM")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
}
#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937aImg.db
#% macro, __doc__, Template database for an inverted magnetron guage connected 
# to one channel of an MKS937A Multi-Sensor System 
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# IG Note: Historically, some of these records have DISA field switched on 2
#          The reason seems to be to disable record processing for RLA when that interlock
#          is not relevant to the gauge - i.e. IMG-03 would typically not have an MPS interlock
#          so should switch it off. I think this is a bit of a flakey way to do it, as any exceptional
#          cases would not fit this method. Probably needs re-working sometime.
#          IJG 12 August 2014
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, channel, MKS 937A channel number (1-4)
#
# optional substitutions:
#% macro, name,        Object name, and gui association name
#% macro, ctlsp_level, The desired control setpoint value.
#% macro, ctlsp_drvh,  The DRVH field on control setpoint records 
#                      (limits max value of control setpoint)
#% macro, ctlsp_drvl,  The DRVL field on control setpoint records. 
#                      (limits min value of control setpoint)
#% macro, ctlsp_hopr,  The HOPR field on control setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, ctlsp_lopr,  The LOPR field on control setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, ctlsp_hihi,  The HIHI alarm field on the control setpoint record.
#% macro, ctlsp_lolo,  The LOLO alarm field on the control setpoint record.
#% macro, ctlsp_high,  The HIGH alarm field on the control setpoint record.
#% macro, ctlsp_low ,  The LOW alarm field on the control setpoint record.
#% macro, ctlsp_desc,  The DESC field on the control setpoint record.
#
#% macro, prosp_level, The desired protection setpoint value.
#% macro, prosp_drvh,  The DRVH field on protection setpoint records 
#                      (limits max value of protection setpoint)
#% macro, prosp_drvl,  The DRVL field on protection setpoint records. 
#                      (limits min value of protection setpoint)
#% macro, prosp_hopr,  The HOPR field on protection setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, prosp_lopr,  The LOPR field on protection setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, prosp_hihi,  The HIHI alarm field on the protection setpoint record.
#% macro, prosp_lolo,  The LOLO alarm field on the protection setpoint record.
#% macro, prosp_high,  The HIGH alarm field on the protection setpoint record.
#% macro, prosp_low ,  The LOW alarm field on the protection setpoint record.
#% macro, prosp_desc,  The DESC field on the protection setpoint record 
#                      (appears as a label on the Img EDM screen).
#
#% macro, rlysp_level, The desired relay setpoint value.
#% macro, rlysp_drvh,  The DRVH field on relay setpdoint records 
#                      (limits max value of relay setpoint)
#% macro, rlysp_drvl,  The DRVL field on relay setpoint records. 
#                      (limits min value of relay setpoint)
#% macro, rlysp_hopr,  The HOPR field on relay setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, rlysp_lopr,  The LOPR field on relay setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, rlysp_hihi,  The HIHI alarm field on the relay setpoint record.
#% macro, rlysp_lolo,  The LOLO alarm field on the relay setpoint record.
#% macro, rlysp_high,  The HIGH alarm field on the relay setpoint record.
#% macro, rlysp_low ,  The LOW alarm field on the relay setpoint record.
#% macro, rlysp_desc,  The DESC field on the relay setpoint record 
#                      (appears as a label on the Img EDM screen).
#
#% macro, rlasp_drvh,  The DRVH field on second relay setpoint records 
#                      (limits max value of second relay setpoint)
#% macro, rlasp_drvl,  The DRVL field on second relay setpoint records. 
#                      (limits min value of second relay setpoint)
#% macro, rlasp_hopr,  The HOPR field on second relay setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, rlasp_lopr,  The LOPR field on second relay setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, rlasp_hihi,  The HIHI alarm field on the second relay setpoint record.
#% macro, rlasp_lolo,  The LOLO alarm field on the second relay setpoint record.
#% macro, rlasp_high,  The HIGH alarm field on the second relay setpoint record.
#% macro, rlasp_low ,  The LOW alarm field on the second relay setpoint record.
#% macro, rlasp_desc,  The DESC field on the second relay setpoint record.
#% macro, offwarn,     Flag to display a warning that switching off the IMG could trip the beam
#% macro, ilk_write_access_pv, bi record to allow (0) of inhibit (1) gauge interlock setpoint overwrite. Default is local record forcing 'Allow'.
################################################################################

# This associates an edm screen with the template
# % gui, IMG11, edm, mks937aImg.edl, device=BL04I-VA-IMG-11

# This associates BOY screens with the template
# % gui, IMG11, boydetail, mks937aApp_opi/img_detail.opi, device=BL04I-VA-IMG-11, desc=BL04I-VA-IMG-11, name=IMG11
# % gui, IMG11, boyembed, mks937aApp_opi/img_embed_box.opi, device=BL04I-VA-IMG-11, desc=BL04I-VA-IMG-11, name=IMG11
# % gui, IMG11, boyembed, mks937aApp_opi/img_embed.opi, device=BL04I-VA-IMG-11, desc=BL04I-VA-IMG-11, name=IMG11

# These define what PVs a valve detail screen should contain
# % gui, IMG11, readback, Pressure,                                BL04I-VA-IMG-11:P
# % gui, IMG11, readback, Status,                                  BL04I-VA-IMG-11:STA
# % gui, IMG11, readback, Gauge Setpoint Write,                    BL04I-VA-IMG-11:PRO:ILKSETSP:NOWRITE
# % gui, IMG11, readback, Relay 1 on SetPoint for Summary,         BL04I-VA-IMG-11:RLY1:SP,        =pv("BL04I-VA-IMG-11:RLY1:SP.DESC")
# % gui, IMG11, readback, Relay 1 off SetPoint for Summary,        BL04I-VA-IMG-11:RLY1:SPOFF,     =pv("BL04I-VA-IMG-11:RLY1:SPOFF.DESC")
# % gui, IMG11, readback, Relay 2 on SetPoint for Summary,         BL04I-VA-IMG-11:RLY2:SP,        =pv("BL04I-VA-IMG-11:RLY2:SP.DESC")
# % gui, IMG11, readback, Relay 3 on SetPoint for Summary,         BL04I-VA-IMG-11:RLY3:SP,        =pv("BL04I-VA-IMG-11:RLY3:SP.DESC")
## TODO The below gives us feedback on what the state actually is - without this you get the current demand
## (as per differences between EDM and CSS enum menus)
# % gui, IMG11, readback, Cold Cathode,                            BL04I-VA-IMG-11:ISENABLED
# % gui, IMG11, enum, Cold Cathode,                                BL04I-VA-IMG-11:CCHV

# % gui, IMG11, readback, CTL SP Controlling Gauge,                BL04I-VA-IMG-11:CTL:SETCCS,     =concat(pv("BL04I-VA-IMG-11:CTL:SP.DESC")," Gauge")
# % gui, IMG11, readback, CTL SP MODE,                             BL04I-VA-IMG-11:CTL:SETMODE,    =concat(pv("BL04I-VA-IMG-11:CTL:SP.DESC")," Mode")
# % gui, IMG11, readback, Pro Setpoint,                            BL04I-VA-IMG-11:PRO:SP,         =pv("BL04I-VA-IMG-11:PRO:SP.DESC")
# % gui, IMG11, readback, Relay 1 On Setpoint,                     BL04I-VA-IMG-11:RLY1:SP,        =pv("BL04I-VA-IMG-11:RLY1:SP.DESC")
# % gui, IMG11, readback, Relay 1 Off Setpoint,                    BL04I-VA-IMG-11:RLY1:SPOFF,     =pv("BL04I-VA-IMG-11:RLY1:SPOFF.DESC")
# % gui, IMG11, readback, Relay 2 On Setpoint,                     BL04I-VA-IMG-11:RLY2:SP,        =pv("BL04I-VA-IMG-11:RLY2:SP.DESC")
# % gui, IMG11, readback, Relay 2 Off Setpoint,                    BL04I-VA-IMG-11:RLY2:SPOFF,     =pv("BL04I-VA-IMG-11:RLY2:SPOFF.DESC")
# % gui, IMG11, readback, Relay 3 On Setpoint,                     BL04I-VA-IMG-11:RLY3:SP,        =pv("BL04I-VA-IMG-11:RLY3:SP.DESC")
# % gui, IMG11, readback, Relay 3 Off Setpoint,                    BL04I-VA-IMG-11:RLY3:SPOFF,     =pv("BL04I-VA-IMG-11:RLY3:SPOFF.DESC")
# % gui, IMG11, readback, Relay 4 On Setpoint,                     BL04I-VA-IMG-11:RLY4:SP,        =pv("BL04I-VA-IMG-11:RLY4:SP.DESC")
# % gui, IMG11, readback, Relay 4 Off Setpoint,                    BL04I-VA-IMG-11:RLY4:SPOFF,     =pv("BL04I-VA-IMG-11:RLY4:SPOFF.DESC")
# % gui, IMG11, readback, Fast Relay On Setpoint,                  BL04I-VA-IMG-11:FRLY:SP,        =pv("BL04I-VA-IMG-11:FRLY:SP.DESC")

# % gui, IMG11, demand,   Pro Setpoint,                            BL04I-VA-IMG-11:PRO:OUTSP,      =pv("BL04I-VA-IMG-11:PRO:SP.DESC")
# % gui, IMG11, demand,   Relay 1 On Setpoint,                     BL04I-VA-IMG-11:RLY1:SETSP,     =pv("BL04I-VA-IMG-11:RLY1:SP.DESC")
# % gui, IMG11, demand,   Relay 1 Off Setpoint,                    BL04I-VA-IMG-11:RLY1:SETSPOFF,  =pv("BL04I-VA-IMG-11:RLY1:SPOFF.DESC")
# % gui, IMG11, demand,   Relay 2 On Setpoint,                     BL04I-VA-IMG-11:RLY2:SETSP,     =pv("BL04I-VA-IMG-11:RLY2:SP.DESC")
# % gui, IMG11, demand,   Relay 2 Off Setpoint,                    BL04I-VA-IMG-11:RLY2:SETSPOFF,  =pv("BL04I-VA-IMG-11:RLY2:SPOFF.DESC")
# % gui, IMG11, demand,   Relay 3 On Setpoint,                     BL04I-VA-IMG-11:RLY3:SETSP,     =pv("BL04I-VA-IMG-11:RLY3:SP.DESC")
# % gui, IMG11, demand,   Relay 3 Off Setpoint,                    BL04I-VA-IMG-11:RLY3:SETSPOFF,  =pv("BL04I-VA-IMG-11:RLY3:SPOFF.DESC")
# % gui, IMG11, demand,   Relay 4 On Setpoint,                     BL04I-VA-IMG-11:RLY4:SETSP,     =pv("BL04I-VA-IMG-11:RLY4:SP.DESC")
# 
# Cold Cathode Enable
#
#% archiver 10 Monitor
#% controldesk Pressure scon
#
record(bo, "BL04I-VA-IMG-11:CCHV") {
  field(DESC, "Cold Cathode Enable")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol ccenable(2) ty_42_0 0")
  field(FLNK, "BL04I-VA-IMG-11:STA")
  field(ZNAM, "Off")
  field(ONAM, "On")
}

record(bi, "BL04I-VA-IMG-11:SWITCHING") {
  field(DESC, "Switching")
  field(PINI, "YES")
  field(INP, "0")
  field(ONAM, "Switching")
}

################################################################################
# Status
#
#% archiver 10 Monitor
#% controldesk Pressure smon
#
record(mbbi, "BL04I-VA-IMG-11:STA") {
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol status(2) ty_42_0 0")
  field(DESC, "Status")
  field(SCAN, "1 second")
  field(FLNK, "BL04I-VA-IMG-11:PDIS")
  field(ZRST, "OK")
  field(ONST, "OK")
  field(TWST, "Above Range")
  field(THST, "At Atmosphere")
  field(FRST, "Low Emission")
  field(FVST, "Filament Off")
  field(SXST, "HV Off")
  field(SVST, "Startup Delay")
  field(EIST, "Below Range")
  field(NIST, "Controlled")
  field(TEST, "Protected State")
  field(ELST, "No Gauge")
  field(TVST, "Not Connected")
  field(TTST, "Wrong Gauge")
  field(FTST, "Bad Command")
  field(FFST, "Locked Out")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "MINOR")
  field(THSV, "MINOR")
  field(FRSV, "MAJOR")
  field(FVSV, "MAJOR")
  field(SXSV, "MAJOR")
  field(SVSV, "MINOR")
  field(EISV, "NO_ALARM")
  field(NISV, "MINOR")
  field(TESV, "MINOR")
  field(ELSV, "MAJOR")
  field(TVSV, "MAJOR")
  field(TTSV, "MAJOR")
  field(FTSV, "MAJOR")
  field(FFSV, "MAJOR")
}

#############################################################################
# Pressure
# 
# % archiver 1 Monitor
# % controldesk Pressure readback
record(ai, "BL04I-VA-IMG-11:P") {
  field(DESC, "Pressure")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol pressure(2) ty_42_0 0")
  field(FLNK, "BL04I-VA-IMG-11:PLOG")
  field(EGU, "mbar")
  field(PREC, "11")
  field(HOPR, "0.01")
  field(LOPR, "1.0E-11")
  field(SDIS, "BL04I-VA-IMG-11:PDIS")
  field(DISS, "INVALID")
}

record(calcout, "BL04I-VA-IMG-11:ADEL") {
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-IMG-11:P.ADEL")
  field(INPA, "BL04I-VA-IMG-11:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-IMG-11:PLOG") {
  field(DESC, "log Pressure")
  field(EGU, "log")
  field(CALC, "LOG(A)")
  field(INPA, "BL04I-VA-IMG-11:P MS")
  field(FLNK, "BL04I-VA-IMG-11:PMAX")
  field(HOPR, "-2")
  field(LOPR, "-11")
  field(ADEL, "0.025")
}
record(ai, "BL04I-VA-IMG-11:PMAX")
{
    field(DESC, "Max Pressure")
    field(INP,  "BL04I-VA-IMG-11:P MS")
    field(FLNK, "BL04I-VA-IMG-11:PMIN")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
record(ai, "BL04I-VA-IMG-11:PMIN")
{
    field(DESC, "Min Pressure")
    field(INP,  "BL04I-VA-IMG-11:P MS")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
################################################################################
# Control - IMG Enable
#
record(ao, "BL04I-VA-IMG-11:CTL:SETSP") {
  field(DESC, "IMG Enable")
  field(FLNK, "BL04I-VA-IMG-11:CTL:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(DRVH, "9.5e-1")
  field(DRVL, "2.7e-3")
  field(DOL, "1.0e-2")
}

record(mbbo, "BL04I-VA-IMG-11:CTL:ENABLE") {
  field(DESC, "Enable Control Setpoint")
  field(FLNK, "BL04I-VA-IMG-11:CTL:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  field(SDIS, "BL04I-VA-IMG-11:CTL:ILKSETSP:NOWRITE")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-11:CTL:SEQ") {
  field(DESC, "Sequence Control Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-IMG-11:CTL:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-IMG-11:CTL:DIS PP")
  field(DOL2, "BL04I-VA-IMG-11:CTL:SETSP")
  field(LNK2, "BL04I-VA-IMG-11:CTL:OUTSP PP")
  field(SDIS, "BL04I-VA-IMG-11:CTL:ILKSETSP:NOWRITE")
}

record(ai, "BL04I-VA-IMG-11:CTL:SP") 
  {
  field(DESC, "IMG Enable")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(2,CTL,BL04I-VA-IMG-11) ty_42_0 0")
  field(SCAN, "1 second")
  field(PINI, "YES")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(HIHI, "9.6e-1")
  field(LOLO, "2.6e-3")
  field(HIGH, "1.1e-2")
  field(LOW, "9.0e-3")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
  }

record(ao, "BL04I-VA-IMG-11:CTL:OUTSP") 
    {
    field(DESC, "Output Control Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-11:CTL:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(2,CTL,BL04I-VA-IMG-11) ty_42_0 0")
    }

record(bo, "BL04I-VA-IMG-11:CTL:DIS") 
  {
  field(DESC, "Disable Control Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(2,CTL) ty_42_0 0")
  }

# Get the implied disabled state of the CTL:SETSP
# if CTL:SP returns a non-zero value, then it is not disabled
# and it's in the mode "I/L Operating"
#
record(calcout, "BL04I-VA-IMG-11:CTL:GETDISCALC")
  {
  field(DESC, "Read Disable Setpoint")
  field(SCAN, "1 second")
  field(OUT, "BL04I-VA-IMG-11:CTL:GETDIS")
  field(INPA, "BL04I-VA-IMG-11:CTL:SP.VAL PP")
  field(CALC, "A<1e-10?0:1")
  field(FLNK, "BL04I-VA-IMG-11:CTL:GETDIS")
  }
# Convert the above disabled state to mbbi
record(mbbi, "BL04I-VA-IMG-11:CTL:GETDIS") 
  {
  field(DESC, "Read Disable Setpoint")
  field(SCAN, "Passive")
  field(INP, "BL04I-VA-IMG-11:CTL:GETDISCALC")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  }

################################################################################
# Protection - IMG Overpressure
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-IMG-11:PRO:SETSP") {
  field(DESC, "IMG Overpressure")
  field(FLNK, "BL04I-VA-IMG-11:PRO:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.0e-2")
  field(LOPR, "1.3e-5")
  field(DRVH, "1.0e-2")
  field(DRVL, "1.3e-5")
  field(DOL, "5.0e-4")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-IMG-11:PRO:ENABLE") {
  field(DESC, "Enable Protection Setpoint")
  field(FLNK, "BL04I-VA-IMG-11:PRO:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-11:PRO:SEQ") 
    {
    field(DESC, "Sequence Protection Setpoint")
    field(SELM, "Specified")
    field(SELL, "BL04I-VA-IMG-11:PRO:ENABLE.RVAL")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-IMG-11:PRO:DIS PP")
    field(DOL2, "BL04I-VA-IMG-11:PRO:SETSP")
    field(LNK2, "BL04I-VA-IMG-11:PRO:OUTSP PP")
    }

#
#% archiver 10 Monitor
#% controldesk IMG Overpressure readback
#
record(ai, "BL04I-VA-IMG-11:PRO:SP") {
  field(DESC, "IMG Overpressure")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(2,PRO,BL04I-VA-IMG-11) ty_42_0 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.0e-2")
  field(LOPR, "1.3e-5")
  field(HIHI, "1.1e-2")
  field(LOLO, "1.2e-5")
  field(HIGH, "5.1e-4")
  field(LOW, "4.9e-4")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

record(ao, "BL04I-VA-IMG-11:PRO:OUTSP") 
    {
    field(DESC, "Output Protection Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-11:PRO:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(2,PRO,BL04I-VA-IMG-11) ty_42_0 0")
    }

record(bo, "BL04I-VA-IMG-11:PRO:DIS") {
  field(DESC, "Disable Protection Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(2,PRO) ty_42_0 0")
}

################################################################################
# Relay - Valve Interlock
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-IMG-11:RLY:SETSP") {
  field(DESC, "Valve Interlock")
  field(FLNK, "BL04I-VA-IMG-11:RLY:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(DRVH, "1.2e-2")
  field(DRVL, "2.7e-10")
  field(DOL, "1.0e-6")
  field(SDIS, "BL04I-VA-IMG-11:RLY:ILKSETSP:NOWRITE")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-IMG-11:RLY:ENABLE") {
  field(DESC, "Enable Relay Setpoint")
  field(FLNK, "BL04I-VA-IMG-11:RLY:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-11:RLY:SEQ") {
  field(DESC, "Sequence Relay Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-IMG-11:RLY:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-IMG-11:RLY:DIS PP")
  field(DOL2, "BL04I-VA-IMG-11:RLY:SETSP")
  field(LNK2, "BL04I-VA-IMG-11:RLY:OUTSP PP")
}

#
#% archiver 10 Monitor
#% controldesk Valve Interlock readback
#
record(ai, "BL04I-VA-IMG-11:RLY:SP") {
  field(DESC, "Valve Interlock")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(2,RLY,BL04I-VA-IMG-11) ty_42_0 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(HIHI, "1.3e-2")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-6")
  field(LOW, "9.0e-7")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

record(ao, "BL04I-VA-IMG-11:RLY:OUTSP") 
    {
    field(DESC, "Output Relay Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-11:RLY:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(2,RLY,BL04I-VA-IMG-11) ty_42_0 0")
    }

record(bo, "BL04I-VA-IMG-11:RLY:DIS") 
    {
    field(DESC, "Disable Relay Setpoint")
    field(DTYP, "stream")
    field(OUT, "@mks937a.protocol dissp(2,RLY) ty_42_0 0")
    }

################################################################################
# Relay 2 (Chanel A Only) - MPS Interlock
#
record(calc, "BL04I-VA-IMG-11:RLA:EXISTS") {
  field(DESC, "Relay Exists")
  field(CALC, "A=B?0:1")
  field(INPA, "2")
  field(INPB, "1")
  field(PINI, "YES")
}

#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-IMG-11:RLA:SETSP") {
  field(DESC, "MPS Interlock")
  field(FLNK, "BL04I-VA-IMG-11:RLA:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(DRVH, "1.2e-2")
  field(DRVL, "2.7e-10")
  field(DISA, "2")
  field(DOL, "1.0e-7")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-IMG-11:RLA:ENABLE") {
  field(DESC, "Enable Relay Setpoint")
  field(FLNK, "BL04I-VA-IMG-11:RLA:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DISA, "2")
  field(DOL, "1")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-11:RLA:SEQ") {
  field(DESC, "Sequence Relay Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-IMG-11:RLA:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-IMG-11:RLA:DIS PP")
  field(DOL2, "BL04I-VA-IMG-11:RLA:SETSP")
  field(LNK2, "BL04I-VA-IMG-11:RLA:OUTSP PP")
  field(DISA, "2")
}

#
#% archiver 10 Monitor
#% controldesk MPS Interlock readback
#
record(ai, "BL04I-VA-IMG-11:RLA:SP") {
  field(DESC, "MPS Interlock")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(3,RLY,BL04I-VA-IMG-11) ty_42_0 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(HIHI, "1.3e-2")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-7")
  field(LOW, "9.0e-8")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
  field(DISA, "2")
}

record(ao, "BL04I-VA-IMG-11:RLA:OUTSP") 
    {
    field(DESC, "Output Relay Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-11:RLA:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(3,RLY,BL04I-VA-IMG-11) ty_42_0 0")
    field(DISA, "2")
    }

record(bo, "BL04I-VA-IMG-11:RLA:DIS") {
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(3,RLY) ty_42_0 0")
  field(DISA, "2")
}

record(calc, "BL04I-VA-IMG-11:PDIS") {
  field(PHAS, "1")
  field(CALC, "(A>1)?1:0")
  field(INPA, "BL04I-VA-IMG-11:STA")
  field(FLNK, "BL04I-VA-IMG-11:P")
}



record(bi, "BL04I-VA-IMG-11:OFFWARN") 
{
  field(DESC, "Warning for OFF button")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Warning off")
  field(ONAM, "Warning on")
}

#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-IMG-11:PRO:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume an empty INP and do nothing.
#
# NB: These four records are identical and could have been instantiated via
#     alias. The names are for compatibility with the macros in the EDM screens
#     in which they are referenced.
#
record(bi, "BL04I-VA-IMG-11:PRO:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-11:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-IMG-11:CTL:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-11:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-IMG-11:RLA:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-11:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-IMG-11:RLY:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-11:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise just once, records that used to use PINI
# This is to ensure that the autoSR PV refered by ilk_write_access_pv
# is correctly established before any other record processing, to potentially
# avoid overwriting setpoints at IOC startup.
#
record(bo, "BL04I-VA-IMG-11:CTL:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-IMG-11:CTL:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-IMG-11:CTL:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-IMG-11:CTL:ENABLE")
    field(LNK2, "BL04I-VA-IMG-11:PRO:ENABLE")
    field(LNK3, "BL04I-VA-IMG-11:RLY:ENABLE")
    field(LNK4, "BL04I-VA-IMG-11:RLA:ENABLE")
    field(LNK5, "BL04I-VA-IMG-11:CTL:INITSETSPSDIS")
    field(SELM, "All")
}

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-IMG-11:ERROR")
    {
    field(DESC, "Last error message")
    field(INP, "")
    field(PINI, "YES")
    }


#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937aImg.db
#% macro, __doc__, Template database for an inverted magnetron guage connected 
# to one channel of an MKS937A Multi-Sensor System 
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# IG Note: Historically, some of these records have DISA field switched on 1
#          The reason seems to be to disable record processing for RLA when that interlock
#          is not relevant to the gauge - i.e. IMG-03 would typically not have an MPS interlock
#          so should switch it off. I think this is a bit of a flakey way to do it, as any exceptional
#          cases would not fit this method. Probably needs re-working sometime.
#          IJG 12 August 2014
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, channel, MKS 937A channel number (1-4)
#
# optional substitutions:
#% macro, name,        Object name, and gui association name
#% macro, ctlsp_level, The desired control setpoint value.
#% macro, ctlsp_drvh,  The DRVH field on control setpoint records 
#                      (limits max value of control setpoint)
#% macro, ctlsp_drvl,  The DRVL field on control setpoint records. 
#                      (limits min value of control setpoint)
#% macro, ctlsp_hopr,  The HOPR field on control setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, ctlsp_lopr,  The LOPR field on control setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, ctlsp_hihi,  The HIHI alarm field on the control setpoint record.
#% macro, ctlsp_lolo,  The LOLO alarm field on the control setpoint record.
#% macro, ctlsp_high,  The HIGH alarm field on the control setpoint record.
#% macro, ctlsp_low ,  The LOW alarm field on the control setpoint record.
#% macro, ctlsp_desc,  The DESC field on the control setpoint record.
#
#% macro, prosp_level, The desired protection setpoint value.
#% macro, prosp_drvh,  The DRVH field on protection setpoint records 
#                      (limits max value of protection setpoint)
#% macro, prosp_drvl,  The DRVL field on protection setpoint records. 
#                      (limits min value of protection setpoint)
#% macro, prosp_hopr,  The HOPR field on protection setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, prosp_lopr,  The LOPR field on protection setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, prosp_hihi,  The HIHI alarm field on the protection setpoint record.
#% macro, prosp_lolo,  The LOLO alarm field on the protection setpoint record.
#% macro, prosp_high,  The HIGH alarm field on the protection setpoint record.
#% macro, prosp_low ,  The LOW alarm field on the protection setpoint record.
#% macro, prosp_desc,  The DESC field on the protection setpoint record 
#                      (appears as a label on the Img EDM screen).
#
#% macro, rlysp_level, The desired relay setpoint value.
#% macro, rlysp_drvh,  The DRVH field on relay setpdoint records 
#                      (limits max value of relay setpoint)
#% macro, rlysp_drvl,  The DRVL field on relay setpoint records. 
#                      (limits min value of relay setpoint)
#% macro, rlysp_hopr,  The HOPR field on relay setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, rlysp_lopr,  The LOPR field on relay setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, rlysp_hihi,  The HIHI alarm field on the relay setpoint record.
#% macro, rlysp_lolo,  The LOLO alarm field on the relay setpoint record.
#% macro, rlysp_high,  The HIGH alarm field on the relay setpoint record.
#% macro, rlysp_low ,  The LOW alarm field on the relay setpoint record.
#% macro, rlysp_desc,  The DESC field on the relay setpoint record 
#                      (appears as a label on the Img EDM screen).
#
#% macro, rlasp_drvh,  The DRVH field on second relay setpoint records 
#                      (limits max value of second relay setpoint)
#% macro, rlasp_drvl,  The DRVL field on second relay setpoint records. 
#                      (limits min value of second relay setpoint)
#% macro, rlasp_hopr,  The HOPR field on second relay setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, rlasp_lopr,  The LOPR field on second relay setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, rlasp_hihi,  The HIHI alarm field on the second relay setpoint record.
#% macro, rlasp_lolo,  The LOLO alarm field on the second relay setpoint record.
#% macro, rlasp_high,  The HIGH alarm field on the second relay setpoint record.
#% macro, rlasp_low ,  The LOW alarm field on the second relay setpoint record.
#% macro, rlasp_desc,  The DESC field on the second relay setpoint record.
#% macro, offwarn,     Flag to display a warning that switching off the IMG could trip the beam
#% macro, ilk_write_access_pv, bi record to allow (0) of inhibit (1) gauge interlock setpoint overwrite. Default is local record forcing 'Allow'.
################################################################################

# This associates an edm screen with the template
# % gui, IMG03, edm, mks937aImg.edl, device=BL04I-VA-IMG-03

# This associates BOY screens with the template
# % gui, IMG03, boydetail, mks937aApp_opi/img_detail.opi, device=BL04I-VA-IMG-03, desc=BL04I-VA-IMG-03, name=IMG03
# % gui, IMG03, boyembed, mks937aApp_opi/img_embed_box.opi, device=BL04I-VA-IMG-03, desc=BL04I-VA-IMG-03, name=IMG03
# % gui, IMG03, boyembed, mks937aApp_opi/img_embed.opi, device=BL04I-VA-IMG-03, desc=BL04I-VA-IMG-03, name=IMG03

# These define what PVs a valve detail screen should contain
# % gui, IMG03, readback, Pressure,                                BL04I-VA-IMG-03:P
# % gui, IMG03, readback, Status,                                  BL04I-VA-IMG-03:STA
# % gui, IMG03, readback, Gauge Setpoint Write,                    BL04I-VA-IMG-03:PRO:ILKSETSP:NOWRITE
# % gui, IMG03, readback, Relay 1 on SetPoint for Summary,         BL04I-VA-IMG-03:RLY1:SP,        =pv("BL04I-VA-IMG-03:RLY1:SP.DESC")
# % gui, IMG03, readback, Relay 1 off SetPoint for Summary,        BL04I-VA-IMG-03:RLY1:SPOFF,     =pv("BL04I-VA-IMG-03:RLY1:SPOFF.DESC")
# % gui, IMG03, readback, Relay 2 on SetPoint for Summary,         BL04I-VA-IMG-03:RLY2:SP,        =pv("BL04I-VA-IMG-03:RLY2:SP.DESC")
# % gui, IMG03, readback, Relay 3 on SetPoint for Summary,         BL04I-VA-IMG-03:RLY3:SP,        =pv("BL04I-VA-IMG-03:RLY3:SP.DESC")
## TODO The below gives us feedback on what the state actually is - without this you get the current demand
## (as per differences between EDM and CSS enum menus)
# % gui, IMG03, readback, Cold Cathode,                            BL04I-VA-IMG-03:ISENABLED
# % gui, IMG03, enum, Cold Cathode,                                BL04I-VA-IMG-03:CCHV

# % gui, IMG03, readback, CTL SP Controlling Gauge,                BL04I-VA-IMG-03:CTL:SETCCS,     =concat(pv("BL04I-VA-IMG-03:CTL:SP.DESC")," Gauge")
# % gui, IMG03, readback, CTL SP MODE,                             BL04I-VA-IMG-03:CTL:SETMODE,    =concat(pv("BL04I-VA-IMG-03:CTL:SP.DESC")," Mode")
# % gui, IMG03, readback, Pro Setpoint,                            BL04I-VA-IMG-03:PRO:SP,         =pv("BL04I-VA-IMG-03:PRO:SP.DESC")
# % gui, IMG03, readback, Relay 1 On Setpoint,                     BL04I-VA-IMG-03:RLY1:SP,        =pv("BL04I-VA-IMG-03:RLY1:SP.DESC")
# % gui, IMG03, readback, Relay 1 Off Setpoint,                    BL04I-VA-IMG-03:RLY1:SPOFF,     =pv("BL04I-VA-IMG-03:RLY1:SPOFF.DESC")
# % gui, IMG03, readback, Relay 2 On Setpoint,                     BL04I-VA-IMG-03:RLY2:SP,        =pv("BL04I-VA-IMG-03:RLY2:SP.DESC")
# % gui, IMG03, readback, Relay 2 Off Setpoint,                    BL04I-VA-IMG-03:RLY2:SPOFF,     =pv("BL04I-VA-IMG-03:RLY2:SPOFF.DESC")
# % gui, IMG03, readback, Relay 3 On Setpoint,                     BL04I-VA-IMG-03:RLY3:SP,        =pv("BL04I-VA-IMG-03:RLY3:SP.DESC")
# % gui, IMG03, readback, Relay 3 Off Setpoint,                    BL04I-VA-IMG-03:RLY3:SPOFF,     =pv("BL04I-VA-IMG-03:RLY3:SPOFF.DESC")
# % gui, IMG03, readback, Relay 4 On Setpoint,                     BL04I-VA-IMG-03:RLY4:SP,        =pv("BL04I-VA-IMG-03:RLY4:SP.DESC")
# % gui, IMG03, readback, Relay 4 Off Setpoint,                    BL04I-VA-IMG-03:RLY4:SPOFF,     =pv("BL04I-VA-IMG-03:RLY4:SPOFF.DESC")
# % gui, IMG03, readback, Fast Relay On Setpoint,                  BL04I-VA-IMG-03:FRLY:SP,        =pv("BL04I-VA-IMG-03:FRLY:SP.DESC")

# % gui, IMG03, demand,   Pro Setpoint,                            BL04I-VA-IMG-03:PRO:OUTSP,      =pv("BL04I-VA-IMG-03:PRO:SP.DESC")
# % gui, IMG03, demand,   Relay 1 On Setpoint,                     BL04I-VA-IMG-03:RLY1:SETSP,     =pv("BL04I-VA-IMG-03:RLY1:SP.DESC")
# % gui, IMG03, demand,   Relay 1 Off Setpoint,                    BL04I-VA-IMG-03:RLY1:SETSPOFF,  =pv("BL04I-VA-IMG-03:RLY1:SPOFF.DESC")
# % gui, IMG03, demand,   Relay 2 On Setpoint,                     BL04I-VA-IMG-03:RLY2:SETSP,     =pv("BL04I-VA-IMG-03:RLY2:SP.DESC")
# % gui, IMG03, demand,   Relay 2 Off Setpoint,                    BL04I-VA-IMG-03:RLY2:SETSPOFF,  =pv("BL04I-VA-IMG-03:RLY2:SPOFF.DESC")
# % gui, IMG03, demand,   Relay 3 On Setpoint,                     BL04I-VA-IMG-03:RLY3:SETSP,     =pv("BL04I-VA-IMG-03:RLY3:SP.DESC")
# % gui, IMG03, demand,   Relay 3 Off Setpoint,                    BL04I-VA-IMG-03:RLY3:SETSPOFF,  =pv("BL04I-VA-IMG-03:RLY3:SPOFF.DESC")
# % gui, IMG03, demand,   Relay 4 On Setpoint,                     BL04I-VA-IMG-03:RLY4:SETSP,     =pv("BL04I-VA-IMG-03:RLY4:SP.DESC")
# 
# Cold Cathode Enable
#
#% archiver 10 Monitor
#% controldesk Pressure scon
#
record(bo, "BL04I-VA-IMG-03:CCHV") {
  field(DESC, "Cold Cathode Enable")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol ccenable(1) ty_40_6 0")
  field(FLNK, "BL04I-VA-IMG-03:STA")
  field(ZNAM, "Off")
  field(ONAM, "On")
}

record(bi, "BL04I-VA-IMG-03:SWITCHING") {
  field(DESC, "Switching")
  field(PINI, "YES")
  field(INP, "0")
  field(ONAM, "Switching")
}

################################################################################
# Status
#
#% archiver 10 Monitor
#% controldesk Pressure smon
#
record(mbbi, "BL04I-VA-IMG-03:STA") {
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol status(1) ty_40_6 0")
  field(DESC, "Status")
  field(SCAN, "1 second")
  field(FLNK, "BL04I-VA-IMG-03:PDIS")
  field(ZRST, "OK")
  field(ONST, "OK")
  field(TWST, "Above Range")
  field(THST, "At Atmosphere")
  field(FRST, "Low Emission")
  field(FVST, "Filament Off")
  field(SXST, "HV Off")
  field(SVST, "Startup Delay")
  field(EIST, "Below Range")
  field(NIST, "Controlled")
  field(TEST, "Protected State")
  field(ELST, "No Gauge")
  field(TVST, "Not Connected")
  field(TTST, "Wrong Gauge")
  field(FTST, "Bad Command")
  field(FFST, "Locked Out")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "MINOR")
  field(THSV, "MINOR")
  field(FRSV, "MAJOR")
  field(FVSV, "MAJOR")
  field(SXSV, "MAJOR")
  field(SVSV, "MINOR")
  field(EISV, "NO_ALARM")
  field(NISV, "MINOR")
  field(TESV, "MINOR")
  field(ELSV, "MAJOR")
  field(TVSV, "MAJOR")
  field(TTSV, "MAJOR")
  field(FTSV, "MAJOR")
  field(FFSV, "MAJOR")
}

#############################################################################
# Pressure
# 
# % archiver 1 Monitor
# % controldesk Pressure readback
record(ai, "BL04I-VA-IMG-03:P") {
  field(DESC, "Pressure")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol pressure(1) ty_40_6 0")
  field(FLNK, "BL04I-VA-IMG-03:PLOG")
  field(EGU, "mbar")
  field(PREC, "11")
  field(HOPR, "0.01")
  field(LOPR, "1.0E-11")
  field(SDIS, "BL04I-VA-IMG-03:PDIS")
  field(DISS, "INVALID")
}

record(calcout, "BL04I-VA-IMG-03:ADEL") {
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-IMG-03:P.ADEL")
  field(INPA, "BL04I-VA-IMG-03:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-IMG-03:PLOG") {
  field(DESC, "log Pressure")
  field(EGU, "log")
  field(CALC, "LOG(A)")
  field(INPA, "BL04I-VA-IMG-03:P MS")
  field(FLNK, "BL04I-VA-IMG-03:PMAX")
  field(HOPR, "-2")
  field(LOPR, "-11")
  field(ADEL, "0.025")
}
record(ai, "BL04I-VA-IMG-03:PMAX")
{
    field(DESC, "Max Pressure")
    field(INP,  "BL04I-VA-IMG-03:P MS")
    field(FLNK, "BL04I-VA-IMG-03:PMIN")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
record(ai, "BL04I-VA-IMG-03:PMIN")
{
    field(DESC, "Min Pressure")
    field(INP,  "BL04I-VA-IMG-03:P MS")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
################################################################################
# Control - IMG Enable
#
record(ao, "BL04I-VA-IMG-03:CTL:SETSP") {
  field(DESC, "IMG Enable")
  field(FLNK, "BL04I-VA-IMG-03:CTL:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(DRVH, "9.5e-1")
  field(DRVL, "2.7e-3")
  field(DOL, "1.0e-2")
}

record(mbbo, "BL04I-VA-IMG-03:CTL:ENABLE") {
  field(DESC, "Enable Control Setpoint")
  field(FLNK, "BL04I-VA-IMG-03:CTL:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  field(SDIS, "BL04I-VA-IMG-03:CTL:ILKSETSP:NOWRITE")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-03:CTL:SEQ") {
  field(DESC, "Sequence Control Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-IMG-03:CTL:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-IMG-03:CTL:DIS PP")
  field(DOL2, "BL04I-VA-IMG-03:CTL:SETSP")
  field(LNK2, "BL04I-VA-IMG-03:CTL:OUTSP PP")
  field(SDIS, "BL04I-VA-IMG-03:CTL:ILKSETSP:NOWRITE")
}

record(ai, "BL04I-VA-IMG-03:CTL:SP") 
  {
  field(DESC, "IMG Enable")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(1,CTL,BL04I-VA-IMG-03) ty_40_6 0")
  field(SCAN, "1 second")
  field(PINI, "YES")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(HIHI, "9.6e-1")
  field(LOLO, "2.6e-3")
  field(HIGH, "1.1e-2")
  field(LOW, "9.0e-3")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
  }

record(ao, "BL04I-VA-IMG-03:CTL:OUTSP") 
    {
    field(DESC, "Output Control Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-03:CTL:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(1,CTL,BL04I-VA-IMG-03) ty_40_6 0")
    }

record(bo, "BL04I-VA-IMG-03:CTL:DIS") 
  {
  field(DESC, "Disable Control Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(1,CTL) ty_40_6 0")
  }

# Get the implied disabled state of the CTL:SETSP
# if CTL:SP returns a non-zero value, then it is not disabled
# and it's in the mode "I/L Operating"
#
record(calcout, "BL04I-VA-IMG-03:CTL:GETDISCALC")
  {
  field(DESC, "Read Disable Setpoint")
  field(SCAN, "1 second")
  field(OUT, "BL04I-VA-IMG-03:CTL:GETDIS")
  field(INPA, "BL04I-VA-IMG-03:CTL:SP.VAL PP")
  field(CALC, "A<1e-10?0:1")
  field(FLNK, "BL04I-VA-IMG-03:CTL:GETDIS")
  }
# Convert the above disabled state to mbbi
record(mbbi, "BL04I-VA-IMG-03:CTL:GETDIS") 
  {
  field(DESC, "Read Disable Setpoint")
  field(SCAN, "Passive")
  field(INP, "BL04I-VA-IMG-03:CTL:GETDISCALC")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  }

################################################################################
# Protection - IMG Overpressure
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-IMG-03:PRO:SETSP") {
  field(DESC, "IMG Overpressure")
  field(FLNK, "BL04I-VA-IMG-03:PRO:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.0e-2")
  field(LOPR, "1.3e-5")
  field(DRVH, "1.0e-2")
  field(DRVL, "1.3e-5")
  field(DOL, "5.0e-4")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-IMG-03:PRO:ENABLE") {
  field(DESC, "Enable Protection Setpoint")
  field(FLNK, "BL04I-VA-IMG-03:PRO:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-03:PRO:SEQ") 
    {
    field(DESC, "Sequence Protection Setpoint")
    field(SELM, "Specified")
    field(SELL, "BL04I-VA-IMG-03:PRO:ENABLE.RVAL")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-IMG-03:PRO:DIS PP")
    field(DOL2, "BL04I-VA-IMG-03:PRO:SETSP")
    field(LNK2, "BL04I-VA-IMG-03:PRO:OUTSP PP")
    }

#
#% archiver 10 Monitor
#% controldesk IMG Overpressure readback
#
record(ai, "BL04I-VA-IMG-03:PRO:SP") {
  field(DESC, "IMG Overpressure")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(1,PRO,BL04I-VA-IMG-03) ty_40_6 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.0e-2")
  field(LOPR, "1.3e-5")
  field(HIHI, "1.1e-2")
  field(LOLO, "1.2e-5")
  field(HIGH, "5.1e-4")
  field(LOW, "4.9e-4")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

record(ao, "BL04I-VA-IMG-03:PRO:OUTSP") 
    {
    field(DESC, "Output Protection Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-03:PRO:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(1,PRO,BL04I-VA-IMG-03) ty_40_6 0")
    }

record(bo, "BL04I-VA-IMG-03:PRO:DIS") {
  field(DESC, "Disable Protection Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(1,PRO) ty_40_6 0")
}

################################################################################
# Relay - Valve Interlock
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-IMG-03:RLY:SETSP") {
  field(DESC, "Valve Interlock")
  field(FLNK, "BL04I-VA-IMG-03:RLY:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(DRVH, "1.2e-2")
  field(DRVL, "2.7e-10")
  field(DOL, "1.0e-6")
  field(SDIS, "BL04I-VA-IMG-03:RLY:ILKSETSP:NOWRITE")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-IMG-03:RLY:ENABLE") {
  field(DESC, "Enable Relay Setpoint")
  field(FLNK, "BL04I-VA-IMG-03:RLY:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-03:RLY:SEQ") {
  field(DESC, "Sequence Relay Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-IMG-03:RLY:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-IMG-03:RLY:DIS PP")
  field(DOL2, "BL04I-VA-IMG-03:RLY:SETSP")
  field(LNK2, "BL04I-VA-IMG-03:RLY:OUTSP PP")
}

#
#% archiver 10 Monitor
#% controldesk Valve Interlock readback
#
record(ai, "BL04I-VA-IMG-03:RLY:SP") {
  field(DESC, "Valve Interlock")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(1,RLY,BL04I-VA-IMG-03) ty_40_6 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(HIHI, "1.3e-2")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-6")
  field(LOW, "9.0e-7")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

record(ao, "BL04I-VA-IMG-03:RLY:OUTSP") 
    {
    field(DESC, "Output Relay Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-03:RLY:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(1,RLY,BL04I-VA-IMG-03) ty_40_6 0")
    }

record(bo, "BL04I-VA-IMG-03:RLY:DIS") 
    {
    field(DESC, "Disable Relay Setpoint")
    field(DTYP, "stream")
    field(OUT, "@mks937a.protocol dissp(1,RLY) ty_40_6 0")
    }

################################################################################
# Relay 2 (Chanel A Only) - MPS Interlock
#
record(calc, "BL04I-VA-IMG-03:RLA:EXISTS") {
  field(DESC, "Relay Exists")
  field(CALC, "A=B?0:1")
  field(INPA, "1")
  field(INPB, "1")
  field(PINI, "YES")
}

#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-IMG-03:RLA:SETSP") {
  field(DESC, "MPS Interlock")
  field(FLNK, "BL04I-VA-IMG-03:RLA:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(DRVH, "1.2e-2")
  field(DRVL, "2.7e-10")
  field(DISA, "1")
  field(DOL, "1.0e-7")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-IMG-03:RLA:ENABLE") {
  field(DESC, "Enable Relay Setpoint")
  field(FLNK, "BL04I-VA-IMG-03:RLA:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DISA, "1")
  field(DOL, "1")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-03:RLA:SEQ") {
  field(DESC, "Sequence Relay Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-IMG-03:RLA:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-IMG-03:RLA:DIS PP")
  field(DOL2, "BL04I-VA-IMG-03:RLA:SETSP")
  field(LNK2, "BL04I-VA-IMG-03:RLA:OUTSP PP")
  field(DISA, "1")
}

#
#% archiver 10 Monitor
#% controldesk MPS Interlock readback
#
record(ai, "BL04I-VA-IMG-03:RLA:SP") {
  field(DESC, "MPS Interlock")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(3,RLY,BL04I-VA-IMG-03) ty_40_6 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(HIHI, "1.3e-2")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-7")
  field(LOW, "9.0e-8")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
  field(DISA, "1")
}

record(ao, "BL04I-VA-IMG-03:RLA:OUTSP") 
    {
    field(DESC, "Output Relay Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-03:RLA:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(3,RLY,BL04I-VA-IMG-03) ty_40_6 0")
    field(DISA, "1")
    }

record(bo, "BL04I-VA-IMG-03:RLA:DIS") {
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(3,RLY) ty_40_6 0")
  field(DISA, "1")
}

record(calc, "BL04I-VA-IMG-03:PDIS") {
  field(PHAS, "1")
  field(CALC, "(A>1)?1:0")
  field(INPA, "BL04I-VA-IMG-03:STA")
  field(FLNK, "BL04I-VA-IMG-03:P")
}



record(bi, "BL04I-VA-IMG-03:OFFWARN") 
{
  field(DESC, "Warning for OFF button")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Warning off")
  field(ONAM, "Warning on")
}

#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-IMG-03:PRO:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume an empty INP and do nothing.
#
# NB: These four records are identical and could have been instantiated via
#     alias. The names are for compatibility with the macros in the EDM screens
#     in which they are referenced.
#
record(bi, "BL04I-VA-IMG-03:PRO:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-03:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-IMG-03:CTL:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-03:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-IMG-03:RLA:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-03:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-IMG-03:RLY:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-03:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise just once, records that used to use PINI
# This is to ensure that the autoSR PV refered by ilk_write_access_pv
# is correctly established before any other record processing, to potentially
# avoid overwriting setpoints at IOC startup.
#
record(bo, "BL04I-VA-IMG-03:CTL:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-IMG-03:CTL:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-IMG-03:CTL:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-IMG-03:CTL:ENABLE")
    field(LNK2, "BL04I-VA-IMG-03:PRO:ENABLE")
    field(LNK3, "BL04I-VA-IMG-03:RLY:ENABLE")
    field(LNK4, "BL04I-VA-IMG-03:RLA:ENABLE")
    field(LNK5, "BL04I-VA-IMG-03:CTL:INITSETSPSDIS")
    field(SELM, "All")
}

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-IMG-03:ERROR")
    {
    field(DESC, "Last error message")
    field(INP, "")
    field(PINI, "YES")
    }


#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937aImg.db
#% macro, __doc__, Template database for an inverted magnetron guage connected 
# to one channel of an MKS937A Multi-Sensor System 
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# IG Note: Historically, some of these records have DISA field switched on 2
#          The reason seems to be to disable record processing for RLA when that interlock
#          is not relevant to the gauge - i.e. IMG-03 would typically not have an MPS interlock
#          so should switch it off. I think this is a bit of a flakey way to do it, as any exceptional
#          cases would not fit this method. Probably needs re-working sometime.
#          IJG 12 August 2014
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, channel, MKS 937A channel number (1-4)
#
# optional substitutions:
#% macro, name,        Object name, and gui association name
#% macro, ctlsp_level, The desired control setpoint value.
#% macro, ctlsp_drvh,  The DRVH field on control setpoint records 
#                      (limits max value of control setpoint)
#% macro, ctlsp_drvl,  The DRVL field on control setpoint records. 
#                      (limits min value of control setpoint)
#% macro, ctlsp_hopr,  The HOPR field on control setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, ctlsp_lopr,  The LOPR field on control setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, ctlsp_hihi,  The HIHI alarm field on the control setpoint record.
#% macro, ctlsp_lolo,  The LOLO alarm field on the control setpoint record.
#% macro, ctlsp_high,  The HIGH alarm field on the control setpoint record.
#% macro, ctlsp_low ,  The LOW alarm field on the control setpoint record.
#% macro, ctlsp_desc,  The DESC field on the control setpoint record.
#
#% macro, prosp_level, The desired protection setpoint value.
#% macro, prosp_drvh,  The DRVH field on protection setpoint records 
#                      (limits max value of protection setpoint)
#% macro, prosp_drvl,  The DRVL field on protection setpoint records. 
#                      (limits min value of protection setpoint)
#% macro, prosp_hopr,  The HOPR field on protection setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, prosp_lopr,  The LOPR field on protection setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, prosp_hihi,  The HIHI alarm field on the protection setpoint record.
#% macro, prosp_lolo,  The LOLO alarm field on the protection setpoint record.
#% macro, prosp_high,  The HIGH alarm field on the protection setpoint record.
#% macro, prosp_low ,  The LOW alarm field on the protection setpoint record.
#% macro, prosp_desc,  The DESC field on the protection setpoint record 
#                      (appears as a label on the Img EDM screen).
#
#% macro, rlysp_level, The desired relay setpoint value.
#% macro, rlysp_drvh,  The DRVH field on relay setpdoint records 
#                      (limits max value of relay setpoint)
#% macro, rlysp_drvl,  The DRVL field on relay setpoint records. 
#                      (limits min value of relay setpoint)
#% macro, rlysp_hopr,  The HOPR field on relay setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, rlysp_lopr,  The LOPR field on relay setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, rlysp_hihi,  The HIHI alarm field on the relay setpoint record.
#% macro, rlysp_lolo,  The LOLO alarm field on the relay setpoint record.
#% macro, rlysp_high,  The HIGH alarm field on the relay setpoint record.
#% macro, rlysp_low ,  The LOW alarm field on the relay setpoint record.
#% macro, rlysp_desc,  The DESC field on the relay setpoint record 
#                      (appears as a label on the Img EDM screen).
#
#% macro, rlasp_drvh,  The DRVH field on second relay setpoint records 
#                      (limits max value of second relay setpoint)
#% macro, rlasp_drvl,  The DRVL field on second relay setpoint records. 
#                      (limits min value of second relay setpoint)
#% macro, rlasp_hopr,  The HOPR field on second relay setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, rlasp_lopr,  The LOPR field on second relay setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, rlasp_hihi,  The HIHI alarm field on the second relay setpoint record.
#% macro, rlasp_lolo,  The LOLO alarm field on the second relay setpoint record.
#% macro, rlasp_high,  The HIGH alarm field on the second relay setpoint record.
#% macro, rlasp_low ,  The LOW alarm field on the second relay setpoint record.
#% macro, rlasp_desc,  The DESC field on the second relay setpoint record.
#% macro, offwarn,     Flag to display a warning that switching off the IMG could trip the beam
#% macro, ilk_write_access_pv, bi record to allow (0) of inhibit (1) gauge interlock setpoint overwrite. Default is local record forcing 'Allow'.
################################################################################

# This associates an edm screen with the template
# % gui, IMG04, edm, mks937aImg.edl, device=BL04I-VA-IMG-04

# This associates BOY screens with the template
# % gui, IMG04, boydetail, mks937aApp_opi/img_detail.opi, device=BL04I-VA-IMG-04, desc=BL04I-VA-IMG-04, name=IMG04
# % gui, IMG04, boyembed, mks937aApp_opi/img_embed_box.opi, device=BL04I-VA-IMG-04, desc=BL04I-VA-IMG-04, name=IMG04
# % gui, IMG04, boyembed, mks937aApp_opi/img_embed.opi, device=BL04I-VA-IMG-04, desc=BL04I-VA-IMG-04, name=IMG04

# These define what PVs a valve detail screen should contain
# % gui, IMG04, readback, Pressure,                                BL04I-VA-IMG-04:P
# % gui, IMG04, readback, Status,                                  BL04I-VA-IMG-04:STA
# % gui, IMG04, readback, Gauge Setpoint Write,                    BL04I-VA-IMG-04:PRO:ILKSETSP:NOWRITE
# % gui, IMG04, readback, Relay 1 on SetPoint for Summary,         BL04I-VA-IMG-04:RLY1:SP,        =pv("BL04I-VA-IMG-04:RLY1:SP.DESC")
# % gui, IMG04, readback, Relay 1 off SetPoint for Summary,        BL04I-VA-IMG-04:RLY1:SPOFF,     =pv("BL04I-VA-IMG-04:RLY1:SPOFF.DESC")
# % gui, IMG04, readback, Relay 2 on SetPoint for Summary,         BL04I-VA-IMG-04:RLY2:SP,        =pv("BL04I-VA-IMG-04:RLY2:SP.DESC")
# % gui, IMG04, readback, Relay 3 on SetPoint for Summary,         BL04I-VA-IMG-04:RLY3:SP,        =pv("BL04I-VA-IMG-04:RLY3:SP.DESC")
## TODO The below gives us feedback on what the state actually is - without this you get the current demand
## (as per differences between EDM and CSS enum menus)
# % gui, IMG04, readback, Cold Cathode,                            BL04I-VA-IMG-04:ISENABLED
# % gui, IMG04, enum, Cold Cathode,                                BL04I-VA-IMG-04:CCHV

# % gui, IMG04, readback, CTL SP Controlling Gauge,                BL04I-VA-IMG-04:CTL:SETCCS,     =concat(pv("BL04I-VA-IMG-04:CTL:SP.DESC")," Gauge")
# % gui, IMG04, readback, CTL SP MODE,                             BL04I-VA-IMG-04:CTL:SETMODE,    =concat(pv("BL04I-VA-IMG-04:CTL:SP.DESC")," Mode")
# % gui, IMG04, readback, Pro Setpoint,                            BL04I-VA-IMG-04:PRO:SP,         =pv("BL04I-VA-IMG-04:PRO:SP.DESC")
# % gui, IMG04, readback, Relay 1 On Setpoint,                     BL04I-VA-IMG-04:RLY1:SP,        =pv("BL04I-VA-IMG-04:RLY1:SP.DESC")
# % gui, IMG04, readback, Relay 1 Off Setpoint,                    BL04I-VA-IMG-04:RLY1:SPOFF,     =pv("BL04I-VA-IMG-04:RLY1:SPOFF.DESC")
# % gui, IMG04, readback, Relay 2 On Setpoint,                     BL04I-VA-IMG-04:RLY2:SP,        =pv("BL04I-VA-IMG-04:RLY2:SP.DESC")
# % gui, IMG04, readback, Relay 2 Off Setpoint,                    BL04I-VA-IMG-04:RLY2:SPOFF,     =pv("BL04I-VA-IMG-04:RLY2:SPOFF.DESC")
# % gui, IMG04, readback, Relay 3 On Setpoint,                     BL04I-VA-IMG-04:RLY3:SP,        =pv("BL04I-VA-IMG-04:RLY3:SP.DESC")
# % gui, IMG04, readback, Relay 3 Off Setpoint,                    BL04I-VA-IMG-04:RLY3:SPOFF,     =pv("BL04I-VA-IMG-04:RLY3:SPOFF.DESC")
# % gui, IMG04, readback, Relay 4 On Setpoint,                     BL04I-VA-IMG-04:RLY4:SP,        =pv("BL04I-VA-IMG-04:RLY4:SP.DESC")
# % gui, IMG04, readback, Relay 4 Off Setpoint,                    BL04I-VA-IMG-04:RLY4:SPOFF,     =pv("BL04I-VA-IMG-04:RLY4:SPOFF.DESC")
# % gui, IMG04, readback, Fast Relay On Setpoint,                  BL04I-VA-IMG-04:FRLY:SP,        =pv("BL04I-VA-IMG-04:FRLY:SP.DESC")

# % gui, IMG04, demand,   Pro Setpoint,                            BL04I-VA-IMG-04:PRO:OUTSP,      =pv("BL04I-VA-IMG-04:PRO:SP.DESC")
# % gui, IMG04, demand,   Relay 1 On Setpoint,                     BL04I-VA-IMG-04:RLY1:SETSP,     =pv("BL04I-VA-IMG-04:RLY1:SP.DESC")
# % gui, IMG04, demand,   Relay 1 Off Setpoint,                    BL04I-VA-IMG-04:RLY1:SETSPOFF,  =pv("BL04I-VA-IMG-04:RLY1:SPOFF.DESC")
# % gui, IMG04, demand,   Relay 2 On Setpoint,                     BL04I-VA-IMG-04:RLY2:SETSP,     =pv("BL04I-VA-IMG-04:RLY2:SP.DESC")
# % gui, IMG04, demand,   Relay 2 Off Setpoint,                    BL04I-VA-IMG-04:RLY2:SETSPOFF,  =pv("BL04I-VA-IMG-04:RLY2:SPOFF.DESC")
# % gui, IMG04, demand,   Relay 3 On Setpoint,                     BL04I-VA-IMG-04:RLY3:SETSP,     =pv("BL04I-VA-IMG-04:RLY3:SP.DESC")
# % gui, IMG04, demand,   Relay 3 Off Setpoint,                    BL04I-VA-IMG-04:RLY3:SETSPOFF,  =pv("BL04I-VA-IMG-04:RLY3:SPOFF.DESC")
# % gui, IMG04, demand,   Relay 4 On Setpoint,                     BL04I-VA-IMG-04:RLY4:SETSP,     =pv("BL04I-VA-IMG-04:RLY4:SP.DESC")
# 
# Cold Cathode Enable
#
#% archiver 10 Monitor
#% controldesk Pressure scon
#
record(bo, "BL04I-VA-IMG-04:CCHV") {
  field(DESC, "Cold Cathode Enable")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol ccenable(2) ty_40_6 0")
  field(FLNK, "BL04I-VA-IMG-04:STA")
  field(ZNAM, "Off")
  field(ONAM, "On")
}

record(bi, "BL04I-VA-IMG-04:SWITCHING") {
  field(DESC, "Switching")
  field(PINI, "YES")
  field(INP, "0")
  field(ONAM, "Switching")
}

################################################################################
# Status
#
#% archiver 10 Monitor
#% controldesk Pressure smon
#
record(mbbi, "BL04I-VA-IMG-04:STA") {
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol status(2) ty_40_6 0")
  field(DESC, "Status")
  field(SCAN, "1 second")
  field(FLNK, "BL04I-VA-IMG-04:PDIS")
  field(ZRST, "OK")
  field(ONST, "OK")
  field(TWST, "Above Range")
  field(THST, "At Atmosphere")
  field(FRST, "Low Emission")
  field(FVST, "Filament Off")
  field(SXST, "HV Off")
  field(SVST, "Startup Delay")
  field(EIST, "Below Range")
  field(NIST, "Controlled")
  field(TEST, "Protected State")
  field(ELST, "No Gauge")
  field(TVST, "Not Connected")
  field(TTST, "Wrong Gauge")
  field(FTST, "Bad Command")
  field(FFST, "Locked Out")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "MINOR")
  field(THSV, "MINOR")
  field(FRSV, "MAJOR")
  field(FVSV, "MAJOR")
  field(SXSV, "MAJOR")
  field(SVSV, "MINOR")
  field(EISV, "NO_ALARM")
  field(NISV, "MINOR")
  field(TESV, "MINOR")
  field(ELSV, "MAJOR")
  field(TVSV, "MAJOR")
  field(TTSV, "MAJOR")
  field(FTSV, "MAJOR")
  field(FFSV, "MAJOR")
}

#############################################################################
# Pressure
# 
# % archiver 1 Monitor
# % controldesk Pressure readback
record(ai, "BL04I-VA-IMG-04:P") {
  field(DESC, "Pressure")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol pressure(2) ty_40_6 0")
  field(FLNK, "BL04I-VA-IMG-04:PLOG")
  field(EGU, "mbar")
  field(PREC, "11")
  field(HOPR, "0.01")
  field(LOPR, "1.0E-11")
  field(SDIS, "BL04I-VA-IMG-04:PDIS")
  field(DISS, "INVALID")
}

record(calcout, "BL04I-VA-IMG-04:ADEL") {
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-IMG-04:P.ADEL")
  field(INPA, "BL04I-VA-IMG-04:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-IMG-04:PLOG") {
  field(DESC, "log Pressure")
  field(EGU, "log")
  field(CALC, "LOG(A)")
  field(INPA, "BL04I-VA-IMG-04:P MS")
  field(FLNK, "BL04I-VA-IMG-04:PMAX")
  field(HOPR, "-2")
  field(LOPR, "-11")
  field(ADEL, "0.025")
}
record(ai, "BL04I-VA-IMG-04:PMAX")
{
    field(DESC, "Max Pressure")
    field(INP,  "BL04I-VA-IMG-04:P MS")
    field(FLNK, "BL04I-VA-IMG-04:PMIN")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
record(ai, "BL04I-VA-IMG-04:PMIN")
{
    field(DESC, "Min Pressure")
    field(INP,  "BL04I-VA-IMG-04:P MS")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
################################################################################
# Control - IMG Enable
#
record(ao, "BL04I-VA-IMG-04:CTL:SETSP") {
  field(DESC, "IMG Enable")
  field(FLNK, "BL04I-VA-IMG-04:CTL:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(DRVH, "9.5e-1")
  field(DRVL, "2.7e-3")
  field(DOL, "1.0e-2")
}

record(mbbo, "BL04I-VA-IMG-04:CTL:ENABLE") {
  field(DESC, "Enable Control Setpoint")
  field(FLNK, "BL04I-VA-IMG-04:CTL:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  field(SDIS, "BL04I-VA-IMG-04:CTL:ILKSETSP:NOWRITE")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-04:CTL:SEQ") {
  field(DESC, "Sequence Control Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-IMG-04:CTL:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-IMG-04:CTL:DIS PP")
  field(DOL2, "BL04I-VA-IMG-04:CTL:SETSP")
  field(LNK2, "BL04I-VA-IMG-04:CTL:OUTSP PP")
  field(SDIS, "BL04I-VA-IMG-04:CTL:ILKSETSP:NOWRITE")
}

record(ai, "BL04I-VA-IMG-04:CTL:SP") 
  {
  field(DESC, "IMG Enable")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(2,CTL,BL04I-VA-IMG-04) ty_40_6 0")
  field(SCAN, "1 second")
  field(PINI, "YES")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(HIHI, "9.6e-1")
  field(LOLO, "2.6e-3")
  field(HIGH, "1.1e-2")
  field(LOW, "9.0e-3")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
  }

record(ao, "BL04I-VA-IMG-04:CTL:OUTSP") 
    {
    field(DESC, "Output Control Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-04:CTL:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(2,CTL,BL04I-VA-IMG-04) ty_40_6 0")
    }

record(bo, "BL04I-VA-IMG-04:CTL:DIS") 
  {
  field(DESC, "Disable Control Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(2,CTL) ty_40_6 0")
  }

# Get the implied disabled state of the CTL:SETSP
# if CTL:SP returns a non-zero value, then it is not disabled
# and it's in the mode "I/L Operating"
#
record(calcout, "BL04I-VA-IMG-04:CTL:GETDISCALC")
  {
  field(DESC, "Read Disable Setpoint")
  field(SCAN, "1 second")
  field(OUT, "BL04I-VA-IMG-04:CTL:GETDIS")
  field(INPA, "BL04I-VA-IMG-04:CTL:SP.VAL PP")
  field(CALC, "A<1e-10?0:1")
  field(FLNK, "BL04I-VA-IMG-04:CTL:GETDIS")
  }
# Convert the above disabled state to mbbi
record(mbbi, "BL04I-VA-IMG-04:CTL:GETDIS") 
  {
  field(DESC, "Read Disable Setpoint")
  field(SCAN, "Passive")
  field(INP, "BL04I-VA-IMG-04:CTL:GETDISCALC")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  }

################################################################################
# Protection - IMG Overpressure
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-IMG-04:PRO:SETSP") {
  field(DESC, "IMG Overpressure")
  field(FLNK, "BL04I-VA-IMG-04:PRO:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.0e-2")
  field(LOPR, "1.3e-5")
  field(DRVH, "1.0e-2")
  field(DRVL, "1.3e-5")
  field(DOL, "5.0e-4")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-IMG-04:PRO:ENABLE") {
  field(DESC, "Enable Protection Setpoint")
  field(FLNK, "BL04I-VA-IMG-04:PRO:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-04:PRO:SEQ") 
    {
    field(DESC, "Sequence Protection Setpoint")
    field(SELM, "Specified")
    field(SELL, "BL04I-VA-IMG-04:PRO:ENABLE.RVAL")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-IMG-04:PRO:DIS PP")
    field(DOL2, "BL04I-VA-IMG-04:PRO:SETSP")
    field(LNK2, "BL04I-VA-IMG-04:PRO:OUTSP PP")
    }

#
#% archiver 10 Monitor
#% controldesk IMG Overpressure readback
#
record(ai, "BL04I-VA-IMG-04:PRO:SP") {
  field(DESC, "IMG Overpressure")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(2,PRO,BL04I-VA-IMG-04) ty_40_6 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.0e-2")
  field(LOPR, "1.3e-5")
  field(HIHI, "1.1e-2")
  field(LOLO, "1.2e-5")
  field(HIGH, "5.1e-4")
  field(LOW, "4.9e-4")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

record(ao, "BL04I-VA-IMG-04:PRO:OUTSP") 
    {
    field(DESC, "Output Protection Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-04:PRO:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(2,PRO,BL04I-VA-IMG-04) ty_40_6 0")
    }

record(bo, "BL04I-VA-IMG-04:PRO:DIS") {
  field(DESC, "Disable Protection Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(2,PRO) ty_40_6 0")
}

################################################################################
# Relay - Valve Interlock
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-IMG-04:RLY:SETSP") {
  field(DESC, "Valve Interlock")
  field(FLNK, "BL04I-VA-IMG-04:RLY:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(DRVH, "1.2e-2")
  field(DRVL, "2.7e-10")
  field(DOL, "1.0e-6")
  field(SDIS, "BL04I-VA-IMG-04:RLY:ILKSETSP:NOWRITE")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-IMG-04:RLY:ENABLE") {
  field(DESC, "Enable Relay Setpoint")
  field(FLNK, "BL04I-VA-IMG-04:RLY:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-04:RLY:SEQ") {
  field(DESC, "Sequence Relay Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-IMG-04:RLY:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-IMG-04:RLY:DIS PP")
  field(DOL2, "BL04I-VA-IMG-04:RLY:SETSP")
  field(LNK2, "BL04I-VA-IMG-04:RLY:OUTSP PP")
}

#
#% archiver 10 Monitor
#% controldesk Valve Interlock readback
#
record(ai, "BL04I-VA-IMG-04:RLY:SP") {
  field(DESC, "Valve Interlock")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(2,RLY,BL04I-VA-IMG-04) ty_40_6 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(HIHI, "1.3e-2")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-6")
  field(LOW, "9.0e-7")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

record(ao, "BL04I-VA-IMG-04:RLY:OUTSP") 
    {
    field(DESC, "Output Relay Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-04:RLY:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(2,RLY,BL04I-VA-IMG-04) ty_40_6 0")
    }

record(bo, "BL04I-VA-IMG-04:RLY:DIS") 
    {
    field(DESC, "Disable Relay Setpoint")
    field(DTYP, "stream")
    field(OUT, "@mks937a.protocol dissp(2,RLY) ty_40_6 0")
    }

################################################################################
# Relay 2 (Chanel A Only) - MPS Interlock
#
record(calc, "BL04I-VA-IMG-04:RLA:EXISTS") {
  field(DESC, "Relay Exists")
  field(CALC, "A=B?0:1")
  field(INPA, "2")
  field(INPB, "1")
  field(PINI, "YES")
}

#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-IMG-04:RLA:SETSP") {
  field(DESC, "MPS Interlock")
  field(FLNK, "BL04I-VA-IMG-04:RLA:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(DRVH, "1.2e-2")
  field(DRVL, "2.7e-10")
  field(DISA, "2")
  field(DOL, "1.0e-7")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-IMG-04:RLA:ENABLE") {
  field(DESC, "Enable Relay Setpoint")
  field(FLNK, "BL04I-VA-IMG-04:RLA:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DISA, "2")
  field(DOL, "1")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-04:RLA:SEQ") {
  field(DESC, "Sequence Relay Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-IMG-04:RLA:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-IMG-04:RLA:DIS PP")
  field(DOL2, "BL04I-VA-IMG-04:RLA:SETSP")
  field(LNK2, "BL04I-VA-IMG-04:RLA:OUTSP PP")
  field(DISA, "2")
}

#
#% archiver 10 Monitor
#% controldesk MPS Interlock readback
#
record(ai, "BL04I-VA-IMG-04:RLA:SP") {
  field(DESC, "MPS Interlock")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(3,RLY,BL04I-VA-IMG-04) ty_40_6 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(HIHI, "1.3e-2")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-7")
  field(LOW, "9.0e-8")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
  field(DISA, "2")
}

record(ao, "BL04I-VA-IMG-04:RLA:OUTSP") 
    {
    field(DESC, "Output Relay Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-04:RLA:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(3,RLY,BL04I-VA-IMG-04) ty_40_6 0")
    field(DISA, "2")
    }

record(bo, "BL04I-VA-IMG-04:RLA:DIS") {
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(3,RLY) ty_40_6 0")
  field(DISA, "2")
}

record(calc, "BL04I-VA-IMG-04:PDIS") {
  field(PHAS, "1")
  field(CALC, "(A>1)?1:0")
  field(INPA, "BL04I-VA-IMG-04:STA")
  field(FLNK, "BL04I-VA-IMG-04:P")
}



record(bi, "BL04I-VA-IMG-04:OFFWARN") 
{
  field(DESC, "Warning for OFF button")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Warning off")
  field(ONAM, "Warning on")
}

#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-IMG-04:PRO:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume an empty INP and do nothing.
#
# NB: These four records are identical and could have been instantiated via
#     alias. The names are for compatibility with the macros in the EDM screens
#     in which they are referenced.
#
record(bi, "BL04I-VA-IMG-04:PRO:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-04:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-IMG-04:CTL:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-04:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-IMG-04:RLA:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-04:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-IMG-04:RLY:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-04:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise just once, records that used to use PINI
# This is to ensure that the autoSR PV refered by ilk_write_access_pv
# is correctly established before any other record processing, to potentially
# avoid overwriting setpoints at IOC startup.
#
record(bo, "BL04I-VA-IMG-04:CTL:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-IMG-04:CTL:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-IMG-04:CTL:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-IMG-04:CTL:ENABLE")
    field(LNK2, "BL04I-VA-IMG-04:PRO:ENABLE")
    field(LNK3, "BL04I-VA-IMG-04:RLY:ENABLE")
    field(LNK4, "BL04I-VA-IMG-04:RLA:ENABLE")
    field(LNK5, "BL04I-VA-IMG-04:CTL:INITSETSPSDIS")
    field(SELM, "All")
}

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-IMG-04:ERROR")
    {
    field(DESC, "Last error message")
    field(INP, "")
    field(PINI, "YES")
    }


#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937aImg.db
#% macro, __doc__, Template database for an inverted magnetron guage connected 
# to one channel of an MKS937A Multi-Sensor System 
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# IG Note: Historically, some of these records have DISA field switched on 1
#          The reason seems to be to disable record processing for RLA when that interlock
#          is not relevant to the gauge - i.e. IMG-03 would typically not have an MPS interlock
#          so should switch it off. I think this is a bit of a flakey way to do it, as any exceptional
#          cases would not fit this method. Probably needs re-working sometime.
#          IJG 12 August 2014
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, channel, MKS 937A channel number (1-4)
#
# optional substitutions:
#% macro, name,        Object name, and gui association name
#% macro, ctlsp_level, The desired control setpoint value.
#% macro, ctlsp_drvh,  The DRVH field on control setpoint records 
#                      (limits max value of control setpoint)
#% macro, ctlsp_drvl,  The DRVL field on control setpoint records. 
#                      (limits min value of control setpoint)
#% macro, ctlsp_hopr,  The HOPR field on control setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, ctlsp_lopr,  The LOPR field on control setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, ctlsp_hihi,  The HIHI alarm field on the control setpoint record.
#% macro, ctlsp_lolo,  The LOLO alarm field on the control setpoint record.
#% macro, ctlsp_high,  The HIGH alarm field on the control setpoint record.
#% macro, ctlsp_low ,  The LOW alarm field on the control setpoint record.
#% macro, ctlsp_desc,  The DESC field on the control setpoint record.
#
#% macro, prosp_level, The desired protection setpoint value.
#% macro, prosp_drvh,  The DRVH field on protection setpoint records 
#                      (limits max value of protection setpoint)
#% macro, prosp_drvl,  The DRVL field on protection setpoint records. 
#                      (limits min value of protection setpoint)
#% macro, prosp_hopr,  The HOPR field on protection setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, prosp_lopr,  The LOPR field on protection setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, prosp_hihi,  The HIHI alarm field on the protection setpoint record.
#% macro, prosp_lolo,  The LOLO alarm field on the protection setpoint record.
#% macro, prosp_high,  The HIGH alarm field on the protection setpoint record.
#% macro, prosp_low ,  The LOW alarm field on the protection setpoint record.
#% macro, prosp_desc,  The DESC field on the protection setpoint record 
#                      (appears as a label on the Img EDM screen).
#
#% macro, rlysp_level, The desired relay setpoint value.
#% macro, rlysp_drvh,  The DRVH field on relay setpdoint records 
#                      (limits max value of relay setpoint)
#% macro, rlysp_drvl,  The DRVL field on relay setpoint records. 
#                      (limits min value of relay setpoint)
#% macro, rlysp_hopr,  The HOPR field on relay setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, rlysp_lopr,  The LOPR field on relay setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, rlysp_hihi,  The HIHI alarm field on the relay setpoint record.
#% macro, rlysp_lolo,  The LOLO alarm field on the relay setpoint record.
#% macro, rlysp_high,  The HIGH alarm field on the relay setpoint record.
#% macro, rlysp_low ,  The LOW alarm field on the relay setpoint record.
#% macro, rlysp_desc,  The DESC field on the relay setpoint record 
#                      (appears as a label on the Img EDM screen).
#
#% macro, rlasp_drvh,  The DRVH field on second relay setpoint records 
#                      (limits max value of second relay setpoint)
#% macro, rlasp_drvl,  The DRVL field on second relay setpoint records. 
#                      (limits min value of second relay setpoint)
#% macro, rlasp_hopr,  The HOPR field on second relay setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, rlasp_lopr,  The LOPR field on second relay setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, rlasp_hihi,  The HIHI alarm field on the second relay setpoint record.
#% macro, rlasp_lolo,  The LOLO alarm field on the second relay setpoint record.
#% macro, rlasp_high,  The HIGH alarm field on the second relay setpoint record.
#% macro, rlasp_low ,  The LOW alarm field on the second relay setpoint record.
#% macro, rlasp_desc,  The DESC field on the second relay setpoint record.
#% macro, offwarn,     Flag to display a warning that switching off the IMG could trip the beam
#% macro, ilk_write_access_pv, bi record to allow (0) of inhibit (1) gauge interlock setpoint overwrite. Default is local record forcing 'Allow'.
################################################################################

# This associates an edm screen with the template
# % gui, IMG05, edm, mks937aImg.edl, device=BL04I-VA-IMG-05

# This associates BOY screens with the template
# % gui, IMG05, boydetail, mks937aApp_opi/img_detail.opi, device=BL04I-VA-IMG-05, desc=BL04I-VA-IMG-05, name=IMG05
# % gui, IMG05, boyembed, mks937aApp_opi/img_embed_box.opi, device=BL04I-VA-IMG-05, desc=BL04I-VA-IMG-05, name=IMG05
# % gui, IMG05, boyembed, mks937aApp_opi/img_embed.opi, device=BL04I-VA-IMG-05, desc=BL04I-VA-IMG-05, name=IMG05

# These define what PVs a valve detail screen should contain
# % gui, IMG05, readback, Pressure,                                BL04I-VA-IMG-05:P
# % gui, IMG05, readback, Status,                                  BL04I-VA-IMG-05:STA
# % gui, IMG05, readback, Gauge Setpoint Write,                    BL04I-VA-IMG-05:PRO:ILKSETSP:NOWRITE
# % gui, IMG05, readback, Relay 1 on SetPoint for Summary,         BL04I-VA-IMG-05:RLY1:SP,        =pv("BL04I-VA-IMG-05:RLY1:SP.DESC")
# % gui, IMG05, readback, Relay 1 off SetPoint for Summary,        BL04I-VA-IMG-05:RLY1:SPOFF,     =pv("BL04I-VA-IMG-05:RLY1:SPOFF.DESC")
# % gui, IMG05, readback, Relay 2 on SetPoint for Summary,         BL04I-VA-IMG-05:RLY2:SP,        =pv("BL04I-VA-IMG-05:RLY2:SP.DESC")
# % gui, IMG05, readback, Relay 3 on SetPoint for Summary,         BL04I-VA-IMG-05:RLY3:SP,        =pv("BL04I-VA-IMG-05:RLY3:SP.DESC")
## TODO The below gives us feedback on what the state actually is - without this you get the current demand
## (as per differences between EDM and CSS enum menus)
# % gui, IMG05, readback, Cold Cathode,                            BL04I-VA-IMG-05:ISENABLED
# % gui, IMG05, enum, Cold Cathode,                                BL04I-VA-IMG-05:CCHV

# % gui, IMG05, readback, CTL SP Controlling Gauge,                BL04I-VA-IMG-05:CTL:SETCCS,     =concat(pv("BL04I-VA-IMG-05:CTL:SP.DESC")," Gauge")
# % gui, IMG05, readback, CTL SP MODE,                             BL04I-VA-IMG-05:CTL:SETMODE,    =concat(pv("BL04I-VA-IMG-05:CTL:SP.DESC")," Mode")
# % gui, IMG05, readback, Pro Setpoint,                            BL04I-VA-IMG-05:PRO:SP,         =pv("BL04I-VA-IMG-05:PRO:SP.DESC")
# % gui, IMG05, readback, Relay 1 On Setpoint,                     BL04I-VA-IMG-05:RLY1:SP,        =pv("BL04I-VA-IMG-05:RLY1:SP.DESC")
# % gui, IMG05, readback, Relay 1 Off Setpoint,                    BL04I-VA-IMG-05:RLY1:SPOFF,     =pv("BL04I-VA-IMG-05:RLY1:SPOFF.DESC")
# % gui, IMG05, readback, Relay 2 On Setpoint,                     BL04I-VA-IMG-05:RLY2:SP,        =pv("BL04I-VA-IMG-05:RLY2:SP.DESC")
# % gui, IMG05, readback, Relay 2 Off Setpoint,                    BL04I-VA-IMG-05:RLY2:SPOFF,     =pv("BL04I-VA-IMG-05:RLY2:SPOFF.DESC")
# % gui, IMG05, readback, Relay 3 On Setpoint,                     BL04I-VA-IMG-05:RLY3:SP,        =pv("BL04I-VA-IMG-05:RLY3:SP.DESC")
# % gui, IMG05, readback, Relay 3 Off Setpoint,                    BL04I-VA-IMG-05:RLY3:SPOFF,     =pv("BL04I-VA-IMG-05:RLY3:SPOFF.DESC")
# % gui, IMG05, readback, Relay 4 On Setpoint,                     BL04I-VA-IMG-05:RLY4:SP,        =pv("BL04I-VA-IMG-05:RLY4:SP.DESC")
# % gui, IMG05, readback, Relay 4 Off Setpoint,                    BL04I-VA-IMG-05:RLY4:SPOFF,     =pv("BL04I-VA-IMG-05:RLY4:SPOFF.DESC")
# % gui, IMG05, readback, Fast Relay On Setpoint,                  BL04I-VA-IMG-05:FRLY:SP,        =pv("BL04I-VA-IMG-05:FRLY:SP.DESC")

# % gui, IMG05, demand,   Pro Setpoint,                            BL04I-VA-IMG-05:PRO:OUTSP,      =pv("BL04I-VA-IMG-05:PRO:SP.DESC")
# % gui, IMG05, demand,   Relay 1 On Setpoint,                     BL04I-VA-IMG-05:RLY1:SETSP,     =pv("BL04I-VA-IMG-05:RLY1:SP.DESC")
# % gui, IMG05, demand,   Relay 1 Off Setpoint,                    BL04I-VA-IMG-05:RLY1:SETSPOFF,  =pv("BL04I-VA-IMG-05:RLY1:SPOFF.DESC")
# % gui, IMG05, demand,   Relay 2 On Setpoint,                     BL04I-VA-IMG-05:RLY2:SETSP,     =pv("BL04I-VA-IMG-05:RLY2:SP.DESC")
# % gui, IMG05, demand,   Relay 2 Off Setpoint,                    BL04I-VA-IMG-05:RLY2:SETSPOFF,  =pv("BL04I-VA-IMG-05:RLY2:SPOFF.DESC")
# % gui, IMG05, demand,   Relay 3 On Setpoint,                     BL04I-VA-IMG-05:RLY3:SETSP,     =pv("BL04I-VA-IMG-05:RLY3:SP.DESC")
# % gui, IMG05, demand,   Relay 3 Off Setpoint,                    BL04I-VA-IMG-05:RLY3:SETSPOFF,  =pv("BL04I-VA-IMG-05:RLY3:SPOFF.DESC")
# % gui, IMG05, demand,   Relay 4 On Setpoint,                     BL04I-VA-IMG-05:RLY4:SETSP,     =pv("BL04I-VA-IMG-05:RLY4:SP.DESC")
# 
# Cold Cathode Enable
#
#% archiver 10 Monitor
#% controldesk Pressure scon
#
record(bo, "BL04I-VA-IMG-05:CCHV") {
  field(DESC, "Cold Cathode Enable")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol ccenable(1) ty_40_7 0")
  field(FLNK, "BL04I-VA-IMG-05:STA")
  field(ZNAM, "Off")
  field(ONAM, "On")
}

record(bi, "BL04I-VA-IMG-05:SWITCHING") {
  field(DESC, "Switching")
  field(PINI, "YES")
  field(INP, "0")
  field(ONAM, "Switching")
}

################################################################################
# Status
#
#% archiver 10 Monitor
#% controldesk Pressure smon
#
record(mbbi, "BL04I-VA-IMG-05:STA") {
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol status(1) ty_40_7 0")
  field(DESC, "Status")
  field(SCAN, "1 second")
  field(FLNK, "BL04I-VA-IMG-05:PDIS")
  field(ZRST, "OK")
  field(ONST, "OK")
  field(TWST, "Above Range")
  field(THST, "At Atmosphere")
  field(FRST, "Low Emission")
  field(FVST, "Filament Off")
  field(SXST, "HV Off")
  field(SVST, "Startup Delay")
  field(EIST, "Below Range")
  field(NIST, "Controlled")
  field(TEST, "Protected State")
  field(ELST, "No Gauge")
  field(TVST, "Not Connected")
  field(TTST, "Wrong Gauge")
  field(FTST, "Bad Command")
  field(FFST, "Locked Out")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "MINOR")
  field(THSV, "MINOR")
  field(FRSV, "MAJOR")
  field(FVSV, "MAJOR")
  field(SXSV, "MAJOR")
  field(SVSV, "MINOR")
  field(EISV, "NO_ALARM")
  field(NISV, "MINOR")
  field(TESV, "MINOR")
  field(ELSV, "MAJOR")
  field(TVSV, "MAJOR")
  field(TTSV, "MAJOR")
  field(FTSV, "MAJOR")
  field(FFSV, "MAJOR")
}

#############################################################################
# Pressure
# 
# % archiver 1 Monitor
# % controldesk Pressure readback
record(ai, "BL04I-VA-IMG-05:P") {
  field(DESC, "Pressure")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol pressure(1) ty_40_7 0")
  field(FLNK, "BL04I-VA-IMG-05:PLOG")
  field(EGU, "mbar")
  field(PREC, "11")
  field(HOPR, "0.01")
  field(LOPR, "1.0E-11")
  field(SDIS, "BL04I-VA-IMG-05:PDIS")
  field(DISS, "INVALID")
}

record(calcout, "BL04I-VA-IMG-05:ADEL") {
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-IMG-05:P.ADEL")
  field(INPA, "BL04I-VA-IMG-05:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-IMG-05:PLOG") {
  field(DESC, "log Pressure")
  field(EGU, "log")
  field(CALC, "LOG(A)")
  field(INPA, "BL04I-VA-IMG-05:P MS")
  field(FLNK, "BL04I-VA-IMG-05:PMAX")
  field(HOPR, "-2")
  field(LOPR, "-11")
  field(ADEL, "0.025")
}
record(ai, "BL04I-VA-IMG-05:PMAX")
{
    field(DESC, "Max Pressure")
    field(INP,  "BL04I-VA-IMG-05:P MS")
    field(FLNK, "BL04I-VA-IMG-05:PMIN")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
record(ai, "BL04I-VA-IMG-05:PMIN")
{
    field(DESC, "Min Pressure")
    field(INP,  "BL04I-VA-IMG-05:P MS")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
################################################################################
# Control - IMG Enable
#
record(ao, "BL04I-VA-IMG-05:CTL:SETSP") {
  field(DESC, "IMG Enable")
  field(FLNK, "BL04I-VA-IMG-05:CTL:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(DRVH, "9.5e-1")
  field(DRVL, "2.7e-3")
  field(DOL, "1.0e-2")
}

record(mbbo, "BL04I-VA-IMG-05:CTL:ENABLE") {
  field(DESC, "Enable Control Setpoint")
  field(FLNK, "BL04I-VA-IMG-05:CTL:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  field(SDIS, "BL04I-VA-IMG-05:CTL:ILKSETSP:NOWRITE")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-05:CTL:SEQ") {
  field(DESC, "Sequence Control Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-IMG-05:CTL:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-IMG-05:CTL:DIS PP")
  field(DOL2, "BL04I-VA-IMG-05:CTL:SETSP")
  field(LNK2, "BL04I-VA-IMG-05:CTL:OUTSP PP")
  field(SDIS, "BL04I-VA-IMG-05:CTL:ILKSETSP:NOWRITE")
}

record(ai, "BL04I-VA-IMG-05:CTL:SP") 
  {
  field(DESC, "IMG Enable")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(1,CTL,BL04I-VA-IMG-05) ty_40_7 0")
  field(SCAN, "1 second")
  field(PINI, "YES")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(HIHI, "9.6e-1")
  field(LOLO, "2.6e-3")
  field(HIGH, "1.1e-2")
  field(LOW, "9.0e-3")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
  }

record(ao, "BL04I-VA-IMG-05:CTL:OUTSP") 
    {
    field(DESC, "Output Control Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-05:CTL:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(1,CTL,BL04I-VA-IMG-05) ty_40_7 0")
    }

record(bo, "BL04I-VA-IMG-05:CTL:DIS") 
  {
  field(DESC, "Disable Control Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(1,CTL) ty_40_7 0")
  }

# Get the implied disabled state of the CTL:SETSP
# if CTL:SP returns a non-zero value, then it is not disabled
# and it's in the mode "I/L Operating"
#
record(calcout, "BL04I-VA-IMG-05:CTL:GETDISCALC")
  {
  field(DESC, "Read Disable Setpoint")
  field(SCAN, "1 second")
  field(OUT, "BL04I-VA-IMG-05:CTL:GETDIS")
  field(INPA, "BL04I-VA-IMG-05:CTL:SP.VAL PP")
  field(CALC, "A<1e-10?0:1")
  field(FLNK, "BL04I-VA-IMG-05:CTL:GETDIS")
  }
# Convert the above disabled state to mbbi
record(mbbi, "BL04I-VA-IMG-05:CTL:GETDIS") 
  {
  field(DESC, "Read Disable Setpoint")
  field(SCAN, "Passive")
  field(INP, "BL04I-VA-IMG-05:CTL:GETDISCALC")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  }

################################################################################
# Protection - IMG Overpressure
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-IMG-05:PRO:SETSP") {
  field(DESC, "IMG Overpressure")
  field(FLNK, "BL04I-VA-IMG-05:PRO:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.0e-2")
  field(LOPR, "1.3e-5")
  field(DRVH, "1.0e-2")
  field(DRVL, "1.3e-5")
  field(DOL, "5.0e-4")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-IMG-05:PRO:ENABLE") {
  field(DESC, "Enable Protection Setpoint")
  field(FLNK, "BL04I-VA-IMG-05:PRO:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-05:PRO:SEQ") 
    {
    field(DESC, "Sequence Protection Setpoint")
    field(SELM, "Specified")
    field(SELL, "BL04I-VA-IMG-05:PRO:ENABLE.RVAL")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-IMG-05:PRO:DIS PP")
    field(DOL2, "BL04I-VA-IMG-05:PRO:SETSP")
    field(LNK2, "BL04I-VA-IMG-05:PRO:OUTSP PP")
    }

#
#% archiver 10 Monitor
#% controldesk IMG Overpressure readback
#
record(ai, "BL04I-VA-IMG-05:PRO:SP") {
  field(DESC, "IMG Overpressure")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(1,PRO,BL04I-VA-IMG-05) ty_40_7 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.0e-2")
  field(LOPR, "1.3e-5")
  field(HIHI, "1.1e-2")
  field(LOLO, "1.2e-5")
  field(HIGH, "5.1e-4")
  field(LOW, "4.9e-4")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

record(ao, "BL04I-VA-IMG-05:PRO:OUTSP") 
    {
    field(DESC, "Output Protection Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-05:PRO:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(1,PRO,BL04I-VA-IMG-05) ty_40_7 0")
    }

record(bo, "BL04I-VA-IMG-05:PRO:DIS") {
  field(DESC, "Disable Protection Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(1,PRO) ty_40_7 0")
}

################################################################################
# Relay - Valve Interlock
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-IMG-05:RLY:SETSP") {
  field(DESC, "Valve Interlock")
  field(FLNK, "BL04I-VA-IMG-05:RLY:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(DRVH, "1.2e-2")
  field(DRVL, "2.7e-10")
  field(DOL, "1.0e-6")
  field(SDIS, "BL04I-VA-IMG-05:RLY:ILKSETSP:NOWRITE")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-IMG-05:RLY:ENABLE") {
  field(DESC, "Enable Relay Setpoint")
  field(FLNK, "BL04I-VA-IMG-05:RLY:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-05:RLY:SEQ") {
  field(DESC, "Sequence Relay Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-IMG-05:RLY:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-IMG-05:RLY:DIS PP")
  field(DOL2, "BL04I-VA-IMG-05:RLY:SETSP")
  field(LNK2, "BL04I-VA-IMG-05:RLY:OUTSP PP")
}

#
#% archiver 10 Monitor
#% controldesk Valve Interlock readback
#
record(ai, "BL04I-VA-IMG-05:RLY:SP") {
  field(DESC, "Valve Interlock")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(1,RLY,BL04I-VA-IMG-05) ty_40_7 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(HIHI, "1.3e-2")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-6")
  field(LOW, "9.0e-7")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

record(ao, "BL04I-VA-IMG-05:RLY:OUTSP") 
    {
    field(DESC, "Output Relay Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-05:RLY:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(1,RLY,BL04I-VA-IMG-05) ty_40_7 0")
    }

record(bo, "BL04I-VA-IMG-05:RLY:DIS") 
    {
    field(DESC, "Disable Relay Setpoint")
    field(DTYP, "stream")
    field(OUT, "@mks937a.protocol dissp(1,RLY) ty_40_7 0")
    }

################################################################################
# Relay 2 (Chanel A Only) - MPS Interlock
#
record(calc, "BL04I-VA-IMG-05:RLA:EXISTS") {
  field(DESC, "Relay Exists")
  field(CALC, "A=B?0:1")
  field(INPA, "1")
  field(INPB, "1")
  field(PINI, "YES")
}

#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-IMG-05:RLA:SETSP") {
  field(DESC, "MPS Interlock")
  field(FLNK, "BL04I-VA-IMG-05:RLA:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(DRVH, "1.2e-2")
  field(DRVL, "2.7e-10")
  field(DISA, "1")
  field(DOL, "1.0e-7")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-IMG-05:RLA:ENABLE") {
  field(DESC, "Enable Relay Setpoint")
  field(FLNK, "BL04I-VA-IMG-05:RLA:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DISA, "1")
  field(DOL, "1")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-05:RLA:SEQ") {
  field(DESC, "Sequence Relay Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-IMG-05:RLA:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-IMG-05:RLA:DIS PP")
  field(DOL2, "BL04I-VA-IMG-05:RLA:SETSP")
  field(LNK2, "BL04I-VA-IMG-05:RLA:OUTSP PP")
  field(DISA, "1")
}

#
#% archiver 10 Monitor
#% controldesk MPS Interlock readback
#
record(ai, "BL04I-VA-IMG-05:RLA:SP") {
  field(DESC, "MPS Interlock")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(3,RLY,BL04I-VA-IMG-05) ty_40_7 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(HIHI, "1.3e-2")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-7")
  field(LOW, "9.0e-8")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
  field(DISA, "1")
}

record(ao, "BL04I-VA-IMG-05:RLA:OUTSP") 
    {
    field(DESC, "Output Relay Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-05:RLA:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(3,RLY,BL04I-VA-IMG-05) ty_40_7 0")
    field(DISA, "1")
    }

record(bo, "BL04I-VA-IMG-05:RLA:DIS") {
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(3,RLY) ty_40_7 0")
  field(DISA, "1")
}

record(calc, "BL04I-VA-IMG-05:PDIS") {
  field(PHAS, "1")
  field(CALC, "(A>1)?1:0")
  field(INPA, "BL04I-VA-IMG-05:STA")
  field(FLNK, "BL04I-VA-IMG-05:P")
}



record(bi, "BL04I-VA-IMG-05:OFFWARN") 
{
  field(DESC, "Warning for OFF button")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Warning off")
  field(ONAM, "Warning on")
}

#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-IMG-05:PRO:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume an empty INP and do nothing.
#
# NB: These four records are identical and could have been instantiated via
#     alias. The names are for compatibility with the macros in the EDM screens
#     in which they are referenced.
#
record(bi, "BL04I-VA-IMG-05:PRO:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-05:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-IMG-05:CTL:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-05:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-IMG-05:RLA:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-05:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-IMG-05:RLY:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-05:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise just once, records that used to use PINI
# This is to ensure that the autoSR PV refered by ilk_write_access_pv
# is correctly established before any other record processing, to potentially
# avoid overwriting setpoints at IOC startup.
#
record(bo, "BL04I-VA-IMG-05:CTL:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-IMG-05:CTL:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-IMG-05:CTL:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-IMG-05:CTL:ENABLE")
    field(LNK2, "BL04I-VA-IMG-05:PRO:ENABLE")
    field(LNK3, "BL04I-VA-IMG-05:RLY:ENABLE")
    field(LNK4, "BL04I-VA-IMG-05:RLA:ENABLE")
    field(LNK5, "BL04I-VA-IMG-05:CTL:INITSETSPSDIS")
    field(SELM, "All")
}

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-IMG-05:ERROR")
    {
    field(DESC, "Last error message")
    field(INP, "")
    field(PINI, "YES")
    }


#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937aImg.db
#% macro, __doc__, Template database for an inverted magnetron guage connected 
# to one channel of an MKS937A Multi-Sensor System 
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# IG Note: Historically, some of these records have DISA field switched on 2
#          The reason seems to be to disable record processing for RLA when that interlock
#          is not relevant to the gauge - i.e. IMG-03 would typically not have an MPS interlock
#          so should switch it off. I think this is a bit of a flakey way to do it, as any exceptional
#          cases would not fit this method. Probably needs re-working sometime.
#          IJG 12 August 2014
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, channel, MKS 937A channel number (1-4)
#
# optional substitutions:
#% macro, name,        Object name, and gui association name
#% macro, ctlsp_level, The desired control setpoint value.
#% macro, ctlsp_drvh,  The DRVH field on control setpoint records 
#                      (limits max value of control setpoint)
#% macro, ctlsp_drvl,  The DRVL field on control setpoint records. 
#                      (limits min value of control setpoint)
#% macro, ctlsp_hopr,  The HOPR field on control setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, ctlsp_lopr,  The LOPR field on control setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, ctlsp_hihi,  The HIHI alarm field on the control setpoint record.
#% macro, ctlsp_lolo,  The LOLO alarm field on the control setpoint record.
#% macro, ctlsp_high,  The HIGH alarm field on the control setpoint record.
#% macro, ctlsp_low ,  The LOW alarm field on the control setpoint record.
#% macro, ctlsp_desc,  The DESC field on the control setpoint record.
#
#% macro, prosp_level, The desired protection setpoint value.
#% macro, prosp_drvh,  The DRVH field on protection setpoint records 
#                      (limits max value of protection setpoint)
#% macro, prosp_drvl,  The DRVL field on protection setpoint records. 
#                      (limits min value of protection setpoint)
#% macro, prosp_hopr,  The HOPR field on protection setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, prosp_lopr,  The LOPR field on protection setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, prosp_hihi,  The HIHI alarm field on the protection setpoint record.
#% macro, prosp_lolo,  The LOLO alarm field on the protection setpoint record.
#% macro, prosp_high,  The HIGH alarm field on the protection setpoint record.
#% macro, prosp_low ,  The LOW alarm field on the protection setpoint record.
#% macro, prosp_desc,  The DESC field on the protection setpoint record 
#                      (appears as a label on the Img EDM screen).
#
#% macro, rlysp_level, The desired relay setpoint value.
#% macro, rlysp_drvh,  The DRVH field on relay setpdoint records 
#                      (limits max value of relay setpoint)
#% macro, rlysp_drvl,  The DRVL field on relay setpoint records. 
#                      (limits min value of relay setpoint)
#% macro, rlysp_hopr,  The HOPR field on relay setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, rlysp_lopr,  The LOPR field on relay setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, rlysp_hihi,  The HIHI alarm field on the relay setpoint record.
#% macro, rlysp_lolo,  The LOLO alarm field on the relay setpoint record.
#% macro, rlysp_high,  The HIGH alarm field on the relay setpoint record.
#% macro, rlysp_low ,  The LOW alarm field on the relay setpoint record.
#% macro, rlysp_desc,  The DESC field on the relay setpoint record 
#                      (appears as a label on the Img EDM screen).
#
#% macro, rlasp_drvh,  The DRVH field on second relay setpoint records 
#                      (limits max value of second relay setpoint)
#% macro, rlasp_drvl,  The DRVL field on second relay setpoint records. 
#                      (limits min value of second relay setpoint)
#% macro, rlasp_hopr,  The HOPR field on second relay setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, rlasp_lopr,  The LOPR field on second relay setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, rlasp_hihi,  The HIHI alarm field on the second relay setpoint record.
#% macro, rlasp_lolo,  The LOLO alarm field on the second relay setpoint record.
#% macro, rlasp_high,  The HIGH alarm field on the second relay setpoint record.
#% macro, rlasp_low ,  The LOW alarm field on the second relay setpoint record.
#% macro, rlasp_desc,  The DESC field on the second relay setpoint record.
#% macro, offwarn,     Flag to display a warning that switching off the IMG could trip the beam
#% macro, ilk_write_access_pv, bi record to allow (0) of inhibit (1) gauge interlock setpoint overwrite. Default is local record forcing 'Allow'.
################################################################################

# This associates an edm screen with the template
# % gui, IMG06, edm, mks937aImg.edl, device=BL04I-VA-IMG-06

# This associates BOY screens with the template
# % gui, IMG06, boydetail, mks937aApp_opi/img_detail.opi, device=BL04I-VA-IMG-06, desc=BL04I-VA-IMG-06, name=IMG06
# % gui, IMG06, boyembed, mks937aApp_opi/img_embed_box.opi, device=BL04I-VA-IMG-06, desc=BL04I-VA-IMG-06, name=IMG06
# % gui, IMG06, boyembed, mks937aApp_opi/img_embed.opi, device=BL04I-VA-IMG-06, desc=BL04I-VA-IMG-06, name=IMG06

# These define what PVs a valve detail screen should contain
# % gui, IMG06, readback, Pressure,                                BL04I-VA-IMG-06:P
# % gui, IMG06, readback, Status,                                  BL04I-VA-IMG-06:STA
# % gui, IMG06, readback, Gauge Setpoint Write,                    BL04I-VA-IMG-06:PRO:ILKSETSP:NOWRITE
# % gui, IMG06, readback, Relay 1 on SetPoint for Summary,         BL04I-VA-IMG-06:RLY1:SP,        =pv("BL04I-VA-IMG-06:RLY1:SP.DESC")
# % gui, IMG06, readback, Relay 1 off SetPoint for Summary,        BL04I-VA-IMG-06:RLY1:SPOFF,     =pv("BL04I-VA-IMG-06:RLY1:SPOFF.DESC")
# % gui, IMG06, readback, Relay 2 on SetPoint for Summary,         BL04I-VA-IMG-06:RLY2:SP,        =pv("BL04I-VA-IMG-06:RLY2:SP.DESC")
# % gui, IMG06, readback, Relay 3 on SetPoint for Summary,         BL04I-VA-IMG-06:RLY3:SP,        =pv("BL04I-VA-IMG-06:RLY3:SP.DESC")
## TODO The below gives us feedback on what the state actually is - without this you get the current demand
## (as per differences between EDM and CSS enum menus)
# % gui, IMG06, readback, Cold Cathode,                            BL04I-VA-IMG-06:ISENABLED
# % gui, IMG06, enum, Cold Cathode,                                BL04I-VA-IMG-06:CCHV

# % gui, IMG06, readback, CTL SP Controlling Gauge,                BL04I-VA-IMG-06:CTL:SETCCS,     =concat(pv("BL04I-VA-IMG-06:CTL:SP.DESC")," Gauge")
# % gui, IMG06, readback, CTL SP MODE,                             BL04I-VA-IMG-06:CTL:SETMODE,    =concat(pv("BL04I-VA-IMG-06:CTL:SP.DESC")," Mode")
# % gui, IMG06, readback, Pro Setpoint,                            BL04I-VA-IMG-06:PRO:SP,         =pv("BL04I-VA-IMG-06:PRO:SP.DESC")
# % gui, IMG06, readback, Relay 1 On Setpoint,                     BL04I-VA-IMG-06:RLY1:SP,        =pv("BL04I-VA-IMG-06:RLY1:SP.DESC")
# % gui, IMG06, readback, Relay 1 Off Setpoint,                    BL04I-VA-IMG-06:RLY1:SPOFF,     =pv("BL04I-VA-IMG-06:RLY1:SPOFF.DESC")
# % gui, IMG06, readback, Relay 2 On Setpoint,                     BL04I-VA-IMG-06:RLY2:SP,        =pv("BL04I-VA-IMG-06:RLY2:SP.DESC")
# % gui, IMG06, readback, Relay 2 Off Setpoint,                    BL04I-VA-IMG-06:RLY2:SPOFF,     =pv("BL04I-VA-IMG-06:RLY2:SPOFF.DESC")
# % gui, IMG06, readback, Relay 3 On Setpoint,                     BL04I-VA-IMG-06:RLY3:SP,        =pv("BL04I-VA-IMG-06:RLY3:SP.DESC")
# % gui, IMG06, readback, Relay 3 Off Setpoint,                    BL04I-VA-IMG-06:RLY3:SPOFF,     =pv("BL04I-VA-IMG-06:RLY3:SPOFF.DESC")
# % gui, IMG06, readback, Relay 4 On Setpoint,                     BL04I-VA-IMG-06:RLY4:SP,        =pv("BL04I-VA-IMG-06:RLY4:SP.DESC")
# % gui, IMG06, readback, Relay 4 Off Setpoint,                    BL04I-VA-IMG-06:RLY4:SPOFF,     =pv("BL04I-VA-IMG-06:RLY4:SPOFF.DESC")
# % gui, IMG06, readback, Fast Relay On Setpoint,                  BL04I-VA-IMG-06:FRLY:SP,        =pv("BL04I-VA-IMG-06:FRLY:SP.DESC")

# % gui, IMG06, demand,   Pro Setpoint,                            BL04I-VA-IMG-06:PRO:OUTSP,      =pv("BL04I-VA-IMG-06:PRO:SP.DESC")
# % gui, IMG06, demand,   Relay 1 On Setpoint,                     BL04I-VA-IMG-06:RLY1:SETSP,     =pv("BL04I-VA-IMG-06:RLY1:SP.DESC")
# % gui, IMG06, demand,   Relay 1 Off Setpoint,                    BL04I-VA-IMG-06:RLY1:SETSPOFF,  =pv("BL04I-VA-IMG-06:RLY1:SPOFF.DESC")
# % gui, IMG06, demand,   Relay 2 On Setpoint,                     BL04I-VA-IMG-06:RLY2:SETSP,     =pv("BL04I-VA-IMG-06:RLY2:SP.DESC")
# % gui, IMG06, demand,   Relay 2 Off Setpoint,                    BL04I-VA-IMG-06:RLY2:SETSPOFF,  =pv("BL04I-VA-IMG-06:RLY2:SPOFF.DESC")
# % gui, IMG06, demand,   Relay 3 On Setpoint,                     BL04I-VA-IMG-06:RLY3:SETSP,     =pv("BL04I-VA-IMG-06:RLY3:SP.DESC")
# % gui, IMG06, demand,   Relay 3 Off Setpoint,                    BL04I-VA-IMG-06:RLY3:SETSPOFF,  =pv("BL04I-VA-IMG-06:RLY3:SPOFF.DESC")
# % gui, IMG06, demand,   Relay 4 On Setpoint,                     BL04I-VA-IMG-06:RLY4:SETSP,     =pv("BL04I-VA-IMG-06:RLY4:SP.DESC")
# 
# Cold Cathode Enable
#
#% archiver 10 Monitor
#% controldesk Pressure scon
#
record(bo, "BL04I-VA-IMG-06:CCHV") {
  field(DESC, "Cold Cathode Enable")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol ccenable(2) ty_40_7 0")
  field(FLNK, "BL04I-VA-IMG-06:STA")
  field(ZNAM, "Off")
  field(ONAM, "On")
}

record(bi, "BL04I-VA-IMG-06:SWITCHING") {
  field(DESC, "Switching")
  field(PINI, "YES")
  field(INP, "0")
  field(ONAM, "Switching")
}

################################################################################
# Status
#
#% archiver 10 Monitor
#% controldesk Pressure smon
#
record(mbbi, "BL04I-VA-IMG-06:STA") {
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol status(2) ty_40_7 0")
  field(DESC, "Status")
  field(SCAN, "1 second")
  field(FLNK, "BL04I-VA-IMG-06:PDIS")
  field(ZRST, "OK")
  field(ONST, "OK")
  field(TWST, "Above Range")
  field(THST, "At Atmosphere")
  field(FRST, "Low Emission")
  field(FVST, "Filament Off")
  field(SXST, "HV Off")
  field(SVST, "Startup Delay")
  field(EIST, "Below Range")
  field(NIST, "Controlled")
  field(TEST, "Protected State")
  field(ELST, "No Gauge")
  field(TVST, "Not Connected")
  field(TTST, "Wrong Gauge")
  field(FTST, "Bad Command")
  field(FFST, "Locked Out")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "MINOR")
  field(THSV, "MINOR")
  field(FRSV, "MAJOR")
  field(FVSV, "MAJOR")
  field(SXSV, "MAJOR")
  field(SVSV, "MINOR")
  field(EISV, "NO_ALARM")
  field(NISV, "MINOR")
  field(TESV, "MINOR")
  field(ELSV, "MAJOR")
  field(TVSV, "MAJOR")
  field(TTSV, "MAJOR")
  field(FTSV, "MAJOR")
  field(FFSV, "MAJOR")
}

#############################################################################
# Pressure
# 
# % archiver 1 Monitor
# % controldesk Pressure readback
record(ai, "BL04I-VA-IMG-06:P") {
  field(DESC, "Pressure")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol pressure(2) ty_40_7 0")
  field(FLNK, "BL04I-VA-IMG-06:PLOG")
  field(EGU, "mbar")
  field(PREC, "11")
  field(HOPR, "0.01")
  field(LOPR, "1.0E-11")
  field(SDIS, "BL04I-VA-IMG-06:PDIS")
  field(DISS, "INVALID")
}

record(calcout, "BL04I-VA-IMG-06:ADEL") {
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-IMG-06:P.ADEL")
  field(INPA, "BL04I-VA-IMG-06:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-IMG-06:PLOG") {
  field(DESC, "log Pressure")
  field(EGU, "log")
  field(CALC, "LOG(A)")
  field(INPA, "BL04I-VA-IMG-06:P MS")
  field(FLNK, "BL04I-VA-IMG-06:PMAX")
  field(HOPR, "-2")
  field(LOPR, "-11")
  field(ADEL, "0.025")
}
record(ai, "BL04I-VA-IMG-06:PMAX")
{
    field(DESC, "Max Pressure")
    field(INP,  "BL04I-VA-IMG-06:P MS")
    field(FLNK, "BL04I-VA-IMG-06:PMIN")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
record(ai, "BL04I-VA-IMG-06:PMIN")
{
    field(DESC, "Min Pressure")
    field(INP,  "BL04I-VA-IMG-06:P MS")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
################################################################################
# Control - IMG Enable
#
record(ao, "BL04I-VA-IMG-06:CTL:SETSP") {
  field(DESC, "IMG Enable")
  field(FLNK, "BL04I-VA-IMG-06:CTL:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(DRVH, "9.5e-1")
  field(DRVL, "2.7e-3")
  field(DOL, "1.0e-2")
}

record(mbbo, "BL04I-VA-IMG-06:CTL:ENABLE") {
  field(DESC, "Enable Control Setpoint")
  field(FLNK, "BL04I-VA-IMG-06:CTL:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  field(SDIS, "BL04I-VA-IMG-06:CTL:ILKSETSP:NOWRITE")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-06:CTL:SEQ") {
  field(DESC, "Sequence Control Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-IMG-06:CTL:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-IMG-06:CTL:DIS PP")
  field(DOL2, "BL04I-VA-IMG-06:CTL:SETSP")
  field(LNK2, "BL04I-VA-IMG-06:CTL:OUTSP PP")
  field(SDIS, "BL04I-VA-IMG-06:CTL:ILKSETSP:NOWRITE")
}

record(ai, "BL04I-VA-IMG-06:CTL:SP") 
  {
  field(DESC, "IMG Enable")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(2,CTL,BL04I-VA-IMG-06) ty_40_7 0")
  field(SCAN, "1 second")
  field(PINI, "YES")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(HIHI, "9.6e-1")
  field(LOLO, "2.6e-3")
  field(HIGH, "1.1e-2")
  field(LOW, "9.0e-3")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
  }

record(ao, "BL04I-VA-IMG-06:CTL:OUTSP") 
    {
    field(DESC, "Output Control Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-06:CTL:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(2,CTL,BL04I-VA-IMG-06) ty_40_7 0")
    }

record(bo, "BL04I-VA-IMG-06:CTL:DIS") 
  {
  field(DESC, "Disable Control Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(2,CTL) ty_40_7 0")
  }

# Get the implied disabled state of the CTL:SETSP
# if CTL:SP returns a non-zero value, then it is not disabled
# and it's in the mode "I/L Operating"
#
record(calcout, "BL04I-VA-IMG-06:CTL:GETDISCALC")
  {
  field(DESC, "Read Disable Setpoint")
  field(SCAN, "1 second")
  field(OUT, "BL04I-VA-IMG-06:CTL:GETDIS")
  field(INPA, "BL04I-VA-IMG-06:CTL:SP.VAL PP")
  field(CALC, "A<1e-10?0:1")
  field(FLNK, "BL04I-VA-IMG-06:CTL:GETDIS")
  }
# Convert the above disabled state to mbbi
record(mbbi, "BL04I-VA-IMG-06:CTL:GETDIS") 
  {
  field(DESC, "Read Disable Setpoint")
  field(SCAN, "Passive")
  field(INP, "BL04I-VA-IMG-06:CTL:GETDISCALC")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  }

################################################################################
# Protection - IMG Overpressure
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-IMG-06:PRO:SETSP") {
  field(DESC, "IMG Overpressure")
  field(FLNK, "BL04I-VA-IMG-06:PRO:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.0e-2")
  field(LOPR, "1.3e-5")
  field(DRVH, "1.0e-2")
  field(DRVL, "1.3e-5")
  field(DOL, "5.0e-4")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-IMG-06:PRO:ENABLE") {
  field(DESC, "Enable Protection Setpoint")
  field(FLNK, "BL04I-VA-IMG-06:PRO:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-06:PRO:SEQ") 
    {
    field(DESC, "Sequence Protection Setpoint")
    field(SELM, "Specified")
    field(SELL, "BL04I-VA-IMG-06:PRO:ENABLE.RVAL")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-IMG-06:PRO:DIS PP")
    field(DOL2, "BL04I-VA-IMG-06:PRO:SETSP")
    field(LNK2, "BL04I-VA-IMG-06:PRO:OUTSP PP")
    }

#
#% archiver 10 Monitor
#% controldesk IMG Overpressure readback
#
record(ai, "BL04I-VA-IMG-06:PRO:SP") {
  field(DESC, "IMG Overpressure")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(2,PRO,BL04I-VA-IMG-06) ty_40_7 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.0e-2")
  field(LOPR, "1.3e-5")
  field(HIHI, "1.1e-2")
  field(LOLO, "1.2e-5")
  field(HIGH, "5.1e-4")
  field(LOW, "4.9e-4")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

record(ao, "BL04I-VA-IMG-06:PRO:OUTSP") 
    {
    field(DESC, "Output Protection Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-06:PRO:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(2,PRO,BL04I-VA-IMG-06) ty_40_7 0")
    }

record(bo, "BL04I-VA-IMG-06:PRO:DIS") {
  field(DESC, "Disable Protection Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(2,PRO) ty_40_7 0")
}

################################################################################
# Relay - Valve Interlock
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-IMG-06:RLY:SETSP") {
  field(DESC, "Valve Interlock")
  field(FLNK, "BL04I-VA-IMG-06:RLY:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(DRVH, "1.2e-2")
  field(DRVL, "2.7e-10")
  field(DOL, "1.0e-6")
  field(SDIS, "BL04I-VA-IMG-06:RLY:ILKSETSP:NOWRITE")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-IMG-06:RLY:ENABLE") {
  field(DESC, "Enable Relay Setpoint")
  field(FLNK, "BL04I-VA-IMG-06:RLY:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-06:RLY:SEQ") {
  field(DESC, "Sequence Relay Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-IMG-06:RLY:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-IMG-06:RLY:DIS PP")
  field(DOL2, "BL04I-VA-IMG-06:RLY:SETSP")
  field(LNK2, "BL04I-VA-IMG-06:RLY:OUTSP PP")
}

#
#% archiver 10 Monitor
#% controldesk Valve Interlock readback
#
record(ai, "BL04I-VA-IMG-06:RLY:SP") {
  field(DESC, "Valve Interlock")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(2,RLY,BL04I-VA-IMG-06) ty_40_7 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(HIHI, "1.3e-2")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-6")
  field(LOW, "9.0e-7")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

record(ao, "BL04I-VA-IMG-06:RLY:OUTSP") 
    {
    field(DESC, "Output Relay Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-06:RLY:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(2,RLY,BL04I-VA-IMG-06) ty_40_7 0")
    }

record(bo, "BL04I-VA-IMG-06:RLY:DIS") 
    {
    field(DESC, "Disable Relay Setpoint")
    field(DTYP, "stream")
    field(OUT, "@mks937a.protocol dissp(2,RLY) ty_40_7 0")
    }

################################################################################
# Relay 2 (Chanel A Only) - MPS Interlock
#
record(calc, "BL04I-VA-IMG-06:RLA:EXISTS") {
  field(DESC, "Relay Exists")
  field(CALC, "A=B?0:1")
  field(INPA, "2")
  field(INPB, "1")
  field(PINI, "YES")
}

#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-IMG-06:RLA:SETSP") {
  field(DESC, "MPS Interlock")
  field(FLNK, "BL04I-VA-IMG-06:RLA:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(DRVH, "1.2e-2")
  field(DRVL, "2.7e-10")
  field(DISA, "2")
  field(DOL, "1.0e-7")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-IMG-06:RLA:ENABLE") {
  field(DESC, "Enable Relay Setpoint")
  field(FLNK, "BL04I-VA-IMG-06:RLA:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DISA, "2")
  field(DOL, "1")
  #field(PINI, "YES")
}

record(seq, "BL04I-VA-IMG-06:RLA:SEQ") {
  field(DESC, "Sequence Relay Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-IMG-06:RLA:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-IMG-06:RLA:DIS PP")
  field(DOL2, "BL04I-VA-IMG-06:RLA:SETSP")
  field(LNK2, "BL04I-VA-IMG-06:RLA:OUTSP PP")
  field(DISA, "2")
}

#
#% archiver 10 Monitor
#% controldesk MPS Interlock readback
#
record(ai, "BL04I-VA-IMG-06:RLA:SP") {
  field(DESC, "MPS Interlock")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(3,RLY,BL04I-VA-IMG-06) ty_40_7 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(HIHI, "1.3e-2")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-7")
  field(LOW, "9.0e-8")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
  field(DISA, "2")
}

record(ao, "BL04I-VA-IMG-06:RLA:OUTSP") 
    {
    field(DESC, "Output Relay Setpoint")
    field(DTYP, "stream")
    field(SDIS, "BL04I-VA-IMG-06:RLA:ILKSETSP:NOWRITE")
    field(OUT, "@mks937a.protocol setsp(3,RLY,BL04I-VA-IMG-06) ty_40_7 0")
    field(DISA, "2")
    }

record(bo, "BL04I-VA-IMG-06:RLA:DIS") {
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(3,RLY) ty_40_7 0")
  field(DISA, "2")
}

record(calc, "BL04I-VA-IMG-06:PDIS") {
  field(PHAS, "1")
  field(CALC, "(A>1)?1:0")
  field(INPA, "BL04I-VA-IMG-06:STA")
  field(FLNK, "BL04I-VA-IMG-06:P")
}



record(bi, "BL04I-VA-IMG-06:OFFWARN") 
{
  field(DESC, "Warning for OFF button")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Warning off")
  field(ONAM, "Warning on")
}

#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-IMG-06:PRO:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume an empty INP and do nothing.
#
# NB: These four records are identical and could have been instantiated via
#     alias. The names are for compatibility with the macros in the EDM screens
#     in which they are referenced.
#
record(bi, "BL04I-VA-IMG-06:PRO:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-06:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-IMG-06:CTL:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-06:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-IMG-06:RLA:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-06:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-IMG-06:RLY:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-06:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise just once, records that used to use PINI
# This is to ensure that the autoSR PV refered by ilk_write_access_pv
# is correctly established before any other record processing, to potentially
# avoid overwriting setpoints at IOC startup.
#
record(bo, "BL04I-VA-IMG-06:CTL:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-IMG-06:CTL:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-IMG-06:CTL:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-IMG-06:CTL:ENABLE")
    field(LNK2, "BL04I-VA-IMG-06:PRO:ENABLE")
    field(LNK3, "BL04I-VA-IMG-06:RLY:ENABLE")
    field(LNK4, "BL04I-VA-IMG-06:RLA:ENABLE")
    field(LNK5, "BL04I-VA-IMG-06:CTL:INITSETSPSDIS")
    field(SELM, "All")
}

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-IMG-06:ERROR")
    {
    field(DESC, "Last error message")
    field(INP, "")
    field(PINI, "YES")
    }


# mks937aImgGroup.template
#% macro, __doc__, Template database for a group of up to 8 IMGs
# Pete Owens - 10/5/05
#
# substitutions:
#% macro, device, device name
#% macro, delay, delay between starting each IMG
#% macro, img1, img 1 device name
#% macro, img2, img 2 device name
#% macro, img3, img 3 device name
#% macro, img4, img 4 device name
#% macro, img5, img 5 device name
#% macro, img6, img 6 device name
#% macro, img7, img 7 device name
#% macro, img8, img 8 device name
################################################################################
# Cold Cathode Enable
#
record(bo, "BL04I-VA-GIMG-98:CCHV")
{
    field(DESC, "Cold Cathode Enable")
    field(FLNK, "BL04I-VA-GIMG-98:SEQCCHV")
    field(ZNAM, "Off")
    field(ONAM, "On")
}
record(bi,"BL04I-VA-GIMG-98:SWITCHING")
{
    field(DESC, "Switching")
    field(PINI, "YES")
    field(INP,  "0")
    field(ZNAM, "")
    field(ONAM, "Switching")
}
record(seq, "BL04I-VA-GIMG-98:SEQCCHV")
{
    field(SELM, "All")
    field(DOL1, "1")
    field(DOL2, "BL04I-VA-GIMG-98:CCHV")
    field(DOL3, "BL04I-VA-GIMG-98:CCHV")
    field(DOL4, "BL04I-VA-GIMG-98:CCHV")
    field(DOL5, "BL04I-VA-GIMG-98:CCHV")
    field(DOL6, "BL04I-VA-GIMG-98:CCHV")
    field(DOL7, "BL04I-VA-GIMG-98:CCHV")
    field(DOL8, "BL04I-VA-GIMG-98:CCHV")
    field(DOL9, "BL04I-VA-GIMG-98:CCHV")
    field(DOLA, "0")
    field(DLY1, "0")
    field(DLY2, "0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DLY5, "0")
    field(DLY6, "0")
    field(DLY7, "0")
    field(DLY8, "0")
    field(DLY9, "0")
    field(DLYA, "0")
    field(LNK1, "BL04I-VA-GIMG-98:SWITCHING PP")
    field(LNK2, "BL04I-VA-GIMG-01:CCHV CA")
    field(LNK3, "BL04I-VA-IMG-03:CCHV CA")
    field(LNK4, "BL04I-VA-IMG-04:CCHV CA")
    field(LNK5, "BL04I-VA-IMG-05:CCHV CA")
    field(LNK6, "BL04I-VA-IMG-05:CCHV CA")
    field(LNK7, "BL04I-VA-IMG-05:CCHV CA")
    field(LNK8, "BL04I-VA-IMG-05:CCHV CA")
    field(LNK9, "BL04I-VA-IMG-05:CCHV CA")
    field(LNKA, "BL04I-VA-GIMG-98:SWITCHING PP")
}
################################################################################
# Status
#
record(mbbi, "BL04I-VA-GIMG-98:STA")
{
    field(DESC, "Status")
    field(INP,  "BL04I-VA-GIMG-98:SELSTA PP MS")
    field(SCAN, "1 second")
    field(FLNK, "BL04I-VA-GIMG-98:P")
    field(ZRST, "OK")
    field(ONST, "OK")
    field(TWST, "Above Range")
    field(THST, "At Atmosphere")
    field(FRST, "Low Emission")
    field(FVST, "Filament Off")
    field(SXST, "HV Off")
    field(SVST, "Startup Delay")
    field(EIST, "Below Range")
    field(NIST, "Controlled")
    field(TEST, "Protected State")
    field(ELST, "No Gauge")
    field(TVST, "Not Connected")
    field(TTST, "Wrong Gauge")
    field(FTST, "Bad Command")
    field(FFST, "Locked Out")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MAJOR")
    field(FVSV, "MAJOR")
    field(SXSV, "MAJOR")
    field(SVSV, "MINOR")
    field(EISV, "NO_ALARM")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MAJOR")
    field(TVSV, "MAJOR")
    field(TTSV, "MAJOR")
    field(FTSV, "MAJOR")
    field(FFSV, "MAJOR")
}
record(sel, "BL04I-VA-GIMG-98:SELSTA") 
{
    field(DESC, "Select Status")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GIMG-01:STA MS")
    field(INPB, "BL04I-VA-IMG-03:STA MS")
    field(INPC, "BL04I-VA-IMG-04:STA MS")
    field(INPD, "BL04I-VA-IMG-05:STA MS")
    field(INPE, "BL04I-VA-IMG-05:STA MS")
    field(INPF, "BL04I-VA-IMG-05:STA MS")
    field(INPG, "BL04I-VA-IMG-05:STA MS")
    field(INPH, "BL04I-VA-IMG-05:STA MS")
}
################################################################################
# Pressure
#
record(sel, "BL04I-VA-GIMG-98:P")
{
    field(DESC, "Pressure")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GIMG-01:P MS")
    field(INPB, "BL04I-VA-IMG-03:P MS")
    field(INPC, "BL04I-VA-IMG-04:P MS")
    field(INPD, "BL04I-VA-IMG-05:P MS")
    field(INPE, "BL04I-VA-IMG-05:P MS")
    field(INPF, "BL04I-VA-IMG-05:P MS")
    field(INPG, "BL04I-VA-IMG-05:P MS")
    field(INPH, "BL04I-VA-IMG-05:P MS")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
record(calc, "BL04I-VA-GIMG-98:PLOG")
{
    field(DESC, "log Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-GIMG-98:P PP MS")
    field(FLNK, "BL04I-VA-GIMG-98:PMAX")
    field(SCAN, "1 second")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(sel, "BL04I-VA-GIMG-98:PMAX")
{
    field(DESC, "Pressure")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GIMG-01:PMAX")
    field(INPB, "BL04I-VA-IMG-03:PMAX")
    field(INPC, "BL04I-VA-IMG-04:PMAX")
    field(INPD, "BL04I-VA-IMG-05:PMAX")
    field(INPE, "BL04I-VA-IMG-05:PMAX")
    field(INPF, "BL04I-VA-IMG-05:PMAX")
    field(INPG, "BL04I-VA-IMG-05:PMAX")
    field(INPH, "BL04I-VA-IMG-05:PMAX")
    field(FLNK, "BL04I-VA-GIMG-98:PMIN")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
record(sel, "BL04I-VA-GIMG-98:PMIN")
{
    field(DESC, "Pressure")
    field(SELM, "Low Signal")
    field(INPA, "BL04I-VA-GIMG-01:PMIN")
    field(INPB, "BL04I-VA-IMG-03:PMIN")
    field(INPC, "BL04I-VA-IMG-04:PMIN")
    field(INPD, "BL04I-VA-IMG-05:PMIN")
    field(INPE, "BL04I-VA-IMG-05:PMIN")
    field(INPF, "BL04I-VA-IMG-05:PMIN")
    field(INPG, "BL04I-VA-IMG-05:PMIN")
    field(INPH, "BL04I-VA-IMG-05:PMIN")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
################################################################################
# Protection - IMG Overpressure
#
record(ao, "BL04I-VA-GIMG-98:PRO:SETSP")
{
    field(DESC, "IMG Overpressure")
    field(FLNK, "BL04I-VA-GIMG-98:PRO:SEQSP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
    field(DRVH, "1.0e-2")
    field(DRVL, "1.3e-5")
    field(DOL , "5.0e-4")
}
record(seq, "BL04I-VA-GIMG-98:PRO:SEQSP")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-98:PRO:SETSP")
    field(DOL2, "BL04I-VA-GIMG-98:PRO:SETSP")
    field(DOL3, "BL04I-VA-GIMG-98:PRO:SETSP")
    field(DOL4, "BL04I-VA-GIMG-98:PRO:SETSP")
    field(DOL5, "BL04I-VA-GIMG-98:PRO:SETSP")
    field(DOL6, "BL04I-VA-GIMG-98:PRO:SETSP")
    field(DOL7, "BL04I-VA-GIMG-98:PRO:SETSP")
    field(DOL8, "BL04I-VA-GIMG-98:PRO:SETSP")
    field(LNK1, "BL04I-VA-GIMG-01:PRO:SETSP CA")
    field(LNK2, "BL04I-VA-IMG-03:PRO:SETSP CA")
    field(LNK3, "BL04I-VA-IMG-04:PRO:SETSP CA")
    field(LNK4, "BL04I-VA-IMG-05:PRO:SETSP CA")
    field(LNK5, "BL04I-VA-IMG-05:PRO:SETSP CA")
    field(LNK6, "BL04I-VA-IMG-05:PRO:SETSP CA")
    field(LNK7, "BL04I-VA-IMG-05:PRO:SETSP CA")
    field(LNK8, "BL04I-VA-IMG-05:PRO:SETSP CA")
}
record(mbbo, "BL04I-VA-GIMG-98:PRO:ENABLE")
{
    field(DESC, "Enable Protection Setpoint")
    field(FLNK, "BL04I-VA-GIMG-98:PRO:SEQENA")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GIMG-98:PRO:SEQENA")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-98:PRO:ENABLE")
    field(DOL2, "BL04I-VA-GIMG-98:PRO:ENABLE")
    field(DOL3, "BL04I-VA-GIMG-98:PRO:ENABLE")
    field(DOL4, "BL04I-VA-GIMG-98:PRO:ENABLE")
    field(DOL5, "BL04I-VA-GIMG-98:PRO:ENABLE")
    field(DOL6, "BL04I-VA-GIMG-98:PRO:ENABLE")
    field(DOL7, "BL04I-VA-GIMG-98:PRO:ENABLE")
    field(DOL8, "BL04I-VA-GIMG-98:PRO:ENABLE")
    field(LNK1, "BL04I-VA-GIMG-01:PRO:ENABLE CA")
    field(LNK2, "BL04I-VA-IMG-03:PRO:ENABLE CA")
    field(LNK3, "BL04I-VA-IMG-04:PRO:ENABLE CA")
    field(LNK4, "BL04I-VA-IMG-05:PRO:ENABLE CA")
    field(LNK5, "BL04I-VA-IMG-05:PRO:ENABLE CA")
    field(LNK6, "BL04I-VA-IMG-05:PRO:ENABLE CA")
    field(LNK7, "BL04I-VA-IMG-05:PRO:ENABLE CA")
    field(LNK8, "BL04I-VA-IMG-05:PRO:ENABLE CA")
}
record(sel, "BL04I-VA-GIMG-98:PRO:SP")
{
    field(DESC, "IMG Overpressure")
    field(SCAN, "1 second")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GIMG-01:PRO:SP MS")
    field(INPB, "BL04I-VA-IMG-03:PRO:SP MS")
    field(INPC, "BL04I-VA-IMG-04:PRO:SP MS")
    field(INPD, "BL04I-VA-IMG-05:PRO:SP MS")
    field(INPE, "BL04I-VA-IMG-05:PRO:SP MS")
    field(INPF, "BL04I-VA-IMG-05:PRO:SP MS")
    field(INPG, "BL04I-VA-IMG-05:PRO:SP MS")
    field(INPH, "BL04I-VA-IMG-05:PRO:SP MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
}
################################################################################
# Relay - Valve Interlock
#
record(ao, "BL04I-VA-GIMG-98:RLY:SETSP")
{
    field(DESC, "Valve I/L")
    field(FLNK, "BL04I-VA-GIMG-98:RLY:SEQSP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-6")
}
record(seq, "BL04I-VA-GIMG-98:RLY:SEQSP")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-98:RLY:SETSP")
    field(DOL2, "BL04I-VA-GIMG-98:RLY:SETSP")
    field(DOL3, "BL04I-VA-GIMG-98:RLY:SETSP")
    field(DOL4, "BL04I-VA-GIMG-98:RLY:SETSP")
    field(DOL5, "BL04I-VA-GIMG-98:RLY:SETSP")
    field(DOL6, "BL04I-VA-GIMG-98:RLY:SETSP")
    field(DOL7, "BL04I-VA-GIMG-98:RLY:SETSP")
    field(DOL8, "BL04I-VA-GIMG-98:RLY:SETSP")
    field(LNK1, "BL04I-VA-GIMG-01:RLY:SETSP CA")
    field(LNK2, "BL04I-VA-IMG-03:RLY:SETSP CA")
    field(LNK3, "BL04I-VA-IMG-04:RLY:SETSP CA")
    field(LNK4, "BL04I-VA-IMG-05:RLY:SETSP CA")
    field(LNK5, "BL04I-VA-IMG-05:RLY:SETSP CA")
    field(LNK6, "BL04I-VA-IMG-05:RLY:SETSP CA")
    field(LNK7, "BL04I-VA-IMG-05:RLY:SETSP CA")
    field(LNK8, "BL04I-VA-IMG-05:RLY:SETSP CA")
}
record(mbbo, "BL04I-VA-GIMG-98:RLY:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(FLNK, "BL04I-VA-GIMG-98:RLY:SEQENA")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GIMG-98:RLY:SEQENA")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-98:RLY:ENABLE")
    field(DOL2, "BL04I-VA-GIMG-98:RLY:ENABLE")
    field(DOL3, "BL04I-VA-GIMG-98:RLY:ENABLE")
    field(DOL4, "BL04I-VA-GIMG-98:RLY:ENABLE")
    field(DOL5, "BL04I-VA-GIMG-98:RLY:ENABLE")
    field(DOL6, "BL04I-VA-GIMG-98:RLY:ENABLE")
    field(DOL7, "BL04I-VA-GIMG-98:RLY:ENABLE")
    field(DOL8, "BL04I-VA-GIMG-98:RLY:ENABLE")
    field(LNK1, "BL04I-VA-GIMG-01:RLY:ENABLE CA")
    field(LNK2, "BL04I-VA-IMG-03:RLY:ENABLE CA")
    field(LNK3, "BL04I-VA-IMG-04:RLY:ENABLE CA")
    field(LNK4, "BL04I-VA-IMG-05:RLY:ENABLE CA")
    field(LNK5, "BL04I-VA-IMG-05:RLY:ENABLE CA")
    field(LNK6, "BL04I-VA-IMG-05:RLY:ENABLE CA")
    field(LNK7, "BL04I-VA-IMG-05:RLY:ENABLE CA")
    field(LNK8, "BL04I-VA-IMG-05:RLY:ENABLE CA")
}
record(sel, "BL04I-VA-GIMG-98:RLY:SP")
{
    field(DESC, "Valve Interlock")
    field(SCAN, "1 second")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GIMG-01:RLY:SP MS")
    field(INPB, "BL04I-VA-IMG-03:RLY:SP MS")
    field(INPC, "BL04I-VA-IMG-04:RLY:SP MS")
    field(INPD, "BL04I-VA-IMG-05:RLY:SP MS")
    field(INPE, "BL04I-VA-IMG-05:RLY:SP MS")
    field(INPF, "BL04I-VA-IMG-05:RLY:SP MS")
    field(INPG, "BL04I-VA-IMG-05:RLY:SP MS")
    field(INPH, "BL04I-VA-IMG-05:RLY:SP MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
}
################################################################################
# Relay 2 (Chanel A Only) - MPS Interlock
#
record(sel, "BL04I-VA-GIMG-98:RLA:EXISTS")
{
    field(DESC, "Relay Exists")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GIMG-01:RLA:EXISTS")
    field(INPB, "BL04I-VA-IMG-03:RLA:EXISTS")
    field(INPC, "BL04I-VA-IMG-04:RLA:EXISTS")
    field(INPD, "BL04I-VA-IMG-05:RLA:EXISTS")
    field(INPE, "BL04I-VA-IMG-05:RLA:EXISTS")
    field(INPF, "BL04I-VA-IMG-05:RLA:EXISTS")
    field(INPG, "BL04I-VA-IMG-05:RLA:EXISTS")
    field(INPH, "BL04I-VA-IMG-05:RLA:EXISTS")
    field(PINI, "YES")
}
record(ao, "BL04I-VA-GIMG-98:RLA:SETSP")
{
    field(DESC, "MPS Interlock")
    field(FLNK, "BL04I-VA-GIMG-98:RLA:SEQSP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-7")
}
record(seq, "BL04I-VA-GIMG-98:RLA:SEQSP")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-98:RLA:SETSP")
    field(DOL2, "BL04I-VA-GIMG-98:RLA:SETSP")
    field(DOL3, "BL04I-VA-GIMG-98:RLA:SETSP")
    field(DOL4, "BL04I-VA-GIMG-98:RLA:SETSP")
    field(DOL5, "BL04I-VA-GIMG-98:RLA:SETSP")
    field(DOL6, "BL04I-VA-GIMG-98:RLA:SETSP")
    field(DOL7, "BL04I-VA-GIMG-98:RLA:SETSP")
    field(DOL8, "BL04I-VA-GIMG-98:RLA:SETSP")
    field(LNK1, "BL04I-VA-GIMG-01:RLA:SETSP CA")
    field(LNK2, "BL04I-VA-IMG-03:RLA:SETSP CA")
    field(LNK3, "BL04I-VA-IMG-04:RLA:SETSP CA")
    field(LNK4, "BL04I-VA-IMG-05:RLA:SETSP CA")
    field(LNK5, "BL04I-VA-IMG-05:RLA:SETSP CA")
    field(LNK6, "BL04I-VA-IMG-05:RLA:SETSP CA")
    field(LNK7, "BL04I-VA-IMG-05:RLA:SETSP CA")
    field(LNK8, "BL04I-VA-IMG-05:RLA:SETSP CA")
}
record(mbbo, "BL04I-VA-GIMG-98:RLA:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(FLNK, "BL04I-VA-GIMG-98:RLA:SEQENA")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GIMG-98:RLA:SEQENA")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-98:RLA:ENABLE")
    field(DOL2, "BL04I-VA-GIMG-98:RLA:ENABLE")
    field(DOL3, "BL04I-VA-GIMG-98:RLA:ENABLE")
    field(DOL4, "BL04I-VA-GIMG-98:RLA:ENABLE")
    field(DOL5, "BL04I-VA-GIMG-98:RLA:ENABLE")
    field(DOL6, "BL04I-VA-GIMG-98:RLA:ENABLE")
    field(DOL7, "BL04I-VA-GIMG-98:RLA:ENABLE")
    field(DOL8, "BL04I-VA-GIMG-98:RLA:ENABLE")
    field(LNK1, "BL04I-VA-GIMG-01:RLA:ENABLE CA")
    field(LNK2, "BL04I-VA-IMG-03:RLA:ENABLE CA")
    field(LNK3, "BL04I-VA-IMG-04:RLA:ENABLE CA")
    field(LNK4, "BL04I-VA-IMG-05:RLA:ENABLE CA")
    field(LNK5, "BL04I-VA-IMG-05:RLA:ENABLE CA")
    field(LNK6, "BL04I-VA-IMG-05:RLA:ENABLE CA")
    field(LNK7, "BL04I-VA-IMG-05:RLA:ENABLE CA")
    field(LNK8, "BL04I-VA-IMG-05:RLA:ENABLE CA")
}
record(sel, "BL04I-VA-GIMG-98:RLA:SP")
{
    field(DESC, "MPS Interlock")
    field(SCAN, "1 second")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GIMG-01:RLA:SP MS")
    field(INPB, "BL04I-VA-IMG-03:RLA:SP MS")
    field(INPC, "BL04I-VA-IMG-04:RLA:SP MS")
    field(INPD, "BL04I-VA-IMG-05:RLA:SP MS")
    field(INPE, "BL04I-VA-IMG-05:RLA:SP MS")
    field(INPF, "BL04I-VA-IMG-05:RLA:SP MS")
    field(INPG, "BL04I-VA-IMG-05:RLA:SP MS")
    field(INPH, "BL04I-VA-IMG-05:RLA:SP MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
################################################################################
# mks937aImgGroup.template
#% macro, __doc__, Template database for a group of up to 8 IMGs
# Pete Owens - 10/5/05
#
# substitutions:
#% macro, device, device name
#% macro, delay, delay between starting each IMG
#% macro, img1, img 1 device name
#% macro, img2, img 2 device name
#% macro, img3, img 3 device name
#% macro, img4, img 4 device name
#% macro, img5, img 5 device name
#% macro, img6, img 6 device name
#% macro, img7, img 7 device name
#% macro, img8, img 8 device name
################################################################################
# Cold Cathode Enable
#
record(bo, "BL04I-VA-GIMG-99:CCHV")
{
    field(DESC, "Cold Cathode Enable")
    field(FLNK, "BL04I-VA-GIMG-99:SEQCCHV")
    field(ZNAM, "Off")
    field(ONAM, "On")
}
record(bi,"BL04I-VA-GIMG-99:SWITCHING")
{
    field(DESC, "Switching")
    field(PINI, "YES")
    field(INP,  "0")
    field(ZNAM, "")
    field(ONAM, "Switching")
}
record(seq, "BL04I-VA-GIMG-99:SEQCCHV")
{
    field(SELM, "All")
    field(DOL1, "1")
    field(DOL2, "BL04I-VA-GIMG-99:CCHV")
    field(DOL3, "BL04I-VA-GIMG-99:CCHV")
    field(DOL4, "BL04I-VA-GIMG-99:CCHV")
    field(DOL5, "BL04I-VA-GIMG-99:CCHV")
    field(DOL6, "BL04I-VA-GIMG-99:CCHV")
    field(DOL7, "BL04I-VA-GIMG-99:CCHV")
    field(DOL8, "BL04I-VA-GIMG-99:CCHV")
    field(DOL9, "BL04I-VA-GIMG-99:CCHV")
    field(DOLA, "0")
    field(DLY1, "0")
    field(DLY2, "0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DLY5, "0")
    field(DLY6, "0")
    field(DLY7, "0")
    field(DLY8, "0")
    field(DLY9, "0")
    field(DLYA, "0")
    field(LNK1, "BL04I-VA-GIMG-99:SWITCHING PP")
    field(LNK2, "BL04I-VA-IMG-06:CCHV CA")
    field(LNK3, "BL04I-VA-IMG-06:CCHV CA")
    field(LNK4, "BL04I-VA-IMG-06:CCHV CA")
    field(LNK5, "BL04I-VA-IMG-06:CCHV CA")
    field(LNK6, "BL04I-VA-IMG-06:CCHV CA")
    field(LNK7, "BL04I-VA-IMG-06:CCHV CA")
    field(LNK8, "BL04I-VA-IMG-06:CCHV CA")
    field(LNK9, "BL04I-VA-IMG-06:CCHV CA")
    field(LNKA, "BL04I-VA-GIMG-99:SWITCHING PP")
}
################################################################################
# Status
#
record(mbbi, "BL04I-VA-GIMG-99:STA")
{
    field(DESC, "Status")
    field(INP,  "BL04I-VA-GIMG-99:SELSTA PP MS")
    field(SCAN, "1 second")
    field(FLNK, "BL04I-VA-GIMG-99:P")
    field(ZRST, "OK")
    field(ONST, "OK")
    field(TWST, "Above Range")
    field(THST, "At Atmosphere")
    field(FRST, "Low Emission")
    field(FVST, "Filament Off")
    field(SXST, "HV Off")
    field(SVST, "Startup Delay")
    field(EIST, "Below Range")
    field(NIST, "Controlled")
    field(TEST, "Protected State")
    field(ELST, "No Gauge")
    field(TVST, "Not Connected")
    field(TTST, "Wrong Gauge")
    field(FTST, "Bad Command")
    field(FFST, "Locked Out")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MAJOR")
    field(FVSV, "MAJOR")
    field(SXSV, "MAJOR")
    field(SVSV, "MINOR")
    field(EISV, "NO_ALARM")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MAJOR")
    field(TVSV, "MAJOR")
    field(TTSV, "MAJOR")
    field(FTSV, "MAJOR")
    field(FFSV, "MAJOR")
}
record(sel, "BL04I-VA-GIMG-99:SELSTA") 
{
    field(DESC, "Select Status")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-06:STA MS")
    field(INPB, "BL04I-VA-IMG-06:STA MS")
    field(INPC, "BL04I-VA-IMG-06:STA MS")
    field(INPD, "BL04I-VA-IMG-06:STA MS")
    field(INPE, "BL04I-VA-IMG-06:STA MS")
    field(INPF, "BL04I-VA-IMG-06:STA MS")
    field(INPG, "BL04I-VA-IMG-06:STA MS")
    field(INPH, "BL04I-VA-IMG-06:STA MS")
}
################################################################################
# Pressure
#
record(sel, "BL04I-VA-GIMG-99:P")
{
    field(DESC, "Pressure")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-06:P MS")
    field(INPB, "BL04I-VA-IMG-06:P MS")
    field(INPC, "BL04I-VA-IMG-06:P MS")
    field(INPD, "BL04I-VA-IMG-06:P MS")
    field(INPE, "BL04I-VA-IMG-06:P MS")
    field(INPF, "BL04I-VA-IMG-06:P MS")
    field(INPG, "BL04I-VA-IMG-06:P MS")
    field(INPH, "BL04I-VA-IMG-06:P MS")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
record(calc, "BL04I-VA-GIMG-99:PLOG")
{
    field(DESC, "log Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-GIMG-99:P PP MS")
    field(FLNK, "BL04I-VA-GIMG-99:PMAX")
    field(SCAN, "1 second")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(sel, "BL04I-VA-GIMG-99:PMAX")
{
    field(DESC, "Pressure")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-06:PMAX")
    field(INPB, "BL04I-VA-IMG-06:PMAX")
    field(INPC, "BL04I-VA-IMG-06:PMAX")
    field(INPD, "BL04I-VA-IMG-06:PMAX")
    field(INPE, "BL04I-VA-IMG-06:PMAX")
    field(INPF, "BL04I-VA-IMG-06:PMAX")
    field(INPG, "BL04I-VA-IMG-06:PMAX")
    field(INPH, "BL04I-VA-IMG-06:PMAX")
    field(FLNK, "BL04I-VA-GIMG-99:PMIN")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
record(sel, "BL04I-VA-GIMG-99:PMIN")
{
    field(DESC, "Pressure")
    field(SELM, "Low Signal")
    field(INPA, "BL04I-VA-IMG-06:PMIN")
    field(INPB, "BL04I-VA-IMG-06:PMIN")
    field(INPC, "BL04I-VA-IMG-06:PMIN")
    field(INPD, "BL04I-VA-IMG-06:PMIN")
    field(INPE, "BL04I-VA-IMG-06:PMIN")
    field(INPF, "BL04I-VA-IMG-06:PMIN")
    field(INPG, "BL04I-VA-IMG-06:PMIN")
    field(INPH, "BL04I-VA-IMG-06:PMIN")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
################################################################################
# Protection - IMG Overpressure
#
record(ao, "BL04I-VA-GIMG-99:PRO:SETSP")
{
    field(DESC, "IMG Overpressure")
    field(FLNK, "BL04I-VA-GIMG-99:PRO:SEQSP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
    field(DRVH, "1.0e-2")
    field(DRVL, "1.3e-5")
    field(DOL , "5.0e-4")
}
record(seq, "BL04I-VA-GIMG-99:PRO:SEQSP")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-99:PRO:SETSP")
    field(DOL2, "BL04I-VA-GIMG-99:PRO:SETSP")
    field(DOL3, "BL04I-VA-GIMG-99:PRO:SETSP")
    field(DOL4, "BL04I-VA-GIMG-99:PRO:SETSP")
    field(DOL5, "BL04I-VA-GIMG-99:PRO:SETSP")
    field(DOL6, "BL04I-VA-GIMG-99:PRO:SETSP")
    field(DOL7, "BL04I-VA-GIMG-99:PRO:SETSP")
    field(DOL8, "BL04I-VA-GIMG-99:PRO:SETSP")
    field(LNK1, "BL04I-VA-IMG-06:PRO:SETSP CA")
    field(LNK2, "BL04I-VA-IMG-06:PRO:SETSP CA")
    field(LNK3, "BL04I-VA-IMG-06:PRO:SETSP CA")
    field(LNK4, "BL04I-VA-IMG-06:PRO:SETSP CA")
    field(LNK5, "BL04I-VA-IMG-06:PRO:SETSP CA")
    field(LNK6, "BL04I-VA-IMG-06:PRO:SETSP CA")
    field(LNK7, "BL04I-VA-IMG-06:PRO:SETSP CA")
    field(LNK8, "BL04I-VA-IMG-06:PRO:SETSP CA")
}
record(mbbo, "BL04I-VA-GIMG-99:PRO:ENABLE")
{
    field(DESC, "Enable Protection Setpoint")
    field(FLNK, "BL04I-VA-GIMG-99:PRO:SEQENA")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GIMG-99:PRO:SEQENA")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-99:PRO:ENABLE")
    field(DOL2, "BL04I-VA-GIMG-99:PRO:ENABLE")
    field(DOL3, "BL04I-VA-GIMG-99:PRO:ENABLE")
    field(DOL4, "BL04I-VA-GIMG-99:PRO:ENABLE")
    field(DOL5, "BL04I-VA-GIMG-99:PRO:ENABLE")
    field(DOL6, "BL04I-VA-GIMG-99:PRO:ENABLE")
    field(DOL7, "BL04I-VA-GIMG-99:PRO:ENABLE")
    field(DOL8, "BL04I-VA-GIMG-99:PRO:ENABLE")
    field(LNK1, "BL04I-VA-IMG-06:PRO:ENABLE CA")
    field(LNK2, "BL04I-VA-IMG-06:PRO:ENABLE CA")
    field(LNK3, "BL04I-VA-IMG-06:PRO:ENABLE CA")
    field(LNK4, "BL04I-VA-IMG-06:PRO:ENABLE CA")
    field(LNK5, "BL04I-VA-IMG-06:PRO:ENABLE CA")
    field(LNK6, "BL04I-VA-IMG-06:PRO:ENABLE CA")
    field(LNK7, "BL04I-VA-IMG-06:PRO:ENABLE CA")
    field(LNK8, "BL04I-VA-IMG-06:PRO:ENABLE CA")
}
record(sel, "BL04I-VA-GIMG-99:PRO:SP")
{
    field(DESC, "IMG Overpressure")
    field(SCAN, "1 second")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-06:PRO:SP MS")
    field(INPB, "BL04I-VA-IMG-06:PRO:SP MS")
    field(INPC, "BL04I-VA-IMG-06:PRO:SP MS")
    field(INPD, "BL04I-VA-IMG-06:PRO:SP MS")
    field(INPE, "BL04I-VA-IMG-06:PRO:SP MS")
    field(INPF, "BL04I-VA-IMG-06:PRO:SP MS")
    field(INPG, "BL04I-VA-IMG-06:PRO:SP MS")
    field(INPH, "BL04I-VA-IMG-06:PRO:SP MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
}
################################################################################
# Relay - Valve Interlock
#
record(ao, "BL04I-VA-GIMG-99:RLY:SETSP")
{
    field(DESC, "Valve I/L")
    field(FLNK, "BL04I-VA-GIMG-99:RLY:SEQSP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-6")
}
record(seq, "BL04I-VA-GIMG-99:RLY:SEQSP")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-99:RLY:SETSP")
    field(DOL2, "BL04I-VA-GIMG-99:RLY:SETSP")
    field(DOL3, "BL04I-VA-GIMG-99:RLY:SETSP")
    field(DOL4, "BL04I-VA-GIMG-99:RLY:SETSP")
    field(DOL5, "BL04I-VA-GIMG-99:RLY:SETSP")
    field(DOL6, "BL04I-VA-GIMG-99:RLY:SETSP")
    field(DOL7, "BL04I-VA-GIMG-99:RLY:SETSP")
    field(DOL8, "BL04I-VA-GIMG-99:RLY:SETSP")
    field(LNK1, "BL04I-VA-IMG-06:RLY:SETSP CA")
    field(LNK2, "BL04I-VA-IMG-06:RLY:SETSP CA")
    field(LNK3, "BL04I-VA-IMG-06:RLY:SETSP CA")
    field(LNK4, "BL04I-VA-IMG-06:RLY:SETSP CA")
    field(LNK5, "BL04I-VA-IMG-06:RLY:SETSP CA")
    field(LNK6, "BL04I-VA-IMG-06:RLY:SETSP CA")
    field(LNK7, "BL04I-VA-IMG-06:RLY:SETSP CA")
    field(LNK8, "BL04I-VA-IMG-06:RLY:SETSP CA")
}
record(mbbo, "BL04I-VA-GIMG-99:RLY:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(FLNK, "BL04I-VA-GIMG-99:RLY:SEQENA")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GIMG-99:RLY:SEQENA")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-99:RLY:ENABLE")
    field(DOL2, "BL04I-VA-GIMG-99:RLY:ENABLE")
    field(DOL3, "BL04I-VA-GIMG-99:RLY:ENABLE")
    field(DOL4, "BL04I-VA-GIMG-99:RLY:ENABLE")
    field(DOL5, "BL04I-VA-GIMG-99:RLY:ENABLE")
    field(DOL6, "BL04I-VA-GIMG-99:RLY:ENABLE")
    field(DOL7, "BL04I-VA-GIMG-99:RLY:ENABLE")
    field(DOL8, "BL04I-VA-GIMG-99:RLY:ENABLE")
    field(LNK1, "BL04I-VA-IMG-06:RLY:ENABLE CA")
    field(LNK2, "BL04I-VA-IMG-06:RLY:ENABLE CA")
    field(LNK3, "BL04I-VA-IMG-06:RLY:ENABLE CA")
    field(LNK4, "BL04I-VA-IMG-06:RLY:ENABLE CA")
    field(LNK5, "BL04I-VA-IMG-06:RLY:ENABLE CA")
    field(LNK6, "BL04I-VA-IMG-06:RLY:ENABLE CA")
    field(LNK7, "BL04I-VA-IMG-06:RLY:ENABLE CA")
    field(LNK8, "BL04I-VA-IMG-06:RLY:ENABLE CA")
}
record(sel, "BL04I-VA-GIMG-99:RLY:SP")
{
    field(DESC, "Valve Interlock")
    field(SCAN, "1 second")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-06:RLY:SP MS")
    field(INPB, "BL04I-VA-IMG-06:RLY:SP MS")
    field(INPC, "BL04I-VA-IMG-06:RLY:SP MS")
    field(INPD, "BL04I-VA-IMG-06:RLY:SP MS")
    field(INPE, "BL04I-VA-IMG-06:RLY:SP MS")
    field(INPF, "BL04I-VA-IMG-06:RLY:SP MS")
    field(INPG, "BL04I-VA-IMG-06:RLY:SP MS")
    field(INPH, "BL04I-VA-IMG-06:RLY:SP MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
}
################################################################################
# Relay 2 (Chanel A Only) - MPS Interlock
#
record(sel, "BL04I-VA-GIMG-99:RLA:EXISTS")
{
    field(DESC, "Relay Exists")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-06:RLA:EXISTS")
    field(INPB, "BL04I-VA-IMG-06:RLA:EXISTS")
    field(INPC, "BL04I-VA-IMG-06:RLA:EXISTS")
    field(INPD, "BL04I-VA-IMG-06:RLA:EXISTS")
    field(INPE, "BL04I-VA-IMG-06:RLA:EXISTS")
    field(INPF, "BL04I-VA-IMG-06:RLA:EXISTS")
    field(INPG, "BL04I-VA-IMG-06:RLA:EXISTS")
    field(INPH, "BL04I-VA-IMG-06:RLA:EXISTS")
    field(PINI, "YES")
}
record(ao, "BL04I-VA-GIMG-99:RLA:SETSP")
{
    field(DESC, "MPS Interlock")
    field(FLNK, "BL04I-VA-GIMG-99:RLA:SEQSP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-7")
}
record(seq, "BL04I-VA-GIMG-99:RLA:SEQSP")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-99:RLA:SETSP")
    field(DOL2, "BL04I-VA-GIMG-99:RLA:SETSP")
    field(DOL3, "BL04I-VA-GIMG-99:RLA:SETSP")
    field(DOL4, "BL04I-VA-GIMG-99:RLA:SETSP")
    field(DOL5, "BL04I-VA-GIMG-99:RLA:SETSP")
    field(DOL6, "BL04I-VA-GIMG-99:RLA:SETSP")
    field(DOL7, "BL04I-VA-GIMG-99:RLA:SETSP")
    field(DOL8, "BL04I-VA-GIMG-99:RLA:SETSP")
    field(LNK1, "BL04I-VA-IMG-06:RLA:SETSP CA")
    field(LNK2, "BL04I-VA-IMG-06:RLA:SETSP CA")
    field(LNK3, "BL04I-VA-IMG-06:RLA:SETSP CA")
    field(LNK4, "BL04I-VA-IMG-06:RLA:SETSP CA")
    field(LNK5, "BL04I-VA-IMG-06:RLA:SETSP CA")
    field(LNK6, "BL04I-VA-IMG-06:RLA:SETSP CA")
    field(LNK7, "BL04I-VA-IMG-06:RLA:SETSP CA")
    field(LNK8, "BL04I-VA-IMG-06:RLA:SETSP CA")
}
record(mbbo, "BL04I-VA-GIMG-99:RLA:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(FLNK, "BL04I-VA-GIMG-99:RLA:SEQENA")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GIMG-99:RLA:SEQENA")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-99:RLA:ENABLE")
    field(DOL2, "BL04I-VA-GIMG-99:RLA:ENABLE")
    field(DOL3, "BL04I-VA-GIMG-99:RLA:ENABLE")
    field(DOL4, "BL04I-VA-GIMG-99:RLA:ENABLE")
    field(DOL5, "BL04I-VA-GIMG-99:RLA:ENABLE")
    field(DOL6, "BL04I-VA-GIMG-99:RLA:ENABLE")
    field(DOL7, "BL04I-VA-GIMG-99:RLA:ENABLE")
    field(DOL8, "BL04I-VA-GIMG-99:RLA:ENABLE")
    field(LNK1, "BL04I-VA-IMG-06:RLA:ENABLE CA")
    field(LNK2, "BL04I-VA-IMG-06:RLA:ENABLE CA")
    field(LNK3, "BL04I-VA-IMG-06:RLA:ENABLE CA")
    field(LNK4, "BL04I-VA-IMG-06:RLA:ENABLE CA")
    field(LNK5, "BL04I-VA-IMG-06:RLA:ENABLE CA")
    field(LNK6, "BL04I-VA-IMG-06:RLA:ENABLE CA")
    field(LNK7, "BL04I-VA-IMG-06:RLA:ENABLE CA")
    field(LNK8, "BL04I-VA-IMG-06:RLA:ENABLE CA")
}
record(sel, "BL04I-VA-GIMG-99:RLA:SP")
{
    field(DESC, "MPS Interlock")
    field(SCAN, "1 second")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-06:RLA:SP MS")
    field(INPB, "BL04I-VA-IMG-06:RLA:SP MS")
    field(INPC, "BL04I-VA-IMG-06:RLA:SP MS")
    field(INPD, "BL04I-VA-IMG-06:RLA:SP MS")
    field(INPE, "BL04I-VA-IMG-06:RLA:SP MS")
    field(INPF, "BL04I-VA-IMG-06:RLA:SP MS")
    field(INPG, "BL04I-VA-IMG-06:RLA:SP MS")
    field(INPH, "BL04I-VA-IMG-06:RLA:SP MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
################################################################################
#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937bImg.template
#% macro, __doc__, Template database for an inverted magnetron guage connected 
# to one channel of an mks937b Multi-Sensor System 
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, address, Controller address (001 .. 253)
#% macro, channel, MKS 937B channel number (1-4)
#
# optional substitutions:
#% macro, name,        Object name, and gui association name
#% macro, ctl_channel, The desired control channel 0 = C1, 1 = C2, 2 = None, 3 = A1, 4 = B1, 5 = A2, 6 = B2.
#% macro, ctlsp_level, The desired control setpoint value.
#% macro, ctlsp_drvh,  The DRVH field on control setpoint records 
#                      (limits max value of control setpoint)
#% macro, ctlsp_drvl,  The DRVL field on control setpoint records. 
#                      (limits min value of control setpoint)
#% macro, ctlsp_hopr,  The HOPR field on control setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, ctlsp_lopr,  The LOPR field on control setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, ctlsp_hihi,  The HIHI alarm field on the control setpoint record.
#% macro, ctlsp_lolo,  The LOLO alarm field on the control setpoint record.
#% macro, ctlsp_high,  The HIGH alarm field on the control setpoint record.
#% macro, ctlsp_low ,  The LOW alarm field on the control setpoint record.
#% macro, ctlsp_desc,  The DESC field on the control setpoint record.
#% macro, ctlhyst_hopr,The HOPR field on control hysteresis records 
#                      (high operator value - helps display set correct range).
#% macro, ctlhyst_lopr,The LOPR field on control hysteresis records 
#                      (low operator value - helps display set correct range).
#% macro, prosp_level, The desired protection setpoint value.
#% macro, prosp_drvh,  The DRVH field on protection setpoint records 
#                      (limits max value of protection setpoint)
#% macro, prosp_drvl,  The DRVL field on protection setpoint records. 
#                      (limits min value of protection setpoint)
#% macro, prosp_hopr,  The HOPR field on protection setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, prosp_lopr,  The LOPR field on protection setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, prosp_hihi,  The HIHI alarm field on the protection setpoint record.
#% macro, prosp_lolo,  The LOLO alarm field on the protection setpoint record.
#% macro, prosp_high,  The HIGH alarm field on the protection setpoint record.
#% macro, prosp_low ,  The LOW alarm field on the protection setpoint record.
#% macro, prosp_desc,  The DESC field on the protection setpoint record 
#                      (appears as a label on the Img EDM screen).
#
#% macro, offwarn,     Flag to display a warning that switching off the IMG could trip the beam
#% macro, ilk_write_access_pv ,   Link to the interlocks setpoint global write access record.
#
#% macro, img_ctl_setmode, Default = 1 (I/L Safe), 0 (Force ON), 2 (I/L Operating).
#
################################################################################

# This associates an edm screen with the template
# % gui, IMG01, edm, mks937bImg.edl, device=BL04I-VA-IMG-01

# This associates BOY screens with the template
# % gui, IMG01, boydetail, mks937bApp_opi/img_detail.opi, device=BL04I-VA-IMG-01, desc=BL04I-VA-IMG-01, name=IMG01
# % gui, IMG01, boyembed, mks937bApp_opi/img_embed_box.opi, device=BL04I-VA-IMG-01, desc=BL04I-VA-IMG-01, name=IMG01
# % gui, IMG01, boyembed, mks937bApp_opi/img_embed.opi, device=BL04I-VA-IMG-01, desc=BL04I-VA-IMG-01, name=IMG01

# These define what PVs a valve detail screen should contain
# % gui, IMG01, readback, Pressure,                                BL04I-VA-IMG-01:P
# % gui, IMG01, readback, Status,                                  BL04I-VA-IMG-01:STA
# % gui, IMG01, readback, Gauge Setpoint Write,                    BL04I-VA-IMG-01:PRO:ILKSETSP:NOWRITE
# % gui, IMG01, readback, Relay 1 on SetPoint for Summary,         BL04I-VA-IMG-01:RLY1:SP,        =pv("BL04I-VA-IMG-01:RLY1:SP.DESC")
# % gui, IMG01, readback, Relay 1 off SetPoint for Summary,        BL04I-VA-IMG-01:RLY1:SPOFF,     =pv("BL04I-VA-IMG-01:RLY1:SPOFF.DESC")
# % gui, IMG01, readback, Relay 2 on SetPoint for Summary,         BL04I-VA-IMG-01:RLY2:SP,        =pv("BL04I-VA-IMG-01:RLY2:SP.DESC")
# % gui, IMG01, readback, Relay 3 on SetPoint for Summary,         BL04I-VA-IMG-01:RLY3:SP,        =pv("BL04I-VA-IMG-01:RLY3:SP.DESC")
## TODO The below gives us feedback on what the state actually is - without this you get the current demand
## (as per differences between EDM and CSS enum menus)
# % gui, IMG01, readback, Cold Cathode,                            BL04I-VA-IMG-01:ISENABLED
# % gui, IMG01, enum, Cold Cathode,                                BL04I-VA-IMG-01:CCHV

# % gui, IMG01, readback, CTL SP Controlling Gauge,                BL04I-VA-IMG-01:CTL:SETCCS,     =concat(pv("BL04I-VA-IMG-01:CTL:SP.DESC")," Gauge")
# % gui, IMG01, readback, CTL SP MODE,                             BL04I-VA-IMG-01:CTL:SETMODE,    =concat(pv("BL04I-VA-IMG-01:CTL:SP.DESC")," Mode")
# % gui, IMG01, readback, Pro Setpoint,                            BL04I-VA-IMG-01:PRO:SP,         =pv("BL04I-VA-IMG-01:PRO:SP.DESC")
# % gui, IMG01, readback, Relay 1 On Setpoint,                     BL04I-VA-IMG-01:RLY1:SP,        =pv("BL04I-VA-IMG-01:RLY1:SP.DESC")
# % gui, IMG01, readback, Relay 1 Off Setpoint,                    BL04I-VA-IMG-01:RLY1:SPOFF,     =pv("BL04I-VA-IMG-01:RLY1:SPOFF.DESC")
# % gui, IMG01, readback, Relay 2 On Setpoint,                     BL04I-VA-IMG-01:RLY2:SP,        =pv("BL04I-VA-IMG-01:RLY2:SP.DESC")
# % gui, IMG01, readback, Relay 2 Off Setpoint,                    BL04I-VA-IMG-01:RLY2:SPOFF,     =pv("BL04I-VA-IMG-01:RLY2:SPOFF.DESC")
# % gui, IMG01, readback, Relay 3 On Setpoint,                     BL04I-VA-IMG-01:RLY3:SP,        =pv("BL04I-VA-IMG-01:RLY3:SP.DESC")
# % gui, IMG01, readback, Relay 3 Off Setpoint,                    BL04I-VA-IMG-01:RLY3:SPOFF,     =pv("BL04I-VA-IMG-01:RLY3:SPOFF.DESC")
# % gui, IMG01, readback, Relay 4 On Setpoint,                     BL04I-VA-IMG-01:RLY4:SP,        =pv("BL04I-VA-IMG-01:RLY4:SP.DESC")
# % gui, IMG01, readback, Relay 4 Off Setpoint,                    BL04I-VA-IMG-01:RLY4:SPOFF,     =pv("BL04I-VA-IMG-01:RLY4:SPOFF.DESC")
# % gui, IMG01, readback, Fast Relay On Setpoint,                  BL04I-VA-IMG-01:FRLY:SP,        =pv("BL04I-VA-IMG-01:FRLY:SP.DESC")

# % gui, IMG01, demand,   Pro Setpoint,                            BL04I-VA-IMG-01:PRO:OUTSP,      =pv("BL04I-VA-IMG-01:PRO:SP.DESC")
# % gui, IMG01, demand,   Relay 1 On Setpoint,                     BL04I-VA-IMG-01:RLY1:SETSP,     =pv("BL04I-VA-IMG-01:RLY1:SP.DESC")
# % gui, IMG01, demand,   Relay 1 Off Setpoint,                    BL04I-VA-IMG-01:RLY1:SETSPOFF,  =pv("BL04I-VA-IMG-01:RLY1:SPOFF.DESC")
# % gui, IMG01, demand,   Relay 2 On Setpoint,                     BL04I-VA-IMG-01:RLY2:SETSP,     =pv("BL04I-VA-IMG-01:RLY2:SP.DESC")
# % gui, IMG01, demand,   Relay 2 Off Setpoint,                    BL04I-VA-IMG-01:RLY2:SETSPOFF,  =pv("BL04I-VA-IMG-01:RLY2:SPOFF.DESC")
# % gui, IMG01, demand,   Relay 3 On Setpoint,                     BL04I-VA-IMG-01:RLY3:SETSP,     =pv("BL04I-VA-IMG-01:RLY3:SP.DESC")
# % gui, IMG01, demand,   Relay 3 Off Setpoint,                    BL04I-VA-IMG-01:RLY3:SETSPOFF,  =pv("BL04I-VA-IMG-01:RLY3:SPOFF.DESC")
# % gui, IMG01, demand,   Relay 4 On Setpoint,                     BL04I-VA-IMG-01:RLY4:SETSP,     =pv("BL04I-VA-IMG-01:RLY4:SP.DESC")
# % gui, IMG01, demand,   Relay 4 Off Setpoint,                    BL04I-VA-IMG-01:RLY4:SETSPOFF,  =pv("BL04I-VA-IMG-01:RLY4:SPOFF.DESC")
# % gui, IMG01, demand,   Fast Relay On Setpoint,                  BL04I-VA-IMG-01:FRLY:SETSP,     =pv("BL04I-VA-IMG-01:FRLY:SP.DESC")

# % gui, IMG01, readback, Relay 1 SP Mode,                         BL04I-VA-IMG-01:RLY1:MODE,      =concat(pv("BL04I-VA-IMG-01:RLY1:SP.DESC")," Mode")
# % gui, IMG01, readback, Relay 2 SP Mode,                         BL04I-VA-IMG-01:RLY2:MODE,      =concat(pv("BL04I-VA-IMG-01:RLY2:SP.DESC")," Mode")
# % gui, IMG01, readback, Relay 3 SP Mode,                         BL04I-VA-IMG-01:RLY3:MODE,      =concat(pv("BL04I-VA-IMG-01:RLY3:SP.DESC")," Mode")
# % gui, IMG01, readback, Relay 4 SP Mode,                         BL04I-VA-IMG-01:RLY4:MODE,      =concat(pv("BL04I-VA-IMG-01:RLY4:SP.DESC")," Mode")

# % gui, IMG01, enum, CTL SP Controlling Gauge,                    BL04I-VA-IMG-01:CTL:SETCCS,     =concat(pv("BL04I-VA-IMG-01:CTL:SP.DESC")," Gauge")
# % gui, IMG01, enum, CTL SP MODE,                                 BL04I-VA-IMG-01:CTL:SETMODE,    =concat(pv("BL04I-VA-IMG-01:CTL:SP.DESC")," Mode")
# % gui, IMG01, enum, Relay 1 SP Mode,                             BL04I-VA-IMG-01:RLY1:SETMODE,   =concat(pv("BL04I-VA-IMG-01:RLY1:SP.DESC")," Mode")
# % gui, IMG01, readback, Relay 1 SP Direction,                    BL04I-VA-IMG-01:RLY1:DIR,       =concat(pv("BL04I-VA-IMG-01:RLY1:SP.DESC")," Dir")
# % gui, IMG01, enum, Relay 2 SP Mode,                             BL04I-VA-IMG-01:RLY2:SETMODE,   =concat(pv("BL04I-VA-IMG-01:RLY2:SP.DESC")," Mode")
# % gui, IMG01, readback, Relay 2 SP Direction,                    BL04I-VA-IMG-01:RLY2:DIR,       =concat(pv("BL04I-VA-IMG-01:RLY2:SP.DESC")," Dir")
# % gui, IMG01, enum, Relay 3 SP Mode,                             BL04I-VA-IMG-01:RLY3:SETMODE,   =concat(pv("BL04I-VA-IMG-01:RLY3:SP.DESC")," Mode")
# % gui, IMG01, readback, Relay 3 SP Direction,                    BL04I-VA-IMG-01:RLY3:DIR,       =concat(pv("BL04I-VA-IMG-01:RLY3:SP.DESC")," Dir")
# % gui, IMG01, enum, Relay 4 SP Mode,                             BL04I-VA-IMG-01:RLY4:SETMODE,   =concat(pv("BL04I-VA-IMG-01:RLY4:SP.DESC")," Mode")
# % gui, IMG01, readback, Relay 4 SP Direction,                    BL04I-VA-IMG-01:RLY4:DIR,       =concat(pv("BL04I-VA-IMG-01:RLY4:SP.DESC")," Dir")

#
#% archiver 10 Monitor
#% controldesk Pressure scon
#
record(bo, "BL04I-VA-IMG-01:CCHV") 
{
  field(DESC, "Cold Cathode Enable")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol ccenable(001,1) ty_40_5 0")
  field(FLNK, "BL04I-VA-IMG-01:FANENAB")
  field(ZNAM, "Off")
  field(ONAM, "On")
}

record(mbbi, "BL04I-VA-IMG-01:ISENABLED") {
  field(DESC, "IMG power")
  field(DTYP, "stream")
  field(INP,  "@mks937b.protocol get_cc_enabled(001,1) ty_40_5")
  field(ZRST, "Off")
  field(ONST, "On")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(PINI, "YES")
}

#  Changing CC HV mode requires associated processing of :STA and :ISENABLED
#  to update the readbacks
record(fanout, "BL04I-VA-IMG-01:FANENAB")
{
    field(DESC, "Distribute enabled")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-IMG-01:STA")
    field(LNK2, "BL04I-VA-IMG-01:ISENABLED")
}


record(bi, "BL04I-VA-IMG-01:SWITCHING") 
{
  field(DESC, "Switching")
  field(PINI, "YES")
  field(INP, "0")
  field(ONAM, "Switching")
}

################################################################################
# Status
#
#% archiver 10 Monitor
#% controldesk Pressure smon
#
record(mbbi, "BL04I-VA-IMG-01:STA") 
{
  field(DTYP, "Soft Channel")
#  field(DTYP, "stream")
#  field(INP, "@mks937b.protocol status(001,1) ty_40_5")
#  field(SCAN, "I/O Intr")
  field(DESC, "Status")
#  field(FLNK, "BL04I-VA-IMG-01:PDIS")
  field(ZRST, "OK")
  field(ONST, "OK")
  field(TWST, "Above Range")
  field(THST, "At Atmosphere")
  field(FRST, "Low Emission")
  field(FVST, "Filament Off")
  field(SXST, "HV Off")
  field(SVST, "Startup Delay")
  field(EIST, "Below Range")
  field(NIST, "Controlled")
  field(TEST, "Protected State")
  field(ELST, "No Gauge")
  field(TVST, "Not Connected")
  field(TTST, "Wrong Gauge")
  field(FTST, "Bad Command")
  field(FFST, "Locked Out")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "MINOR")
  field(THSV, "MINOR")
  field(FRSV, "MAJOR")
  field(FVSV, "MAJOR")
  field(SXSV, "MAJOR")
  field(SVSV, "MINOR")
  field(EISV, "NO_ALARM")
  field(NISV, "MINOR")
  field(TESV, "MINOR")
  field(ELSV, "MAJOR")
  field(TVSV, "MAJOR")
  field(TTSV, "MAJOR")
  field(FTSV, "MAJOR")
  field(FFSV, "MAJOR")
}

#############################################################################
# Pressure
#   This record is disabled when :PDIS is 1, i.e. when the status returned is 
#   not a pressure reading.
# % archiver 1 Monitor
# % controldesk Pressure readback
record(ai, "BL04I-VA-IMG-01:P") 
{
  field(DESC, "Pressure")
  field(DTYP, "stream")
  field(SCAN, "1 second")
  field(INP, "@mks937b.protocol pressure(001,1,BL04I-VA-IMG-01) ty_40_5")
  field(FLNK, "BL04I-VA-IMG-01:PLOG")
  field(EGU, "mbar")
  field(PREC, "11")
  field(HOPR, "0.01")
  field(LOPR, "1.0E-11")
#  field(SDIS, "BL04I-VA-IMG-01:PDIS")
  field(DISS, "INVALID")
}

#
# Determine if P is a valid pressure
# if so we can set STA to OK
#
record(calc, "BL04I-VA-IMG-01:GOODP") 
{
  field(DESC, "Valid pressure calc")
  field(INPA, "BL04I-VA-IMG-01:P.SEVR")
  field(CALC, "(A>0)?0:1")
}
record(seq, "BL04I-VA-IMG-01:PSEQ") 
{
  field(DESC, "Seq Pressure & Status")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-IMG-01:GOODP PP")
  field(DOL1, "1")
  field(LNK1, "BL04I-VA-IMG-01:STA PP")
}

record(calcout, "BL04I-VA-IMG-01:ADEL") 
{
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-IMG-01:P.ADEL")
  field(INPA, "BL04I-VA-IMG-01:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-IMG-01:PLOG") 
{
  field(DESC, "log Pressure")
  field(EGU, "log")
  field(CALC, "LOG(A)")
  field(INPA, "BL04I-VA-IMG-01:P MS")
  field(FLNK, "BL04I-VA-IMG-01:PMAX")
  field(HOPR, "-2")
  field(LOPR, "-11")
  field(ADEL, "0.025")
}
record(ai, "BL04I-VA-IMG-01:PMAX")
{
    field(DESC, "Max Pressure")
    field(INP,  "BL04I-VA-IMG-01:P MS")
    field(FLNK, "BL04I-VA-IMG-01:PMIN")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
record(ai, "BL04I-VA-IMG-01:PMIN")
{
    field(DESC, "Min Pressure")
    field(INP,  "BL04I-VA-IMG-01:P MS")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
    field(FLNK, "BL04I-VA-IMG-01:PSEQ")
}
################################################################################
# Control - IMG Enable
#

# Force processing of slow PP records 
record(fanout, "BL04I-VA-IMG-01:CTL:FAN10S")
{
    field(DESC, "CTL 10s Scan fanout")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-IMG-01:CTL:MODE PP")
    field(LNK2, "BL04I-VA-IMG-01:CTL:CCS PP")
    field(LNK3, "BL04I-VA-IMG-01:CTL:SP PP")
    field(LNK4, "BL04I-VA-IMG-01:PRO:SP PP")
    field(SELM, "All")
}

#record(ao, "BL04I-VA-IMG-01:CTL:SETSP") {
#  field(DESC, "IMG Enable")
#  field(DTYP, "stream")
#  field(OUT, "@mks937b.protocol setcc_sp(001,1) ty_40_5")
#  field(FLNK, "BL04I-VA-IMG-01:CTL:HYST")
#  field(EGU, "mbar")
#  field(PREC, "1")
#  field(HOPR, "9.5e-1")
#  field(LOPR, "2.7e-3")
#  field(DRVH, "9.5e-1")
#  field(DRVL, "2.7e-3")
#  field(DOL, "1.0e-2")
#}

record(ai, "BL04I-VA-IMG-01:CTL:SP") 
{
  field(DESC, "IMG Enable")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getcc_sp(001,1) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(HIHI, "9.6e-1")
  field(LOLO, "2.6e-3")
  field(HIGH, "1.1e-2")
  field(LOW, "9.0e-3")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

# This record sets the setpoint locally
# but doesnt write it to the controller
# as we now need to send a pre-command
# to extend the setpoint range (XCS<n> command)
record(ao, "BL04I-VA-IMG-01:CTL:OUTSP") 
{
  field(DESC, "IMG Enable")
#  field(DTYP, "stream")
#  Device Output now via CTL:SETSP after CTL:SETSPPRESEQ
#  field(OUT, "@mks937b.protocol setcc_sp(001,1) ty_40_5")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(DRVH, "9.5e-1")
  field(DRVL, "2.7e-3")
  field(DOL, "1.0e-2")
#  field(FLNK, "BL04I-VA-IMG-01:CTL:SETSPFAN")
# Insert pre-sequence to set extended setpoint
  field(FLNK, "BL04I-VA-IMG-01:CTL:SETSPPRESEQ")
}

record(ao, "BL04I-VA-IMG-01:CTL:SETSP") 
    {
    field(DESC, "IMG Enable")
    field(DTYP, "stream")
    field(OUT, "@mks937b.protocol setcc_sp(001,1) ty_40_5")
    field(EGU, "mbar")
    field(PREC, "1")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
    field(DRVH, "9.5e-1")
    field(DRVL, "2.7e-3")
    field(DOL, "1.0e-2")
    field(FLNK, "BL04I-VA-IMG-01:CTL:SETSPFAN")
    }

record(seq, "BL04I-VA-IMG-01:CTL:SETSPPRESEQ")
    {
    field(DESC, "Preconditions to IMG Setpoint")
    field(SELM, "All")
    field(DOL1, "1")
    field(LNK1, "BL04I-VA-IMG-01:CTL:SETEXTRANGE PP")
    field(DOL2, "BL04I-VA-IMG-01:CTL:OUTSP")
    field(LNK2, "BL04I-VA-IMG-01:CTL:SETSP PP")
    }

record(mbbo, "BL04I-VA-IMG-01:CTL:SETEXTRANGE")
    {
    field(DTYP, "stream")
    field(DESC, "CC Extended Setpoint Enable")
    field(OUT, "@mks937b.protocol setcc_extended_range(001,1) ty_40_5")
    field(ZRST, "OFF")
    field(ONST, "ON")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(DOL, "1")
#    field(PINI, "YES")
    }

# On setting a new interlock control setpoint, we need to update the 
# default hysteresis value and readback of the new setpoint from the 
# gauge controller.
#
record(fanout, "BL04I-VA-IMG-01:CTL:SETSPFAN")
{
    field(DESC, "CTL Set SP fanout")
    field(LNK1, "BL04I-VA-IMG-01:CTL:HYST PP")
    field(LNK2, "BL04I-VA-IMG-01:CTL:SP PP")
}

record(ao, "BL04I-VA-IMG-01:CTL:SETHYST") 
{
  field(DESC, "CC Hysteresis")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setcc_hyst(001,1) ty_40_5")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(DRVH, "1.2e-2")
  field(DRVL, "2.7e-10")
  field(FLNK, "BL04I-VA-IMG-01:CTL:HYST PP")
}

record(calc, "BL04I-VA-IMG-01:CTL:MINHYST") 
{
  field(DESC, "Minimum hysteresis")
  field(EGU, "mbar")
  field(CALC, "A*1.2")
  field(INPA, "BL04I-VA-IMG-01:CTL:SP MS")
  field(FLNK, "BL04I-VA-IMG-01:CTL:SETHYST")
  field(HOPR, "-2")
  field(LOPR, "-11")
  field(ADEL, "0.025")
}

record(ai, "BL04I-VA-IMG-01:CTL:HYST") 
{
  field(DESC, "Setpoint Hysteresis")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getcc_hyst(001,1) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(PINI, "YES")
#  field(FLNK, "BL04I-VA-IMG-01:CTL:HYSTSEQ")
}

# When the controller hysteresis changes internally
# set the value in the SETHYST text entry box accordingly
record(seq, "BL04I-VA-IMG-01:CTL:HYSTSEQ") 
{
  field(DESC, "Hysteresis Sequence")
  field(SELM, "All")
  field(DOL1, "BL04I-VA-IMG-01:CTL:HYST")
  field(LNK1, "BL04I-VA-IMG-01:SETHYST.VAL PP")
}


record(bo, "BL04I-VA-IMG-01:CTL:DIS") 
{
  field(DESC, "Disable Control Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol discc_sp(001,1) ty_40_5")
}

record(mbbo, "BL04I-VA-IMG-01:CTL:SETMODE") 
{
  field(DTYP, "stream")
  field(DESC, "CC Operating Mode")
  field(OUT, "@mks937b.protocol setcc_ctl(001,1) ty_40_5")
  field(ZRST, "Force On")
  field(ONST, "I/L Safe")
  field(TWST, "I/L Operating")
  field(ZRSV, "MINOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
  field(DOL, "1")
  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-01:CTL:MODE")
}


record(mbbi, "BL04I-VA-IMG-01:CTL:MODE") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getcc_ctl(001,1) ty_40_5")
  field(DESC, "CC Status")
  field(SCAN, "Passive")
  field(ZRST, "Force On")
  field(ONST, "I/L Safe")
  field(TWST, "I/L Operating")
  field(UNSV, "MAJOR")
  field(ZRSV, "MINOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}


record(mbbo, "BL04I-VA-IMG-01:CTL:SETCCS") 
{
  field(DTYP, "stream")
  field(DESC, "Control Channel Status")
  field(OUT, "@mks937b.protocol setcc_ctrl_chan(001,1) ty_40_5")
  field(ZRST, "C1")
  field(ONST, "C2")
  field(TWST, "NONE")
  field(THST, "A1")
  field(FRST, "B1")
  field(FVST, "A2")
  field(SXST, "B2")
  field(ZRSV, "MINOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
  field(THSV, "NO_ALARM")
  field(FRSV, "NO_ALARM")
  field(FVSV, "NO_ALARM")
  field(SXSV, "NO_ALARM")
  field(DOL, "0")
  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-01:CTL:CCS")
}


record(mbbi, "BL04I-VA-IMG-01:CTL:CCS") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getcc_ctrl_chan(001,1) ty_40_5")
  field(DESC, "Control Channel Status")
  field(SCAN, "Passive")
  field(ZRST, "C1")
  field(ONST, "C2")
  field(TWST, "NONE")
  field(THST, "A1")
  field(FRST, "B1")
  field(FVST, "A2")
  field(SXST, "B2")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
  field(THSV, "NO_ALARM")
  field(FRSV, "NO_ALARM")
  field(FVSV, "NO_ALARM")
  field(SXSV, "NO_ALARM")
}


################################################################################
# Protection - IMG Overpressure
#
##% archiver 10 Monitor
#
#record(ao, "BL04I-VA-IMG-01:PRO:SETSP") 
#{
#  field(DESC, "IMG Overpressure")
#  field(FLNK, "BL04I-VA-IMG-01:PRO:SEQ")
#  field(EGU, "mbar")
#  field(PREC, "1")
#  field(HOPR, "1.0e-2")
#  field(LOPR, "1.3e-5")
#  field(DRVH, "1.0e-2")
#  field(DRVL, "1.3e-5")
#  field(DOL, "5.0e-4")
#}

#
##% archiver 10 Monitor
#
#record(mbbo, "BL04I-VA-IMG-01:PRO:ENABLE") 
#{
#  field(DESC, "Enable Protection Setpoint")
#  field(FLNK, "BL04I-VA-IMG-01:PRO:SEQ")
#  field(ZRST, "Force On I/L")
#  field(ONST, "I/L Operating")
#  field(ZRVL, "1")
#  field(ONVL, "2")
#  field(ZRSV, "MAJOR")
#  field(ONSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")    field(LNK2, "BL04I-VA-IMG-01:CTL:CCS")

#}

#record(seq, "BL04I-VA-IMG-01:PRO:SEQ") 
#{
#  field(DESC, "Sequence Protection Setpoint")
#  field(SELM, "Specified")
#  field(SELL, "BL04I-VA-IMG-01:PRO:ENABLE.RVAL")
#  field(DOL1, "0")
#  field(LNK1, "BL04I-VA-IMG-01:PRO:DIS PP")
#  field(DOL2, "BL04I-VA-IMG-01:PRO:SETSP")
#  field(LNK2, "BL04I-VA-IMG-01:PRO:OUTSP PP")
#}

#
#% archiver 10 Monitor
#% controldesk IMG Overpressure readback
#
record(ai, "BL04I-VA-IMG-01:PRO:SP") 
{
  field(DESC, "IMG Overpressure")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getpro(001,1) ty_40_5 0")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.0e-2")
  field(LOPR, "1.3e-5")
  field(HIHI, "1.1e-2")
  field(LOLO, "1.2e-5")
  field(HIGH, "5.1e-4")
  field(LOW, "4.9e-4")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSP record just once
# at startup.
#
record(bo, "BL04I-VA-IMG-01:PRO:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-IMG-01:PRO:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-IMG-01:PRO:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-IMG-01:PRO:ILKSETSP:NOWRITE")
    field(LNK2, "BL04I-VA-IMG-01:PRO:OUTSP")
    field(LNK3, "BL04I-VA-IMG-01:PRO:INITSETSPSDIS")
    field(SELM, "All")
}

record(ao, "BL04I-VA-IMG-01:PRO:OUTSP") 
{
  field(DESC, "IMG Overpressure")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setpro(001,1) ty_40_5")
  field(PREC, "1")
  field(HOPR, "1.0e-2")
  field(LOPR, "1.3e-5")
  field(DRVH, "1.0e-2")
  field(DRVL, "1.3e-5")
  #field(PINI, "YES")
  field(SDIS, "BL04I-VA-IMG-01:PRO:ILKSETSP:NOWRITE")
  field(DOL,  "5.0e-4")
  field(FLNK, "BL04I-VA-IMG-01:PRO:SP PP")
}
# -----------------------------------------------------------------------------------------

record(bo, "BL04I-VA-IMG-01:PRO:DIS") 
{
  field(DESC, "Disable Protection Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol dispro(001,1) ty_40_5")
}

record(calc, "BL04I-VA-IMG-01:PDIS") {
  field(PHAS, "1")
  field(CALC, "(A>1)?1:0")
  field(INPA, "BL04I-VA-IMG-01:STA")
  field(FLNK, "BL04I-VA-IMG-01:P")
}

record(ai, "BL04I-VA-IMG-01:ERRORNUM") 
{
  field(DESC, "Last error code")
  field(DTYP, "Soft Channel")
  field(INP, "0")
  field(SCAN, "Passive")
}


record(bi, "BL04I-VA-IMG-01:OFFWARN") 
{
  field(DESC, "Warning for OFF button")
  field(PINI, "YES")
  field(INP, "1")
  field(ZNAM, "Warning off")
  field(ONAM, "Warning on")
}


#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-IMG-01:PRO:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume an empty INP and do nothing.
#
record(bi, "BL04I-VA-IMG-01:PRO:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-01:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
  #! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937bImg.template
#% macro, __doc__, Template database for an inverted magnetron guage connected 
# to one channel of an mks937b Multi-Sensor System 
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, address, Controller address (001 .. 253)
#% macro, channel, MKS 937B channel number (1-4)
#
# optional substitutions:
#% macro, name,        Object name, and gui association name
#% macro, ctl_channel, The desired control channel 0 = C1, 1 = C2, 2 = None, 3 = A1, 4 = B1, 5 = A2, 6 = B2.
#% macro, ctlsp_level, The desired control setpoint value.
#% macro, ctlsp_drvh,  The DRVH field on control setpoint records 
#                      (limits max value of control setpoint)
#% macro, ctlsp_drvl,  The DRVL field on control setpoint records. 
#                      (limits min value of control setpoint)
#% macro, ctlsp_hopr,  The HOPR field on control setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, ctlsp_lopr,  The LOPR field on control setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, ctlsp_hihi,  The HIHI alarm field on the control setpoint record.
#% macro, ctlsp_lolo,  The LOLO alarm field on the control setpoint record.
#% macro, ctlsp_high,  The HIGH alarm field on the control setpoint record.
#% macro, ctlsp_low ,  The LOW alarm field on the control setpoint record.
#% macro, ctlsp_desc,  The DESC field on the control setpoint record.
#% macro, ctlhyst_hopr,The HOPR field on control hysteresis records 
#                      (high operator value - helps display set correct range).
#% macro, ctlhyst_lopr,The LOPR field on control hysteresis records 
#                      (low operator value - helps display set correct range).
#% macro, prosp_level, The desired protection setpoint value.
#% macro, prosp_drvh,  The DRVH field on protection setpoint records 
#                      (limits max value of protection setpoint)
#% macro, prosp_drvl,  The DRVL field on protection setpoint records. 
#                      (limits min value of protection setpoint)
#% macro, prosp_hopr,  The HOPR field on protection setpoint records 
#                      (high operator value - helps display set correct range).
#% macro, prosp_lopr,  The LOPR field on protection setpoint records 
#                      (low operator value - helps display set correct range).
#% macro, prosp_hihi,  The HIHI alarm field on the protection setpoint record.
#% macro, prosp_lolo,  The LOLO alarm field on the protection setpoint record.
#% macro, prosp_high,  The HIGH alarm field on the protection setpoint record.
#% macro, prosp_low ,  The LOW alarm field on the protection setpoint record.
#% macro, prosp_desc,  The DESC field on the protection setpoint record 
#                      (appears as a label on the Img EDM screen).
#
#% macro, offwarn,     Flag to display a warning that switching off the IMG could trip the beam
#% macro, ilk_write_access_pv ,   Link to the interlocks setpoint global write access record.
#
#% macro, img_ctl_setmode, Default = 1 (I/L Safe), 0 (Force ON), 2 (I/L Operating).
#
################################################################################

# This associates an edm screen with the template
# % gui, IMG02, edm, mks937bImg.edl, device=BL04I-VA-IMG-02

# This associates BOY screens with the template
# % gui, IMG02, boydetail, mks937bApp_opi/img_detail.opi, device=BL04I-VA-IMG-02, desc=BL04I-VA-IMG-02, name=IMG02
# % gui, IMG02, boyembed, mks937bApp_opi/img_embed_box.opi, device=BL04I-VA-IMG-02, desc=BL04I-VA-IMG-02, name=IMG02
# % gui, IMG02, boyembed, mks937bApp_opi/img_embed.opi, device=BL04I-VA-IMG-02, desc=BL04I-VA-IMG-02, name=IMG02

# These define what PVs a valve detail screen should contain
# % gui, IMG02, readback, Pressure,                                BL04I-VA-IMG-02:P
# % gui, IMG02, readback, Status,                                  BL04I-VA-IMG-02:STA
# % gui, IMG02, readback, Gauge Setpoint Write,                    BL04I-VA-IMG-02:PRO:ILKSETSP:NOWRITE
# % gui, IMG02, readback, Relay 1 on SetPoint for Summary,         BL04I-VA-IMG-02:RLY1:SP,        =pv("BL04I-VA-IMG-02:RLY1:SP.DESC")
# % gui, IMG02, readback, Relay 1 off SetPoint for Summary,        BL04I-VA-IMG-02:RLY1:SPOFF,     =pv("BL04I-VA-IMG-02:RLY1:SPOFF.DESC")
# % gui, IMG02, readback, Relay 2 on SetPoint for Summary,         BL04I-VA-IMG-02:RLY2:SP,        =pv("BL04I-VA-IMG-02:RLY2:SP.DESC")
# % gui, IMG02, readback, Relay 3 on SetPoint for Summary,         BL04I-VA-IMG-02:RLY3:SP,        =pv("BL04I-VA-IMG-02:RLY3:SP.DESC")
## TODO The below gives us feedback on what the state actually is - without this you get the current demand
## (as per differences between EDM and CSS enum menus)
# % gui, IMG02, readback, Cold Cathode,                            BL04I-VA-IMG-02:ISENABLED
# % gui, IMG02, enum, Cold Cathode,                                BL04I-VA-IMG-02:CCHV

# % gui, IMG02, readback, CTL SP Controlling Gauge,                BL04I-VA-IMG-02:CTL:SETCCS,     =concat(pv("BL04I-VA-IMG-02:CTL:SP.DESC")," Gauge")
# % gui, IMG02, readback, CTL SP MODE,                             BL04I-VA-IMG-02:CTL:SETMODE,    =concat(pv("BL04I-VA-IMG-02:CTL:SP.DESC")," Mode")
# % gui, IMG02, readback, Pro Setpoint,                            BL04I-VA-IMG-02:PRO:SP,         =pv("BL04I-VA-IMG-02:PRO:SP.DESC")
# % gui, IMG02, readback, Relay 1 On Setpoint,                     BL04I-VA-IMG-02:RLY1:SP,        =pv("BL04I-VA-IMG-02:RLY1:SP.DESC")
# % gui, IMG02, readback, Relay 1 Off Setpoint,                    BL04I-VA-IMG-02:RLY1:SPOFF,     =pv("BL04I-VA-IMG-02:RLY1:SPOFF.DESC")
# % gui, IMG02, readback, Relay 2 On Setpoint,                     BL04I-VA-IMG-02:RLY2:SP,        =pv("BL04I-VA-IMG-02:RLY2:SP.DESC")
# % gui, IMG02, readback, Relay 2 Off Setpoint,                    BL04I-VA-IMG-02:RLY2:SPOFF,     =pv("BL04I-VA-IMG-02:RLY2:SPOFF.DESC")
# % gui, IMG02, readback, Relay 3 On Setpoint,                     BL04I-VA-IMG-02:RLY3:SP,        =pv("BL04I-VA-IMG-02:RLY3:SP.DESC")
# % gui, IMG02, readback, Relay 3 Off Setpoint,                    BL04I-VA-IMG-02:RLY3:SPOFF,     =pv("BL04I-VA-IMG-02:RLY3:SPOFF.DESC")
# % gui, IMG02, readback, Relay 4 On Setpoint,                     BL04I-VA-IMG-02:RLY4:SP,        =pv("BL04I-VA-IMG-02:RLY4:SP.DESC")
# % gui, IMG02, readback, Relay 4 Off Setpoint,                    BL04I-VA-IMG-02:RLY4:SPOFF,     =pv("BL04I-VA-IMG-02:RLY4:SPOFF.DESC")
# % gui, IMG02, readback, Fast Relay On Setpoint,                  BL04I-VA-IMG-02:FRLY:SP,        =pv("BL04I-VA-IMG-02:FRLY:SP.DESC")

# % gui, IMG02, demand,   Pro Setpoint,                            BL04I-VA-IMG-02:PRO:OUTSP,      =pv("BL04I-VA-IMG-02:PRO:SP.DESC")
# % gui, IMG02, demand,   Relay 1 On Setpoint,                     BL04I-VA-IMG-02:RLY1:SETSP,     =pv("BL04I-VA-IMG-02:RLY1:SP.DESC")
# % gui, IMG02, demand,   Relay 1 Off Setpoint,                    BL04I-VA-IMG-02:RLY1:SETSPOFF,  =pv("BL04I-VA-IMG-02:RLY1:SPOFF.DESC")
# % gui, IMG02, demand,   Relay 2 On Setpoint,                     BL04I-VA-IMG-02:RLY2:SETSP,     =pv("BL04I-VA-IMG-02:RLY2:SP.DESC")
# % gui, IMG02, demand,   Relay 2 Off Setpoint,                    BL04I-VA-IMG-02:RLY2:SETSPOFF,  =pv("BL04I-VA-IMG-02:RLY2:SPOFF.DESC")
# % gui, IMG02, demand,   Relay 3 On Setpoint,                     BL04I-VA-IMG-02:RLY3:SETSP,     =pv("BL04I-VA-IMG-02:RLY3:SP.DESC")
# % gui, IMG02, demand,   Relay 3 Off Setpoint,                    BL04I-VA-IMG-02:RLY3:SETSPOFF,  =pv("BL04I-VA-IMG-02:RLY3:SPOFF.DESC")
# % gui, IMG02, demand,   Relay 4 On Setpoint,                     BL04I-VA-IMG-02:RLY4:SETSP,     =pv("BL04I-VA-IMG-02:RLY4:SP.DESC")
# % gui, IMG02, demand,   Relay 4 Off Setpoint,                    BL04I-VA-IMG-02:RLY4:SETSPOFF,  =pv("BL04I-VA-IMG-02:RLY4:SPOFF.DESC")
# % gui, IMG02, demand,   Fast Relay On Setpoint,                  BL04I-VA-IMG-02:FRLY:SETSP,     =pv("BL04I-VA-IMG-02:FRLY:SP.DESC")

# % gui, IMG02, readback, Relay 1 SP Mode,                         BL04I-VA-IMG-02:RLY1:MODE,      =concat(pv("BL04I-VA-IMG-02:RLY1:SP.DESC")," Mode")
# % gui, IMG02, readback, Relay 2 SP Mode,                         BL04I-VA-IMG-02:RLY2:MODE,      =concat(pv("BL04I-VA-IMG-02:RLY2:SP.DESC")," Mode")
# % gui, IMG02, readback, Relay 3 SP Mode,                         BL04I-VA-IMG-02:RLY3:MODE,      =concat(pv("BL04I-VA-IMG-02:RLY3:SP.DESC")," Mode")
# % gui, IMG02, readback, Relay 4 SP Mode,                         BL04I-VA-IMG-02:RLY4:MODE,      =concat(pv("BL04I-VA-IMG-02:RLY4:SP.DESC")," Mode")

# % gui, IMG02, enum, CTL SP Controlling Gauge,                    BL04I-VA-IMG-02:CTL:SETCCS,     =concat(pv("BL04I-VA-IMG-02:CTL:SP.DESC")," Gauge")
# % gui, IMG02, enum, CTL SP MODE,                                 BL04I-VA-IMG-02:CTL:SETMODE,    =concat(pv("BL04I-VA-IMG-02:CTL:SP.DESC")," Mode")
# % gui, IMG02, enum, Relay 1 SP Mode,                             BL04I-VA-IMG-02:RLY1:SETMODE,   =concat(pv("BL04I-VA-IMG-02:RLY1:SP.DESC")," Mode")
# % gui, IMG02, readback, Relay 1 SP Direction,                    BL04I-VA-IMG-02:RLY1:DIR,       =concat(pv("BL04I-VA-IMG-02:RLY1:SP.DESC")," Dir")
# % gui, IMG02, enum, Relay 2 SP Mode,                             BL04I-VA-IMG-02:RLY2:SETMODE,   =concat(pv("BL04I-VA-IMG-02:RLY2:SP.DESC")," Mode")
# % gui, IMG02, readback, Relay 2 SP Direction,                    BL04I-VA-IMG-02:RLY2:DIR,       =concat(pv("BL04I-VA-IMG-02:RLY2:SP.DESC")," Dir")
# % gui, IMG02, enum, Relay 3 SP Mode,                             BL04I-VA-IMG-02:RLY3:SETMODE,   =concat(pv("BL04I-VA-IMG-02:RLY3:SP.DESC")," Mode")
# % gui, IMG02, readback, Relay 3 SP Direction,                    BL04I-VA-IMG-02:RLY3:DIR,       =concat(pv("BL04I-VA-IMG-02:RLY3:SP.DESC")," Dir")
# % gui, IMG02, enum, Relay 4 SP Mode,                             BL04I-VA-IMG-02:RLY4:SETMODE,   =concat(pv("BL04I-VA-IMG-02:RLY4:SP.DESC")," Mode")
# % gui, IMG02, readback, Relay 4 SP Direction,                    BL04I-VA-IMG-02:RLY4:DIR,       =concat(pv("BL04I-VA-IMG-02:RLY4:SP.DESC")," Dir")

#
#% archiver 10 Monitor
#% controldesk Pressure scon
#
record(bo, "BL04I-VA-IMG-02:CCHV") 
{
  field(DESC, "Cold Cathode Enable")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol ccenable(001,3) ty_40_5 0")
  field(FLNK, "BL04I-VA-IMG-02:FANENAB")
  field(ZNAM, "Off")
  field(ONAM, "On")
}

record(mbbi, "BL04I-VA-IMG-02:ISENABLED") {
  field(DESC, "IMG power")
  field(DTYP, "stream")
  field(INP,  "@mks937b.protocol get_cc_enabled(001,3) ty_40_5")
  field(ZRST, "Off")
  field(ONST, "On")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(PINI, "YES")
}

#  Changing CC HV mode requires associated processing of :STA and :ISENABLED
#  to update the readbacks
record(fanout, "BL04I-VA-IMG-02:FANENAB")
{
    field(DESC, "Distribute enabled")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-IMG-02:STA")
    field(LNK2, "BL04I-VA-IMG-02:ISENABLED")
}


record(bi, "BL04I-VA-IMG-02:SWITCHING") 
{
  field(DESC, "Switching")
  field(PINI, "YES")
  field(INP, "0")
  field(ONAM, "Switching")
}

################################################################################
# Status
#
#% archiver 10 Monitor
#% controldesk Pressure smon
#
record(mbbi, "BL04I-VA-IMG-02:STA") 
{
  field(DTYP, "Soft Channel")
#  field(DTYP, "stream")
#  field(INP, "@mks937b.protocol status(001,3) ty_40_5")
#  field(SCAN, "I/O Intr")
  field(DESC, "Status")
#  field(FLNK, "BL04I-VA-IMG-02:PDIS")
  field(ZRST, "OK")
  field(ONST, "OK")
  field(TWST, "Above Range")
  field(THST, "At Atmosphere")
  field(FRST, "Low Emission")
  field(FVST, "Filament Off")
  field(SXST, "HV Off")
  field(SVST, "Startup Delay")
  field(EIST, "Below Range")
  field(NIST, "Controlled")
  field(TEST, "Protected State")
  field(ELST, "No Gauge")
  field(TVST, "Not Connected")
  field(TTST, "Wrong Gauge")
  field(FTST, "Bad Command")
  field(FFST, "Locked Out")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "MINOR")
  field(THSV, "MINOR")
  field(FRSV, "MAJOR")
  field(FVSV, "MAJOR")
  field(SXSV, "MAJOR")
  field(SVSV, "MINOR")
  field(EISV, "NO_ALARM")
  field(NISV, "MINOR")
  field(TESV, "MINOR")
  field(ELSV, "MAJOR")
  field(TVSV, "MAJOR")
  field(TTSV, "MAJOR")
  field(FTSV, "MAJOR")
  field(FFSV, "MAJOR")
}

#############################################################################
# Pressure
#   This record is disabled when :PDIS is 1, i.e. when the status returned is 
#   not a pressure reading.
# % archiver 1 Monitor
# % controldesk Pressure readback
record(ai, "BL04I-VA-IMG-02:P") 
{
  field(DESC, "Pressure")
  field(DTYP, "stream")
  field(SCAN, "1 second")
  field(INP, "@mks937b.protocol pressure(001,3,BL04I-VA-IMG-02) ty_40_5")
  field(FLNK, "BL04I-VA-IMG-02:PLOG")
  field(EGU, "mbar")
  field(PREC, "11")
  field(HOPR, "0.01")
  field(LOPR, "1.0E-11")
#  field(SDIS, "BL04I-VA-IMG-02:PDIS")
  field(DISS, "INVALID")
}

#
# Determine if P is a valid pressure
# if so we can set STA to OK
#
record(calc, "BL04I-VA-IMG-02:GOODP") 
{
  field(DESC, "Valid pressure calc")
  field(INPA, "BL04I-VA-IMG-02:P.SEVR")
  field(CALC, "(A>0)?0:1")
}
record(seq, "BL04I-VA-IMG-02:PSEQ") 
{
  field(DESC, "Seq Pressure & Status")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-IMG-02:GOODP PP")
  field(DOL1, "1")
  field(LNK1, "BL04I-VA-IMG-02:STA PP")
}

record(calcout, "BL04I-VA-IMG-02:ADEL") 
{
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-IMG-02:P.ADEL")
  field(INPA, "BL04I-VA-IMG-02:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-IMG-02:PLOG") 
{
  field(DESC, "log Pressure")
  field(EGU, "log")
  field(CALC, "LOG(A)")
  field(INPA, "BL04I-VA-IMG-02:P MS")
  field(FLNK, "BL04I-VA-IMG-02:PMAX")
  field(HOPR, "-2")
  field(LOPR, "-11")
  field(ADEL, "0.025")
}
record(ai, "BL04I-VA-IMG-02:PMAX")
{
    field(DESC, "Max Pressure")
    field(INP,  "BL04I-VA-IMG-02:P MS")
    field(FLNK, "BL04I-VA-IMG-02:PMIN")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
record(ai, "BL04I-VA-IMG-02:PMIN")
{
    field(DESC, "Min Pressure")
    field(INP,  "BL04I-VA-IMG-02:P MS")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
    field(FLNK, "BL04I-VA-IMG-02:PSEQ")
}
################################################################################
# Control - IMG Enable
#

# Force processing of slow PP records 
record(fanout, "BL04I-VA-IMG-02:CTL:FAN10S")
{
    field(DESC, "CTL 10s Scan fanout")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-IMG-02:CTL:MODE PP")
    field(LNK2, "BL04I-VA-IMG-02:CTL:CCS PP")
    field(LNK3, "BL04I-VA-IMG-02:CTL:SP PP")
    field(LNK4, "BL04I-VA-IMG-02:PRO:SP PP")
    field(SELM, "All")
}

#record(ao, "BL04I-VA-IMG-02:CTL:SETSP") {
#  field(DESC, "IMG Enable")
#  field(DTYP, "stream")
#  field(OUT, "@mks937b.protocol setcc_sp(001,3) ty_40_5")
#  field(FLNK, "BL04I-VA-IMG-02:CTL:HYST")
#  field(EGU, "mbar")
#  field(PREC, "1")
#  field(HOPR, "9.5e-1")
#  field(LOPR, "2.7e-3")
#  field(DRVH, "9.5e-1")
#  field(DRVL, "2.7e-3")
#  field(DOL, "1.0e-2")
#}

record(ai, "BL04I-VA-IMG-02:CTL:SP") 
{
  field(DESC, "IMG Enable")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getcc_sp(001,3) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(HIHI, "9.6e-1")
  field(LOLO, "2.6e-3")
  field(HIGH, "1.1e-2")
  field(LOW, "9.0e-3")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

# This record sets the setpoint locally
# but doesnt write it to the controller
# as we now need to send a pre-command
# to extend the setpoint range (XCS<n> command)
record(ao, "BL04I-VA-IMG-02:CTL:OUTSP") 
{
  field(DESC, "IMG Enable")
#  field(DTYP, "stream")
#  Device Output now via CTL:SETSP after CTL:SETSPPRESEQ
#  field(OUT, "@mks937b.protocol setcc_sp(001,3) ty_40_5")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "9.5e-1")
  field(LOPR, "2.7e-3")
  field(DRVH, "9.5e-1")
  field(DRVL, "2.7e-3")
  field(DOL, "1.0e-2")
#  field(FLNK, "BL04I-VA-IMG-02:CTL:SETSPFAN")
# Insert pre-sequence to set extended setpoint
  field(FLNK, "BL04I-VA-IMG-02:CTL:SETSPPRESEQ")
}

record(ao, "BL04I-VA-IMG-02:CTL:SETSP") 
    {
    field(DESC, "IMG Enable")
    field(DTYP, "stream")
    field(OUT, "@mks937b.protocol setcc_sp(001,3) ty_40_5")
    field(EGU, "mbar")
    field(PREC, "1")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
    field(DRVH, "9.5e-1")
    field(DRVL, "2.7e-3")
    field(DOL, "1.0e-2")
    field(FLNK, "BL04I-VA-IMG-02:CTL:SETSPFAN")
    }

record(seq, "BL04I-VA-IMG-02:CTL:SETSPPRESEQ")
    {
    field(DESC, "Preconditions to IMG Setpoint")
    field(SELM, "All")
    field(DOL1, "1")
    field(LNK1, "BL04I-VA-IMG-02:CTL:SETEXTRANGE PP")
    field(DOL2, "BL04I-VA-IMG-02:CTL:OUTSP")
    field(LNK2, "BL04I-VA-IMG-02:CTL:SETSP PP")
    }

record(mbbo, "BL04I-VA-IMG-02:CTL:SETEXTRANGE")
    {
    field(DTYP, "stream")
    field(DESC, "CC Extended Setpoint Enable")
    field(OUT, "@mks937b.protocol setcc_extended_range(001,3) ty_40_5")
    field(ZRST, "OFF")
    field(ONST, "ON")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(DOL, "1")
#    field(PINI, "YES")
    }

# On setting a new interlock control setpoint, we need to update the 
# default hysteresis value and readback of the new setpoint from the 
# gauge controller.
#
record(fanout, "BL04I-VA-IMG-02:CTL:SETSPFAN")
{
    field(DESC, "CTL Set SP fanout")
    field(LNK1, "BL04I-VA-IMG-02:CTL:HYST PP")
    field(LNK2, "BL04I-VA-IMG-02:CTL:SP PP")
}

record(ao, "BL04I-VA-IMG-02:CTL:SETHYST") 
{
  field(DESC, "CC Hysteresis")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setcc_hyst(001,3) ty_40_5")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(DRVH, "1.2e-2")
  field(DRVL, "2.7e-10")
  field(FLNK, "BL04I-VA-IMG-02:CTL:HYST PP")
}

record(calc, "BL04I-VA-IMG-02:CTL:MINHYST") 
{
  field(DESC, "Minimum hysteresis")
  field(EGU, "mbar")
  field(CALC, "A*1.2")
  field(INPA, "BL04I-VA-IMG-02:CTL:SP MS")
  field(FLNK, "BL04I-VA-IMG-02:CTL:SETHYST")
  field(HOPR, "-2")
  field(LOPR, "-11")
  field(ADEL, "0.025")
}

record(ai, "BL04I-VA-IMG-02:CTL:HYST") 
{
  field(DESC, "Setpoint Hysteresis")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getcc_hyst(001,3) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e-2")
  field(LOPR, "2.7e-10")
  field(PINI, "YES")
#  field(FLNK, "BL04I-VA-IMG-02:CTL:HYSTSEQ")
}

# When the controller hysteresis changes internally
# set the value in the SETHYST text entry box accordingly
record(seq, "BL04I-VA-IMG-02:CTL:HYSTSEQ") 
{
  field(DESC, "Hysteresis Sequence")
  field(SELM, "All")
  field(DOL1, "BL04I-VA-IMG-02:CTL:HYST")
  field(LNK1, "BL04I-VA-IMG-02:SETHYST.VAL PP")
}


record(bo, "BL04I-VA-IMG-02:CTL:DIS") 
{
  field(DESC, "Disable Control Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol discc_sp(001,3) ty_40_5")
}

record(mbbo, "BL04I-VA-IMG-02:CTL:SETMODE") 
{
  field(DTYP, "stream")
  field(DESC, "CC Operating Mode")
  field(OUT, "@mks937b.protocol setcc_ctl(001,3) ty_40_5")
  field(ZRST, "Force On")
  field(ONST, "I/L Safe")
  field(TWST, "I/L Operating")
  field(ZRSV, "MINOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
  field(DOL, "1")
  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-02:CTL:MODE")
}


record(mbbi, "BL04I-VA-IMG-02:CTL:MODE") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getcc_ctl(001,3) ty_40_5")
  field(DESC, "CC Status")
  field(SCAN, "Passive")
  field(ZRST, "Force On")
  field(ONST, "I/L Safe")
  field(TWST, "I/L Operating")
  field(UNSV, "MAJOR")
  field(ZRSV, "MINOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}


record(mbbo, "BL04I-VA-IMG-02:CTL:SETCCS") 
{
  field(DTYP, "stream")
  field(DESC, "Control Channel Status")
  field(OUT, "@mks937b.protocol setcc_ctrl_chan(001,3) ty_40_5")
  field(ZRST, "C1")
  field(ONST, "C2")
  field(TWST, "NONE")
  field(THST, "A1")
  field(FRST, "B1")
  field(FVST, "A2")
  field(SXST, "B2")
  field(ZRSV, "MINOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
  field(THSV, "NO_ALARM")
  field(FRSV, "NO_ALARM")
  field(FVSV, "NO_ALARM")
  field(SXSV, "NO_ALARM")
  field(DOL, "1")
  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-02:CTL:CCS")
}


record(mbbi, "BL04I-VA-IMG-02:CTL:CCS") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getcc_ctrl_chan(001,3) ty_40_5")
  field(DESC, "Control Channel Status")
  field(SCAN, "Passive")
  field(ZRST, "C1")
  field(ONST, "C2")
  field(TWST, "NONE")
  field(THST, "A1")
  field(FRST, "B1")
  field(FVST, "A2")
  field(SXST, "B2")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
  field(THSV, "NO_ALARM")
  field(FRSV, "NO_ALARM")
  field(FVSV, "NO_ALARM")
  field(SXSV, "NO_ALARM")
}


################################################################################
# Protection - IMG Overpressure
#
##% archiver 10 Monitor
#
#record(ao, "BL04I-VA-IMG-02:PRO:SETSP") 
#{
#  field(DESC, "IMG Overpressure")
#  field(FLNK, "BL04I-VA-IMG-02:PRO:SEQ")
#  field(EGU, "mbar")
#  field(PREC, "1")
#  field(HOPR, "1.0e-2")
#  field(LOPR, "1.3e-5")
#  field(DRVH, "1.0e-2")
#  field(DRVL, "1.3e-5")
#  field(DOL, "5.0e-4")
#}

#
##% archiver 10 Monitor
#
#record(mbbo, "BL04I-VA-IMG-02:PRO:ENABLE") 
#{
#  field(DESC, "Enable Protection Setpoint")
#  field(FLNK, "BL04I-VA-IMG-02:PRO:SEQ")
#  field(ZRST, "Force On I/L")
#  field(ONST, "I/L Operating")
#  field(ZRVL, "1")
#  field(ONVL, "2")
#  field(ZRSV, "MAJOR")
#  field(ONSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")    field(LNK2, "BL04I-VA-IMG-02:CTL:CCS")

#}

#record(seq, "BL04I-VA-IMG-02:PRO:SEQ") 
#{
#  field(DESC, "Sequence Protection Setpoint")
#  field(SELM, "Specified")
#  field(SELL, "BL04I-VA-IMG-02:PRO:ENABLE.RVAL")
#  field(DOL1, "0")
#  field(LNK1, "BL04I-VA-IMG-02:PRO:DIS PP")
#  field(DOL2, "BL04I-VA-IMG-02:PRO:SETSP")
#  field(LNK2, "BL04I-VA-IMG-02:PRO:OUTSP PP")
#}

#
#% archiver 10 Monitor
#% controldesk IMG Overpressure readback
#
record(ai, "BL04I-VA-IMG-02:PRO:SP") 
{
  field(DESC, "IMG Overpressure")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getpro(001,3) ty_40_5 0")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.0e-2")
  field(LOPR, "1.3e-5")
  field(HIHI, "1.1e-2")
  field(LOLO, "1.2e-5")
  field(HIGH, "5.1e-4")
  field(LOW, "4.9e-4")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSP record just once
# at startup.
#
record(bo, "BL04I-VA-IMG-02:PRO:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-IMG-02:PRO:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-IMG-02:PRO:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-IMG-02:PRO:ILKSETSP:NOWRITE")
    field(LNK2, "BL04I-VA-IMG-02:PRO:OUTSP")
    field(LNK3, "BL04I-VA-IMG-02:PRO:INITSETSPSDIS")
    field(SELM, "All")
}

record(ao, "BL04I-VA-IMG-02:PRO:OUTSP") 
{
  field(DESC, "IMG Overpressure")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setpro(001,3) ty_40_5")
  field(PREC, "1")
  field(HOPR, "1.0e-2")
  field(LOPR, "1.3e-5")
  field(DRVH, "1.0e-2")
  field(DRVL, "1.3e-5")
  #field(PINI, "YES")
  field(SDIS, "BL04I-VA-IMG-02:PRO:ILKSETSP:NOWRITE")
  field(DOL,  "5.0e-4")
  field(FLNK, "BL04I-VA-IMG-02:PRO:SP PP")
}
# -----------------------------------------------------------------------------------------

record(bo, "BL04I-VA-IMG-02:PRO:DIS") 
{
  field(DESC, "Disable Protection Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol dispro(001,3) ty_40_5")
}

record(calc, "BL04I-VA-IMG-02:PDIS") {
  field(PHAS, "1")
  field(CALC, "(A>1)?1:0")
  field(INPA, "BL04I-VA-IMG-02:STA")
  field(FLNK, "BL04I-VA-IMG-02:P")
}

record(ai, "BL04I-VA-IMG-02:ERRORNUM") 
{
  field(DESC, "Last error code")
  field(DTYP, "Soft Channel")
  field(INP, "0")
  field(SCAN, "Passive")
}


record(bi, "BL04I-VA-IMG-02:OFFWARN") 
{
  field(DESC, "Warning for OFF button")
  field(PINI, "YES")
  field(INP, "1")
  field(ZNAM, "Warning off")
  field(ONAM, "Warning on")
}


#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-IMG-02:PRO:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume an empty INP and do nothing.
#
record(bi, "BL04I-VA-IMG-02:PRO:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-02:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
  # mks937bImgGroup.template
#% macro, __doc__, Template database for a group of up to 8 IMGs
# Pete Owens - 10/5/05
#
# substitutions:
#% macro, device, device name
#% macro, delay, delay between starting each IMG
#% macro, img1, img 1 device name
#% macro, img2, img 2 device name
#% macro, img3, img 3 device name
#% macro, img4, img 4 device name
#% macro, img5, img 5 device name
#% macro, img6, img 6 device name
#% macro, img7, img 7 device name
#% macro, img8, img 8 device name
#% macro, valveIlRelay, Valve interlock relay
#% macro, mpsIlRelay1 , Machine protection system interlock 1 relay
#% macro, mpsIlRelay2 , Machine protection system interlock 2 relay
#% macro, rgaIlRelay  , RGA interlock relay
################################################################################
# Cold Cathode Enable
#
record(bo, "BL04I-VA-GIMG-01:CCHV")
{
    field(DESC, "Cold Cathode Enable")
    field(FLNK, "BL04I-VA-GIMG-01:SEQCCHV")
    field(ZNAM, "Off")
    field(ONAM, "On")
}
record(bi,"BL04I-VA-GIMG-01:SWITCHING")
{
    field(DESC, "Switching")
    field(PINI, "YES")
    field(INP,  "0")
    field(ZNAM, "")
    field(ONAM, "Switching")
}
record(seq, "BL04I-VA-GIMG-01:SEQCCHV")
{
    field(SELM, "All")
    field(DOL1, "1")
    field(DOL2, "BL04I-VA-GIMG-01:CCHV")
    field(DOL3, "BL04I-VA-GIMG-01:CCHV")
    field(DOL4, "BL04I-VA-GIMG-01:CCHV")
    field(DOL5, "BL04I-VA-GIMG-01:CCHV")
    field(DOL6, "BL04I-VA-GIMG-01:CCHV")
    field(DOL7, "BL04I-VA-GIMG-01:CCHV")
    field(DOL8, "BL04I-VA-GIMG-01:CCHV")
    field(DOL9, "BL04I-VA-GIMG-01:CCHV")
    field(DOLA, "0")
    field(DLY1, "0")
    field(DLY2, "0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DLY5, "0")
    field(DLY6, "0")
    field(DLY7, "0")
    field(DLY8, "0")
    field(DLY9, "0")
    field(DLYA, "0")
    field(LNK1, "BL04I-VA-GIMG-01:SWITCHING PP")
    field(LNK2, "BL04I-VA-IMG-01:CCHV CA")
    field(LNK3, "BL04I-VA-IMG-02:CCHV CA")
    field(LNK4, "BL04I-VA-IMG-02:CCHV CA")
    field(LNK5, "BL04I-VA-IMG-02:CCHV CA")
    field(LNK6, "BL04I-VA-IMG-02:CCHV CA")
    field(LNK7, "BL04I-VA-IMG-02:CCHV CA")
    field(LNK8, "BL04I-VA-IMG-02:CCHV CA")
    field(LNK9, "BL04I-VA-IMG-02:CCHV CA")
    field(LNKA, "BL04I-VA-GIMG-01:SWITCHING PP")
}
################################################################################
# Status
#
record(mbbi, "BL04I-VA-GIMG-01:STA")
{
    field(DESC, "Status")
    field(INP,  "BL04I-VA-GIMG-01:SELSTA PP MS")
    field(SCAN, "1 second")
    field(FLNK, "BL04I-VA-GIMG-01:P")
    field(ZRST, "OK")
    field(ONST, "OK")
    field(TWST, "Above Range")
    field(THST, "At Atmosphere")
    field(FRST, "Low Emission")
    field(FVST, "Filament Off")
    field(SXST, "HV Off")
    field(SVST, "Startup Delay")
    field(EIST, "Below Range")
    field(NIST, "Controlled")
    field(TEST, "Protected State")
    field(ELST, "No Gauge")
    field(TVST, "Not Connected")
    field(TTST, "Wrong Gauge")
    field(FTST, "Bad Command")
    field(FFST, "Locked Out")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MAJOR")
    field(FVSV, "MAJOR")
    field(SXSV, "MAJOR")
    field(SVSV, "MINOR")
    field(EISV, "NO_ALARM")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MAJOR")
    field(TVSV, "MAJOR")
    field(TTSV, "MAJOR")
    field(FTSV, "MAJOR")
    field(FFSV, "MAJOR")
}
record(sel, "BL04I-VA-GIMG-01:SELSTA") 
{
    field(DESC, "Select Status")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-01:STA MS")
    field(INPB, "BL04I-VA-IMG-02:STA MS")
    field(INPC, "BL04I-VA-IMG-02:STA MS")
    field(INPD, "BL04I-VA-IMG-02:STA MS")
    field(INPE, "BL04I-VA-IMG-02:STA MS")
    field(INPF, "BL04I-VA-IMG-02:STA MS")
    field(INPG, "BL04I-VA-IMG-02:STA MS")
    field(INPH, "BL04I-VA-IMG-02:STA MS")
}
################################################################################
# Pressure
#
record(sel, "BL04I-VA-GIMG-01:P")
{
    field(DESC, "Pressure")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-01:P MS")
    field(INPB, "BL04I-VA-IMG-02:P MS")
    field(INPC, "BL04I-VA-IMG-02:P MS")
    field(INPD, "BL04I-VA-IMG-02:P MS")
    field(INPE, "BL04I-VA-IMG-02:P MS")
    field(INPF, "BL04I-VA-IMG-02:P MS")
    field(INPG, "BL04I-VA-IMG-02:P MS")
    field(INPH, "BL04I-VA-IMG-02:P MS")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
record(calc, "BL04I-VA-GIMG-01:PLOG")
{
    field(DESC, "log Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-GIMG-01:P PP MS")
    field(FLNK, "BL04I-VA-GIMG-01:PMAX")
    field(SCAN, "1 second")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(sel, "BL04I-VA-GIMG-01:PMAX")
{
    field(DESC, "Pressure")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-01:PMAX")
    field(INPB, "BL04I-VA-IMG-02:PMAX")
    field(INPC, "BL04I-VA-IMG-02:PMAX")
    field(INPD, "BL04I-VA-IMG-02:PMAX")
    field(INPE, "BL04I-VA-IMG-02:PMAX")
    field(INPF, "BL04I-VA-IMG-02:PMAX")
    field(INPG, "BL04I-VA-IMG-02:PMAX")
    field(INPH, "BL04I-VA-IMG-02:PMAX")
    field(FLNK, "BL04I-VA-GIMG-01:PMIN")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
record(sel, "BL04I-VA-GIMG-01:PMIN")
{
    field(DESC, "Pressure")
    field(SELM, "Low Signal")
    field(INPA, "BL04I-VA-IMG-01:PMIN")
    field(INPB, "BL04I-VA-IMG-02:PMIN")
    field(INPC, "BL04I-VA-IMG-02:PMIN")
    field(INPD, "BL04I-VA-IMG-02:PMIN")
    field(INPE, "BL04I-VA-IMG-02:PMIN")
    field(INPF, "BL04I-VA-IMG-02:PMIN")
    field(INPG, "BL04I-VA-IMG-02:PMIN")
    field(INPH, "BL04I-VA-IMG-02:PMIN")
    field(EGU,  "mbar")
    field(PREC, "11")
    field(HOPR, "0.01")
    field(LOPR, "1.0E-11")
}
################################################################################
# Protection - IMG Overpressure
#
record(ao, "BL04I-VA-GIMG-01:PRO:SETSP")
{
    field(DESC, "IMG Overpressure")
    field(FLNK, "BL04I-VA-GIMG-01:PRO:SEQSP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
    field(DRVH, "1.0e-2")
    field(DRVL, "1.3e-5")
    field(DOL , "5.0e-4")
}
record(seq, "BL04I-VA-GIMG-01:PRO:SEQSP")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-01:PRO:SETSP")
    field(DOL2, "BL04I-VA-GIMG-01:PRO:SETSP")
    field(DOL3, "BL04I-VA-GIMG-01:PRO:SETSP")
    field(DOL4, "BL04I-VA-GIMG-01:PRO:SETSP")
    field(DOL5, "BL04I-VA-GIMG-01:PRO:SETSP")
    field(DOL6, "BL04I-VA-GIMG-01:PRO:SETSP")
    field(DOL7, "BL04I-VA-GIMG-01:PRO:SETSP")
    field(DOL8, "BL04I-VA-GIMG-01:PRO:SETSP")
    field(LNK1, "BL04I-VA-IMG-01:PRO:SETSP CA")
    field(LNK2, "BL04I-VA-IMG-02:PRO:SETSP CA")
    field(LNK3, "BL04I-VA-IMG-02:PRO:SETSP CA")
    field(LNK4, "BL04I-VA-IMG-02:PRO:SETSP CA")
    field(LNK5, "BL04I-VA-IMG-02:PRO:SETSP CA")
    field(LNK6, "BL04I-VA-IMG-02:PRO:SETSP CA")
    field(LNK7, "BL04I-VA-IMG-02:PRO:SETSP CA")
    field(LNK8, "BL04I-VA-IMG-02:PRO:SETSP CA")
}
record(mbbo, "BL04I-VA-GIMG-01:PRO:ENABLE")
{
    field(DESC, "Enable Protection Setpoint")
    field(FLNK, "BL04I-VA-GIMG-01:PRO:SEQENA")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GIMG-01:PRO:SEQENA")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-01:PRO:ENABLE")
    field(DOL2, "BL04I-VA-GIMG-01:PRO:ENABLE")
    field(DOL3, "BL04I-VA-GIMG-01:PRO:ENABLE")
    field(DOL4, "BL04I-VA-GIMG-01:PRO:ENABLE")
    field(DOL5, "BL04I-VA-GIMG-01:PRO:ENABLE")
    field(DOL6, "BL04I-VA-GIMG-01:PRO:ENABLE")
    field(DOL7, "BL04I-VA-GIMG-01:PRO:ENABLE")
    field(DOL8, "BL04I-VA-GIMG-01:PRO:ENABLE")
    field(LNK1, "BL04I-VA-IMG-01:PRO:ENABLE CA")
    field(LNK2, "BL04I-VA-IMG-02:PRO:ENABLE CA")
    field(LNK3, "BL04I-VA-IMG-02:PRO:ENABLE CA")
    field(LNK4, "BL04I-VA-IMG-02:PRO:ENABLE CA")
    field(LNK5, "BL04I-VA-IMG-02:PRO:ENABLE CA")
    field(LNK6, "BL04I-VA-IMG-02:PRO:ENABLE CA")
    field(LNK7, "BL04I-VA-IMG-02:PRO:ENABLE CA")
    field(LNK8, "BL04I-VA-IMG-02:PRO:ENABLE CA")
}
record(sel, "BL04I-VA-GIMG-01:PRO:SP")
{
    field(DESC, "IMG Overpressure")
    field(SCAN, "1 second")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-01:PRO:SP MS")
    field(INPB, "BL04I-VA-IMG-02:PRO:SP MS")
    field(INPC, "BL04I-VA-IMG-02:PRO:SP MS")
    field(INPD, "BL04I-VA-IMG-02:PRO:SP MS")
    field(INPE, "BL04I-VA-IMG-02:PRO:SP MS")
    field(INPF, "BL04I-VA-IMG-02:PRO:SP MS")
    field(INPG, "BL04I-VA-IMG-02:PRO:SP MS")
    field(INPH, "BL04I-VA-IMG-02:PRO:SP MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
}
################################################################################
# Relay - Valve Interlock
#
record(ao, "BL04I-VA-GIMG-01:RLY1:SETSP")
{
    field(DESC, "Valve I/L")
    field(FLNK, "BL04I-VA-GIMG-01:RLY1:SEQSP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-6")
}
record(seq, "BL04I-VA-GIMG-01:RLY1:SEQSP")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-01:RLY1:SETSP")
    field(DOL2, "BL04I-VA-GIMG-01:RLY1:SETSP")
    field(DOL3, "BL04I-VA-GIMG-01:RLY1:SETSP")
    field(DOL4, "BL04I-VA-GIMG-01:RLY1:SETSP")
    field(DOL5, "BL04I-VA-GIMG-01:RLY1:SETSP")
    field(DOL6, "BL04I-VA-GIMG-01:RLY1:SETSP")
    field(DOL7, "BL04I-VA-GIMG-01:RLY1:SETSP")
    field(DOL8, "BL04I-VA-GIMG-01:RLY1:SETSP")
    field(LNK1, "BL04I-VA-IMG-01:RLY1:SETSP CA")
    field(LNK2, "BL04I-VA-IMG-02:RLY1:SETSP CA")
    field(LNK3, "BL04I-VA-IMG-02:RLY1:SETSP CA")
    field(LNK4, "BL04I-VA-IMG-02:RLY1:SETSP CA")
    field(LNK5, "BL04I-VA-IMG-02:RLY1:SETSP CA")
    field(LNK6, "BL04I-VA-IMG-02:RLY1:SETSP CA")
    field(LNK7, "BL04I-VA-IMG-02:RLY1:SETSP CA")
    field(LNK8, "BL04I-VA-IMG-02:RLY1:SETSP CA")
}
record(mbbo, "BL04I-VA-GIMG-01:RLY1:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(FLNK, "BL04I-VA-GIMG-01:RLY1:SEQENA")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GIMG-01:RLY1:SEQENA")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-01:RLY1:ENABLE")
    field(DOL2, "BL04I-VA-GIMG-01:RLY1:ENABLE")
    field(DOL3, "BL04I-VA-GIMG-01:RLY1:ENABLE")
    field(DOL4, "BL04I-VA-GIMG-01:RLY1:ENABLE")
    field(DOL5, "BL04I-VA-GIMG-01:RLY1:ENABLE")
    field(DOL6, "BL04I-VA-GIMG-01:RLY1:ENABLE")
    field(DOL7, "BL04I-VA-GIMG-01:RLY1:ENABLE")
    field(DOL8, "BL04I-VA-GIMG-01:RLY1:ENABLE")
    field(LNK1, "BL04I-VA-IMG-01:RLY1:ENABLE CA")
    field(LNK2, "BL04I-VA-IMG-02:RLY1:ENABLE CA")
    field(LNK3, "BL04I-VA-IMG-02:RLY1:ENABLE CA")
    field(LNK4, "BL04I-VA-IMG-02:RLY1:ENABLE CA")
    field(LNK5, "BL04I-VA-IMG-02:RLY1:ENABLE CA")
    field(LNK6, "BL04I-VA-IMG-02:RLY1:ENABLE CA")
    field(LNK7, "BL04I-VA-IMG-02:RLY1:ENABLE CA")
    field(LNK8, "BL04I-VA-IMG-02:RLY1:ENABLE CA")
}
record(sel, "BL04I-VA-GIMG-01:RLY1:SP")
{
    field(DESC, "Valve Interlock")
    field(SCAN, "1 second")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-01:RLY1:SP MS")
    field(INPB, "BL04I-VA-IMG-02:RLY1:SP MS")
    field(INPC, "BL04I-VA-IMG-02:RLY1:SP MS")
    field(INPD, "BL04I-VA-IMG-02:RLY1:SP MS")
    field(INPE, "BL04I-VA-IMG-02:RLY1:SP MS")
    field(INPF, "BL04I-VA-IMG-02:RLY1:SP MS")
    field(INPG, "BL04I-VA-IMG-02:RLY1:SP MS")
    field(INPH, "BL04I-VA-IMG-02:RLY1:SP MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
}
################################################################################
# Relay 2 (Channel A Only) - MPS Interlock 1
#
record(sel, "BL04I-VA-GIMG-01:RLY2:EXISTS")
{
    field(DESC, "Relay Exists")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-01:RLY2:EXISTS")
    field(INPB, "BL04I-VA-IMG-02:RLY2:EXISTS")
    field(INPC, "BL04I-VA-IMG-02:RLY2:EXISTS")
    field(INPD, "BL04I-VA-IMG-02:RLY2:EXISTS")
    field(INPE, "BL04I-VA-IMG-02:RLY2:EXISTS")
    field(INPF, "BL04I-VA-IMG-02:RLY2:EXISTS")
    field(INPG, "BL04I-VA-IMG-02:RLY2:EXISTS")
    field(INPH, "BL04I-VA-IMG-02:RLY2:EXISTS")
    field(PINI, "YES")
}
record(ao, "BL04I-VA-GIMG-01:RLY2:SETSP")
{
    field(DESC, "MPS Interlock 1")
    field(FLNK, "BL04I-VA-GIMG-01:RLY2:SEQSP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-7")
}
record(seq, "BL04I-VA-GIMG-01:RLY2:SEQSP")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-01:RLY2:SETSP")
    field(DOL2, "BL04I-VA-GIMG-01:RLY2:SETSP")
    field(DOL3, "BL04I-VA-GIMG-01:RLY2:SETSP")
    field(DOL4, "BL04I-VA-GIMG-01:RLY2:SETSP")
    field(DOL5, "BL04I-VA-GIMG-01:RLY2:SETSP")
    field(DOL6, "BL04I-VA-GIMG-01:RLY2:SETSP")
    field(DOL7, "BL04I-VA-GIMG-01:RLY2:SETSP")
    field(DOL8, "BL04I-VA-GIMG-01:RLY2:SETSP")
    field(LNK1, "BL04I-VA-IMG-01:RLY2:SETSP CA")
    field(LNK2, "BL04I-VA-IMG-02:RLY2:SETSP CA")
    field(LNK3, "BL04I-VA-IMG-02:RLY2:SETSP CA")
    field(LNK4, "BL04I-VA-IMG-02:RLY2:SETSP CA")
    field(LNK5, "BL04I-VA-IMG-02:RLY2:SETSP CA")
    field(LNK6, "BL04I-VA-IMG-02:RLY2:SETSP CA")
    field(LNK7, "BL04I-VA-IMG-02:RLY2:SETSP CA")
    field(LNK8, "BL04I-VA-IMG-02:RLY2:SETSP CA")
}
record(mbbo, "BL04I-VA-GIMG-01:RLY2:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(FLNK, "BL04I-VA-GIMG-01:RLY2:SEQENA")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GIMG-01:RLY2:SEQENA")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-01:RLY2:ENABLE")
    field(DOL2, "BL04I-VA-GIMG-01:RLY2:ENABLE")
    field(DOL3, "BL04I-VA-GIMG-01:RLY2:ENABLE")
    field(DOL4, "BL04I-VA-GIMG-01:RLY2:ENABLE")
    field(DOL5, "BL04I-VA-GIMG-01:RLY2:ENABLE")
    field(DOL6, "BL04I-VA-GIMG-01:RLY2:ENABLE")
    field(DOL7, "BL04I-VA-GIMG-01:RLY2:ENABLE")
    field(DOL8, "BL04I-VA-GIMG-01:RLY2:ENABLE")
    field(LNK1, "BL04I-VA-IMG-01:RLY2:ENABLE CA")
    field(LNK2, "BL04I-VA-IMG-02:RLY2:ENABLE CA")
    field(LNK3, "BL04I-VA-IMG-02:RLY2:ENABLE CA")
    field(LNK4, "BL04I-VA-IMG-02:RLY2:ENABLE CA")
    field(LNK5, "BL04I-VA-IMG-02:RLY2:ENABLE CA")
    field(LNK6, "BL04I-VA-IMG-02:RLY2:ENABLE CA")
    field(LNK7, "BL04I-VA-IMG-02:RLY2:ENABLE CA")
    field(LNK8, "BL04I-VA-IMG-02:RLY2:ENABLE CA")
}
record(sel, "BL04I-VA-GIMG-01:RLY2:SP")
{
    field(DESC, "MPS Interlock 1")
    field(SCAN, "1 second")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-01:RLY2:SP MS")
    field(INPB, "BL04I-VA-IMG-02:RLY2:SP MS")
    field(INPC, "BL04I-VA-IMG-02:RLY2:SP MS")
    field(INPD, "BL04I-VA-IMG-02:RLY2:SP MS")
    field(INPE, "BL04I-VA-IMG-02:RLY2:SP MS")
    field(INPF, "BL04I-VA-IMG-02:RLY2:SP MS")
    field(INPG, "BL04I-VA-IMG-02:RLY2:SP MS")
    field(INPH, "BL04I-VA-IMG-02:RLY2:SP MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
################################################################################
################################################################################
# Relay 3 (Channel A Only) - MPS Interlock 2
#
record(sel, "BL04I-VA-GIMG-01:RLY3:EXISTS")
{
    field(DESC, "Relay Exists")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-01:RLY3:EXISTS")
    field(INPB, "BL04I-VA-IMG-02:RLY3:EXISTS")
    field(INPC, "BL04I-VA-IMG-02:RLY3:EXISTS")
    field(INPD, "BL04I-VA-IMG-02:RLY3:EXISTS")
    field(INPE, "BL04I-VA-IMG-02:RLY3:EXISTS")
    field(INPF, "BL04I-VA-IMG-02:RLY3:EXISTS")
    field(INPG, "BL04I-VA-IMG-02:RLY3:EXISTS")
    field(INPH, "BL04I-VA-IMG-02:RLY3:EXISTS")
    field(PINI, "YES")
}
record(ao, "BL04I-VA-GIMG-01:RLY3:SETSP")
{
    field(DESC, "MPS Interlock 2")
    field(FLNK, "BL04I-VA-GIMG-01:RLY3:SEQSP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-7")
}
record(seq, "BL04I-VA-GIMG-01:RLY3:SEQSP")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-01:RLY3:SETSP")
    field(DOL2, "BL04I-VA-GIMG-01:RLY3:SETSP")
    field(DOL3, "BL04I-VA-GIMG-01:RLY3:SETSP")
    field(DOL4, "BL04I-VA-GIMG-01:RLY3:SETSP")
    field(DOL5, "BL04I-VA-GIMG-01:RLY3:SETSP")
    field(DOL6, "BL04I-VA-GIMG-01:RLY3:SETSP")
    field(DOL7, "BL04I-VA-GIMG-01:RLY3:SETSP")
    field(DOL8, "BL04I-VA-GIMG-01:RLY3:SETSP")
    field(LNK1, "BL04I-VA-IMG-01:RLY3:SETSP CA")
    field(LNK2, "BL04I-VA-IMG-02:RLY3:SETSP CA")
    field(LNK3, "BL04I-VA-IMG-02:RLY3:SETSP CA")
    field(LNK4, "BL04I-VA-IMG-02:RLY3:SETSP CA")
    field(LNK5, "BL04I-VA-IMG-02:RLY3:SETSP CA")
    field(LNK6, "BL04I-VA-IMG-02:RLY3:SETSP CA")
    field(LNK7, "BL04I-VA-IMG-02:RLY3:SETSP CA")
    field(LNK8, "BL04I-VA-IMG-02:RLY3:SETSP CA")
}
record(mbbo, "BL04I-VA-GIMG-01:RLY3:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(FLNK, "BL04I-VA-GIMG-01:RLY3:SEQENA")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GIMG-01:RLY3:SEQENA")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-01:RLY3:ENABLE")
    field(DOL2, "BL04I-VA-GIMG-01:RLY3:ENABLE")
    field(DOL3, "BL04I-VA-GIMG-01:RLY3:ENABLE")
    field(DOL4, "BL04I-VA-GIMG-01:RLY3:ENABLE")
    field(DOL5, "BL04I-VA-GIMG-01:RLY3:ENABLE")
    field(DOL6, "BL04I-VA-GIMG-01:RLY3:ENABLE")
    field(DOL7, "BL04I-VA-GIMG-01:RLY3:ENABLE")
    field(DOL8, "BL04I-VA-GIMG-01:RLY3:ENABLE")
    field(LNK1, "BL04I-VA-IMG-01:RLY3:ENABLE CA")
    field(LNK2, "BL04I-VA-IMG-02:RLY3:ENABLE CA")
    field(LNK3, "BL04I-VA-IMG-02:RLY3:ENABLE CA")
    field(LNK4, "BL04I-VA-IMG-02:RLY3:ENABLE CA")
    field(LNK5, "BL04I-VA-IMG-02:RLY3:ENABLE CA")
    field(LNK6, "BL04I-VA-IMG-02:RLY3:ENABLE CA")
    field(LNK7, "BL04I-VA-IMG-02:RLY3:ENABLE CA")
    field(LNK8, "BL04I-VA-IMG-02:RLY3:ENABLE CA")
}
record(sel, "BL04I-VA-GIMG-01:RLY3:SP")
{
    field(DESC, "MPS Interlock 2")
    field(SCAN, "1 second")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-01:RLY3:SP MS")
    field(INPB, "BL04I-VA-IMG-02:RLY3:SP MS")
    field(INPC, "BL04I-VA-IMG-02:RLY3:SP MS")
    field(INPD, "BL04I-VA-IMG-02:RLY3:SP MS")
    field(INPE, "BL04I-VA-IMG-02:RLY3:SP MS")
    field(INPF, "BL04I-VA-IMG-02:RLY3:SP MS")
    field(INPG, "BL04I-VA-IMG-02:RLY3:SP MS")
    field(INPH, "BL04I-VA-IMG-02:RLY3:SP MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
################################################################################

################################################################################
# Relay 4 - RGA Interlock
#
record(sel, "BL04I-VA-GIMG-01:RLY4:EXISTS")
{
    field(DESC, "Relay Exists")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-01:RLY4:EXISTS")
    field(INPB, "BL04I-VA-IMG-02:RLY4:EXISTS")
    field(INPC, "BL04I-VA-IMG-02:RLY4:EXISTS")
    field(INPD, "BL04I-VA-IMG-02:RLY4:EXISTS")
    field(INPE, "BL04I-VA-IMG-02:RLY4:EXISTS")
    field(INPF, "BL04I-VA-IMG-02:RLY4:EXISTS")
    field(INPG, "BL04I-VA-IMG-02:RLY4:EXISTS")
    field(INPH, "BL04I-VA-IMG-02:RLY4:EXISTS")
    field(PINI, "YES")
}
record(ao, "BL04I-VA-GIMG-01:RLY4:SETSP")
{
    field(DESC, "RGA Interlock")
    field(FLNK, "BL04I-VA-GIMG-01:RLY4:SEQSP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-4")
}
record(seq, "BL04I-VA-GIMG-01:RLY4:SEQSP")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-01:RLY4:SETSP")
    field(DOL2, "BL04I-VA-GIMG-01:RLY4:SETSP")
    field(DOL3, "BL04I-VA-GIMG-01:RLY4:SETSP")
    field(DOL4, "BL04I-VA-GIMG-01:RLY4:SETSP")
    field(DOL5, "BL04I-VA-GIMG-01:RLY4:SETSP")
    field(DOL6, "BL04I-VA-GIMG-01:RLY4:SETSP")
    field(DOL7, "BL04I-VA-GIMG-01:RLY4:SETSP")
    field(DOL8, "BL04I-VA-GIMG-01:RLY4:SETSP")
    field(LNK1, "BL04I-VA-IMG-01:RLY4:SETSP CA")
    field(LNK2, "BL04I-VA-IMG-02:RLY4:SETSP CA")
    field(LNK3, "BL04I-VA-IMG-02:RLY4:SETSP CA")
    field(LNK4, "BL04I-VA-IMG-02:RLY4:SETSP CA")
    field(LNK5, "BL04I-VA-IMG-02:RLY4:SETSP CA")
    field(LNK6, "BL04I-VA-IMG-02:RLY4:SETSP CA")
    field(LNK7, "BL04I-VA-IMG-02:RLY4:SETSP CA")
    field(LNK8, "BL04I-VA-IMG-02:RLY4:SETSP CA")
}
record(mbbo, "BL04I-VA-GIMG-01:RLY4:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(FLNK, "BL04I-VA-GIMG-01:RLY4:SEQENA")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GIMG-01:RLY4:SEQENA")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-01:RLY4:ENABLE")
    field(DOL2, "BL04I-VA-GIMG-01:RLY4:ENABLE")
    field(DOL3, "BL04I-VA-GIMG-01:RLY4:ENABLE")
    field(DOL4, "BL04I-VA-GIMG-01:RLY4:ENABLE")
    field(DOL5, "BL04I-VA-GIMG-01:RLY4:ENABLE")
    field(DOL6, "BL04I-VA-GIMG-01:RLY4:ENABLE")
    field(DOL7, "BL04I-VA-GIMG-01:RLY4:ENABLE")
    field(DOL8, "BL04I-VA-GIMG-01:RLY4:ENABLE")
    field(LNK1, "BL04I-VA-IMG-01:RLY4:ENABLE CA")
    field(LNK2, "BL04I-VA-IMG-02:RLY4:ENABLE CA")
    field(LNK3, "BL04I-VA-IMG-02:RLY4:ENABLE CA")
    field(LNK4, "BL04I-VA-IMG-02:RLY4:ENABLE CA")
    field(LNK5, "BL04I-VA-IMG-02:RLY4:ENABLE CA")
    field(LNK6, "BL04I-VA-IMG-02:RLY4:ENABLE CA")
    field(LNK7, "BL04I-VA-IMG-02:RLY4:ENABLE CA")
    field(LNK8, "BL04I-VA-IMG-02:RLY4:ENABLE CA")
}
record(sel, "BL04I-VA-GIMG-01:RLY4:SP")
{
    field(DESC, "RGA Interlock")
    field(SCAN, "1 second")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-01:RLY4:SP MS")
    field(INPB, "BL04I-VA-IMG-02:RLY4:SP MS")
    field(INPC, "BL04I-VA-IMG-02:RLY4:SP MS")
    field(INPD, "BL04I-VA-IMG-02:RLY4:SP MS")
    field(INPE, "BL04I-VA-IMG-02:RLY4:SP MS")
    field(INPF, "BL04I-VA-IMG-02:RLY4:SP MS")
    field(INPG, "BL04I-VA-IMG-02:RLY4:SP MS")
    field(INPH, "BL04I-VA-IMG-02:RLY4:SP MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
################################################################################

################################################################################
# Relay FRLY - Fast Valve Interlock
#
record(sel, "BL04I-VA-GIMG-01:FRLY:EXISTS")
{
    field(DESC, "Relay Exists")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-01:FRLY:EXISTS")
    field(INPB, "BL04I-VA-IMG-02:FRLY:EXISTS")
    field(INPC, "BL04I-VA-IMG-02:FRLY:EXISTS")
    field(INPD, "BL04I-VA-IMG-02:FRLY:EXISTS")
    field(INPE, "BL04I-VA-IMG-02:FRLY:EXISTS")
    field(INPF, "BL04I-VA-IMG-02:FRLY:EXISTS")
    field(INPG, "BL04I-VA-IMG-02:FRLY:EXISTS")
    field(INPH, "BL04I-VA-IMG-02:FRLY:EXISTS")
    field(PINI, "YES")
}
record(ao, "BL04I-VA-GIMG-01:FRLY:SETSP")
{
    field(DESC, "Fast Valve Interlock")
    field(FLNK, "BL04I-VA-GIMG-01:FRLY:SEQSP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-5")
}
record(seq, "BL04I-VA-GIMG-01:FRLY:SEQSP")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-01:FRLY:SETSP")
    field(DOL2, "BL04I-VA-GIMG-01:FRLY:SETSP")
    field(DOL3, "BL04I-VA-GIMG-01:FRLY:SETSP")
    field(DOL4, "BL04I-VA-GIMG-01:FRLY:SETSP")
    field(DOL5, "BL04I-VA-GIMG-01:FRLY:SETSP")
    field(DOL6, "BL04I-VA-GIMG-01:FRLY:SETSP")
    field(DOL7, "BL04I-VA-GIMG-01:FRLY:SETSP")
    field(DOL8, "BL04I-VA-GIMG-01:FRLY:SETSP")
    field(LNK1, "BL04I-VA-IMG-01:FRLY:SETSP CA")
    field(LNK2, "BL04I-VA-IMG-02:FRLY:SETSP CA")
    field(LNK3, "BL04I-VA-IMG-02:FRLY:SETSP CA")
    field(LNK4, "BL04I-VA-IMG-02:FRLY:SETSP CA")
    field(LNK5, "BL04I-VA-IMG-02:FRLY:SETSP CA")
    field(LNK6, "BL04I-VA-IMG-02:FRLY:SETSP CA")
    field(LNK7, "BL04I-VA-IMG-02:FRLY:SETSP CA")
    field(LNK8, "BL04I-VA-IMG-02:FRLY:SETSP CA")
}
record(mbbo, "BL04I-VA-GIMG-01:FRLY:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(FLNK, "BL04I-VA-GIMG-01:FRLY:SEQENA")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GIMG-01:FRLY:SEQENA")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIMG-01:FRLY:ENABLE")
    field(DOL2, "BL04I-VA-GIMG-01:FRLY:ENABLE")
    field(DOL3, "BL04I-VA-GIMG-01:FRLY:ENABLE")
    field(DOL4, "BL04I-VA-GIMG-01:FRLY:ENABLE")
    field(DOL5, "BL04I-VA-GIMG-01:FRLY:ENABLE")
    field(DOL6, "BL04I-VA-GIMG-01:FRLY:ENABLE")
    field(DOL7, "BL04I-VA-GIMG-01:FRLY:ENABLE")
    field(DOL8, "BL04I-VA-GIMG-01:FRLY:ENABLE")
    field(LNK1, "BL04I-VA-IMG-01:FRLY:ENABLE CA")
    field(LNK2, "BL04I-VA-IMG-02:FRLY:ENABLE CA")
    field(LNK3, "BL04I-VA-IMG-02:FRLY:ENABLE CA")
    field(LNK4, "BL04I-VA-IMG-02:FRLY:ENABLE CA")
    field(LNK5, "BL04I-VA-IMG-02:FRLY:ENABLE CA")
    field(LNK6, "BL04I-VA-IMG-02:FRLY:ENABLE CA")
    field(LNK7, "BL04I-VA-IMG-02:FRLY:ENABLE CA")
    field(LNK8, "BL04I-VA-IMG-02:FRLY:ENABLE CA")
}
record(sel, "BL04I-VA-GIMG-01:FRLY:SP")
{
    field(DESC, "Fast Valve Interlock")
    field(SCAN, "1 second")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-01:FRLY:SP MS")
    field(INPB, "BL04I-VA-IMG-02:FRLY:SP MS")
    field(INPC, "BL04I-VA-IMG-02:FRLY:SP MS")
    field(INPD, "BL04I-VA-IMG-02:FRLY:SP MS")
    field(INPE, "BL04I-VA-IMG-02:FRLY:SP MS")
    field(INPF, "BL04I-VA-IMG-02:FRLY:SP MS")
    field(INPG, "BL04I-VA-IMG-02:FRLY:SP MS")
    field(INPH, "BL04I-VA-IMG-02:FRLY:SP MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
################################################################################
#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937aPirg.db
#% macro, __doc__, Template database for a pirani guage connected to
# one channel of an MKS937A Multi-Sensor System
# A note on the optional macros: they default to an appropriate hard-coded
# value if no value is passed for expansion.
# They are provided to allow the default set points to be changed.
# Once the set point needs to be changed it may be necessary to alter 
# various other fields defining the range of allowed values.
# For the majority of applications the defaults should be used.  The levels
# should only be changed at the request of the vacuum group for non-standard
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, channel, MKS 937A channel number (1-4)
#
# optional substitutions:
#% macro, name,        Object name, and gui association name
#% macro, rlysp_level, The desired relay setpoint value for the PIRG device.
#% macro, rlysp_drvh,  The DRVH field on control setpoint records
#                      (limits max value of relay setpoint)
#% macro, rlysp_drvl,  The DRVL field on relay setpoint records.
#                      (limits min value of relay setpoint)
#% macro, rlysp_hopr,  The HOPR field on relay setpoint records
#                      (high operator value - helps display set correct range).
#% macro, rlysp_lopr,  The LOPR field on relay setpoint records
#                      (low operator value - helps display set correct range).
#% macro, rlysp_hihi,  The HIHI alarm field on the relay setpoint record.
#% macro, rlysp_lolo,  The LOLO alarm field on the relay setpoint record.
#% macro, rlysp_high,  The HIGH alarm field on the relay setpoint record.
#% macro, rlysp_low ,  The LOW alarm field on the relay setpoint record.
#% macro, rlysp_desc,  The DESC field on the relay setpoint records
#		               (appears as a label on the Pirg EDM screen).
#% macro, ilk_write_access_pv, bi record to allow (0) of inhibit (1) gauge interlock setpoint overwrite. Default is local record forcing 'Allow'.
################################################################################

# This associates an edm screen with the template
# % gui, PIRG11, edm, mks937aPirg.edl, device=BL04I-VA-PIRG-11

# This associates BOY screens with the template
# % gui, PIRG11, boydetail, mks937aApp_opi/pirg_detail.opi, device=BL04I-VA-PIRG-11, desc=BL04I-VA-PIRG-11, name=PIRG11
# % gui, PIRG11, boyembed, mks937aApp_opi/pirg_embed_box.opi, device=BL04I-VA-PIRG-11, desc=BL04I-VA-PIRG-11, name=PIRG11
# % gui, PIRG11, boyembed, mks937aApp_opi/pirg_embed.opi, device=BL04I-VA-PIRG-11, desc=BL04I-VA-PIRG-11, name=PIRG11

# These define what PVs a valve detail screen should contain
# % gui, PIRG11, readback, Pressure,              BL04I-VA-PIRG-11:P
# % gui, PIRG11, readback, Status,                BL04I-VA-PIRG-11:STA
# % gui, PIRG11, readback, Gauge Setpoint Write,  BL04I-VA-PIRG-11:ILKSETSP:NOWRITE
# % gui, PIRG11, readback, CTL Setpoint Summary,  BL04I-VA-PIRG-11:CTL:SP,            =pv("BL04I-VA-PIRG-11:CTL:SP.DESC")
# % gui, PIRG11, readback, RLY1 Setpoint Summary, BL04I-VA-PIRG-11:RLY1:SP,           =pv("BL04I-VA-PIRG-11:RLY1:SP.DESC")
# % gui, PIRG11, readback, RLY2 Setpoint Summary, BL04I-VA-PIRG-11:RLY2:SP,           =pv("BL04I-VA-PIRG-11:RLY2:SP.DESC")
# % gui, PIRG11, enum,     PirgFilament,          BL04I-VA-PIRG-11:ENABLE
# % gui, PIRG11, readback, CTL Setpoint On,       BL04I-VA-PIRG-11:CTL:SP,            =pv("BL04I-VA-PIRG-11:CTL:SP.DESC")
# % gui, PIRG11, readback, CTL Setpoint Off,      BL04I-VA-PIRG-11:CTL:HYST,          =pv("BL04I-VA-PIRG-11:CTL:SETSPOFF.DESC")
# % gui, PIRG11, readback, RLY1 Setpoint On,      BL04I-VA-PIRG-11:RLY1:SP,           =pv("BL04I-VA-PIRG-11:RLY1:SP.DESC")
# % gui, PIRG11, readback, RLY1 Setpoint Off,     BL04I-VA-PIRG-11:RLY1:SPOFF,        =pv("BL04I-VA-PIRG-11:RLY1:SPOFF.DESC")
# % gui, PIRG11, readback, RLY2 Setpoint On,      BL04I-VA-PIRG-11:RLY2:SP,           =pv("BL04I-VA-PIRG-11:RLY2:SP.DESC")
# % gui, PIRG11, readback, RLY2 Setpoint Off,     BL04I-VA-PIRG-11:RLY2:SPOFF,        =pv("BL04I-VA-PIRG-11:RLY2:SPOFF.DESC")
# % gui, PIRG11, demand,   CTL Setpoint On,       BL04I-VA-PIRG-11:CTL:SETSP,         =pv("BL04I-VA-PIRG-11:SP.DESC")
# % gui, PIRG11, demand,   CTL Setpoint Off,      BL04I-VA-PIRG-11:CTL:SETSPOFF,      =pv("BL04I-VA-PIRG-11:SPOFF.DESC")
# % gui, PIRG11, demand,   RLY1 Setpoint On,      BL04I-VA-PIRG-11:RLY1:SETSP,        =pv("BL04I-VA-PIRG-11:RLY1:SP.DESC")
# % gui, PIRG11, demand,   RLY1 Setpoint Off,     BL04I-VA-PIRG-11:RLY1:SETSPOFF,     =pv("BL04I-VA-PIRG-11:RLY1:SPOFF.DESC")
# % gui, PIRG11, demand,   RLY2 Setpoint On,      BL04I-VA-PIRG-11:RLY2:SETSP,        =pv("BL04I-VA-PIRG-11:RLY2:SP.DESC")
# % gui, PIRG11, demand,   RLY2 Setpoint Off,     BL04I-VA-PIRG-11:RLY2:SETSPOFF,     =pv("BL04I-VA-PIRG-11:RLY2:SPOFF.DESC")
# % gui, PIRG11, readback, RLY1 Mode,             BL04I-VA-PIRG-11:RLY1:MODE,         =concat(pv("BL04I-VA-PIRG-11:RLY1:SP.DESC")," Mode")
# % gui, PIRG11, readback, RLY1 Direction,        BL04I-VA-PIRG-11:RLY1:DIR,          =concat(pv("BL04I-VA-PIRG-11:RLY1:SP.DESC")," Dir")
# % gui, PIRG11, readback, RLY2 Mode,             BL04I-VA-PIRG-11:RLY2:MODE,         =concat(pv("BL04I-VA-PIRG-11:RLY2:SP.DESC")," Mode")
# % gui, PIRG11, readback, RLY2 Direction,        BL04I-VA-PIRG-11:RLY2:DIR,          =concat(pv("BL04I-VA-PIRG-11:RLY2:SP.DESC")," Dir")
# % gui, PIRG11, enum,     RLY1 Mode,             BL04I-VA-PIRG-11:RLY1:SETMODE,      =concat(pv("BL04I-VA-PIRG-11:RLY1:SP.DESC")," Mode")
# % gui, PIRG11, enum,     RLY1 Direction,        BL04I-VA-PIRG-11:RLY1:SETDIR,       =concat(pv("BL04I-VA-PIRG-11:RLY1:SP.DESC")," Dir")
# % gui, PIRG11, enum,     RLY2 Mode,             BL04I-VA-PIRG-11:RLY2:SETMODE,      =concat(pv("BL04I-VA-PIRG-11:RLY2:SP.DESC")," Mode")
# % gui, PIRG11, enum,     RLY2 Direction,        BL04I-VA-PIRG-11:RLY2:SETDIR,       =concat(pv("BL04I-VA-PIRG-11:RLY2:SP.DESC")," Dir")

# Status
#
#% archiver 10 Monitor
#% controldesk Pressure smon
#
record(mbbi, "BL04I-VA-PIRG-11:STA") {
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol status(5) ty_42_0 0")
  field(DESC, "Status")
  field(SCAN, "1 second")
  field(FLNK, "BL04I-VA-PIRG-11:PDIS")
  field(ZRST, "OK")
  field(ONST, "OK")
  field(TWST, "Above Range")
  field(THST, "At Atmosphere")
  field(FRST, "Low Emission")
  field(FVST, "Filament Off")
  field(SXST, "HV Off")
  field(SVST, "Startup Delay")
  field(EIST, "Below Range")
  field(NIST, "Controlled")
  field(TEST, "Protected State")
  field(ELST, "No Gauge")
  field(TVST, "Not Connected")
  field(TTST, "Wrong Gauge")
  field(FTST, "Bad Command")
  field(FFST, "Locked Out")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "MINOR")
  field(THSV, "MINOR")
  field(FRSV, "MAJOR")
  field(FVSV, "MAJOR")
  field(SXSV, "MAJOR")
  field(SVSV, "MINOR")
  field(EISV, "NO_ALARM")
  field(NISV, "MINOR")
  field(TESV, "MINOR")
  field(ELSV, "MAJOR")
  field(TVSV, "MAJOR")
  field(TTSV, "MAJOR")
  field(FTSV, "MAJOR")
  field(FFSV, "MAJOR")
}

#############################################################################
# Pressure
# 
# % archiver 1 Monitor
# % controldesk Pressure readback
record(ai, "BL04I-VA-PIRG-11:P") {
  field(DESC, "Pressure")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol pressure(5) ty_42_0 0")
  field(FLNK, "BL04I-VA-PIRG-11:PLOG")
  field(EGU, "mbar")
  field(PREC, "3")
  field(HOPR, "1000")
  field(LOPR, "0.001")
  field(SDIS, "BL04I-VA-PIRG-11:PDIS")
  field(DISS, "INVALID")
}

record(calcout, "BL04I-VA-PIRG-11:ADEL") {
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-PIRG-11:P.ADEL")
  field(INPA, "BL04I-VA-PIRG-11:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-PIRG-11:PLOG") {
  field(DESC, "log Pressure")
  field(EGU, "log")
  field(CALC, "LOG(A)")
  field(INPA, "BL04I-VA-PIRG-11:P MS")
  field(HOPR, "3")
  field(LOPR, "-3")
  field(ADEL, "0.025")
}


################################################################################
# Relay - Ion Pump Interlock
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-PIRG-11:RLY:SETSP") {
  field(DESC, "Ion Pump I/L")
  field(FLNK, "BL04I-VA-PIRG-11:RLY:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e2")
  field(LOPR, "2.7e-3")
  field(DRVH, "1.2e2")
  field(DRVL, "2.7e-3")
  field(DOL, "1.0e-2")
  field(SDIS, "BL04I-VA-PIRG-11:RLY:ILKSETSP:NOWRITE")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-PIRG-11:RLY:ENABLE") 
  {
  field(DESC, "Enable Relay Setpoint")
  field(FLNK, "BL04I-VA-PIRG-11:RLY:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  }

record(seq, "BL04I-VA-PIRG-11:RLY:SEQ") 
  {
  field(DESC, "Sequence Relay Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-PIRG-11:RLY:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-PIRG-11:RLY:DIS PP")
  field(DOL2, "BL04I-VA-PIRG-11:RLY:SETSP")
  field(LNK2, "BL04I-VA-PIRG-11:RLY:OUTSP PP")
  field(SDIS, "BL04I-VA-PIRG-11:RLY:ILKSETSP:NOWRITE")
  }

#
#% archiver 10 Monitor
#% controldesk Ion Pump Interlock readback
#
record(ai, "BL04I-VA-PIRG-11:RLY:SP") {
  field(DESC, "Ion Pump I/L")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(5,RLY,BL04I-VA-PIRG-11) ty_42_0 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e2")
  field(LOPR, "2.7e-3")
  field(HIHI, "1.0e3")
  field(LOLO, "2.6e-3")
  field(HIGH, "1.1e-2")
  field(LOW, "9.0e-3")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

record(ao, "BL04I-VA-PIRG-11:RLY:OUTSP") 
  {
  field(DESC, "Output Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol setsp(5,RLY,BL04I-VA-PIRG-11) ty_42_0 0")
  field(SDIS, "BL04I-VA-PIRG-11:RLY:ILKSETSP:NOWRITE")
  }

record(bo, "BL04I-VA-PIRG-11:RLY:DIS") {
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(5,RLY) ty_42_0 0")
}

record(calc, "BL04I-VA-PIRG-11:PDIS") {
  field(PHAS, "1")
  field(CALC, "(A>1)?1:0")
  field(INPA, "BL04I-VA-PIRG-11:STA")
  field(FLNK, "BL04I-VA-PIRG-11:P")
}

#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-PIRG-11:CTL:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume an empty INP and do nothing.
#
# NB: These two records are identical and could have been instantiated via
#     alias. The names are for compatibility with the macros in the EDM screens
#     in which they are referenced.
#
record(bi, "BL04I-VA-PIRG-11:CTL:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-11:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-PIRG-11:RLY:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-11:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise just once, records that used to use PINI
# This is to ensure that the autoSR PV referred by ilk_write_access_pv
# is correctly established before any other record processing, to potentially
# avoid overwriting setpoints at IOC startup.
# Essentially, must avoid using PINI for A/S dependent records, otherwise they
# are initialised with the hard-coded DOL value.
#
record(bo, "BL04I-VA-PIRG-11:CTL:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-PIRG-11:CTL:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-PIRG-11:CTL:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-PIRG-11:RLY:ENABLE")
    field(LNK2, "BL04I-VA-PIRG-11:RLY:SETSP")
    field(LNK3, "BL04I-VA-PIRG-11:CTL:INITSETSPSDIS")
    field(SELM, "All")
}

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-PIRG-11:ERROR")
    {
    field(DESC, "Last error message")
    field(INP, "")
    field(PINI, "YES")
    }

#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937aPirg.db
#% macro, __doc__, Template database for a pirani guage connected to
# one channel of an MKS937A Multi-Sensor System
# A note on the optional macros: they default to an appropriate hard-coded
# value if no value is passed for expansion.
# They are provided to allow the default set points to be changed.
# Once the set point needs to be changed it may be necessary to alter 
# various other fields defining the range of allowed values.
# For the majority of applications the defaults should be used.  The levels
# should only be changed at the request of the vacuum group for non-standard
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, channel, MKS 937A channel number (1-4)
#
# optional substitutions:
#% macro, name,        Object name, and gui association name
#% macro, rlysp_level, The desired relay setpoint value for the PIRG device.
#% macro, rlysp_drvh,  The DRVH field on control setpoint records
#                      (limits max value of relay setpoint)
#% macro, rlysp_drvl,  The DRVL field on relay setpoint records.
#                      (limits min value of relay setpoint)
#% macro, rlysp_hopr,  The HOPR field on relay setpoint records
#                      (high operator value - helps display set correct range).
#% macro, rlysp_lopr,  The LOPR field on relay setpoint records
#                      (low operator value - helps display set correct range).
#% macro, rlysp_hihi,  The HIHI alarm field on the relay setpoint record.
#% macro, rlysp_lolo,  The LOLO alarm field on the relay setpoint record.
#% macro, rlysp_high,  The HIGH alarm field on the relay setpoint record.
#% macro, rlysp_low ,  The LOW alarm field on the relay setpoint record.
#% macro, rlysp_desc,  The DESC field on the relay setpoint records
#		               (appears as a label on the Pirg EDM screen).
#% macro, ilk_write_access_pv, bi record to allow (0) of inhibit (1) gauge interlock setpoint overwrite. Default is local record forcing 'Allow'.
################################################################################

# This associates an edm screen with the template
# % gui, PIRG03, edm, mks937aPirg.edl, device=BL04I-VA-PIRG-03

# This associates BOY screens with the template
# % gui, PIRG03, boydetail, mks937aApp_opi/pirg_detail.opi, device=BL04I-VA-PIRG-03, desc=BL04I-VA-PIRG-03, name=PIRG03
# % gui, PIRG03, boyembed, mks937aApp_opi/pirg_embed_box.opi, device=BL04I-VA-PIRG-03, desc=BL04I-VA-PIRG-03, name=PIRG03
# % gui, PIRG03, boyembed, mks937aApp_opi/pirg_embed.opi, device=BL04I-VA-PIRG-03, desc=BL04I-VA-PIRG-03, name=PIRG03

# These define what PVs a valve detail screen should contain
# % gui, PIRG03, readback, Pressure,              BL04I-VA-PIRG-03:P
# % gui, PIRG03, readback, Status,                BL04I-VA-PIRG-03:STA
# % gui, PIRG03, readback, Gauge Setpoint Write,  BL04I-VA-PIRG-03:ILKSETSP:NOWRITE
# % gui, PIRG03, readback, CTL Setpoint Summary,  BL04I-VA-PIRG-03:CTL:SP,            =pv("BL04I-VA-PIRG-03:CTL:SP.DESC")
# % gui, PIRG03, readback, RLY1 Setpoint Summary, BL04I-VA-PIRG-03:RLY1:SP,           =pv("BL04I-VA-PIRG-03:RLY1:SP.DESC")
# % gui, PIRG03, readback, RLY2 Setpoint Summary, BL04I-VA-PIRG-03:RLY2:SP,           =pv("BL04I-VA-PIRG-03:RLY2:SP.DESC")
# % gui, PIRG03, enum,     PirgFilament,          BL04I-VA-PIRG-03:ENABLE
# % gui, PIRG03, readback, CTL Setpoint On,       BL04I-VA-PIRG-03:CTL:SP,            =pv("BL04I-VA-PIRG-03:CTL:SP.DESC")
# % gui, PIRG03, readback, CTL Setpoint Off,      BL04I-VA-PIRG-03:CTL:HYST,          =pv("BL04I-VA-PIRG-03:CTL:SETSPOFF.DESC")
# % gui, PIRG03, readback, RLY1 Setpoint On,      BL04I-VA-PIRG-03:RLY1:SP,           =pv("BL04I-VA-PIRG-03:RLY1:SP.DESC")
# % gui, PIRG03, readback, RLY1 Setpoint Off,     BL04I-VA-PIRG-03:RLY1:SPOFF,        =pv("BL04I-VA-PIRG-03:RLY1:SPOFF.DESC")
# % gui, PIRG03, readback, RLY2 Setpoint On,      BL04I-VA-PIRG-03:RLY2:SP,           =pv("BL04I-VA-PIRG-03:RLY2:SP.DESC")
# % gui, PIRG03, readback, RLY2 Setpoint Off,     BL04I-VA-PIRG-03:RLY2:SPOFF,        =pv("BL04I-VA-PIRG-03:RLY2:SPOFF.DESC")
# % gui, PIRG03, demand,   CTL Setpoint On,       BL04I-VA-PIRG-03:CTL:SETSP,         =pv("BL04I-VA-PIRG-03:SP.DESC")
# % gui, PIRG03, demand,   CTL Setpoint Off,      BL04I-VA-PIRG-03:CTL:SETSPOFF,      =pv("BL04I-VA-PIRG-03:SPOFF.DESC")
# % gui, PIRG03, demand,   RLY1 Setpoint On,      BL04I-VA-PIRG-03:RLY1:SETSP,        =pv("BL04I-VA-PIRG-03:RLY1:SP.DESC")
# % gui, PIRG03, demand,   RLY1 Setpoint Off,     BL04I-VA-PIRG-03:RLY1:SETSPOFF,     =pv("BL04I-VA-PIRG-03:RLY1:SPOFF.DESC")
# % gui, PIRG03, demand,   RLY2 Setpoint On,      BL04I-VA-PIRG-03:RLY2:SETSP,        =pv("BL04I-VA-PIRG-03:RLY2:SP.DESC")
# % gui, PIRG03, demand,   RLY2 Setpoint Off,     BL04I-VA-PIRG-03:RLY2:SETSPOFF,     =pv("BL04I-VA-PIRG-03:RLY2:SPOFF.DESC")
# % gui, PIRG03, readback, RLY1 Mode,             BL04I-VA-PIRG-03:RLY1:MODE,         =concat(pv("BL04I-VA-PIRG-03:RLY1:SP.DESC")," Mode")
# % gui, PIRG03, readback, RLY1 Direction,        BL04I-VA-PIRG-03:RLY1:DIR,          =concat(pv("BL04I-VA-PIRG-03:RLY1:SP.DESC")," Dir")
# % gui, PIRG03, readback, RLY2 Mode,             BL04I-VA-PIRG-03:RLY2:MODE,         =concat(pv("BL04I-VA-PIRG-03:RLY2:SP.DESC")," Mode")
# % gui, PIRG03, readback, RLY2 Direction,        BL04I-VA-PIRG-03:RLY2:DIR,          =concat(pv("BL04I-VA-PIRG-03:RLY2:SP.DESC")," Dir")
# % gui, PIRG03, enum,     RLY1 Mode,             BL04I-VA-PIRG-03:RLY1:SETMODE,      =concat(pv("BL04I-VA-PIRG-03:RLY1:SP.DESC")," Mode")
# % gui, PIRG03, enum,     RLY1 Direction,        BL04I-VA-PIRG-03:RLY1:SETDIR,       =concat(pv("BL04I-VA-PIRG-03:RLY1:SP.DESC")," Dir")
# % gui, PIRG03, enum,     RLY2 Mode,             BL04I-VA-PIRG-03:RLY2:SETMODE,      =concat(pv("BL04I-VA-PIRG-03:RLY2:SP.DESC")," Mode")
# % gui, PIRG03, enum,     RLY2 Direction,        BL04I-VA-PIRG-03:RLY2:SETDIR,       =concat(pv("BL04I-VA-PIRG-03:RLY2:SP.DESC")," Dir")

# Status
#
#% archiver 10 Monitor
#% controldesk Pressure smon
#
record(mbbi, "BL04I-VA-PIRG-03:STA") {
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol status(4) ty_40_6 0")
  field(DESC, "Status")
  field(SCAN, "1 second")
  field(FLNK, "BL04I-VA-PIRG-03:PDIS")
  field(ZRST, "OK")
  field(ONST, "OK")
  field(TWST, "Above Range")
  field(THST, "At Atmosphere")
  field(FRST, "Low Emission")
  field(FVST, "Filament Off")
  field(SXST, "HV Off")
  field(SVST, "Startup Delay")
  field(EIST, "Below Range")
  field(NIST, "Controlled")
  field(TEST, "Protected State")
  field(ELST, "No Gauge")
  field(TVST, "Not Connected")
  field(TTST, "Wrong Gauge")
  field(FTST, "Bad Command")
  field(FFST, "Locked Out")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "MINOR")
  field(THSV, "MINOR")
  field(FRSV, "MAJOR")
  field(FVSV, "MAJOR")
  field(SXSV, "MAJOR")
  field(SVSV, "MINOR")
  field(EISV, "NO_ALARM")
  field(NISV, "MINOR")
  field(TESV, "MINOR")
  field(ELSV, "MAJOR")
  field(TVSV, "MAJOR")
  field(TTSV, "MAJOR")
  field(FTSV, "MAJOR")
  field(FFSV, "MAJOR")
}

#############################################################################
# Pressure
# 
# % archiver 1 Monitor
# % controldesk Pressure readback
record(ai, "BL04I-VA-PIRG-03:P") {
  field(DESC, "Pressure")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol pressure(4) ty_40_6 0")
  field(FLNK, "BL04I-VA-PIRG-03:PLOG")
  field(EGU, "mbar")
  field(PREC, "3")
  field(HOPR, "1000")
  field(LOPR, "0.001")
  field(SDIS, "BL04I-VA-PIRG-03:PDIS")
  field(DISS, "INVALID")
}

record(calcout, "BL04I-VA-PIRG-03:ADEL") {
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-PIRG-03:P.ADEL")
  field(INPA, "BL04I-VA-PIRG-03:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-PIRG-03:PLOG") {
  field(DESC, "log Pressure")
  field(EGU, "log")
  field(CALC, "LOG(A)")
  field(INPA, "BL04I-VA-PIRG-03:P MS")
  field(HOPR, "3")
  field(LOPR, "-3")
  field(ADEL, "0.025")
}


################################################################################
# Relay - Ion Pump Interlock
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-PIRG-03:RLY:SETSP") {
  field(DESC, "Ion Pump I/L")
  field(FLNK, "BL04I-VA-PIRG-03:RLY:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e2")
  field(LOPR, "2.7e-3")
  field(DRVH, "1.2e2")
  field(DRVL, "2.7e-3")
  field(DOL, "1.0e-2")
  field(SDIS, "BL04I-VA-PIRG-03:RLY:ILKSETSP:NOWRITE")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-PIRG-03:RLY:ENABLE") 
  {
  field(DESC, "Enable Relay Setpoint")
  field(FLNK, "BL04I-VA-PIRG-03:RLY:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  }

record(seq, "BL04I-VA-PIRG-03:RLY:SEQ") 
  {
  field(DESC, "Sequence Relay Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-PIRG-03:RLY:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-PIRG-03:RLY:DIS PP")
  field(DOL2, "BL04I-VA-PIRG-03:RLY:SETSP")
  field(LNK2, "BL04I-VA-PIRG-03:RLY:OUTSP PP")
  field(SDIS, "BL04I-VA-PIRG-03:RLY:ILKSETSP:NOWRITE")
  }

#
#% archiver 10 Monitor
#% controldesk Ion Pump Interlock readback
#
record(ai, "BL04I-VA-PIRG-03:RLY:SP") {
  field(DESC, "Ion Pump I/L")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(4,RLY,BL04I-VA-PIRG-03) ty_40_6 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e2")
  field(LOPR, "2.7e-3")
  field(HIHI, "1.0e3")
  field(LOLO, "2.6e-3")
  field(HIGH, "1.1e-2")
  field(LOW, "9.0e-3")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

record(ao, "BL04I-VA-PIRG-03:RLY:OUTSP") 
  {
  field(DESC, "Output Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol setsp(4,RLY,BL04I-VA-PIRG-03) ty_40_6 0")
  field(SDIS, "BL04I-VA-PIRG-03:RLY:ILKSETSP:NOWRITE")
  }

record(bo, "BL04I-VA-PIRG-03:RLY:DIS") {
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(4,RLY) ty_40_6 0")
}

record(calc, "BL04I-VA-PIRG-03:PDIS") {
  field(PHAS, "1")
  field(CALC, "(A>1)?1:0")
  field(INPA, "BL04I-VA-PIRG-03:STA")
  field(FLNK, "BL04I-VA-PIRG-03:P")
}

#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-PIRG-03:CTL:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume an empty INP and do nothing.
#
# NB: These two records are identical and could have been instantiated via
#     alias. The names are for compatibility with the macros in the EDM screens
#     in which they are referenced.
#
record(bi, "BL04I-VA-PIRG-03:CTL:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-03:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-PIRG-03:RLY:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-03:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise just once, records that used to use PINI
# This is to ensure that the autoSR PV referred by ilk_write_access_pv
# is correctly established before any other record processing, to potentially
# avoid overwriting setpoints at IOC startup.
# Essentially, must avoid using PINI for A/S dependent records, otherwise they
# are initialised with the hard-coded DOL value.
#
record(bo, "BL04I-VA-PIRG-03:CTL:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-PIRG-03:CTL:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-PIRG-03:CTL:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-PIRG-03:RLY:ENABLE")
    field(LNK2, "BL04I-VA-PIRG-03:RLY:SETSP")
    field(LNK3, "BL04I-VA-PIRG-03:CTL:INITSETSPSDIS")
    field(SELM, "All")
}

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-PIRG-03:ERROR")
    {
    field(DESC, "Last error message")
    field(INP, "")
    field(PINI, "YES")
    }

#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937aPirg.db
#% macro, __doc__, Template database for a pirani guage connected to
# one channel of an MKS937A Multi-Sensor System
# A note on the optional macros: they default to an appropriate hard-coded
# value if no value is passed for expansion.
# They are provided to allow the default set points to be changed.
# Once the set point needs to be changed it may be necessary to alter 
# various other fields defining the range of allowed values.
# For the majority of applications the defaults should be used.  The levels
# should only be changed at the request of the vacuum group for non-standard
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, channel, MKS 937A channel number (1-4)
#
# optional substitutions:
#% macro, name,        Object name, and gui association name
#% macro, rlysp_level, The desired relay setpoint value for the PIRG device.
#% macro, rlysp_drvh,  The DRVH field on control setpoint records
#                      (limits max value of relay setpoint)
#% macro, rlysp_drvl,  The DRVL field on relay setpoint records.
#                      (limits min value of relay setpoint)
#% macro, rlysp_hopr,  The HOPR field on relay setpoint records
#                      (high operator value - helps display set correct range).
#% macro, rlysp_lopr,  The LOPR field on relay setpoint records
#                      (low operator value - helps display set correct range).
#% macro, rlysp_hihi,  The HIHI alarm field on the relay setpoint record.
#% macro, rlysp_lolo,  The LOLO alarm field on the relay setpoint record.
#% macro, rlysp_high,  The HIGH alarm field on the relay setpoint record.
#% macro, rlysp_low ,  The LOW alarm field on the relay setpoint record.
#% macro, rlysp_desc,  The DESC field on the relay setpoint records
#		               (appears as a label on the Pirg EDM screen).
#% macro, ilk_write_access_pv, bi record to allow (0) of inhibit (1) gauge interlock setpoint overwrite. Default is local record forcing 'Allow'.
################################################################################

# This associates an edm screen with the template
# % gui, PIRG04, edm, mks937aPirg.edl, device=BL04I-VA-PIRG-04

# This associates BOY screens with the template
# % gui, PIRG04, boydetail, mks937aApp_opi/pirg_detail.opi, device=BL04I-VA-PIRG-04, desc=BL04I-VA-PIRG-04, name=PIRG04
# % gui, PIRG04, boyembed, mks937aApp_opi/pirg_embed_box.opi, device=BL04I-VA-PIRG-04, desc=BL04I-VA-PIRG-04, name=PIRG04
# % gui, PIRG04, boyembed, mks937aApp_opi/pirg_embed.opi, device=BL04I-VA-PIRG-04, desc=BL04I-VA-PIRG-04, name=PIRG04

# These define what PVs a valve detail screen should contain
# % gui, PIRG04, readback, Pressure,              BL04I-VA-PIRG-04:P
# % gui, PIRG04, readback, Status,                BL04I-VA-PIRG-04:STA
# % gui, PIRG04, readback, Gauge Setpoint Write,  BL04I-VA-PIRG-04:ILKSETSP:NOWRITE
# % gui, PIRG04, readback, CTL Setpoint Summary,  BL04I-VA-PIRG-04:CTL:SP,            =pv("BL04I-VA-PIRG-04:CTL:SP.DESC")
# % gui, PIRG04, readback, RLY1 Setpoint Summary, BL04I-VA-PIRG-04:RLY1:SP,           =pv("BL04I-VA-PIRG-04:RLY1:SP.DESC")
# % gui, PIRG04, readback, RLY2 Setpoint Summary, BL04I-VA-PIRG-04:RLY2:SP,           =pv("BL04I-VA-PIRG-04:RLY2:SP.DESC")
# % gui, PIRG04, enum,     PirgFilament,          BL04I-VA-PIRG-04:ENABLE
# % gui, PIRG04, readback, CTL Setpoint On,       BL04I-VA-PIRG-04:CTL:SP,            =pv("BL04I-VA-PIRG-04:CTL:SP.DESC")
# % gui, PIRG04, readback, CTL Setpoint Off,      BL04I-VA-PIRG-04:CTL:HYST,          =pv("BL04I-VA-PIRG-04:CTL:SETSPOFF.DESC")
# % gui, PIRG04, readback, RLY1 Setpoint On,      BL04I-VA-PIRG-04:RLY1:SP,           =pv("BL04I-VA-PIRG-04:RLY1:SP.DESC")
# % gui, PIRG04, readback, RLY1 Setpoint Off,     BL04I-VA-PIRG-04:RLY1:SPOFF,        =pv("BL04I-VA-PIRG-04:RLY1:SPOFF.DESC")
# % gui, PIRG04, readback, RLY2 Setpoint On,      BL04I-VA-PIRG-04:RLY2:SP,           =pv("BL04I-VA-PIRG-04:RLY2:SP.DESC")
# % gui, PIRG04, readback, RLY2 Setpoint Off,     BL04I-VA-PIRG-04:RLY2:SPOFF,        =pv("BL04I-VA-PIRG-04:RLY2:SPOFF.DESC")
# % gui, PIRG04, demand,   CTL Setpoint On,       BL04I-VA-PIRG-04:CTL:SETSP,         =pv("BL04I-VA-PIRG-04:SP.DESC")
# % gui, PIRG04, demand,   CTL Setpoint Off,      BL04I-VA-PIRG-04:CTL:SETSPOFF,      =pv("BL04I-VA-PIRG-04:SPOFF.DESC")
# % gui, PIRG04, demand,   RLY1 Setpoint On,      BL04I-VA-PIRG-04:RLY1:SETSP,        =pv("BL04I-VA-PIRG-04:RLY1:SP.DESC")
# % gui, PIRG04, demand,   RLY1 Setpoint Off,     BL04I-VA-PIRG-04:RLY1:SETSPOFF,     =pv("BL04I-VA-PIRG-04:RLY1:SPOFF.DESC")
# % gui, PIRG04, demand,   RLY2 Setpoint On,      BL04I-VA-PIRG-04:RLY2:SETSP,        =pv("BL04I-VA-PIRG-04:RLY2:SP.DESC")
# % gui, PIRG04, demand,   RLY2 Setpoint Off,     BL04I-VA-PIRG-04:RLY2:SETSPOFF,     =pv("BL04I-VA-PIRG-04:RLY2:SPOFF.DESC")
# % gui, PIRG04, readback, RLY1 Mode,             BL04I-VA-PIRG-04:RLY1:MODE,         =concat(pv("BL04I-VA-PIRG-04:RLY1:SP.DESC")," Mode")
# % gui, PIRG04, readback, RLY1 Direction,        BL04I-VA-PIRG-04:RLY1:DIR,          =concat(pv("BL04I-VA-PIRG-04:RLY1:SP.DESC")," Dir")
# % gui, PIRG04, readback, RLY2 Mode,             BL04I-VA-PIRG-04:RLY2:MODE,         =concat(pv("BL04I-VA-PIRG-04:RLY2:SP.DESC")," Mode")
# % gui, PIRG04, readback, RLY2 Direction,        BL04I-VA-PIRG-04:RLY2:DIR,          =concat(pv("BL04I-VA-PIRG-04:RLY2:SP.DESC")," Dir")
# % gui, PIRG04, enum,     RLY1 Mode,             BL04I-VA-PIRG-04:RLY1:SETMODE,      =concat(pv("BL04I-VA-PIRG-04:RLY1:SP.DESC")," Mode")
# % gui, PIRG04, enum,     RLY1 Direction,        BL04I-VA-PIRG-04:RLY1:SETDIR,       =concat(pv("BL04I-VA-PIRG-04:RLY1:SP.DESC")," Dir")
# % gui, PIRG04, enum,     RLY2 Mode,             BL04I-VA-PIRG-04:RLY2:SETMODE,      =concat(pv("BL04I-VA-PIRG-04:RLY2:SP.DESC")," Mode")
# % gui, PIRG04, enum,     RLY2 Direction,        BL04I-VA-PIRG-04:RLY2:SETDIR,       =concat(pv("BL04I-VA-PIRG-04:RLY2:SP.DESC")," Dir")

# Status
#
#% archiver 10 Monitor
#% controldesk Pressure smon
#
record(mbbi, "BL04I-VA-PIRG-04:STA") {
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol status(5) ty_40_6 0")
  field(DESC, "Status")
  field(SCAN, "1 second")
  field(FLNK, "BL04I-VA-PIRG-04:PDIS")
  field(ZRST, "OK")
  field(ONST, "OK")
  field(TWST, "Above Range")
  field(THST, "At Atmosphere")
  field(FRST, "Low Emission")
  field(FVST, "Filament Off")
  field(SXST, "HV Off")
  field(SVST, "Startup Delay")
  field(EIST, "Below Range")
  field(NIST, "Controlled")
  field(TEST, "Protected State")
  field(ELST, "No Gauge")
  field(TVST, "Not Connected")
  field(TTST, "Wrong Gauge")
  field(FTST, "Bad Command")
  field(FFST, "Locked Out")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "MINOR")
  field(THSV, "MINOR")
  field(FRSV, "MAJOR")
  field(FVSV, "MAJOR")
  field(SXSV, "MAJOR")
  field(SVSV, "MINOR")
  field(EISV, "NO_ALARM")
  field(NISV, "MINOR")
  field(TESV, "MINOR")
  field(ELSV, "MAJOR")
  field(TVSV, "MAJOR")
  field(TTSV, "MAJOR")
  field(FTSV, "MAJOR")
  field(FFSV, "MAJOR")
}

#############################################################################
# Pressure
# 
# % archiver 1 Monitor
# % controldesk Pressure readback
record(ai, "BL04I-VA-PIRG-04:P") {
  field(DESC, "Pressure")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol pressure(5) ty_40_6 0")
  field(FLNK, "BL04I-VA-PIRG-04:PLOG")
  field(EGU, "mbar")
  field(PREC, "3")
  field(HOPR, "1000")
  field(LOPR, "0.001")
  field(SDIS, "BL04I-VA-PIRG-04:PDIS")
  field(DISS, "INVALID")
}

record(calcout, "BL04I-VA-PIRG-04:ADEL") {
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-PIRG-04:P.ADEL")
  field(INPA, "BL04I-VA-PIRG-04:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-PIRG-04:PLOG") {
  field(DESC, "log Pressure")
  field(EGU, "log")
  field(CALC, "LOG(A)")
  field(INPA, "BL04I-VA-PIRG-04:P MS")
  field(HOPR, "3")
  field(LOPR, "-3")
  field(ADEL, "0.025")
}


################################################################################
# Relay - Ion Pump Interlock
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-PIRG-04:RLY:SETSP") {
  field(DESC, "Ion Pump I/L")
  field(FLNK, "BL04I-VA-PIRG-04:RLY:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e2")
  field(LOPR, "2.7e-3")
  field(DRVH, "1.2e2")
  field(DRVL, "2.7e-3")
  field(DOL, "1.0e-2")
  field(SDIS, "BL04I-VA-PIRG-04:RLY:ILKSETSP:NOWRITE")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-PIRG-04:RLY:ENABLE") 
  {
  field(DESC, "Enable Relay Setpoint")
  field(FLNK, "BL04I-VA-PIRG-04:RLY:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  }

record(seq, "BL04I-VA-PIRG-04:RLY:SEQ") 
  {
  field(DESC, "Sequence Relay Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-PIRG-04:RLY:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-PIRG-04:RLY:DIS PP")
  field(DOL2, "BL04I-VA-PIRG-04:RLY:SETSP")
  field(LNK2, "BL04I-VA-PIRG-04:RLY:OUTSP PP")
  field(SDIS, "BL04I-VA-PIRG-04:RLY:ILKSETSP:NOWRITE")
  }

#
#% archiver 10 Monitor
#% controldesk Ion Pump Interlock readback
#
record(ai, "BL04I-VA-PIRG-04:RLY:SP") {
  field(DESC, "Ion Pump I/L")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(5,RLY,BL04I-VA-PIRG-04) ty_40_6 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e2")
  field(LOPR, "2.7e-3")
  field(HIHI, "1.0e3")
  field(LOLO, "2.6e-3")
  field(HIGH, "1.1e-2")
  field(LOW, "9.0e-3")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

record(ao, "BL04I-VA-PIRG-04:RLY:OUTSP") 
  {
  field(DESC, "Output Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol setsp(5,RLY,BL04I-VA-PIRG-04) ty_40_6 0")
  field(SDIS, "BL04I-VA-PIRG-04:RLY:ILKSETSP:NOWRITE")
  }

record(bo, "BL04I-VA-PIRG-04:RLY:DIS") {
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(5,RLY) ty_40_6 0")
}

record(calc, "BL04I-VA-PIRG-04:PDIS") {
  field(PHAS, "1")
  field(CALC, "(A>1)?1:0")
  field(INPA, "BL04I-VA-PIRG-04:STA")
  field(FLNK, "BL04I-VA-PIRG-04:P")
}

#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-PIRG-04:CTL:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume an empty INP and do nothing.
#
# NB: These two records are identical and could have been instantiated via
#     alias. The names are for compatibility with the macros in the EDM screens
#     in which they are referenced.
#
record(bi, "BL04I-VA-PIRG-04:CTL:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-04:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-PIRG-04:RLY:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-04:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise just once, records that used to use PINI
# This is to ensure that the autoSR PV referred by ilk_write_access_pv
# is correctly established before any other record processing, to potentially
# avoid overwriting setpoints at IOC startup.
# Essentially, must avoid using PINI for A/S dependent records, otherwise they
# are initialised with the hard-coded DOL value.
#
record(bo, "BL04I-VA-PIRG-04:CTL:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-PIRG-04:CTL:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-PIRG-04:CTL:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-PIRG-04:RLY:ENABLE")
    field(LNK2, "BL04I-VA-PIRG-04:RLY:SETSP")
    field(LNK3, "BL04I-VA-PIRG-04:CTL:INITSETSPSDIS")
    field(SELM, "All")
}

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-PIRG-04:ERROR")
    {
    field(DESC, "Last error message")
    field(INP, "")
    field(PINI, "YES")
    }

#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937aPirg.db
#% macro, __doc__, Template database for a pirani guage connected to
# one channel of an MKS937A Multi-Sensor System
# A note on the optional macros: they default to an appropriate hard-coded
# value if no value is passed for expansion.
# They are provided to allow the default set points to be changed.
# Once the set point needs to be changed it may be necessary to alter 
# various other fields defining the range of allowed values.
# For the majority of applications the defaults should be used.  The levels
# should only be changed at the request of the vacuum group for non-standard
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, channel, MKS 937A channel number (1-4)
#
# optional substitutions:
#% macro, name,        Object name, and gui association name
#% macro, rlysp_level, The desired relay setpoint value for the PIRG device.
#% macro, rlysp_drvh,  The DRVH field on control setpoint records
#                      (limits max value of relay setpoint)
#% macro, rlysp_drvl,  The DRVL field on relay setpoint records.
#                      (limits min value of relay setpoint)
#% macro, rlysp_hopr,  The HOPR field on relay setpoint records
#                      (high operator value - helps display set correct range).
#% macro, rlysp_lopr,  The LOPR field on relay setpoint records
#                      (low operator value - helps display set correct range).
#% macro, rlysp_hihi,  The HIHI alarm field on the relay setpoint record.
#% macro, rlysp_lolo,  The LOLO alarm field on the relay setpoint record.
#% macro, rlysp_high,  The HIGH alarm field on the relay setpoint record.
#% macro, rlysp_low ,  The LOW alarm field on the relay setpoint record.
#% macro, rlysp_desc,  The DESC field on the relay setpoint records
#		               (appears as a label on the Pirg EDM screen).
#% macro, ilk_write_access_pv, bi record to allow (0) of inhibit (1) gauge interlock setpoint overwrite. Default is local record forcing 'Allow'.
################################################################################

# This associates an edm screen with the template
# % gui, PIRG05, edm, mks937aPirg.edl, device=BL04I-VA-PIRG-05

# This associates BOY screens with the template
# % gui, PIRG05, boydetail, mks937aApp_opi/pirg_detail.opi, device=BL04I-VA-PIRG-05, desc=BL04I-VA-PIRG-05, name=PIRG05
# % gui, PIRG05, boyembed, mks937aApp_opi/pirg_embed_box.opi, device=BL04I-VA-PIRG-05, desc=BL04I-VA-PIRG-05, name=PIRG05
# % gui, PIRG05, boyembed, mks937aApp_opi/pirg_embed.opi, device=BL04I-VA-PIRG-05, desc=BL04I-VA-PIRG-05, name=PIRG05

# These define what PVs a valve detail screen should contain
# % gui, PIRG05, readback, Pressure,              BL04I-VA-PIRG-05:P
# % gui, PIRG05, readback, Status,                BL04I-VA-PIRG-05:STA
# % gui, PIRG05, readback, Gauge Setpoint Write,  BL04I-VA-PIRG-05:ILKSETSP:NOWRITE
# % gui, PIRG05, readback, CTL Setpoint Summary,  BL04I-VA-PIRG-05:CTL:SP,            =pv("BL04I-VA-PIRG-05:CTL:SP.DESC")
# % gui, PIRG05, readback, RLY1 Setpoint Summary, BL04I-VA-PIRG-05:RLY1:SP,           =pv("BL04I-VA-PIRG-05:RLY1:SP.DESC")
# % gui, PIRG05, readback, RLY2 Setpoint Summary, BL04I-VA-PIRG-05:RLY2:SP,           =pv("BL04I-VA-PIRG-05:RLY2:SP.DESC")
# % gui, PIRG05, enum,     PirgFilament,          BL04I-VA-PIRG-05:ENABLE
# % gui, PIRG05, readback, CTL Setpoint On,       BL04I-VA-PIRG-05:CTL:SP,            =pv("BL04I-VA-PIRG-05:CTL:SP.DESC")
# % gui, PIRG05, readback, CTL Setpoint Off,      BL04I-VA-PIRG-05:CTL:HYST,          =pv("BL04I-VA-PIRG-05:CTL:SETSPOFF.DESC")
# % gui, PIRG05, readback, RLY1 Setpoint On,      BL04I-VA-PIRG-05:RLY1:SP,           =pv("BL04I-VA-PIRG-05:RLY1:SP.DESC")
# % gui, PIRG05, readback, RLY1 Setpoint Off,     BL04I-VA-PIRG-05:RLY1:SPOFF,        =pv("BL04I-VA-PIRG-05:RLY1:SPOFF.DESC")
# % gui, PIRG05, readback, RLY2 Setpoint On,      BL04I-VA-PIRG-05:RLY2:SP,           =pv("BL04I-VA-PIRG-05:RLY2:SP.DESC")
# % gui, PIRG05, readback, RLY2 Setpoint Off,     BL04I-VA-PIRG-05:RLY2:SPOFF,        =pv("BL04I-VA-PIRG-05:RLY2:SPOFF.DESC")
# % gui, PIRG05, demand,   CTL Setpoint On,       BL04I-VA-PIRG-05:CTL:SETSP,         =pv("BL04I-VA-PIRG-05:SP.DESC")
# % gui, PIRG05, demand,   CTL Setpoint Off,      BL04I-VA-PIRG-05:CTL:SETSPOFF,      =pv("BL04I-VA-PIRG-05:SPOFF.DESC")
# % gui, PIRG05, demand,   RLY1 Setpoint On,      BL04I-VA-PIRG-05:RLY1:SETSP,        =pv("BL04I-VA-PIRG-05:RLY1:SP.DESC")
# % gui, PIRG05, demand,   RLY1 Setpoint Off,     BL04I-VA-PIRG-05:RLY1:SETSPOFF,     =pv("BL04I-VA-PIRG-05:RLY1:SPOFF.DESC")
# % gui, PIRG05, demand,   RLY2 Setpoint On,      BL04I-VA-PIRG-05:RLY2:SETSP,        =pv("BL04I-VA-PIRG-05:RLY2:SP.DESC")
# % gui, PIRG05, demand,   RLY2 Setpoint Off,     BL04I-VA-PIRG-05:RLY2:SETSPOFF,     =pv("BL04I-VA-PIRG-05:RLY2:SPOFF.DESC")
# % gui, PIRG05, readback, RLY1 Mode,             BL04I-VA-PIRG-05:RLY1:MODE,         =concat(pv("BL04I-VA-PIRG-05:RLY1:SP.DESC")," Mode")
# % gui, PIRG05, readback, RLY1 Direction,        BL04I-VA-PIRG-05:RLY1:DIR,          =concat(pv("BL04I-VA-PIRG-05:RLY1:SP.DESC")," Dir")
# % gui, PIRG05, readback, RLY2 Mode,             BL04I-VA-PIRG-05:RLY2:MODE,         =concat(pv("BL04I-VA-PIRG-05:RLY2:SP.DESC")," Mode")
# % gui, PIRG05, readback, RLY2 Direction,        BL04I-VA-PIRG-05:RLY2:DIR,          =concat(pv("BL04I-VA-PIRG-05:RLY2:SP.DESC")," Dir")
# % gui, PIRG05, enum,     RLY1 Mode,             BL04I-VA-PIRG-05:RLY1:SETMODE,      =concat(pv("BL04I-VA-PIRG-05:RLY1:SP.DESC")," Mode")
# % gui, PIRG05, enum,     RLY1 Direction,        BL04I-VA-PIRG-05:RLY1:SETDIR,       =concat(pv("BL04I-VA-PIRG-05:RLY1:SP.DESC")," Dir")
# % gui, PIRG05, enum,     RLY2 Mode,             BL04I-VA-PIRG-05:RLY2:SETMODE,      =concat(pv("BL04I-VA-PIRG-05:RLY2:SP.DESC")," Mode")
# % gui, PIRG05, enum,     RLY2 Direction,        BL04I-VA-PIRG-05:RLY2:SETDIR,       =concat(pv("BL04I-VA-PIRG-05:RLY2:SP.DESC")," Dir")

# Status
#
#% archiver 10 Monitor
#% controldesk Pressure smon
#
record(mbbi, "BL04I-VA-PIRG-05:STA") {
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol status(4) ty_40_7 0")
  field(DESC, "Status")
  field(SCAN, "1 second")
  field(FLNK, "BL04I-VA-PIRG-05:PDIS")
  field(ZRST, "OK")
  field(ONST, "OK")
  field(TWST, "Above Range")
  field(THST, "At Atmosphere")
  field(FRST, "Low Emission")
  field(FVST, "Filament Off")
  field(SXST, "HV Off")
  field(SVST, "Startup Delay")
  field(EIST, "Below Range")
  field(NIST, "Controlled")
  field(TEST, "Protected State")
  field(ELST, "No Gauge")
  field(TVST, "Not Connected")
  field(TTST, "Wrong Gauge")
  field(FTST, "Bad Command")
  field(FFST, "Locked Out")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "MINOR")
  field(THSV, "MINOR")
  field(FRSV, "MAJOR")
  field(FVSV, "MAJOR")
  field(SXSV, "MAJOR")
  field(SVSV, "MINOR")
  field(EISV, "NO_ALARM")
  field(NISV, "MINOR")
  field(TESV, "MINOR")
  field(ELSV, "MAJOR")
  field(TVSV, "MAJOR")
  field(TTSV, "MAJOR")
  field(FTSV, "MAJOR")
  field(FFSV, "MAJOR")
}

#############################################################################
# Pressure
# 
# % archiver 1 Monitor
# % controldesk Pressure readback
record(ai, "BL04I-VA-PIRG-05:P") {
  field(DESC, "Pressure")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol pressure(4) ty_40_7 0")
  field(FLNK, "BL04I-VA-PIRG-05:PLOG")
  field(EGU, "mbar")
  field(PREC, "3")
  field(HOPR, "1000")
  field(LOPR, "0.001")
  field(SDIS, "BL04I-VA-PIRG-05:PDIS")
  field(DISS, "INVALID")
}

record(calcout, "BL04I-VA-PIRG-05:ADEL") {
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-PIRG-05:P.ADEL")
  field(INPA, "BL04I-VA-PIRG-05:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-PIRG-05:PLOG") {
  field(DESC, "log Pressure")
  field(EGU, "log")
  field(CALC, "LOG(A)")
  field(INPA, "BL04I-VA-PIRG-05:P MS")
  field(HOPR, "3")
  field(LOPR, "-3")
  field(ADEL, "0.025")
}


################################################################################
# Relay - Ion Pump Interlock
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-PIRG-05:RLY:SETSP") {
  field(DESC, "Ion Pump I/L")
  field(FLNK, "BL04I-VA-PIRG-05:RLY:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e2")
  field(LOPR, "2.7e-3")
  field(DRVH, "1.2e2")
  field(DRVL, "2.7e-3")
  field(DOL, "1.0e-2")
  field(SDIS, "BL04I-VA-PIRG-05:RLY:ILKSETSP:NOWRITE")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-PIRG-05:RLY:ENABLE") 
  {
  field(DESC, "Enable Relay Setpoint")
  field(FLNK, "BL04I-VA-PIRG-05:RLY:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  }

record(seq, "BL04I-VA-PIRG-05:RLY:SEQ") 
  {
  field(DESC, "Sequence Relay Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-PIRG-05:RLY:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-PIRG-05:RLY:DIS PP")
  field(DOL2, "BL04I-VA-PIRG-05:RLY:SETSP")
  field(LNK2, "BL04I-VA-PIRG-05:RLY:OUTSP PP")
  field(SDIS, "BL04I-VA-PIRG-05:RLY:ILKSETSP:NOWRITE")
  }

#
#% archiver 10 Monitor
#% controldesk Ion Pump Interlock readback
#
record(ai, "BL04I-VA-PIRG-05:RLY:SP") {
  field(DESC, "Ion Pump I/L")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(4,RLY,BL04I-VA-PIRG-05) ty_40_7 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e2")
  field(LOPR, "2.7e-3")
  field(HIHI, "1.0e3")
  field(LOLO, "2.6e-3")
  field(HIGH, "1.1e-2")
  field(LOW, "9.0e-3")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

record(ao, "BL04I-VA-PIRG-05:RLY:OUTSP") 
  {
  field(DESC, "Output Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol setsp(4,RLY,BL04I-VA-PIRG-05) ty_40_7 0")
  field(SDIS, "BL04I-VA-PIRG-05:RLY:ILKSETSP:NOWRITE")
  }

record(bo, "BL04I-VA-PIRG-05:RLY:DIS") {
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(4,RLY) ty_40_7 0")
}

record(calc, "BL04I-VA-PIRG-05:PDIS") {
  field(PHAS, "1")
  field(CALC, "(A>1)?1:0")
  field(INPA, "BL04I-VA-PIRG-05:STA")
  field(FLNK, "BL04I-VA-PIRG-05:P")
}

#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-PIRG-05:CTL:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume an empty INP and do nothing.
#
# NB: These two records are identical and could have been instantiated via
#     alias. The names are for compatibility with the macros in the EDM screens
#     in which they are referenced.
#
record(bi, "BL04I-VA-PIRG-05:CTL:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-05:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-PIRG-05:RLY:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-05:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise just once, records that used to use PINI
# This is to ensure that the autoSR PV referred by ilk_write_access_pv
# is correctly established before any other record processing, to potentially
# avoid overwriting setpoints at IOC startup.
# Essentially, must avoid using PINI for A/S dependent records, otherwise they
# are initialised with the hard-coded DOL value.
#
record(bo, "BL04I-VA-PIRG-05:CTL:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-PIRG-05:CTL:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-PIRG-05:CTL:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-PIRG-05:RLY:ENABLE")
    field(LNK2, "BL04I-VA-PIRG-05:RLY:SETSP")
    field(LNK3, "BL04I-VA-PIRG-05:CTL:INITSETSPSDIS")
    field(SELM, "All")
}

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-PIRG-05:ERROR")
    {
    field(DESC, "Last error message")
    field(INP, "")
    field(PINI, "YES")
    }

#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937aPirg.db
#% macro, __doc__, Template database for a pirani guage connected to
# one channel of an MKS937A Multi-Sensor System
# A note on the optional macros: they default to an appropriate hard-coded
# value if no value is passed for expansion.
# They are provided to allow the default set points to be changed.
# Once the set point needs to be changed it may be necessary to alter 
# various other fields defining the range of allowed values.
# For the majority of applications the defaults should be used.  The levels
# should only be changed at the request of the vacuum group for non-standard
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, channel, MKS 937A channel number (1-4)
#
# optional substitutions:
#% macro, name,        Object name, and gui association name
#% macro, rlysp_level, The desired relay setpoint value for the PIRG device.
#% macro, rlysp_drvh,  The DRVH field on control setpoint records
#                      (limits max value of relay setpoint)
#% macro, rlysp_drvl,  The DRVL field on relay setpoint records.
#                      (limits min value of relay setpoint)
#% macro, rlysp_hopr,  The HOPR field on relay setpoint records
#                      (high operator value - helps display set correct range).
#% macro, rlysp_lopr,  The LOPR field on relay setpoint records
#                      (low operator value - helps display set correct range).
#% macro, rlysp_hihi,  The HIHI alarm field on the relay setpoint record.
#% macro, rlysp_lolo,  The LOLO alarm field on the relay setpoint record.
#% macro, rlysp_high,  The HIGH alarm field on the relay setpoint record.
#% macro, rlysp_low ,  The LOW alarm field on the relay setpoint record.
#% macro, rlysp_desc,  The DESC field on the relay setpoint records
#		               (appears as a label on the Pirg EDM screen).
#% macro, ilk_write_access_pv, bi record to allow (0) of inhibit (1) gauge interlock setpoint overwrite. Default is local record forcing 'Allow'.
################################################################################

# This associates an edm screen with the template
# % gui, PIRG06, edm, mks937aPirg.edl, device=BL04I-VA-PIRG-06

# This associates BOY screens with the template
# % gui, PIRG06, boydetail, mks937aApp_opi/pirg_detail.opi, device=BL04I-VA-PIRG-06, desc=BL04I-VA-PIRG-06, name=PIRG06
# % gui, PIRG06, boyembed, mks937aApp_opi/pirg_embed_box.opi, device=BL04I-VA-PIRG-06, desc=BL04I-VA-PIRG-06, name=PIRG06
# % gui, PIRG06, boyembed, mks937aApp_opi/pirg_embed.opi, device=BL04I-VA-PIRG-06, desc=BL04I-VA-PIRG-06, name=PIRG06

# These define what PVs a valve detail screen should contain
# % gui, PIRG06, readback, Pressure,              BL04I-VA-PIRG-06:P
# % gui, PIRG06, readback, Status,                BL04I-VA-PIRG-06:STA
# % gui, PIRG06, readback, Gauge Setpoint Write,  BL04I-VA-PIRG-06:ILKSETSP:NOWRITE
# % gui, PIRG06, readback, CTL Setpoint Summary,  BL04I-VA-PIRG-06:CTL:SP,            =pv("BL04I-VA-PIRG-06:CTL:SP.DESC")
# % gui, PIRG06, readback, RLY1 Setpoint Summary, BL04I-VA-PIRG-06:RLY1:SP,           =pv("BL04I-VA-PIRG-06:RLY1:SP.DESC")
# % gui, PIRG06, readback, RLY2 Setpoint Summary, BL04I-VA-PIRG-06:RLY2:SP,           =pv("BL04I-VA-PIRG-06:RLY2:SP.DESC")
# % gui, PIRG06, enum,     PirgFilament,          BL04I-VA-PIRG-06:ENABLE
# % gui, PIRG06, readback, CTL Setpoint On,       BL04I-VA-PIRG-06:CTL:SP,            =pv("BL04I-VA-PIRG-06:CTL:SP.DESC")
# % gui, PIRG06, readback, CTL Setpoint Off,      BL04I-VA-PIRG-06:CTL:HYST,          =pv("BL04I-VA-PIRG-06:CTL:SETSPOFF.DESC")
# % gui, PIRG06, readback, RLY1 Setpoint On,      BL04I-VA-PIRG-06:RLY1:SP,           =pv("BL04I-VA-PIRG-06:RLY1:SP.DESC")
# % gui, PIRG06, readback, RLY1 Setpoint Off,     BL04I-VA-PIRG-06:RLY1:SPOFF,        =pv("BL04I-VA-PIRG-06:RLY1:SPOFF.DESC")
# % gui, PIRG06, readback, RLY2 Setpoint On,      BL04I-VA-PIRG-06:RLY2:SP,           =pv("BL04I-VA-PIRG-06:RLY2:SP.DESC")
# % gui, PIRG06, readback, RLY2 Setpoint Off,     BL04I-VA-PIRG-06:RLY2:SPOFF,        =pv("BL04I-VA-PIRG-06:RLY2:SPOFF.DESC")
# % gui, PIRG06, demand,   CTL Setpoint On,       BL04I-VA-PIRG-06:CTL:SETSP,         =pv("BL04I-VA-PIRG-06:SP.DESC")
# % gui, PIRG06, demand,   CTL Setpoint Off,      BL04I-VA-PIRG-06:CTL:SETSPOFF,      =pv("BL04I-VA-PIRG-06:SPOFF.DESC")
# % gui, PIRG06, demand,   RLY1 Setpoint On,      BL04I-VA-PIRG-06:RLY1:SETSP,        =pv("BL04I-VA-PIRG-06:RLY1:SP.DESC")
# % gui, PIRG06, demand,   RLY1 Setpoint Off,     BL04I-VA-PIRG-06:RLY1:SETSPOFF,     =pv("BL04I-VA-PIRG-06:RLY1:SPOFF.DESC")
# % gui, PIRG06, demand,   RLY2 Setpoint On,      BL04I-VA-PIRG-06:RLY2:SETSP,        =pv("BL04I-VA-PIRG-06:RLY2:SP.DESC")
# % gui, PIRG06, demand,   RLY2 Setpoint Off,     BL04I-VA-PIRG-06:RLY2:SETSPOFF,     =pv("BL04I-VA-PIRG-06:RLY2:SPOFF.DESC")
# % gui, PIRG06, readback, RLY1 Mode,             BL04I-VA-PIRG-06:RLY1:MODE,         =concat(pv("BL04I-VA-PIRG-06:RLY1:SP.DESC")," Mode")
# % gui, PIRG06, readback, RLY1 Direction,        BL04I-VA-PIRG-06:RLY1:DIR,          =concat(pv("BL04I-VA-PIRG-06:RLY1:SP.DESC")," Dir")
# % gui, PIRG06, readback, RLY2 Mode,             BL04I-VA-PIRG-06:RLY2:MODE,         =concat(pv("BL04I-VA-PIRG-06:RLY2:SP.DESC")," Mode")
# % gui, PIRG06, readback, RLY2 Direction,        BL04I-VA-PIRG-06:RLY2:DIR,          =concat(pv("BL04I-VA-PIRG-06:RLY2:SP.DESC")," Dir")
# % gui, PIRG06, enum,     RLY1 Mode,             BL04I-VA-PIRG-06:RLY1:SETMODE,      =concat(pv("BL04I-VA-PIRG-06:RLY1:SP.DESC")," Mode")
# % gui, PIRG06, enum,     RLY1 Direction,        BL04I-VA-PIRG-06:RLY1:SETDIR,       =concat(pv("BL04I-VA-PIRG-06:RLY1:SP.DESC")," Dir")
# % gui, PIRG06, enum,     RLY2 Mode,             BL04I-VA-PIRG-06:RLY2:SETMODE,      =concat(pv("BL04I-VA-PIRG-06:RLY2:SP.DESC")," Mode")
# % gui, PIRG06, enum,     RLY2 Direction,        BL04I-VA-PIRG-06:RLY2:SETDIR,       =concat(pv("BL04I-VA-PIRG-06:RLY2:SP.DESC")," Dir")

# Status
#
#% archiver 10 Monitor
#% controldesk Pressure smon
#
record(mbbi, "BL04I-VA-PIRG-06:STA") {
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol status(5) ty_40_7 0")
  field(DESC, "Status")
  field(SCAN, "1 second")
  field(FLNK, "BL04I-VA-PIRG-06:PDIS")
  field(ZRST, "OK")
  field(ONST, "OK")
  field(TWST, "Above Range")
  field(THST, "At Atmosphere")
  field(FRST, "Low Emission")
  field(FVST, "Filament Off")
  field(SXST, "HV Off")
  field(SVST, "Startup Delay")
  field(EIST, "Below Range")
  field(NIST, "Controlled")
  field(TEST, "Protected State")
  field(ELST, "No Gauge")
  field(TVST, "Not Connected")
  field(TTST, "Wrong Gauge")
  field(FTST, "Bad Command")
  field(FFST, "Locked Out")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "MINOR")
  field(THSV, "MINOR")
  field(FRSV, "MAJOR")
  field(FVSV, "MAJOR")
  field(SXSV, "MAJOR")
  field(SVSV, "MINOR")
  field(EISV, "NO_ALARM")
  field(NISV, "MINOR")
  field(TESV, "MINOR")
  field(ELSV, "MAJOR")
  field(TVSV, "MAJOR")
  field(TTSV, "MAJOR")
  field(FTSV, "MAJOR")
  field(FFSV, "MAJOR")
}

#############################################################################
# Pressure
# 
# % archiver 1 Monitor
# % controldesk Pressure readback
record(ai, "BL04I-VA-PIRG-06:P") {
  field(DESC, "Pressure")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol pressure(5) ty_40_7 0")
  field(FLNK, "BL04I-VA-PIRG-06:PLOG")
  field(EGU, "mbar")
  field(PREC, "3")
  field(HOPR, "1000")
  field(LOPR, "0.001")
  field(SDIS, "BL04I-VA-PIRG-06:PDIS")
  field(DISS, "INVALID")
}

record(calcout, "BL04I-VA-PIRG-06:ADEL") {
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-PIRG-06:P.ADEL")
  field(INPA, "BL04I-VA-PIRG-06:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-PIRG-06:PLOG") {
  field(DESC, "log Pressure")
  field(EGU, "log")
  field(CALC, "LOG(A)")
  field(INPA, "BL04I-VA-PIRG-06:P MS")
  field(HOPR, "3")
  field(LOPR, "-3")
  field(ADEL, "0.025")
}


################################################################################
# Relay - Ion Pump Interlock
#
#% archiver 10 Monitor
#
record(ao, "BL04I-VA-PIRG-06:RLY:SETSP") {
  field(DESC, "Ion Pump I/L")
  field(FLNK, "BL04I-VA-PIRG-06:RLY:SEQ")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e2")
  field(LOPR, "2.7e-3")
  field(DRVH, "1.2e2")
  field(DRVL, "2.7e-3")
  field(DOL, "1.0e-2")
  field(SDIS, "BL04I-VA-PIRG-06:RLY:ILKSETSP:NOWRITE")
}

#
#% archiver 10 Monitor
#
record(mbbo, "BL04I-VA-PIRG-06:RLY:ENABLE") 
  {
  field(DESC, "Enable Relay Setpoint")
  field(FLNK, "BL04I-VA-PIRG-06:RLY:SEQ")
  field(ZRST, "Force On I/L")
  field(ONST, "I/L Operating")
  field(ZRVL, "1")
  field(ONVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  }

record(seq, "BL04I-VA-PIRG-06:RLY:SEQ") 
  {
  field(DESC, "Sequence Relay Setpoint")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-PIRG-06:RLY:ENABLE.RVAL")
  field(DOL1, "0")
  field(LNK1, "BL04I-VA-PIRG-06:RLY:DIS PP")
  field(DOL2, "BL04I-VA-PIRG-06:RLY:SETSP")
  field(LNK2, "BL04I-VA-PIRG-06:RLY:OUTSP PP")
  field(SDIS, "BL04I-VA-PIRG-06:RLY:ILKSETSP:NOWRITE")
  }

#
#% archiver 10 Monitor
#% controldesk Ion Pump Interlock readback
#
record(ai, "BL04I-VA-PIRG-06:RLY:SP") {
  field(DESC, "Ion Pump I/L")
  field(DTYP, "stream")
  field(INP, "@mks937a.protocol getsp(5,RLY,BL04I-VA-PIRG-06) ty_40_7 0")
  field(SCAN, "1 second")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.2e2")
  field(LOPR, "2.7e-3")
  field(HIHI, "1.0e3")
  field(LOLO, "2.6e-3")
  field(HIGH, "1.1e-2")
  field(LOW, "9.0e-3")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

record(ao, "BL04I-VA-PIRG-06:RLY:OUTSP") 
  {
  field(DESC, "Output Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol setsp(5,RLY,BL04I-VA-PIRG-06) ty_40_7 0")
  field(SDIS, "BL04I-VA-PIRG-06:RLY:ILKSETSP:NOWRITE")
  }

record(bo, "BL04I-VA-PIRG-06:RLY:DIS") {
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937a.protocol dissp(5,RLY) ty_40_7 0")
}

record(calc, "BL04I-VA-PIRG-06:PDIS") {
  field(PHAS, "1")
  field(CALC, "(A>1)?1:0")
  field(INPA, "BL04I-VA-PIRG-06:STA")
  field(FLNK, "BL04I-VA-PIRG-06:P")
}

#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-PIRG-06:CTL:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume an empty INP and do nothing.
#
# NB: These two records are identical and could have been instantiated via
#     alias. The names are for compatibility with the macros in the EDM screens
#     in which they are referenced.
#
record(bi, "BL04I-VA-PIRG-06:CTL:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-06:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
record(bi, "BL04I-VA-PIRG-06:RLY:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-06:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise just once, records that used to use PINI
# This is to ensure that the autoSR PV referred by ilk_write_access_pv
# is correctly established before any other record processing, to potentially
# avoid overwriting setpoints at IOC startup.
# Essentially, must avoid using PINI for A/S dependent records, otherwise they
# are initialised with the hard-coded DOL value.
#
record(bo, "BL04I-VA-PIRG-06:CTL:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-PIRG-06:CTL:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-PIRG-06:CTL:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-PIRG-06:RLY:ENABLE")
    field(LNK2, "BL04I-VA-PIRG-06:RLY:SETSP")
    field(LNK3, "BL04I-VA-PIRG-06:CTL:INITSETSPSDIS")
    field(SELM, "All")
}

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-PIRG-06:ERROR")
    {
    field(DESC, "Last error message")
    field(INP, "")
    field(PINI, "YES")
    }

# mks937aPirgGroup.template
#% macro, __doc__, Template database for a group of up to 8 Pirani Gauges
# Pete Owens - 9/5/05
#
# substitutions:
#% macro, device, device name
#% macro, pirg1, pirg 1 device name
#% macro, pirg2, pirg 2 device name
#% macro, pirg3, pirg 3 device name
#% macro, pirg4, pirg 4 device name
#% macro, pirg5, pirg 5 device name
#% macro, pirg6, pirg 6 device name
#% macro, pirg7, pirg 7 device name
#% macro, pirg8, pirg 8 device name
################################################################################
# Status
#
record(mbbi, "BL04I-VA-GPIRG-98:STA")
{
    field(DESC, "Status")
    field(INP,  "BL04I-VA-GPIRG-98:SELSTA PP MS")
    field(SCAN, "1 second")
    field(ZRST, "OK")
    field(ONST, "OK")
    field(TWST, "Above Range")
    field(THST, "At Atmosphere")
    field(FRST, "Low Emission")
    field(FVST, "Filament Off")
    field(SXST, "HV Off")
    field(SVST, "Startup Delay")
    field(EIST, "Below Range")
    field(NIST, "Controlled")
    field(TEST, "Protected State")
    field(ELST, "No Gauge")
    field(TVST, "Not Connected")
    field(TTST, "Wrong Gauge")
    field(FTST, "Bad Command")
    field(FFST, "Locked Out")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MAJOR")
    field(FVSV, "MAJOR")
    field(SXSV, "MAJOR")
    field(SVSV, "MINOR")
    field(EISV, "NO_ALARM")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MAJOR")
    field(TVSV, "MAJOR")
    field(TTSV, "MAJOR")
    field(FTSV, "MAJOR")
    field(FFSV, "MAJOR")
}
record(sel, "BL04I-VA-GPIRG-98:SELSTA") 
{
    field(DESC, "Select Status")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GPIRG-01:STA")
    field(INPB, "BL04I-VA-PIRG-03:STA")
    field(INPC, "BL04I-VA-PIRG-04:STA")
    field(INPD, "BL04I-VA-PIRG-05:STA")
    field(INPE, "BL04I-VA-PIRG-05:STA")
    field(INPF, "BL04I-VA-PIRG-05:STA")
    field(INPG, "BL04I-VA-PIRG-05:STA")
    field(INPH, "BL04I-VA-PIRG-05:STA")
}
################################################################################
# Pressure
#
record(sel, "BL04I-VA-GPIRG-98:P")
{
    field(DESC, "Pressure")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GPIRG-01:P MS")
    field(INPB, "BL04I-VA-PIRG-03:P MS")
    field(INPC, "BL04I-VA-PIRG-04:P MS")
    field(INPD, "BL04I-VA-PIRG-05:P MS")
    field(INPE, "BL04I-VA-PIRG-05:P MS")
    field(INPF, "BL04I-VA-PIRG-05:P MS")
    field(INPG, "BL04I-VA-PIRG-05:P MS")
    field(INPH, "BL04I-VA-PIRG-05:P MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1000")
    field(LOPR, "0.001")
}
record(calc, "BL04I-VA-GPIRG-98:PLOG")
{
    field(DESC, "log Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-GPIRG-98:P PP MS")
    field(SCAN, "1 second")
    field(HOPR, "3")
    field(LOPR, "-3")
}
################################################################################
# Control - IMG Enable (link from IMG to PIRG)
#
record(ao, "BL04I-VA-GPIRG-98:CTL:SETSP")
{
    field(DESC, "IMG Enable")
    field(FLNK, "BL04I-VA-GPIRG-98:CTL:SEQSP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
    field(DRVH, "9.5e-1")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(seq, "BL04I-VA-GPIRG-98:CTL:SEQSP")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GPIRG-98:CTL:SETSP")
    field(DOL2, "BL04I-VA-GPIRG-98:CTL:SETSP")
    field(DOL3, "BL04I-VA-GPIRG-98:CTL:SETSP")
    field(DOL4, "BL04I-VA-GPIRG-98:CTL:SETSP")
    field(DOL5, "BL04I-VA-GPIRG-98:CTL:SETSP")
    field(DOL6, "BL04I-VA-GPIRG-98:CTL:SETSP")
    field(DOL7, "BL04I-VA-GPIRG-98:CTL:SETSP")
    field(DOL8, "BL04I-VA-GPIRG-98:CTL:SETSP")
    field(LNK1, "BL04I-VA-GPIRG-01:CTL:SETSP CA")
    field(LNK2, "BL04I-VA-PIRG-03:CTL:SETSP CA")
    field(LNK3, "BL04I-VA-PIRG-04:CTL:SETSP CA")
    field(LNK4, "BL04I-VA-PIRG-05:CTL:SETSP CA")
    field(LNK5, "BL04I-VA-PIRG-05:CTL:SETSP CA")
    field(LNK6, "BL04I-VA-PIRG-05:CTL:SETSP CA")
    field(LNK7, "BL04I-VA-PIRG-05:CTL:SETSP CA")
    field(LNK8, "BL04I-VA-PIRG-05:CTL:SETSP CA")
}
record(mbbo, "BL04I-VA-GPIRG-98:CTL:ENABLE")
{
    field(DESC, "Enable Control Setpoint")
    field(FLNK, "BL04I-VA-GPIRG-98:CTL:SEQENA")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GPIRG-98:CTL:SEQENA")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GPIRG-98:CTL:ENABLE")
    field(DOL2, "BL04I-VA-GPIRG-98:CTL:ENABLE")
    field(DOL3, "BL04I-VA-GPIRG-98:CTL:ENABLE")
    field(DOL4, "BL04I-VA-GPIRG-98:CTL:ENABLE")
    field(DOL5, "BL04I-VA-GPIRG-98:CTL:ENABLE")
    field(DOL6, "BL04I-VA-GPIRG-98:CTL:ENABLE")
    field(DOL7, "BL04I-VA-GPIRG-98:CTL:ENABLE")
    field(DOL8, "BL04I-VA-GPIRG-98:CTL:ENABLE")
    field(LNK1, "BL04I-VA-GPIRG-01:CTL:ENABLE CA")
    field(LNK2, "BL04I-VA-PIRG-03:CTL:ENABLE CA")
    field(LNK3, "BL04I-VA-PIRG-04:CTL:ENABLE CA")
    field(LNK4, "BL04I-VA-PIRG-05:CTL:ENABLE CA")
    field(LNK5, "BL04I-VA-PIRG-05:CTL:ENABLE CA")
    field(LNK6, "BL04I-VA-PIRG-05:CTL:ENABLE CA")
    field(LNK7, "BL04I-VA-PIRG-05:CTL:ENABLE CA")
    field(LNK8, "BL04I-VA-PIRG-05:CTL:ENABLE CA")
}
record(sel, "BL04I-VA-GPIRG-98:CTL:SP")
{
    field(DESC, "IMG Enable")
    field(SCAN, "1 second")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GPIRG-01:CTL:SP MS")
    field(INPB, "BL04I-VA-PIRG-03:CTL:SP MS")
    field(INPC, "BL04I-VA-PIRG-04:CTL:SP MS")
    field(INPD, "BL04I-VA-PIRG-05:CTL:SP MS")
    field(INPE, "BL04I-VA-PIRG-05:CTL:SP MS")
    field(INPF, "BL04I-VA-PIRG-05:CTL:SP MS")
    field(INPG, "BL04I-VA-PIRG-05:CTL:SP MS")
    field(INPH, "BL04I-VA-PIRG-05:CTL:SP MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
}
################################################################################
# Relay - Ion Pump Interlock
#
record(ao, "BL04I-VA-GPIRG-98:RLY:SETSP")
{
    field(DESC, "Ion Pump I/L")
    field(FLNK, "BL04I-VA-GPIRG-98:RLY:SEQSP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
    field(DRVH, "1.2e2")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(seq, "BL04I-VA-GPIRG-98:RLY:SEQSP")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GPIRG-98:RLY:SETSP")
    field(DOL2, "BL04I-VA-GPIRG-98:RLY:SETSP")
    field(DOL3, "BL04I-VA-GPIRG-98:RLY:SETSP")
    field(DOL4, "BL04I-VA-GPIRG-98:RLY:SETSP")
    field(DOL5, "BL04I-VA-GPIRG-98:RLY:SETSP")
    field(DOL6, "BL04I-VA-GPIRG-98:RLY:SETSP")
    field(DOL7, "BL04I-VA-GPIRG-98:RLY:SETSP")
    field(DOL8, "BL04I-VA-GPIRG-98:RLY:SETSP")
    field(LNK1, "BL04I-VA-GPIRG-01:RLY:SETSP CA")
    field(LNK2, "BL04I-VA-PIRG-03:RLY:SETSP CA")
    field(LNK3, "BL04I-VA-PIRG-04:RLY:SETSP CA")
    field(LNK4, "BL04I-VA-PIRG-05:RLY:SETSP CA")
    field(LNK5, "BL04I-VA-PIRG-05:RLY:SETSP CA")
    field(LNK6, "BL04I-VA-PIRG-05:RLY:SETSP CA")
    field(LNK7, "BL04I-VA-PIRG-05:RLY:SETSP CA")
    field(LNK8, "BL04I-VA-PIRG-05:RLY:SETSP CA")
}
record(mbbo, "BL04I-VA-GPIRG-98:RLY:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(FLNK, "BL04I-VA-GPIRG-98:RLY:SEQENA")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GPIRG-98:RLY:SEQENA")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GPIRG-98:RLY:ENABLE")
    field(DOL2, "BL04I-VA-GPIRG-98:RLY:ENABLE")
    field(DOL3, "BL04I-VA-GPIRG-98:RLY:ENABLE")
    field(DOL4, "BL04I-VA-GPIRG-98:RLY:ENABLE")
    field(DOL5, "BL04I-VA-GPIRG-98:RLY:ENABLE")
    field(DOL6, "BL04I-VA-GPIRG-98:RLY:ENABLE")
    field(DOL7, "BL04I-VA-GPIRG-98:RLY:ENABLE")
    field(DOL8, "BL04I-VA-GPIRG-98:RLY:ENABLE")
    field(LNK1, "BL04I-VA-GPIRG-01:RLY:ENABLE CA")
    field(LNK2, "BL04I-VA-PIRG-03:RLY:ENABLE CA")
    field(LNK3, "BL04I-VA-PIRG-04:RLY:ENABLE CA")
    field(LNK4, "BL04I-VA-PIRG-05:RLY:ENABLE CA")
    field(LNK5, "BL04I-VA-PIRG-05:RLY:ENABLE CA")
    field(LNK6, "BL04I-VA-PIRG-05:RLY:ENABLE CA")
    field(LNK7, "BL04I-VA-PIRG-05:RLY:ENABLE CA")
    field(LNK8, "BL04I-VA-PIRG-05:RLY:ENABLE CA")
}
record(sel, "BL04I-VA-GPIRG-98:RLY:SP")
{
    field(DESC, "Ion Pump I/L")
    field(SCAN, "1 second")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GPIRG-01:RLY:SP MS")
    field(INPB, "BL04I-VA-PIRG-03:RLY:SP MS")
    field(INPC, "BL04I-VA-PIRG-04:RLY:SP MS")
    field(INPD, "BL04I-VA-PIRG-05:RLY:SP MS")
    field(INPE, "BL04I-VA-PIRG-05:RLY:SP MS")
    field(INPF, "BL04I-VA-PIRG-05:RLY:SP MS")
    field(INPG, "BL04I-VA-PIRG-05:RLY:SP MS")
    field(INPH, "BL04I-VA-PIRG-05:RLY:SP MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
}
################################################################################
# mks937aPirgGroup.template
#% macro, __doc__, Template database for a group of up to 8 Pirani Gauges
# Pete Owens - 9/5/05
#
# substitutions:
#% macro, device, device name
#% macro, pirg1, pirg 1 device name
#% macro, pirg2, pirg 2 device name
#% macro, pirg3, pirg 3 device name
#% macro, pirg4, pirg 4 device name
#% macro, pirg5, pirg 5 device name
#% macro, pirg6, pirg 6 device name
#% macro, pirg7, pirg 7 device name
#% macro, pirg8, pirg 8 device name
################################################################################
# Status
#
record(mbbi, "BL04I-VA-GPIRG-99:STA")
{
    field(DESC, "Status")
    field(INP,  "BL04I-VA-GPIRG-99:SELSTA PP MS")
    field(SCAN, "1 second")
    field(ZRST, "OK")
    field(ONST, "OK")
    field(TWST, "Above Range")
    field(THST, "At Atmosphere")
    field(FRST, "Low Emission")
    field(FVST, "Filament Off")
    field(SXST, "HV Off")
    field(SVST, "Startup Delay")
    field(EIST, "Below Range")
    field(NIST, "Controlled")
    field(TEST, "Protected State")
    field(ELST, "No Gauge")
    field(TVST, "Not Connected")
    field(TTST, "Wrong Gauge")
    field(FTST, "Bad Command")
    field(FFST, "Locked Out")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MAJOR")
    field(FVSV, "MAJOR")
    field(SXSV, "MAJOR")
    field(SVSV, "MINOR")
    field(EISV, "NO_ALARM")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MAJOR")
    field(TVSV, "MAJOR")
    field(TTSV, "MAJOR")
    field(FTSV, "MAJOR")
    field(FFSV, "MAJOR")
}
record(sel, "BL04I-VA-GPIRG-99:SELSTA") 
{
    field(DESC, "Select Status")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-PIRG-06:STA")
    field(INPB, "BL04I-VA-PIRG-06:STA")
    field(INPC, "BL04I-VA-PIRG-06:STA")
    field(INPD, "BL04I-VA-PIRG-06:STA")
    field(INPE, "BL04I-VA-PIRG-06:STA")
    field(INPF, "BL04I-VA-PIRG-06:STA")
    field(INPG, "BL04I-VA-PIRG-06:STA")
    field(INPH, "BL04I-VA-PIRG-06:STA")
}
################################################################################
# Pressure
#
record(sel, "BL04I-VA-GPIRG-99:P")
{
    field(DESC, "Pressure")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-PIRG-06:P MS")
    field(INPB, "BL04I-VA-PIRG-06:P MS")
    field(INPC, "BL04I-VA-PIRG-06:P MS")
    field(INPD, "BL04I-VA-PIRG-06:P MS")
    field(INPE, "BL04I-VA-PIRG-06:P MS")
    field(INPF, "BL04I-VA-PIRG-06:P MS")
    field(INPG, "BL04I-VA-PIRG-06:P MS")
    field(INPH, "BL04I-VA-PIRG-06:P MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1000")
    field(LOPR, "0.001")
}
record(calc, "BL04I-VA-GPIRG-99:PLOG")
{
    field(DESC, "log Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-GPIRG-99:P PP MS")
    field(SCAN, "1 second")
    field(HOPR, "3")
    field(LOPR, "-3")
}
################################################################################
# Control - IMG Enable (link from IMG to PIRG)
#
record(ao, "BL04I-VA-GPIRG-99:CTL:SETSP")
{
    field(DESC, "IMG Enable")
    field(FLNK, "BL04I-VA-GPIRG-99:CTL:SEQSP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
    field(DRVH, "9.5e-1")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(seq, "BL04I-VA-GPIRG-99:CTL:SEQSP")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GPIRG-99:CTL:SETSP")
    field(DOL2, "BL04I-VA-GPIRG-99:CTL:SETSP")
    field(DOL3, "BL04I-VA-GPIRG-99:CTL:SETSP")
    field(DOL4, "BL04I-VA-GPIRG-99:CTL:SETSP")
    field(DOL5, "BL04I-VA-GPIRG-99:CTL:SETSP")
    field(DOL6, "BL04I-VA-GPIRG-99:CTL:SETSP")
    field(DOL7, "BL04I-VA-GPIRG-99:CTL:SETSP")
    field(DOL8, "BL04I-VA-GPIRG-99:CTL:SETSP")
    field(LNK1, "BL04I-VA-PIRG-06:CTL:SETSP CA")
    field(LNK2, "BL04I-VA-PIRG-06:CTL:SETSP CA")
    field(LNK3, "BL04I-VA-PIRG-06:CTL:SETSP CA")
    field(LNK4, "BL04I-VA-PIRG-06:CTL:SETSP CA")
    field(LNK5, "BL04I-VA-PIRG-06:CTL:SETSP CA")
    field(LNK6, "BL04I-VA-PIRG-06:CTL:SETSP CA")
    field(LNK7, "BL04I-VA-PIRG-06:CTL:SETSP CA")
    field(LNK8, "BL04I-VA-PIRG-06:CTL:SETSP CA")
}
record(mbbo, "BL04I-VA-GPIRG-99:CTL:ENABLE")
{
    field(DESC, "Enable Control Setpoint")
    field(FLNK, "BL04I-VA-GPIRG-99:CTL:SEQENA")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GPIRG-99:CTL:SEQENA")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GPIRG-99:CTL:ENABLE")
    field(DOL2, "BL04I-VA-GPIRG-99:CTL:ENABLE")
    field(DOL3, "BL04I-VA-GPIRG-99:CTL:ENABLE")
    field(DOL4, "BL04I-VA-GPIRG-99:CTL:ENABLE")
    field(DOL5, "BL04I-VA-GPIRG-99:CTL:ENABLE")
    field(DOL6, "BL04I-VA-GPIRG-99:CTL:ENABLE")
    field(DOL7, "BL04I-VA-GPIRG-99:CTL:ENABLE")
    field(DOL8, "BL04I-VA-GPIRG-99:CTL:ENABLE")
    field(LNK1, "BL04I-VA-PIRG-06:CTL:ENABLE CA")
    field(LNK2, "BL04I-VA-PIRG-06:CTL:ENABLE CA")
    field(LNK3, "BL04I-VA-PIRG-06:CTL:ENABLE CA")
    field(LNK4, "BL04I-VA-PIRG-06:CTL:ENABLE CA")
    field(LNK5, "BL04I-VA-PIRG-06:CTL:ENABLE CA")
    field(LNK6, "BL04I-VA-PIRG-06:CTL:ENABLE CA")
    field(LNK7, "BL04I-VA-PIRG-06:CTL:ENABLE CA")
    field(LNK8, "BL04I-VA-PIRG-06:CTL:ENABLE CA")
}
record(sel, "BL04I-VA-GPIRG-99:CTL:SP")
{
    field(DESC, "IMG Enable")
    field(SCAN, "1 second")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-PIRG-06:CTL:SP MS")
    field(INPB, "BL04I-VA-PIRG-06:CTL:SP MS")
    field(INPC, "BL04I-VA-PIRG-06:CTL:SP MS")
    field(INPD, "BL04I-VA-PIRG-06:CTL:SP MS")
    field(INPE, "BL04I-VA-PIRG-06:CTL:SP MS")
    field(INPF, "BL04I-VA-PIRG-06:CTL:SP MS")
    field(INPG, "BL04I-VA-PIRG-06:CTL:SP MS")
    field(INPH, "BL04I-VA-PIRG-06:CTL:SP MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
}
################################################################################
# Relay - Ion Pump Interlock
#
record(ao, "BL04I-VA-GPIRG-99:RLY:SETSP")
{
    field(DESC, "Ion Pump I/L")
    field(FLNK, "BL04I-VA-GPIRG-99:RLY:SEQSP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
    field(DRVH, "1.2e2")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(seq, "BL04I-VA-GPIRG-99:RLY:SEQSP")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GPIRG-99:RLY:SETSP")
    field(DOL2, "BL04I-VA-GPIRG-99:RLY:SETSP")
    field(DOL3, "BL04I-VA-GPIRG-99:RLY:SETSP")
    field(DOL4, "BL04I-VA-GPIRG-99:RLY:SETSP")
    field(DOL5, "BL04I-VA-GPIRG-99:RLY:SETSP")
    field(DOL6, "BL04I-VA-GPIRG-99:RLY:SETSP")
    field(DOL7, "BL04I-VA-GPIRG-99:RLY:SETSP")
    field(DOL8, "BL04I-VA-GPIRG-99:RLY:SETSP")
    field(LNK1, "BL04I-VA-PIRG-06:RLY:SETSP CA")
    field(LNK2, "BL04I-VA-PIRG-06:RLY:SETSP CA")
    field(LNK3, "BL04I-VA-PIRG-06:RLY:SETSP CA")
    field(LNK4, "BL04I-VA-PIRG-06:RLY:SETSP CA")
    field(LNK5, "BL04I-VA-PIRG-06:RLY:SETSP CA")
    field(LNK6, "BL04I-VA-PIRG-06:RLY:SETSP CA")
    field(LNK7, "BL04I-VA-PIRG-06:RLY:SETSP CA")
    field(LNK8, "BL04I-VA-PIRG-06:RLY:SETSP CA")
}
record(mbbo, "BL04I-VA-GPIRG-99:RLY:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(FLNK, "BL04I-VA-GPIRG-99:RLY:SEQENA")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GPIRG-99:RLY:SEQENA")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GPIRG-99:RLY:ENABLE")
    field(DOL2, "BL04I-VA-GPIRG-99:RLY:ENABLE")
    field(DOL3, "BL04I-VA-GPIRG-99:RLY:ENABLE")
    field(DOL4, "BL04I-VA-GPIRG-99:RLY:ENABLE")
    field(DOL5, "BL04I-VA-GPIRG-99:RLY:ENABLE")
    field(DOL6, "BL04I-VA-GPIRG-99:RLY:ENABLE")
    field(DOL7, "BL04I-VA-GPIRG-99:RLY:ENABLE")
    field(DOL8, "BL04I-VA-GPIRG-99:RLY:ENABLE")
    field(LNK1, "BL04I-VA-PIRG-06:RLY:ENABLE CA")
    field(LNK2, "BL04I-VA-PIRG-06:RLY:ENABLE CA")
    field(LNK3, "BL04I-VA-PIRG-06:RLY:ENABLE CA")
    field(LNK4, "BL04I-VA-PIRG-06:RLY:ENABLE CA")
    field(LNK5, "BL04I-VA-PIRG-06:RLY:ENABLE CA")
    field(LNK6, "BL04I-VA-PIRG-06:RLY:ENABLE CA")
    field(LNK7, "BL04I-VA-PIRG-06:RLY:ENABLE CA")
    field(LNK8, "BL04I-VA-PIRG-06:RLY:ENABLE CA")
}
record(sel, "BL04I-VA-GPIRG-99:RLY:SP")
{
    field(DESC, "Ion Pump I/L")
    field(SCAN, "1 second")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-PIRG-06:RLY:SP MS")
    field(INPB, "BL04I-VA-PIRG-06:RLY:SP MS")
    field(INPC, "BL04I-VA-PIRG-06:RLY:SP MS")
    field(INPD, "BL04I-VA-PIRG-06:RLY:SP MS")
    field(INPE, "BL04I-VA-PIRG-06:RLY:SP MS")
    field(INPF, "BL04I-VA-PIRG-06:RLY:SP MS")
    field(INPG, "BL04I-VA-PIRG-06:RLY:SP MS")
    field(INPH, "BL04I-VA-PIRG-06:RLY:SP MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
}
################################################################################
#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937bPirg.db
#% macro, __doc__, Template database for a pirani guage connected to
# one channel of an mks937b Multi-Sensor System
# A note on the optional macros: they default to an appropriate hard-coded
# value if no value is passed for expansion.
# They are provided to allow the default set points to be changed.
# Once the set point needs to be changed it may be necessary to alter 
# various other fields defining the range of allowed values.
# For the majority of applications the defaults should be used.  The levels
# should only be changed at the request of the vacuum group for non-standard
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, channel, MKS 937A channel number (1-4)
#% macro, address, Controller address (001 .. 253)
#% macro, name,        Object name, and gui association name
#% macro, offwarn,     Flag to display a warning that switching off the PIRG could trip the beam#

################################################################################

# This associates an edm screen with the template
# % gui, PIRG01, edm, mks937bPirg.edl, device=BL04I-VA-PIRG-01

# This associates BOY screens with the template
# % gui, PIRG01, boydetail, mks937bApp_opi/pirg_detail.opi, device=BL04I-VA-PIRG-01, desc=BL04I-VA-PIRG-01, name=PIRG01
# % gui, PIRG01, boyembed, mks937bApp_opi/pirg_embed_box.opi, device=BL04I-VA-PIRG-01, desc=BL04I-VA-PIRG-01, name=PIRG01
# % gui, PIRG01, boyembed, mks937bApp_opi/pirg_embed.opi, device=BL04I-VA-PIRG-01, desc=BL04I-VA-PIRG-01, name=PIRG01

# These define what PVs a valve detail screen should contain
# % gui, PIRG01, readback, Pressure,              BL04I-VA-PIRG-01:P
# % gui, PIRG01, readback, Status,                BL04I-VA-PIRG-01:STA
# % gui, PIRG01, readback, Gauge Setpoint Write,  BL04I-VA-PIRG-01:ILKSETSP:NOWRITE
# % gui, PIRG01, readback, CTL Setpoint Summary,  BL04I-VA-PIRG-01:CTL:SP,            =pv("BL04I-VA-PIRG-01:CTL:SP.DESC")
# % gui, PIRG01, readback, RLY1 Setpoint Summary, BL04I-VA-PIRG-01:RLY1:SP,           =pv("BL04I-VA-PIRG-01:RLY1:SP.DESC")
# % gui, PIRG01, readback, RLY2 Setpoint Summary, BL04I-VA-PIRG-01:RLY2:SP,           =pv("BL04I-VA-PIRG-01:RLY2:SP.DESC")
# % gui, PIRG01, enum,     PirgFilament,          BL04I-VA-PIRG-01:ENABLE
# % gui, PIRG01, readback, CTL Setpoint On,       BL04I-VA-PIRG-01:CTL:SP,            =pv("BL04I-VA-PIRG-01:CTL:SP.DESC")
# % gui, PIRG01, readback, CTL Setpoint Off,      BL04I-VA-PIRG-01:CTL:HYST,          =pv("BL04I-VA-PIRG-01:CTL:SETSPOFF.DESC")
# % gui, PIRG01, readback, RLY1 Setpoint On,      BL04I-VA-PIRG-01:RLY1:SP,           =pv("BL04I-VA-PIRG-01:RLY1:SP.DESC")
# % gui, PIRG01, readback, RLY1 Setpoint Off,     BL04I-VA-PIRG-01:RLY1:SPOFF,        =pv("BL04I-VA-PIRG-01:RLY1:SPOFF.DESC")
# % gui, PIRG01, readback, RLY2 Setpoint On,      BL04I-VA-PIRG-01:RLY2:SP,           =pv("BL04I-VA-PIRG-01:RLY2:SP.DESC")
# % gui, PIRG01, readback, RLY2 Setpoint Off,     BL04I-VA-PIRG-01:RLY2:SPOFF,        =pv("BL04I-VA-PIRG-01:RLY2:SPOFF.DESC")
# % gui, PIRG01, demand,   CTL Setpoint On,       BL04I-VA-PIRG-01:CTL:SETSP,         =pv("BL04I-VA-PIRG-01:SP.DESC")
# % gui, PIRG01, demand,   CTL Setpoint Off,      BL04I-VA-PIRG-01:CTL:SETSPOFF,      =pv("BL04I-VA-PIRG-01:SPOFF.DESC")
# % gui, PIRG01, demand,   RLY1 Setpoint On,      BL04I-VA-PIRG-01:RLY1:SETSP,        =pv("BL04I-VA-PIRG-01:RLY1:SP.DESC")
# % gui, PIRG01, demand,   RLY1 Setpoint Off,     BL04I-VA-PIRG-01:RLY1:SETSPOFF,     =pv("BL04I-VA-PIRG-01:RLY1:SPOFF.DESC")
# % gui, PIRG01, demand,   RLY2 Setpoint On,      BL04I-VA-PIRG-01:RLY2:SETSP,        =pv("BL04I-VA-PIRG-01:RLY2:SP.DESC")
# % gui, PIRG01, demand,   RLY2 Setpoint Off,     BL04I-VA-PIRG-01:RLY2:SETSPOFF,     =pv("BL04I-VA-PIRG-01:RLY2:SPOFF.DESC")
# % gui, PIRG01, readback, RLY1 Mode,             BL04I-VA-PIRG-01:RLY1:MODE,         =concat(pv("BL04I-VA-PIRG-01:RLY1:SP.DESC")," Mode")
# % gui, PIRG01, readback, RLY1 Direction,        BL04I-VA-PIRG-01:RLY1:DIR,          =concat(pv("BL04I-VA-PIRG-01:RLY1:SP.DESC")," Dir")
# % gui, PIRG01, readback, RLY2 Mode,             BL04I-VA-PIRG-01:RLY2:MODE,         =concat(pv("BL04I-VA-PIRG-01:RLY2:SP.DESC")," Mode")
# % gui, PIRG01, readback, RLY2 Direction,        BL04I-VA-PIRG-01:RLY2:DIR,          =concat(pv("BL04I-VA-PIRG-01:RLY2:SP.DESC")," Dir")
# % gui, PIRG01, enum,     RLY1 Mode,             BL04I-VA-PIRG-01:RLY1:SETMODE,      =concat(pv("BL04I-VA-PIRG-01:RLY1:SP.DESC")," Mode")
# % gui, PIRG01, enum,     RLY1 Direction,        BL04I-VA-PIRG-01:RLY1:SETDIR,       =concat(pv("BL04I-VA-PIRG-01:RLY1:SP.DESC")," Dir")
# % gui, PIRG01, enum,     RLY2 Mode,             BL04I-VA-PIRG-01:RLY2:SETMODE,      =concat(pv("BL04I-VA-PIRG-01:RLY2:SP.DESC")," Mode")
# % gui, PIRG01, enum,     RLY2 Direction,        BL04I-VA-PIRG-01:RLY2:SETDIR,       =concat(pv("BL04I-VA-PIRG-01:RLY2:SP.DESC")," Dir")

# Status
#
#% archiver 10 Monitor
#% controldesk Pressure smon
#
record(mbbi, "BL04I-VA-PIRG-01:STA") {
  field(DTYP, "Soft Channel")
#  field(DTYP, "stream")
#  field(INP, "@mks937b.protocol status(001,5,BL04I-VA-PIRG-01) ty_40_5")
#  field(SCAN, "1 second")
  field(DESC, "Status")
#  field(FLNK, "BL04I-VA-PIRG-01:PDIS")
  field(ZRST, "OK")
  field(ONST, "OK")
  field(TWST, "Above Range")
  field(THST, "At Atmosphere")
  field(FRST, "Low Emission")
  field(FVST, "Filament Off")
  field(SXST, "HV Off")
  field(SVST, "Startup Delay")
  field(EIST, "Below Range")
  field(NIST, "Controlled")
  field(TEST, "Protected State")
  field(ELST, "No Gauge")
  field(TVST, "Not Connected")
  field(TTST, "Wrong Gauge")
  field(FTST, "Bad Command")
  field(FFST, "Locked Out")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "MINOR")
  field(THSV, "MINOR")
  field(FRSV, "MAJOR")
  field(FVSV, "MAJOR")
  field(SXSV, "MAJOR")
  field(SVSV, "MINOR")
  field(EISV, "NO_ALARM")
  field(NISV, "MINOR")
  field(TESV, "MINOR")
  field(ELSV, "MAJOR")
  field(TVSV, "MAJOR")
  field(TTSV, "MAJOR")
  field(FTSV, "MAJOR")
  field(FFSV, "MAJOR")
}

#############################################################################
# Pressure
# 
# % archiver 1 Monitor
# % controldesk Pressure readback
record(ai, "BL04I-VA-PIRG-01:P") 
{
  field(DESC, "Pressure")
  field(DTYP, "stream")
  field(SCAN, "1 second")
  field(INP, "@mks937b.protocol pressure(001,5,BL04I-VA-PIRG-01) ty_40_5")
  field(FLNK, "BL04I-VA-PIRG-01:PLOG")
  field(EGU, "mbar")
  field(PREC, "3")
  field(HOPR, "1000")
  field(LOPR, "0.001")
  field(SDIS, "BL04I-VA-PIRG-01:PDIS")
  field(DISS, "INVALID")
}

record(calcout, "BL04I-VA-PIRG-01:ADEL") 
{
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-PIRG-01:P.ADEL")
  field(INPA, "BL04I-VA-PIRG-01:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-PIRG-01:PLOG") 
{
  field(DESC, "log Pressure")
  field(EGU, "log")
  field(CALC, "LOG(A)")
  field(INPA, "BL04I-VA-PIRG-01:P MS")
  field(HOPR, "3")
  field(LOPR, "-3")
  field(ADEL, "0.025")
  field(FLNK, "BL04I-VA-PIRG-01:PSEQ")
}

#
# Determine if P is a valid pressure
# if so we can set STA to OK
#
record(calc, "BL04I-VA-PIRG-01:GOODP") 
{
  field(DESC, "Valid pressure calc")
  field(INPA, "BL04I-VA-PIRG-01:P.SEVR")
  field(CALC, "(A>0)?0:1")
}
record(seq, "BL04I-VA-PIRG-01:PSEQ") 
{
  field(DESC, "Seq Pressure & Status")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-PIRG-01:GOODP PP")
  field(DOL1, "OK")
  field(LNK1, "BL04I-VA-PIRG-01:STA PP")
}


record(calc, "BL04I-VA-PIRG-01:PDIS") 
{
  field(PHAS, "1")
  field(CALC, "(A>1)?1:0")
  field(INPA, "BL04I-VA-PIRG-01:STA")
  field(FLNK, "BL04I-VA-PIRG-01:P")
}

record(mbbo, "BL04I-VA-PIRG-01:ENABLE") {
  field(DESC, "Enable Pirani power")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol pirgenable(001,5) ty_40_5")
  field(ZRST, "Off")
  field(ONST, "On")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  field(PINI, "YES")
  field(FLNK, "BL04I-VA-PIRG-01:ISENABLED")
}

record(mbbi, "BL04I-VA-PIRG-01:ISENABLED") {
  field(DESC, "Pirani power")
  field(DTYP, "stream")
  field(INP,  "@mks937b.protocol get_gauge_enabled(001,5) ty_40_5")
  field(ZRST, "Off")
  field(ONST, "On")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(PINI, "YES")
}

record(bi, "BL04I-VA-PIRG-01:OFFWARN")
{
  field(DESC, "Warning for OFF button")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Warning off")
  field(ONAM, "Warning on")
}#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


# mks937bPirg.db
#% macro, __doc__, Template database for a pirani guage connected to
# one channel of an mks937b Multi-Sensor System
# A note on the optional macros: they default to an appropriate hard-coded
# value if no value is passed for expansion.
# They are provided to allow the default set points to be changed.
# Once the set point needs to be changed it may be necessary to alter 
# various other fields defining the range of allowed values.
# For the majority of applications the defaults should be used.  The levels
# should only be changed at the request of the vacuum group for non-standard
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, channel, MKS 937A channel number (1-4)
#% macro, address, Controller address (001 .. 253)
#% macro, name,        Object name, and gui association name
#% macro, offwarn,     Flag to display a warning that switching off the PIRG could trip the beam#

################################################################################

# This associates an edm screen with the template
# % gui, PIRG02, edm, mks937bPirg.edl, device=BL04I-VA-PIRG-02

# This associates BOY screens with the template
# % gui, PIRG02, boydetail, mks937bApp_opi/pirg_detail.opi, device=BL04I-VA-PIRG-02, desc=BL04I-VA-PIRG-02, name=PIRG02
# % gui, PIRG02, boyembed, mks937bApp_opi/pirg_embed_box.opi, device=BL04I-VA-PIRG-02, desc=BL04I-VA-PIRG-02, name=PIRG02
# % gui, PIRG02, boyembed, mks937bApp_opi/pirg_embed.opi, device=BL04I-VA-PIRG-02, desc=BL04I-VA-PIRG-02, name=PIRG02

# These define what PVs a valve detail screen should contain
# % gui, PIRG02, readback, Pressure,              BL04I-VA-PIRG-02:P
# % gui, PIRG02, readback, Status,                BL04I-VA-PIRG-02:STA
# % gui, PIRG02, readback, Gauge Setpoint Write,  BL04I-VA-PIRG-02:ILKSETSP:NOWRITE
# % gui, PIRG02, readback, CTL Setpoint Summary,  BL04I-VA-PIRG-02:CTL:SP,            =pv("BL04I-VA-PIRG-02:CTL:SP.DESC")
# % gui, PIRG02, readback, RLY1 Setpoint Summary, BL04I-VA-PIRG-02:RLY1:SP,           =pv("BL04I-VA-PIRG-02:RLY1:SP.DESC")
# % gui, PIRG02, readback, RLY2 Setpoint Summary, BL04I-VA-PIRG-02:RLY2:SP,           =pv("BL04I-VA-PIRG-02:RLY2:SP.DESC")
# % gui, PIRG02, enum,     PirgFilament,          BL04I-VA-PIRG-02:ENABLE
# % gui, PIRG02, readback, CTL Setpoint On,       BL04I-VA-PIRG-02:CTL:SP,            =pv("BL04I-VA-PIRG-02:CTL:SP.DESC")
# % gui, PIRG02, readback, CTL Setpoint Off,      BL04I-VA-PIRG-02:CTL:HYST,          =pv("BL04I-VA-PIRG-02:CTL:SETSPOFF.DESC")
# % gui, PIRG02, readback, RLY1 Setpoint On,      BL04I-VA-PIRG-02:RLY1:SP,           =pv("BL04I-VA-PIRG-02:RLY1:SP.DESC")
# % gui, PIRG02, readback, RLY1 Setpoint Off,     BL04I-VA-PIRG-02:RLY1:SPOFF,        =pv("BL04I-VA-PIRG-02:RLY1:SPOFF.DESC")
# % gui, PIRG02, readback, RLY2 Setpoint On,      BL04I-VA-PIRG-02:RLY2:SP,           =pv("BL04I-VA-PIRG-02:RLY2:SP.DESC")
# % gui, PIRG02, readback, RLY2 Setpoint Off,     BL04I-VA-PIRG-02:RLY2:SPOFF,        =pv("BL04I-VA-PIRG-02:RLY2:SPOFF.DESC")
# % gui, PIRG02, demand,   CTL Setpoint On,       BL04I-VA-PIRG-02:CTL:SETSP,         =pv("BL04I-VA-PIRG-02:SP.DESC")
# % gui, PIRG02, demand,   CTL Setpoint Off,      BL04I-VA-PIRG-02:CTL:SETSPOFF,      =pv("BL04I-VA-PIRG-02:SPOFF.DESC")
# % gui, PIRG02, demand,   RLY1 Setpoint On,      BL04I-VA-PIRG-02:RLY1:SETSP,        =pv("BL04I-VA-PIRG-02:RLY1:SP.DESC")
# % gui, PIRG02, demand,   RLY1 Setpoint Off,     BL04I-VA-PIRG-02:RLY1:SETSPOFF,     =pv("BL04I-VA-PIRG-02:RLY1:SPOFF.DESC")
# % gui, PIRG02, demand,   RLY2 Setpoint On,      BL04I-VA-PIRG-02:RLY2:SETSP,        =pv("BL04I-VA-PIRG-02:RLY2:SP.DESC")
# % gui, PIRG02, demand,   RLY2 Setpoint Off,     BL04I-VA-PIRG-02:RLY2:SETSPOFF,     =pv("BL04I-VA-PIRG-02:RLY2:SPOFF.DESC")
# % gui, PIRG02, readback, RLY1 Mode,             BL04I-VA-PIRG-02:RLY1:MODE,         =concat(pv("BL04I-VA-PIRG-02:RLY1:SP.DESC")," Mode")
# % gui, PIRG02, readback, RLY1 Direction,        BL04I-VA-PIRG-02:RLY1:DIR,          =concat(pv("BL04I-VA-PIRG-02:RLY1:SP.DESC")," Dir")
# % gui, PIRG02, readback, RLY2 Mode,             BL04I-VA-PIRG-02:RLY2:MODE,         =concat(pv("BL04I-VA-PIRG-02:RLY2:SP.DESC")," Mode")
# % gui, PIRG02, readback, RLY2 Direction,        BL04I-VA-PIRG-02:RLY2:DIR,          =concat(pv("BL04I-VA-PIRG-02:RLY2:SP.DESC")," Dir")
# % gui, PIRG02, enum,     RLY1 Mode,             BL04I-VA-PIRG-02:RLY1:SETMODE,      =concat(pv("BL04I-VA-PIRG-02:RLY1:SP.DESC")," Mode")
# % gui, PIRG02, enum,     RLY1 Direction,        BL04I-VA-PIRG-02:RLY1:SETDIR,       =concat(pv("BL04I-VA-PIRG-02:RLY1:SP.DESC")," Dir")
# % gui, PIRG02, enum,     RLY2 Mode,             BL04I-VA-PIRG-02:RLY2:SETMODE,      =concat(pv("BL04I-VA-PIRG-02:RLY2:SP.DESC")," Mode")
# % gui, PIRG02, enum,     RLY2 Direction,        BL04I-VA-PIRG-02:RLY2:SETDIR,       =concat(pv("BL04I-VA-PIRG-02:RLY2:SP.DESC")," Dir")

# Status
#
#% archiver 10 Monitor
#% controldesk Pressure smon
#
record(mbbi, "BL04I-VA-PIRG-02:STA") {
  field(DTYP, "Soft Channel")
#  field(DTYP, "stream")
#  field(INP, "@mks937b.protocol status(001,6,BL04I-VA-PIRG-02) ty_40_5")
#  field(SCAN, "1 second")
  field(DESC, "Status")
#  field(FLNK, "BL04I-VA-PIRG-02:PDIS")
  field(ZRST, "OK")
  field(ONST, "OK")
  field(TWST, "Above Range")
  field(THST, "At Atmosphere")
  field(FRST, "Low Emission")
  field(FVST, "Filament Off")
  field(SXST, "HV Off")
  field(SVST, "Startup Delay")
  field(EIST, "Below Range")
  field(NIST, "Controlled")
  field(TEST, "Protected State")
  field(ELST, "No Gauge")
  field(TVST, "Not Connected")
  field(TTST, "Wrong Gauge")
  field(FTST, "Bad Command")
  field(FFST, "Locked Out")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "MINOR")
  field(THSV, "MINOR")
  field(FRSV, "MAJOR")
  field(FVSV, "MAJOR")
  field(SXSV, "MAJOR")
  field(SVSV, "MINOR")
  field(EISV, "NO_ALARM")
  field(NISV, "MINOR")
  field(TESV, "MINOR")
  field(ELSV, "MAJOR")
  field(TVSV, "MAJOR")
  field(TTSV, "MAJOR")
  field(FTSV, "MAJOR")
  field(FFSV, "MAJOR")
}

#############################################################################
# Pressure
# 
# % archiver 1 Monitor
# % controldesk Pressure readback
record(ai, "BL04I-VA-PIRG-02:P") 
{
  field(DESC, "Pressure")
  field(DTYP, "stream")
  field(SCAN, "1 second")
  field(INP, "@mks937b.protocol pressure(001,6,BL04I-VA-PIRG-02) ty_40_5")
  field(FLNK, "BL04I-VA-PIRG-02:PLOG")
  field(EGU, "mbar")
  field(PREC, "3")
  field(HOPR, "1000")
  field(LOPR, "0.001")
  field(SDIS, "BL04I-VA-PIRG-02:PDIS")
  field(DISS, "INVALID")
}

record(calcout, "BL04I-VA-PIRG-02:ADEL") 
{
  field(DESC, "deadband")
  field(CALC, "A/B")
  field(OUT, "BL04I-VA-PIRG-02:P.ADEL")
  field(INPA, "BL04I-VA-PIRG-02:P")
  field(INPB, "20")
  field(SCAN, "10 second")
}

#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-PIRG-02:PLOG") 
{
  field(DESC, "log Pressure")
  field(EGU, "log")
  field(CALC, "LOG(A)")
  field(INPA, "BL04I-VA-PIRG-02:P MS")
  field(HOPR, "3")
  field(LOPR, "-3")
  field(ADEL, "0.025")
  field(FLNK, "BL04I-VA-PIRG-02:PSEQ")
}

#
# Determine if P is a valid pressure
# if so we can set STA to OK
#
record(calc, "BL04I-VA-PIRG-02:GOODP") 
{
  field(DESC, "Valid pressure calc")
  field(INPA, "BL04I-VA-PIRG-02:P.SEVR")
  field(CALC, "(A>0)?0:1")
}
record(seq, "BL04I-VA-PIRG-02:PSEQ") 
{
  field(DESC, "Seq Pressure & Status")
  field(SELM, "Specified")
  field(SELL, "BL04I-VA-PIRG-02:GOODP PP")
  field(DOL1, "OK")
  field(LNK1, "BL04I-VA-PIRG-02:STA PP")
}


record(calc, "BL04I-VA-PIRG-02:PDIS") 
{
  field(PHAS, "1")
  field(CALC, "(A>1)?1:0")
  field(INPA, "BL04I-VA-PIRG-02:STA")
  field(FLNK, "BL04I-VA-PIRG-02:P")
}

record(mbbo, "BL04I-VA-PIRG-02:ENABLE") {
  field(DESC, "Enable Pirani power")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol pirgenable(001,6) ty_40_5")
  field(ZRST, "Off")
  field(ONST, "On")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(DOL, "1")
  field(PINI, "YES")
  field(FLNK, "BL04I-VA-PIRG-02:ISENABLED")
}

record(mbbi, "BL04I-VA-PIRG-02:ISENABLED") {
  field(DESC, "Pirani power")
  field(DTYP, "stream")
  field(INP,  "@mks937b.protocol get_gauge_enabled(001,6) ty_40_5")
  field(ZRST, "Off")
  field(ONST, "On")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(PINI, "YES")
}

record(bi, "BL04I-VA-PIRG-02:OFFWARN")
{
  field(DESC, "Warning for OFF button")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Warning off")
  field(ONAM, "Warning on")
}# mks937bPirgGroup.template
#% macro, __doc__, Template database for a group of up to 8 Pirani Gauges
# Pete Owens - 9/5/05
#
# substitutions:
#% macro, device, device name
#% macro, pirg1, pirg 1 device name
#% macro, pirg2, pirg 2 device name
#% macro, pirg3, pirg 3 device name
#% macro, pirg4, pirg 4 device name
#% macro, pirg5, pirg 5 device name
#% macro, pirg6, pirg 6 device name
#% macro, pirg7, pirg 7 device name
#% macro, pirg8, pirg 8 device name
#% macro, ionPumpIlRelay, Ion pump interlock relay
################################################################################
# Status
#
record(mbbi, "BL04I-VA-GPIRG-01:STA")
{
    field(DESC, "Status")
    field(INP,  "BL04I-VA-GPIRG-01:SELSTA PP MS")
    field(SCAN, "1 second")
    field(ZRST, "OK")
    field(ONST, "OK")
    field(TWST, "Above Range")
    field(THST, "At Atmosphere")
    field(FRST, "Low Emission")
    field(FVST, "Filament Off")
    field(SXST, "HV Off")
    field(SVST, "Startup Delay")
    field(EIST, "Below Range")
    field(NIST, "Controlled")
    field(TEST, "Protected State")
    field(ELST, "No Gauge")
    field(TVST, "Not Connected")
    field(TTST, "Wrong Gauge")
    field(FTST, "Bad Command")
    field(FFST, "Locked Out")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MAJOR")
    field(FVSV, "MAJOR")
    field(SXSV, "MAJOR")
    field(SVSV, "MINOR")
    field(EISV, "NO_ALARM")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MAJOR")
    field(TVSV, "MAJOR")
    field(TTSV, "MAJOR")
    field(FTSV, "MAJOR")
    field(FFSV, "MAJOR")
}
record(sel, "BL04I-VA-GPIRG-01:SELSTA") 
{
    field(DESC, "Select Status")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-PIRG-01:STA")
    field(INPB, "BL04I-VA-PIRG-02:STA")
    field(INPC, "BL04I-VA-PIRG-02:STA")
    field(INPD, "BL04I-VA-PIRG-02:STA")
    field(INPE, "BL04I-VA-PIRG-02:STA")
    field(INPF, "BL04I-VA-PIRG-02:STA")
    field(INPG, "BL04I-VA-PIRG-02:STA")
    field(INPH, "BL04I-VA-PIRG-02:STA")
}
################################################################################
# Pressure
#
record(sel, "BL04I-VA-GPIRG-01:P")
{
    field(DESC, "Pressure")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-PIRG-01:P MS")
    field(INPB, "BL04I-VA-PIRG-02:P MS")
    field(INPC, "BL04I-VA-PIRG-02:P MS")
    field(INPD, "BL04I-VA-PIRG-02:P MS")
    field(INPE, "BL04I-VA-PIRG-02:P MS")
    field(INPF, "BL04I-VA-PIRG-02:P MS")
    field(INPG, "BL04I-VA-PIRG-02:P MS")
    field(INPH, "BL04I-VA-PIRG-02:P MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1000")
    field(LOPR, "0.001")
}
record(calc, "BL04I-VA-GPIRG-01:PLOG")
{
    field(DESC, "log Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-GPIRG-01:P PP MS")
    field(SCAN, "1 second")
    field(HOPR, "3")
    field(LOPR, "-3")
}
################################################################################
# Control - IMG Enable (link from IMG to PIRG)
#
record(ao, "BL04I-VA-GPIRG-01:CTL:SETSP")
{
    field(DESC, "IMG Enable")
    field(FLNK, "BL04I-VA-GPIRG-01:CTL:SEQSP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
    field(DRVH, "9.5e-1")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(seq, "BL04I-VA-GPIRG-01:CTL:SEQSP")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GPIRG-01:CTL:SETSP")
    field(DOL2, "BL04I-VA-GPIRG-01:CTL:SETSP")
    field(DOL3, "BL04I-VA-GPIRG-01:CTL:SETSP")
    field(DOL4, "BL04I-VA-GPIRG-01:CTL:SETSP")
    field(DOL5, "BL04I-VA-GPIRG-01:CTL:SETSP")
    field(DOL6, "BL04I-VA-GPIRG-01:CTL:SETSP")
    field(DOL7, "BL04I-VA-GPIRG-01:CTL:SETSP")
    field(DOL8, "BL04I-VA-GPIRG-01:CTL:SETSP")
    field(LNK1, "BL04I-VA-PIRG-01:CTL:SETSP CA")
    field(LNK2, "BL04I-VA-PIRG-02:CTL:SETSP CA")
    field(LNK3, "BL04I-VA-PIRG-02:CTL:SETSP CA")
    field(LNK4, "BL04I-VA-PIRG-02:CTL:SETSP CA")
    field(LNK5, "BL04I-VA-PIRG-02:CTL:SETSP CA")
    field(LNK6, "BL04I-VA-PIRG-02:CTL:SETSP CA")
    field(LNK7, "BL04I-VA-PIRG-02:CTL:SETSP CA")
    field(LNK8, "BL04I-VA-PIRG-02:CTL:SETSP CA")
}
record(mbbo, "BL04I-VA-GPIRG-01:CTL:ENABLE")
{
    field(DESC, "Enable Control Setpoint")
    field(FLNK, "BL04I-VA-GPIRG-01:CTL:SEQENA")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GPIRG-01:CTL:SEQENA")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GPIRG-01:CTL:ENABLE")
    field(DOL2, "BL04I-VA-GPIRG-01:CTL:ENABLE")
    field(DOL3, "BL04I-VA-GPIRG-01:CTL:ENABLE")
    field(DOL4, "BL04I-VA-GPIRG-01:CTL:ENABLE")
    field(DOL5, "BL04I-VA-GPIRG-01:CTL:ENABLE")
    field(DOL6, "BL04I-VA-GPIRG-01:CTL:ENABLE")
    field(DOL7, "BL04I-VA-GPIRG-01:CTL:ENABLE")
    field(DOL8, "BL04I-VA-GPIRG-01:CTL:ENABLE")
    field(LNK1, "BL04I-VA-PIRG-01:CTL:ENABLE CA")
    field(LNK2, "BL04I-VA-PIRG-02:CTL:ENABLE CA")
    field(LNK3, "BL04I-VA-PIRG-02:CTL:ENABLE CA")
    field(LNK4, "BL04I-VA-PIRG-02:CTL:ENABLE CA")
    field(LNK5, "BL04I-VA-PIRG-02:CTL:ENABLE CA")
    field(LNK6, "BL04I-VA-PIRG-02:CTL:ENABLE CA")
    field(LNK7, "BL04I-VA-PIRG-02:CTL:ENABLE CA")
    field(LNK8, "BL04I-VA-PIRG-02:CTL:ENABLE CA")
}
record(sel, "BL04I-VA-GPIRG-01:CTL:SP")
{
    field(DESC, "IMG Enable")
    field(SCAN, "1 second")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-PIRG-01:CTL:SP MS")
    field(INPB, "BL04I-VA-PIRG-02:CTL:SP MS")
    field(INPC, "BL04I-VA-PIRG-02:CTL:SP MS")
    field(INPD, "BL04I-VA-PIRG-02:CTL:SP MS")
    field(INPE, "BL04I-VA-PIRG-02:CTL:SP MS")
    field(INPF, "BL04I-VA-PIRG-02:CTL:SP MS")
    field(INPG, "BL04I-VA-PIRG-02:CTL:SP MS")
    field(INPH, "BL04I-VA-PIRG-02:CTL:SP MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
}
################################################################################
# Relay - Ion Pump Interlock
#
record(ao, "BL04I-VA-GPIRG-01:RLY1:SETSP")
{
    field(DESC, "Ion Pump I/L")
    field(FLNK, "BL04I-VA-GPIRG-01:RLY1:SEQSP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
    field(DRVH, "1.2e2")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(seq, "BL04I-VA-GPIRG-01:RLY1:SEQSP")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GPIRG-01:RLY1:SETSP")
    field(DOL2, "BL04I-VA-GPIRG-01:RLY1:SETSP")
    field(DOL3, "BL04I-VA-GPIRG-01:RLY1:SETSP")
    field(DOL4, "BL04I-VA-GPIRG-01:RLY1:SETSP")
    field(DOL5, "BL04I-VA-GPIRG-01:RLY1:SETSP")
    field(DOL6, "BL04I-VA-GPIRG-01:RLY1:SETSP")
    field(DOL7, "BL04I-VA-GPIRG-01:RLY1:SETSP")
    field(DOL8, "BL04I-VA-GPIRG-01:RLY1:SETSP")
    field(LNK1, "BL04I-VA-PIRG-01:RLY1:SETSP CA")
    field(LNK2, "BL04I-VA-PIRG-02:RLY1:SETSP CA")
    field(LNK3, "BL04I-VA-PIRG-02:RLY1:SETSP CA")
    field(LNK4, "BL04I-VA-PIRG-02:RLY1:SETSP CA")
    field(LNK5, "BL04I-VA-PIRG-02:RLY1:SETSP CA")
    field(LNK6, "BL04I-VA-PIRG-02:RLY1:SETSP CA")
    field(LNK7, "BL04I-VA-PIRG-02:RLY1:SETSP CA")
    field(LNK8, "BL04I-VA-PIRG-02:RLY1:SETSP CA")
}
record(mbbo, "BL04I-VA-GPIRG-01:RLY1:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(FLNK, "BL04I-VA-GPIRG-01:RLY1:SEQENA")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GPIRG-01:RLY1:SEQENA")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GPIRG-01:RLY1:ENABLE")
    field(DOL2, "BL04I-VA-GPIRG-01:RLY1:ENABLE")
    field(DOL3, "BL04I-VA-GPIRG-01:RLY1:ENABLE")
    field(DOL4, "BL04I-VA-GPIRG-01:RLY1:ENABLE")
    field(DOL5, "BL04I-VA-GPIRG-01:RLY1:ENABLE")
    field(DOL6, "BL04I-VA-GPIRG-01:RLY1:ENABLE")
    field(DOL7, "BL04I-VA-GPIRG-01:RLY1:ENABLE")
    field(DOL8, "BL04I-VA-GPIRG-01:RLY1:ENABLE")
    field(LNK1, "BL04I-VA-PIRG-01:RLY1:ENABLE CA")
    field(LNK2, "BL04I-VA-PIRG-02:RLY1:ENABLE CA")
    field(LNK3, "BL04I-VA-PIRG-02:RLY1:ENABLE CA")
    field(LNK4, "BL04I-VA-PIRG-02:RLY1:ENABLE CA")
    field(LNK5, "BL04I-VA-PIRG-02:RLY1:ENABLE CA")
    field(LNK6, "BL04I-VA-PIRG-02:RLY1:ENABLE CA")
    field(LNK7, "BL04I-VA-PIRG-02:RLY1:ENABLE CA")
    field(LNK8, "BL04I-VA-PIRG-02:RLY1:ENABLE CA")
}
record(sel, "BL04I-VA-GPIRG-01:RLY1:SP")
{
    field(DESC, "Ion Pump I/L")
    field(SCAN, "1 second")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-PIRG-01:RLY1:SP MS")
    field(INPB, "BL04I-VA-PIRG-02:RLY1:SP MS")
    field(INPC, "BL04I-VA-PIRG-02:RLY1:SP MS")
    field(INPD, "BL04I-VA-PIRG-02:RLY1:SP MS")
    field(INPE, "BL04I-VA-PIRG-02:RLY1:SP MS")
    field(INPF, "BL04I-VA-PIRG-02:RLY1:SP MS")
    field(INPG, "BL04I-VA-PIRG-02:RLY1:SP MS")
    field(INPH, "BL04I-VA-PIRG-02:RLY1:SP MS")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
}
################################################################################
# mks937bRelays.db
#% macro, __doc__, Template database for an mks937b Multi-Sensor System Relays configuration. 
# When a relay is 'on' then the associated MPS interlock is 'good'.
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, address, Controller address (001 .. 253)
#
# optional substitutions:
#% macro, relay_number, The relay number (1..12).
#% macro, relay_desc,   The DESC field on the relay setpoint record 
#% macro, relay_off_desc,   The DESC field on the relay setpoint record 
#                       (appears as a label on the Img EDM screen).
#% macro, relay_level,  The desired relay setpoint value.
# vv================vv  New feature request May 2012.
#% macro, relay_off_level,  The desired relay off setpoint value.
#% macro, relay_drvh,   The DRVH field on relay setpoint records 
#                       (limits max value of relay setpoint)
#% macro, relay_drvl,   The DRVL field on relay setpoint records. 
#                       (limits min value of relay setpoint)
#% macro, relay_hopr,   The HOPR field on relay setpoint records 
#                       (high operator value - helps display set correct range).
#% macro, relay_lopr,   The LOPR field on relay setpoint records 
#                       (low operator value - helps display set correct range).
#% macro, relay_hihi,   The HIHI alarm field on the relay setpoint record.
#% macro, relay_lolo,   The LOLO alarm field on the relay setpoint record.
#% macro, relay_high,   The HIGH alarm field on the relay setpoint record.
#% macro, relay_low ,   The LOW alarm field on the relay setpoint record.
#% macro, ilk_write_access_pv ,   Link to the interlocks setpoint global write access record.
#
################################################################################


################################################################################
# Relay - Valve Interlock
#
#% archiver 10 Monitor
#

# Force processing of slow PP records 
record(fanout, "BL04I-VA-IMG-01:RLY1:FAN10S")
{
    field(DESC, "Relay 10s Scan fanout")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-IMG-01:RLY1:MODE")
    field(LNK2, "BL04I-VA-IMG-01:RLY1:DIR")
    field(LNK3, "BL04I-VA-IMG-01:RLY1:SP")
    field(LNK4, "BL04I-VA-IMG-01:RLY1:SPOFF")
    field(LNK5, "BL04I-VA-IMG-01:RLY1:HYST PP")
    field(SELM, "All")
}


record(mbbo, "BL04I-VA-IMG-01:RLY1:SETMODE") 
{
  field(DESC, "Relay Mode")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_mode(001,1) ty_40_5")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-01:RLY1:MODE PP")
}

record(mbbi, "BL04I-VA-IMG-01:RLY1:MODE") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_mode(001,1) ty_40_5")
  field(DESC, "Relay mode")
  field(SCAN, "Passive")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

record(mbbo, "BL04I-VA-IMG-01:RLY1:SETDIR") 
{
  field(DESC, "Relay Direction")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_direction(001,1) ty_40_5")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-01:RLY1:DIR PP")
}

record(mbbi, "BL04I-VA-IMG-01:RLY1:DIR") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_direction(001,1) ty_40_5")
  field(DESC, "Relay direction")
  field(SCAN, "Passive")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

#
#% archiver 10 Monitor
#% controldesk Valve Interlock readback
#
record(ai, "BL04I-VA-IMG-01:RLY1:SP") 
{
  field(DESC, "Valve I/L On")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getsp(001,1) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSP record just once
# at startup.
#
record(bo, "BL04I-VA-IMG-01:RLY1:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-IMG-01:RLY1:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-IMG-01:RLY1:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-IMG-01:RLY1:ILKSETSP:NOWRITE")
    field(LNK2, "BL04I-VA-IMG-01:RLY1:SETSP")
    field(LNK3, "BL04I-VA-IMG-01:RLY1:INITSETSPSDIS")
    field(SELM, "All")
}

record(ao, "BL04I-VA-IMG-01:RLY1:SETSP") 
{
  field(DESC, "Output Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setsp(001,1) ty_40_5")
  field(PREC, "1")
  #field(PINI, "YES")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(DRVH, "0.012")
  field(DRVL, "2.7e-10")
  field(DOL,  "1e-08")
  field(SDIS, "BL04I-VA-IMG-01:RLY1:ILKSETSP:NOWRITE")
  field(FLNK, "BL04I-VA-IMG-01:RLY1:SETSPFAN")
}
# -----------------------------------------------------------------------------------------

# On setting a new interlock relay setpoint, we need to update the 
# default hysteresis value and readback of the new setpoint from the 
# gauge controller.
#
record(fanout, "BL04I-VA-IMG-01:RLY1:SETSPFAN")
{
    field(DESC, "Relay Set SP fanout")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IMG-01:RLY1:HYST PP")
    field(LNK2, "BL04I-VA-IMG-01:RLY1:SETSPOFF PP")
    field(LNK3, "BL04I-VA-IMG-01:RLY1:SP PP")
    field(LNK4, "BL04I-VA-IMG-01:RLY1:SPOFF PP")
    field(LNK5, "BL04I-VA-IMG-01:RLY1:SELSPOFF PP")
}


record(ai, "BL04I-VA-IMG-01:RLY1:SPOFF") 
{
  field(DESC, "Valve I/L Off")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,1) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

#
# Set the required relay OFF setpoint (provides hysteresis)
# The assumed value will be the higher of either the default gauge hysteresis
# or the value given in the relay_off_level macro.
#
record(ao, "BL04I-VA-IMG-01:RLY1:SPOFFWRITE") 
{
  field(DESC, "Relay Hysteresis Write")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,1) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-IMG-01:RLY1:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-01:RLY1:SPOFF")
  field(OMSL, "closed_loop")
  field(DOL,  "BL04I-VA-IMG-01:RLY1:SELSPOFF")
}


record(ai, "BL04I-VA-IMG-01:RLY1:SETSPOFF") 
{
  field(DESC, "Valve I/L Off")
  field(DTYP, "Soft Channel")
  field(INP, "1.1e-06")
#  field(PINI, "YES")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-01:RLY1:SELSPOFF")
}

# The primary objective is to avoid tripping the MPS interlocks
# unecessarily. So ensure that the higher value is adopted of either the existing SPOFF value in the gauge controller
# or the given relay_off_level macro.
# The lowest permissible value is 1.1 x SPON.
record(sel, "BL04I-VA-IMG-01:RLY1:SELSPOFF")
{
    field(DESC, "Relay off setpoint select")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-01:RLY1:SPOFFNOMINAL PP MS")
    field(INPB, "BL04I-VA-IMG-01:RLY1:SETSPOFF PP)")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1000")
    field(LOPR, "1e-12")
    field(FLNK, "BL04I-VA-IMG-01:RLY1:SPOFFWRITE")
}

# :SPOFFNOMINAL calculates the nominal OFF setpoint
# which is simply 10% above :SP
#
record(calc, "BL04I-VA-IMG-01:RLY1:SPOFFNOMINAL") 
  {
  field(DESC, "Valve I/L Off nominal")
  field(INPA, "BL04I-VA-IMG-01:RLY1:SETSP")
  field(CALC, "(A*1.1)")
  }

record(bo, "BL04I-VA-IMG-01:RLY1:DIS") 
{
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol dissp(001,1) ty_40_5")
}

record(ao, "BL04I-VA-IMG-01:RLY1:SETHYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,1) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-IMG-01:RLY1:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-01:RLY1:HYST")
  #field(DOL, "1e-08")
}

record(ai, "BL04I-VA-IMG-01:RLY1:HYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,1) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
#  field(PINI, "YES")
#  field(FLNK, "BL04I-VA-IMG-01:RLY1:HYSTSEQ")
}

# When the controller hysteresis changes internally
# set the value in the SETSPOFF text entry box accordingly
record(seq, "BL04I-VA-IMG-01:RLY1:HYSTSEQ") 
{
  field(DESC, "Hysteresis Sequence")
  field(SELM, "All")
  field(DOL1, "BL04I-VA-IMG-01:RLY1:SPOFF")
  field(LNK1, "BL04I-VA-IMG-01:RLY1:SETSPOFF.VAL PP")
}


#--------------------------------------------------------------------------------
#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-IMG-01:RLY1:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
record(bi, "BL04I-VA-IMG-01:RLY1:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-01:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
#--------------------------------------------------------------------------------
  # mks937bRelays.db
#% macro, __doc__, Template database for an mks937b Multi-Sensor System Relays configuration. 
# When a relay is 'on' then the associated MPS interlock is 'good'.
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, address, Controller address (001 .. 253)
#
# optional substitutions:
#% macro, relay_number, The relay number (1..12).
#% macro, relay_desc,   The DESC field on the relay setpoint record 
#% macro, relay_off_desc,   The DESC field on the relay setpoint record 
#                       (appears as a label on the Img EDM screen).
#% macro, relay_level,  The desired relay setpoint value.
# vv================vv  New feature request May 2012.
#% macro, relay_off_level,  The desired relay off setpoint value.
#% macro, relay_drvh,   The DRVH field on relay setpoint records 
#                       (limits max value of relay setpoint)
#% macro, relay_drvl,   The DRVL field on relay setpoint records. 
#                       (limits min value of relay setpoint)
#% macro, relay_hopr,   The HOPR field on relay setpoint records 
#                       (high operator value - helps display set correct range).
#% macro, relay_lopr,   The LOPR field on relay setpoint records 
#                       (low operator value - helps display set correct range).
#% macro, relay_hihi,   The HIHI alarm field on the relay setpoint record.
#% macro, relay_lolo,   The LOLO alarm field on the relay setpoint record.
#% macro, relay_high,   The HIGH alarm field on the relay setpoint record.
#% macro, relay_low ,   The LOW alarm field on the relay setpoint record.
#% macro, ilk_write_access_pv ,   Link to the interlocks setpoint global write access record.
#
################################################################################


################################################################################
# Relay - Valve Interlock
#
#% archiver 10 Monitor
#

# Force processing of slow PP records 
record(fanout, "BL04I-VA-IMG-01:RLY2:FAN10S")
{
    field(DESC, "Relay 10s Scan fanout")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-IMG-01:RLY2:MODE")
    field(LNK2, "BL04I-VA-IMG-01:RLY2:DIR")
    field(LNK3, "BL04I-VA-IMG-01:RLY2:SP")
    field(LNK4, "BL04I-VA-IMG-01:RLY2:SPOFF")
    field(LNK5, "BL04I-VA-IMG-01:RLY2:HYST PP")
    field(SELM, "All")
}


record(mbbo, "BL04I-VA-IMG-01:RLY2:SETMODE") 
{
  field(DESC, "Relay Mode")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_mode(001,2) ty_40_5")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-01:RLY2:MODE PP")
}

record(mbbi, "BL04I-VA-IMG-01:RLY2:MODE") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_mode(001,2) ty_40_5")
  field(DESC, "Relay mode")
  field(SCAN, "Passive")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

record(mbbo, "BL04I-VA-IMG-01:RLY2:SETDIR") 
{
  field(DESC, "Relay Direction")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_direction(001,2) ty_40_5")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-01:RLY2:DIR PP")
}

record(mbbi, "BL04I-VA-IMG-01:RLY2:DIR") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_direction(001,2) ty_40_5")
  field(DESC, "Relay direction")
  field(SCAN, "Passive")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

#
#% archiver 10 Monitor
#% controldesk Valve Interlock readback
#
record(ai, "BL04I-VA-IMG-01:RLY2:SP") 
{
  field(DESC, "MPS I/L 1")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getsp(001,2) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSP record just once
# at startup.
#
record(bo, "BL04I-VA-IMG-01:RLY2:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-IMG-01:RLY2:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-IMG-01:RLY2:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-IMG-01:RLY2:ILKSETSP:NOWRITE")
    field(LNK2, "BL04I-VA-IMG-01:RLY2:SETSP")
    field(LNK3, "BL04I-VA-IMG-01:RLY2:INITSETSPSDIS")
    field(SELM, "All")
}

record(ao, "BL04I-VA-IMG-01:RLY2:SETSP") 
{
  field(DESC, "Output Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setsp(001,2) ty_40_5")
  field(PREC, "1")
  #field(PINI, "YES")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(DRVH, "0.012")
  field(DRVL, "2.7e-10")
  field(DOL,  "1e-07")
  field(SDIS, "BL04I-VA-IMG-01:RLY2:ILKSETSP:NOWRITE")
  field(FLNK, "BL04I-VA-IMG-01:RLY2:SETSPFAN")
}
# -----------------------------------------------------------------------------------------

# On setting a new interlock relay setpoint, we need to update the 
# default hysteresis value and readback of the new setpoint from the 
# gauge controller.
#
record(fanout, "BL04I-VA-IMG-01:RLY2:SETSPFAN")
{
    field(DESC, "Relay Set SP fanout")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IMG-01:RLY2:HYST PP")
    field(LNK2, "BL04I-VA-IMG-01:RLY2:SETSPOFF PP")
    field(LNK3, "BL04I-VA-IMG-01:RLY2:SP PP")
    field(LNK4, "BL04I-VA-IMG-01:RLY2:SPOFF PP")
    field(LNK5, "BL04I-VA-IMG-01:RLY2:SELSPOFF PP")
}


record(ai, "BL04I-VA-IMG-01:RLY2:SPOFF") 
{
  field(DESC, "")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,2) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

#
# Set the required relay OFF setpoint (provides hysteresis)
# The assumed value will be the higher of either the default gauge hysteresis
# or the value given in the relay_off_level macro.
#
record(ao, "BL04I-VA-IMG-01:RLY2:SPOFFWRITE") 
{
  field(DESC, "Relay Hysteresis Write")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,2) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-IMG-01:RLY2:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-01:RLY2:SPOFF")
  field(OMSL, "closed_loop")
  field(DOL,  "BL04I-VA-IMG-01:RLY2:SELSPOFF")
}


record(ai, "BL04I-VA-IMG-01:RLY2:SETSPOFF") 
{
  field(DESC, "")
  field(DTYP, "Soft Channel")
  field(INP, "0")
#  field(PINI, "YES")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-01:RLY2:SELSPOFF")
}

# The primary objective is to avoid tripping the MPS interlocks
# unecessarily. So ensure that the higher value is adopted of either the existing SPOFF value in the gauge controller
# or the given relay_off_level macro.
# The lowest permissible value is 1.1 x SPON.
record(sel, "BL04I-VA-IMG-01:RLY2:SELSPOFF")
{
    field(DESC, "Relay off setpoint select")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-01:RLY2:SPOFFNOMINAL PP MS")
    field(INPB, "BL04I-VA-IMG-01:RLY2:SETSPOFF PP)")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1000")
    field(LOPR, "1e-12")
    field(FLNK, "BL04I-VA-IMG-01:RLY2:SPOFFWRITE")
}

# :SPOFFNOMINAL calculates the nominal OFF setpoint
# which is simply 10% above :SP
#
record(calc, "BL04I-VA-IMG-01:RLY2:SPOFFNOMINAL") 
  {
  field(DESC, " nominal")
  field(INPA, "BL04I-VA-IMG-01:RLY2:SETSP")
  field(CALC, "(A*1.1)")
  }

record(bo, "BL04I-VA-IMG-01:RLY2:DIS") 
{
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol dissp(001,2) ty_40_5")
}

record(ao, "BL04I-VA-IMG-01:RLY2:SETHYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,2) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-IMG-01:RLY2:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-01:RLY2:HYST")
  #field(DOL, "1e-07")
}

record(ai, "BL04I-VA-IMG-01:RLY2:HYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,2) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
#  field(PINI, "YES")
#  field(FLNK, "BL04I-VA-IMG-01:RLY2:HYSTSEQ")
}

# When the controller hysteresis changes internally
# set the value in the SETSPOFF text entry box accordingly
record(seq, "BL04I-VA-IMG-01:RLY2:HYSTSEQ") 
{
  field(DESC, "Hysteresis Sequence")
  field(SELM, "All")
  field(DOL1, "BL04I-VA-IMG-01:RLY2:SPOFF")
  field(LNK1, "BL04I-VA-IMG-01:RLY2:SETSPOFF.VAL PP")
}


#--------------------------------------------------------------------------------
#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-IMG-01:RLY2:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
record(bi, "BL04I-VA-IMG-01:RLY2:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-01:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
#--------------------------------------------------------------------------------
  # mks937bRelays.db
#% macro, __doc__, Template database for an mks937b Multi-Sensor System Relays configuration. 
# When a relay is 'on' then the associated MPS interlock is 'good'.
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, address, Controller address (001 .. 253)
#
# optional substitutions:
#% macro, relay_number, The relay number (1..12).
#% macro, relay_desc,   The DESC field on the relay setpoint record 
#% macro, relay_off_desc,   The DESC field on the relay setpoint record 
#                       (appears as a label on the Img EDM screen).
#% macro, relay_level,  The desired relay setpoint value.
# vv================vv  New feature request May 2012.
#% macro, relay_off_level,  The desired relay off setpoint value.
#% macro, relay_drvh,   The DRVH field on relay setpoint records 
#                       (limits max value of relay setpoint)
#% macro, relay_drvl,   The DRVL field on relay setpoint records. 
#                       (limits min value of relay setpoint)
#% macro, relay_hopr,   The HOPR field on relay setpoint records 
#                       (high operator value - helps display set correct range).
#% macro, relay_lopr,   The LOPR field on relay setpoint records 
#                       (low operator value - helps display set correct range).
#% macro, relay_hihi,   The HIHI alarm field on the relay setpoint record.
#% macro, relay_lolo,   The LOLO alarm field on the relay setpoint record.
#% macro, relay_high,   The HIGH alarm field on the relay setpoint record.
#% macro, relay_low ,   The LOW alarm field on the relay setpoint record.
#% macro, ilk_write_access_pv ,   Link to the interlocks setpoint global write access record.
#
################################################################################


################################################################################
# Relay - Valve Interlock
#
#% archiver 10 Monitor
#

# Force processing of slow PP records 
record(fanout, "BL04I-VA-IMG-01:RLY3:FAN10S")
{
    field(DESC, "Relay 10s Scan fanout")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-IMG-01:RLY3:MODE")
    field(LNK2, "BL04I-VA-IMG-01:RLY3:DIR")
    field(LNK3, "BL04I-VA-IMG-01:RLY3:SP")
    field(LNK4, "BL04I-VA-IMG-01:RLY3:SPOFF")
    field(LNK5, "BL04I-VA-IMG-01:RLY3:HYST PP")
    field(SELM, "All")
}


record(mbbo, "BL04I-VA-IMG-01:RLY3:SETMODE") 
{
  field(DESC, "Relay Mode")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_mode(001,3) ty_40_5")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-01:RLY3:MODE PP")
}

record(mbbi, "BL04I-VA-IMG-01:RLY3:MODE") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_mode(001,3) ty_40_5")
  field(DESC, "Relay mode")
  field(SCAN, "Passive")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

record(mbbo, "BL04I-VA-IMG-01:RLY3:SETDIR") 
{
  field(DESC, "Relay Direction")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_direction(001,3) ty_40_5")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-01:RLY3:DIR PP")
}

record(mbbi, "BL04I-VA-IMG-01:RLY3:DIR") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_direction(001,3) ty_40_5")
  field(DESC, "Relay direction")
  field(SCAN, "Passive")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

#
#% archiver 10 Monitor
#% controldesk Valve Interlock readback
#
record(ai, "BL04I-VA-IMG-01:RLY3:SP") 
{
  field(DESC, "MPS I/L 2")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getsp(001,3) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSP record just once
# at startup.
#
record(bo, "BL04I-VA-IMG-01:RLY3:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-IMG-01:RLY3:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-IMG-01:RLY3:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-IMG-01:RLY3:ILKSETSP:NOWRITE")
    field(LNK2, "BL04I-VA-IMG-01:RLY3:SETSP")
    field(LNK3, "BL04I-VA-IMG-01:RLY3:INITSETSPSDIS")
    field(SELM, "All")
}

record(ao, "BL04I-VA-IMG-01:RLY3:SETSP") 
{
  field(DESC, "Output Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setsp(001,3) ty_40_5")
  field(PREC, "1")
  #field(PINI, "YES")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(DRVH, "0.012")
  field(DRVL, "2.7e-10")
  field(DOL,  "1e-07")
  field(SDIS, "BL04I-VA-IMG-01:RLY3:ILKSETSP:NOWRITE")
  field(FLNK, "BL04I-VA-IMG-01:RLY3:SETSPFAN")
}
# -----------------------------------------------------------------------------------------

# On setting a new interlock relay setpoint, we need to update the 
# default hysteresis value and readback of the new setpoint from the 
# gauge controller.
#
record(fanout, "BL04I-VA-IMG-01:RLY3:SETSPFAN")
{
    field(DESC, "Relay Set SP fanout")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IMG-01:RLY3:HYST PP")
    field(LNK2, "BL04I-VA-IMG-01:RLY3:SETSPOFF PP")
    field(LNK3, "BL04I-VA-IMG-01:RLY3:SP PP")
    field(LNK4, "BL04I-VA-IMG-01:RLY3:SPOFF PP")
    field(LNK5, "BL04I-VA-IMG-01:RLY3:SELSPOFF PP")
}


record(ai, "BL04I-VA-IMG-01:RLY3:SPOFF") 
{
  field(DESC, "")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,3) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

#
# Set the required relay OFF setpoint (provides hysteresis)
# The assumed value will be the higher of either the default gauge hysteresis
# or the value given in the relay_off_level macro.
#
record(ao, "BL04I-VA-IMG-01:RLY3:SPOFFWRITE") 
{
  field(DESC, "Relay Hysteresis Write")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,3) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-IMG-01:RLY3:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-01:RLY3:SPOFF")
  field(OMSL, "closed_loop")
  field(DOL,  "BL04I-VA-IMG-01:RLY3:SELSPOFF")
}


record(ai, "BL04I-VA-IMG-01:RLY3:SETSPOFF") 
{
  field(DESC, "")
  field(DTYP, "Soft Channel")
  field(INP, "0")
#  field(PINI, "YES")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-01:RLY3:SELSPOFF")
}

# The primary objective is to avoid tripping the MPS interlocks
# unecessarily. So ensure that the higher value is adopted of either the existing SPOFF value in the gauge controller
# or the given relay_off_level macro.
# The lowest permissible value is 1.1 x SPON.
record(sel, "BL04I-VA-IMG-01:RLY3:SELSPOFF")
{
    field(DESC, "Relay off setpoint select")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-01:RLY3:SPOFFNOMINAL PP MS")
    field(INPB, "BL04I-VA-IMG-01:RLY3:SETSPOFF PP)")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1000")
    field(LOPR, "1e-12")
    field(FLNK, "BL04I-VA-IMG-01:RLY3:SPOFFWRITE")
}

# :SPOFFNOMINAL calculates the nominal OFF setpoint
# which is simply 10% above :SP
#
record(calc, "BL04I-VA-IMG-01:RLY3:SPOFFNOMINAL") 
  {
  field(DESC, " nominal")
  field(INPA, "BL04I-VA-IMG-01:RLY3:SETSP")
  field(CALC, "(A*1.1)")
  }

record(bo, "BL04I-VA-IMG-01:RLY3:DIS") 
{
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol dissp(001,3) ty_40_5")
}

record(ao, "BL04I-VA-IMG-01:RLY3:SETHYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,3) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-IMG-01:RLY3:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-01:RLY3:HYST")
  #field(DOL, "1e-07")
}

record(ai, "BL04I-VA-IMG-01:RLY3:HYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,3) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
#  field(PINI, "YES")
#  field(FLNK, "BL04I-VA-IMG-01:RLY3:HYSTSEQ")
}

# When the controller hysteresis changes internally
# set the value in the SETSPOFF text entry box accordingly
record(seq, "BL04I-VA-IMG-01:RLY3:HYSTSEQ") 
{
  field(DESC, "Hysteresis Sequence")
  field(SELM, "All")
  field(DOL1, "BL04I-VA-IMG-01:RLY3:SPOFF")
  field(LNK1, "BL04I-VA-IMG-01:RLY3:SETSPOFF.VAL PP")
}


#--------------------------------------------------------------------------------
#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-IMG-01:RLY3:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
record(bi, "BL04I-VA-IMG-01:RLY3:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-01:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
#--------------------------------------------------------------------------------
  # mks937bRelays.db
#% macro, __doc__, Template database for an mks937b Multi-Sensor System Relays configuration. 
# When a relay is 'on' then the associated MPS interlock is 'good'.
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, address, Controller address (001 .. 253)
#
# optional substitutions:
#% macro, relay_number, The relay number (1..12).
#% macro, relay_desc,   The DESC field on the relay setpoint record 
#% macro, relay_off_desc,   The DESC field on the relay setpoint record 
#                       (appears as a label on the Img EDM screen).
#% macro, relay_level,  The desired relay setpoint value.
# vv================vv  New feature request May 2012.
#% macro, relay_off_level,  The desired relay off setpoint value.
#% macro, relay_drvh,   The DRVH field on relay setpoint records 
#                       (limits max value of relay setpoint)
#% macro, relay_drvl,   The DRVL field on relay setpoint records. 
#                       (limits min value of relay setpoint)
#% macro, relay_hopr,   The HOPR field on relay setpoint records 
#                       (high operator value - helps display set correct range).
#% macro, relay_lopr,   The LOPR field on relay setpoint records 
#                       (low operator value - helps display set correct range).
#% macro, relay_hihi,   The HIHI alarm field on the relay setpoint record.
#% macro, relay_lolo,   The LOLO alarm field on the relay setpoint record.
#% macro, relay_high,   The HIGH alarm field on the relay setpoint record.
#% macro, relay_low ,   The LOW alarm field on the relay setpoint record.
#% macro, ilk_write_access_pv ,   Link to the interlocks setpoint global write access record.
#
################################################################################


################################################################################
# Relay - Valve Interlock
#
#% archiver 10 Monitor
#

# Force processing of slow PP records 
record(fanout, "BL04I-VA-IMG-01:RLY4:FAN10S")
{
    field(DESC, "Relay 10s Scan fanout")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-IMG-01:RLY4:MODE")
    field(LNK2, "BL04I-VA-IMG-01:RLY4:DIR")
    field(LNK3, "BL04I-VA-IMG-01:RLY4:SP")
    field(LNK4, "BL04I-VA-IMG-01:RLY4:SPOFF")
    field(LNK5, "BL04I-VA-IMG-01:RLY4:HYST PP")
    field(SELM, "All")
}


record(mbbo, "BL04I-VA-IMG-01:RLY4:SETMODE") 
{
  field(DESC, "Relay Mode")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_mode(001,4) ty_40_5")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-01:RLY4:MODE PP")
}

record(mbbi, "BL04I-VA-IMG-01:RLY4:MODE") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_mode(001,4) ty_40_5")
  field(DESC, "Relay mode")
  field(SCAN, "Passive")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

record(mbbo, "BL04I-VA-IMG-01:RLY4:SETDIR") 
{
  field(DESC, "Relay Direction")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_direction(001,4) ty_40_5")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-01:RLY4:DIR PP")
}

record(mbbi, "BL04I-VA-IMG-01:RLY4:DIR") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_direction(001,4) ty_40_5")
  field(DESC, "Relay direction")
  field(SCAN, "Passive")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

#
#% archiver 10 Monitor
#% controldesk Valve Interlock readback
#
record(ai, "BL04I-VA-IMG-01:RLY4:SP") 
{
  field(DESC, "RGA I/L")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getsp(001,4) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSP record just once
# at startup.
#
record(bo, "BL04I-VA-IMG-01:RLY4:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-IMG-01:RLY4:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-IMG-01:RLY4:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-IMG-01:RLY4:ILKSETSP:NOWRITE")
    field(LNK2, "BL04I-VA-IMG-01:RLY4:SETSP")
    field(LNK3, "BL04I-VA-IMG-01:RLY4:INITSETSPSDIS")
    field(SELM, "All")
}

record(ao, "BL04I-VA-IMG-01:RLY4:SETSP") 
{
  field(DESC, "Output Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setsp(001,4) ty_40_5")
  field(PREC, "1")
  #field(PINI, "YES")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(DRVH, "0.012")
  field(DRVL, "2.7e-10")
  field(DOL,  "0.0001")
  field(SDIS, "BL04I-VA-IMG-01:RLY4:ILKSETSP:NOWRITE")
  field(FLNK, "BL04I-VA-IMG-01:RLY4:SETSPFAN")
}
# -----------------------------------------------------------------------------------------

# On setting a new interlock relay setpoint, we need to update the 
# default hysteresis value and readback of the new setpoint from the 
# gauge controller.
#
record(fanout, "BL04I-VA-IMG-01:RLY4:SETSPFAN")
{
    field(DESC, "Relay Set SP fanout")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IMG-01:RLY4:HYST PP")
    field(LNK2, "BL04I-VA-IMG-01:RLY4:SETSPOFF PP")
    field(LNK3, "BL04I-VA-IMG-01:RLY4:SP PP")
    field(LNK4, "BL04I-VA-IMG-01:RLY4:SPOFF PP")
    field(LNK5, "BL04I-VA-IMG-01:RLY4:SELSPOFF PP")
}


record(ai, "BL04I-VA-IMG-01:RLY4:SPOFF") 
{
  field(DESC, "")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,4) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

#
# Set the required relay OFF setpoint (provides hysteresis)
# The assumed value will be the higher of either the default gauge hysteresis
# or the value given in the relay_off_level macro.
#
record(ao, "BL04I-VA-IMG-01:RLY4:SPOFFWRITE") 
{
  field(DESC, "Relay Hysteresis Write")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,4) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-IMG-01:RLY4:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-01:RLY4:SPOFF")
  field(OMSL, "closed_loop")
  field(DOL,  "BL04I-VA-IMG-01:RLY4:SELSPOFF")
}


record(ai, "BL04I-VA-IMG-01:RLY4:SETSPOFF") 
{
  field(DESC, "")
  field(DTYP, "Soft Channel")
  field(INP, "0")
#  field(PINI, "YES")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-01:RLY4:SELSPOFF")
}

# The primary objective is to avoid tripping the MPS interlocks
# unecessarily. So ensure that the higher value is adopted of either the existing SPOFF value in the gauge controller
# or the given relay_off_level macro.
# The lowest permissible value is 1.1 x SPON.
record(sel, "BL04I-VA-IMG-01:RLY4:SELSPOFF")
{
    field(DESC, "Relay off setpoint select")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-01:RLY4:SPOFFNOMINAL PP MS")
    field(INPB, "BL04I-VA-IMG-01:RLY4:SETSPOFF PP)")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1000")
    field(LOPR, "1e-12")
    field(FLNK, "BL04I-VA-IMG-01:RLY4:SPOFFWRITE")
}

# :SPOFFNOMINAL calculates the nominal OFF setpoint
# which is simply 10% above :SP
#
record(calc, "BL04I-VA-IMG-01:RLY4:SPOFFNOMINAL") 
  {
  field(DESC, " nominal")
  field(INPA, "BL04I-VA-IMG-01:RLY4:SETSP")
  field(CALC, "(A*1.1)")
  }

record(bo, "BL04I-VA-IMG-01:RLY4:DIS") 
{
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol dissp(001,4) ty_40_5")
}

record(ao, "BL04I-VA-IMG-01:RLY4:SETHYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,4) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-IMG-01:RLY4:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-01:RLY4:HYST")
  #field(DOL, "0.0001")
}

record(ai, "BL04I-VA-IMG-01:RLY4:HYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,4) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
#  field(PINI, "YES")
#  field(FLNK, "BL04I-VA-IMG-01:RLY4:HYSTSEQ")
}

# When the controller hysteresis changes internally
# set the value in the SETSPOFF text entry box accordingly
record(seq, "BL04I-VA-IMG-01:RLY4:HYSTSEQ") 
{
  field(DESC, "Hysteresis Sequence")
  field(SELM, "All")
  field(DOL1, "BL04I-VA-IMG-01:RLY4:SPOFF")
  field(LNK1, "BL04I-VA-IMG-01:RLY4:SETSPOFF.VAL PP")
}


#--------------------------------------------------------------------------------
#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-IMG-01:RLY4:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
record(bi, "BL04I-VA-IMG-01:RLY4:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-01:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
#--------------------------------------------------------------------------------
  # mks937bRelays.db
#% macro, __doc__, Template database for an mks937b Multi-Sensor System Relays configuration. 
# When a relay is 'on' then the associated MPS interlock is 'good'.
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, address, Controller address (001 .. 253)
#
# optional substitutions:
#% macro, relay_number, The relay number (1..12).
#% macro, relay_desc,   The DESC field on the relay setpoint record 
#% macro, relay_off_desc,   The DESC field on the relay setpoint record 
#                       (appears as a label on the Img EDM screen).
#% macro, relay_level,  The desired relay setpoint value.
# vv================vv  New feature request May 2012.
#% macro, relay_off_level,  The desired relay off setpoint value.
#% macro, relay_drvh,   The DRVH field on relay setpoint records 
#                       (limits max value of relay setpoint)
#% macro, relay_drvl,   The DRVL field on relay setpoint records. 
#                       (limits min value of relay setpoint)
#% macro, relay_hopr,   The HOPR field on relay setpoint records 
#                       (high operator value - helps display set correct range).
#% macro, relay_lopr,   The LOPR field on relay setpoint records 
#                       (low operator value - helps display set correct range).
#% macro, relay_hihi,   The HIHI alarm field on the relay setpoint record.
#% macro, relay_lolo,   The LOLO alarm field on the relay setpoint record.
#% macro, relay_high,   The HIGH alarm field on the relay setpoint record.
#% macro, relay_low ,   The LOW alarm field on the relay setpoint record.
#% macro, ilk_write_access_pv ,   Link to the interlocks setpoint global write access record.
#
################################################################################


################################################################################
# Relay - Valve Interlock
#
#% archiver 10 Monitor
#

# Force processing of slow PP records 
record(fanout, "BL04I-VA-IMG-02:RLY1:FAN10S")
{
    field(DESC, "Relay 10s Scan fanout")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-IMG-02:RLY1:MODE")
    field(LNK2, "BL04I-VA-IMG-02:RLY1:DIR")
    field(LNK3, "BL04I-VA-IMG-02:RLY1:SP")
    field(LNK4, "BL04I-VA-IMG-02:RLY1:SPOFF")
    field(LNK5, "BL04I-VA-IMG-02:RLY1:HYST PP")
    field(SELM, "All")
}


record(mbbo, "BL04I-VA-IMG-02:RLY1:SETMODE") 
{
  field(DESC, "Relay Mode")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_mode(001,5) ty_40_5")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-02:RLY1:MODE PP")
}

record(mbbi, "BL04I-VA-IMG-02:RLY1:MODE") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_mode(001,5) ty_40_5")
  field(DESC, "Relay mode")
  field(SCAN, "Passive")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

record(mbbo, "BL04I-VA-IMG-02:RLY1:SETDIR") 
{
  field(DESC, "Relay Direction")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_direction(001,5) ty_40_5")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-02:RLY1:DIR PP")
}

record(mbbi, "BL04I-VA-IMG-02:RLY1:DIR") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_direction(001,5) ty_40_5")
  field(DESC, "Relay direction")
  field(SCAN, "Passive")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

#
#% archiver 10 Monitor
#% controldesk Valve Interlock readback
#
record(ai, "BL04I-VA-IMG-02:RLY1:SP") 
{
  field(DESC, "Valve I/L On")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getsp(001,5) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSP record just once
# at startup.
#
record(bo, "BL04I-VA-IMG-02:RLY1:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-IMG-02:RLY1:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-IMG-02:RLY1:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-IMG-02:RLY1:ILKSETSP:NOWRITE")
    field(LNK2, "BL04I-VA-IMG-02:RLY1:SETSP")
    field(LNK3, "BL04I-VA-IMG-02:RLY1:INITSETSPSDIS")
    field(SELM, "All")
}

record(ao, "BL04I-VA-IMG-02:RLY1:SETSP") 
{
  field(DESC, "Output Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setsp(001,5) ty_40_5")
  field(PREC, "1")
  #field(PINI, "YES")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(DRVH, "0.012")
  field(DRVL, "2.7e-10")
  field(DOL,  "1e-07")
  field(SDIS, "BL04I-VA-IMG-02:RLY1:ILKSETSP:NOWRITE")
  field(FLNK, "BL04I-VA-IMG-02:RLY1:SETSPFAN")
}
# -----------------------------------------------------------------------------------------

# On setting a new interlock relay setpoint, we need to update the 
# default hysteresis value and readback of the new setpoint from the 
# gauge controller.
#
record(fanout, "BL04I-VA-IMG-02:RLY1:SETSPFAN")
{
    field(DESC, "Relay Set SP fanout")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IMG-02:RLY1:HYST PP")
    field(LNK2, "BL04I-VA-IMG-02:RLY1:SETSPOFF PP")
    field(LNK3, "BL04I-VA-IMG-02:RLY1:SP PP")
    field(LNK4, "BL04I-VA-IMG-02:RLY1:SPOFF PP")
    field(LNK5, "BL04I-VA-IMG-02:RLY1:SELSPOFF PP")
}


record(ai, "BL04I-VA-IMG-02:RLY1:SPOFF") 
{
  field(DESC, "Valve I/L Off")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,5) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

#
# Set the required relay OFF setpoint (provides hysteresis)
# The assumed value will be the higher of either the default gauge hysteresis
# or the value given in the relay_off_level macro.
#
record(ao, "BL04I-VA-IMG-02:RLY1:SPOFFWRITE") 
{
  field(DESC, "Relay Hysteresis Write")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,5) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-IMG-02:RLY1:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-02:RLY1:SPOFF")
  field(OMSL, "closed_loop")
  field(DOL,  "BL04I-VA-IMG-02:RLY1:SELSPOFF")
}


record(ai, "BL04I-VA-IMG-02:RLY1:SETSPOFF") 
{
  field(DESC, "Valve I/L Off")
  field(DTYP, "Soft Channel")
  field(INP, "1.1e-06")
#  field(PINI, "YES")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-02:RLY1:SELSPOFF")
}

# The primary objective is to avoid tripping the MPS interlocks
# unecessarily. So ensure that the higher value is adopted of either the existing SPOFF value in the gauge controller
# or the given relay_off_level macro.
# The lowest permissible value is 1.1 x SPON.
record(sel, "BL04I-VA-IMG-02:RLY1:SELSPOFF")
{
    field(DESC, "Relay off setpoint select")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-02:RLY1:SPOFFNOMINAL PP MS")
    field(INPB, "BL04I-VA-IMG-02:RLY1:SETSPOFF PP)")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1000")
    field(LOPR, "1e-12")
    field(FLNK, "BL04I-VA-IMG-02:RLY1:SPOFFWRITE")
}

# :SPOFFNOMINAL calculates the nominal OFF setpoint
# which is simply 10% above :SP
#
record(calc, "BL04I-VA-IMG-02:RLY1:SPOFFNOMINAL") 
  {
  field(DESC, "Valve I/L Off nominal")
  field(INPA, "BL04I-VA-IMG-02:RLY1:SETSP")
  field(CALC, "(A*1.1)")
  }

record(bo, "BL04I-VA-IMG-02:RLY1:DIS") 
{
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol dissp(001,5) ty_40_5")
}

record(ao, "BL04I-VA-IMG-02:RLY1:SETHYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,5) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-IMG-02:RLY1:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-02:RLY1:HYST")
  #field(DOL, "1e-07")
}

record(ai, "BL04I-VA-IMG-02:RLY1:HYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,5) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
#  field(PINI, "YES")
#  field(FLNK, "BL04I-VA-IMG-02:RLY1:HYSTSEQ")
}

# When the controller hysteresis changes internally
# set the value in the SETSPOFF text entry box accordingly
record(seq, "BL04I-VA-IMG-02:RLY1:HYSTSEQ") 
{
  field(DESC, "Hysteresis Sequence")
  field(SELM, "All")
  field(DOL1, "BL04I-VA-IMG-02:RLY1:SPOFF")
  field(LNK1, "BL04I-VA-IMG-02:RLY1:SETSPOFF.VAL PP")
}


#--------------------------------------------------------------------------------
#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-IMG-02:RLY1:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
record(bi, "BL04I-VA-IMG-02:RLY1:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-02:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
#--------------------------------------------------------------------------------
  # mks937bRelays.db
#% macro, __doc__, Template database for an mks937b Multi-Sensor System Relays configuration. 
# When a relay is 'on' then the associated MPS interlock is 'good'.
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, address, Controller address (001 .. 253)
#
# optional substitutions:
#% macro, relay_number, The relay number (1..12).
#% macro, relay_desc,   The DESC field on the relay setpoint record 
#% macro, relay_off_desc,   The DESC field on the relay setpoint record 
#                       (appears as a label on the Img EDM screen).
#% macro, relay_level,  The desired relay setpoint value.
# vv================vv  New feature request May 2012.
#% macro, relay_off_level,  The desired relay off setpoint value.
#% macro, relay_drvh,   The DRVH field on relay setpoint records 
#                       (limits max value of relay setpoint)
#% macro, relay_drvl,   The DRVL field on relay setpoint records. 
#                       (limits min value of relay setpoint)
#% macro, relay_hopr,   The HOPR field on relay setpoint records 
#                       (high operator value - helps display set correct range).
#% macro, relay_lopr,   The LOPR field on relay setpoint records 
#                       (low operator value - helps display set correct range).
#% macro, relay_hihi,   The HIHI alarm field on the relay setpoint record.
#% macro, relay_lolo,   The LOLO alarm field on the relay setpoint record.
#% macro, relay_high,   The HIGH alarm field on the relay setpoint record.
#% macro, relay_low ,   The LOW alarm field on the relay setpoint record.
#% macro, ilk_write_access_pv ,   Link to the interlocks setpoint global write access record.
#
################################################################################


################################################################################
# Relay - Valve Interlock
#
#% archiver 10 Monitor
#

# Force processing of slow PP records 
record(fanout, "BL04I-VA-IMG-02:RLY2:FAN10S")
{
    field(DESC, "Relay 10s Scan fanout")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-IMG-02:RLY2:MODE")
    field(LNK2, "BL04I-VA-IMG-02:RLY2:DIR")
    field(LNK3, "BL04I-VA-IMG-02:RLY2:SP")
    field(LNK4, "BL04I-VA-IMG-02:RLY2:SPOFF")
    field(LNK5, "BL04I-VA-IMG-02:RLY2:HYST PP")
    field(SELM, "All")
}


record(mbbo, "BL04I-VA-IMG-02:RLY2:SETMODE") 
{
  field(DESC, "Relay Mode")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_mode(001,6) ty_40_5")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-02:RLY2:MODE PP")
}

record(mbbi, "BL04I-VA-IMG-02:RLY2:MODE") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_mode(001,6) ty_40_5")
  field(DESC, "Relay mode")
  field(SCAN, "Passive")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

record(mbbo, "BL04I-VA-IMG-02:RLY2:SETDIR") 
{
  field(DESC, "Relay Direction")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_direction(001,6) ty_40_5")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-02:RLY2:DIR PP")
}

record(mbbi, "BL04I-VA-IMG-02:RLY2:DIR") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_direction(001,6) ty_40_5")
  field(DESC, "Relay direction")
  field(SCAN, "Passive")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

#
#% archiver 10 Monitor
#% controldesk Valve Interlock readback
#
record(ai, "BL04I-VA-IMG-02:RLY2:SP") 
{
  field(DESC, "MPS I/L 1")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getsp(001,6) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSP record just once
# at startup.
#
record(bo, "BL04I-VA-IMG-02:RLY2:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-IMG-02:RLY2:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-IMG-02:RLY2:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-IMG-02:RLY2:ILKSETSP:NOWRITE")
    field(LNK2, "BL04I-VA-IMG-02:RLY2:SETSP")
    field(LNK3, "BL04I-VA-IMG-02:RLY2:INITSETSPSDIS")
    field(SELM, "All")
}

record(ao, "BL04I-VA-IMG-02:RLY2:SETSP") 
{
  field(DESC, "Output Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setsp(001,6) ty_40_5")
  field(PREC, "1")
  #field(PINI, "YES")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(DRVH, "0.012")
  field(DRVL, "2.7e-10")
  field(DOL,  "1e-07")
  field(SDIS, "BL04I-VA-IMG-02:RLY2:ILKSETSP:NOWRITE")
  field(FLNK, "BL04I-VA-IMG-02:RLY2:SETSPFAN")
}
# -----------------------------------------------------------------------------------------

# On setting a new interlock relay setpoint, we need to update the 
# default hysteresis value and readback of the new setpoint from the 
# gauge controller.
#
record(fanout, "BL04I-VA-IMG-02:RLY2:SETSPFAN")
{
    field(DESC, "Relay Set SP fanout")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IMG-02:RLY2:HYST PP")
    field(LNK2, "BL04I-VA-IMG-02:RLY2:SETSPOFF PP")
    field(LNK3, "BL04I-VA-IMG-02:RLY2:SP PP")
    field(LNK4, "BL04I-VA-IMG-02:RLY2:SPOFF PP")
    field(LNK5, "BL04I-VA-IMG-02:RLY2:SELSPOFF PP")
}


record(ai, "BL04I-VA-IMG-02:RLY2:SPOFF") 
{
  field(DESC, "")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,6) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

#
# Set the required relay OFF setpoint (provides hysteresis)
# The assumed value will be the higher of either the default gauge hysteresis
# or the value given in the relay_off_level macro.
#
record(ao, "BL04I-VA-IMG-02:RLY2:SPOFFWRITE") 
{
  field(DESC, "Relay Hysteresis Write")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,6) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-IMG-02:RLY2:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-02:RLY2:SPOFF")
  field(OMSL, "closed_loop")
  field(DOL,  "BL04I-VA-IMG-02:RLY2:SELSPOFF")
}


record(ai, "BL04I-VA-IMG-02:RLY2:SETSPOFF") 
{
  field(DESC, "")
  field(DTYP, "Soft Channel")
  field(INP, "0")
#  field(PINI, "YES")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-02:RLY2:SELSPOFF")
}

# The primary objective is to avoid tripping the MPS interlocks
# unecessarily. So ensure that the higher value is adopted of either the existing SPOFF value in the gauge controller
# or the given relay_off_level macro.
# The lowest permissible value is 1.1 x SPON.
record(sel, "BL04I-VA-IMG-02:RLY2:SELSPOFF")
{
    field(DESC, "Relay off setpoint select")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-02:RLY2:SPOFFNOMINAL PP MS")
    field(INPB, "BL04I-VA-IMG-02:RLY2:SETSPOFF PP)")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1000")
    field(LOPR, "1e-12")
    field(FLNK, "BL04I-VA-IMG-02:RLY2:SPOFFWRITE")
}

# :SPOFFNOMINAL calculates the nominal OFF setpoint
# which is simply 10% above :SP
#
record(calc, "BL04I-VA-IMG-02:RLY2:SPOFFNOMINAL") 
  {
  field(DESC, " nominal")
  field(INPA, "BL04I-VA-IMG-02:RLY2:SETSP")
  field(CALC, "(A*1.1)")
  }

record(bo, "BL04I-VA-IMG-02:RLY2:DIS") 
{
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol dissp(001,6) ty_40_5")
}

record(ao, "BL04I-VA-IMG-02:RLY2:SETHYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,6) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-IMG-02:RLY2:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-02:RLY2:HYST")
  #field(DOL, "1e-07")
}

record(ai, "BL04I-VA-IMG-02:RLY2:HYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,6) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
#  field(PINI, "YES")
#  field(FLNK, "BL04I-VA-IMG-02:RLY2:HYSTSEQ")
}

# When the controller hysteresis changes internally
# set the value in the SETSPOFF text entry box accordingly
record(seq, "BL04I-VA-IMG-02:RLY2:HYSTSEQ") 
{
  field(DESC, "Hysteresis Sequence")
  field(SELM, "All")
  field(DOL1, "BL04I-VA-IMG-02:RLY2:SPOFF")
  field(LNK1, "BL04I-VA-IMG-02:RLY2:SETSPOFF.VAL PP")
}


#--------------------------------------------------------------------------------
#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-IMG-02:RLY2:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
record(bi, "BL04I-VA-IMG-02:RLY2:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-02:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
#--------------------------------------------------------------------------------
  # mks937bRelays.db
#% macro, __doc__, Template database for an mks937b Multi-Sensor System Relays configuration. 
# When a relay is 'on' then the associated MPS interlock is 'good'.
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, address, Controller address (001 .. 253)
#
# optional substitutions:
#% macro, relay_number, The relay number (1..12).
#% macro, relay_desc,   The DESC field on the relay setpoint record 
#% macro, relay_off_desc,   The DESC field on the relay setpoint record 
#                       (appears as a label on the Img EDM screen).
#% macro, relay_level,  The desired relay setpoint value.
# vv================vv  New feature request May 2012.
#% macro, relay_off_level,  The desired relay off setpoint value.
#% macro, relay_drvh,   The DRVH field on relay setpoint records 
#                       (limits max value of relay setpoint)
#% macro, relay_drvl,   The DRVL field on relay setpoint records. 
#                       (limits min value of relay setpoint)
#% macro, relay_hopr,   The HOPR field on relay setpoint records 
#                       (high operator value - helps display set correct range).
#% macro, relay_lopr,   The LOPR field on relay setpoint records 
#                       (low operator value - helps display set correct range).
#% macro, relay_hihi,   The HIHI alarm field on the relay setpoint record.
#% macro, relay_lolo,   The LOLO alarm field on the relay setpoint record.
#% macro, relay_high,   The HIGH alarm field on the relay setpoint record.
#% macro, relay_low ,   The LOW alarm field on the relay setpoint record.
#% macro, ilk_write_access_pv ,   Link to the interlocks setpoint global write access record.
#
################################################################################


################################################################################
# Relay - Valve Interlock
#
#% archiver 10 Monitor
#

# Force processing of slow PP records 
record(fanout, "BL04I-VA-IMG-02:RLY3:FAN10S")
{
    field(DESC, "Relay 10s Scan fanout")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-IMG-02:RLY3:MODE")
    field(LNK2, "BL04I-VA-IMG-02:RLY3:DIR")
    field(LNK3, "BL04I-VA-IMG-02:RLY3:SP")
    field(LNK4, "BL04I-VA-IMG-02:RLY3:SPOFF")
    field(LNK5, "BL04I-VA-IMG-02:RLY3:HYST PP")
    field(SELM, "All")
}


record(mbbo, "BL04I-VA-IMG-02:RLY3:SETMODE") 
{
  field(DESC, "Relay Mode")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_mode(001,7) ty_40_5")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-02:RLY3:MODE PP")
}

record(mbbi, "BL04I-VA-IMG-02:RLY3:MODE") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_mode(001,7) ty_40_5")
  field(DESC, "Relay mode")
  field(SCAN, "Passive")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

record(mbbo, "BL04I-VA-IMG-02:RLY3:SETDIR") 
{
  field(DESC, "Relay Direction")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_direction(001,7) ty_40_5")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-02:RLY3:DIR PP")
}

record(mbbi, "BL04I-VA-IMG-02:RLY3:DIR") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_direction(001,7) ty_40_5")
  field(DESC, "Relay direction")
  field(SCAN, "Passive")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

#
#% archiver 10 Monitor
#% controldesk Valve Interlock readback
#
record(ai, "BL04I-VA-IMG-02:RLY3:SP") 
{
  field(DESC, "MPS I/L 2")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getsp(001,7) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSP record just once
# at startup.
#
record(bo, "BL04I-VA-IMG-02:RLY3:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-IMG-02:RLY3:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-IMG-02:RLY3:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-IMG-02:RLY3:ILKSETSP:NOWRITE")
    field(LNK2, "BL04I-VA-IMG-02:RLY3:SETSP")
    field(LNK3, "BL04I-VA-IMG-02:RLY3:INITSETSPSDIS")
    field(SELM, "All")
}

record(ao, "BL04I-VA-IMG-02:RLY3:SETSP") 
{
  field(DESC, "Output Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setsp(001,7) ty_40_5")
  field(PREC, "1")
  #field(PINI, "YES")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(DRVH, "0.012")
  field(DRVL, "2.7e-10")
  field(DOL,  "1e-07")
  field(SDIS, "BL04I-VA-IMG-02:RLY3:ILKSETSP:NOWRITE")
  field(FLNK, "BL04I-VA-IMG-02:RLY3:SETSPFAN")
}
# -----------------------------------------------------------------------------------------

# On setting a new interlock relay setpoint, we need to update the 
# default hysteresis value and readback of the new setpoint from the 
# gauge controller.
#
record(fanout, "BL04I-VA-IMG-02:RLY3:SETSPFAN")
{
    field(DESC, "Relay Set SP fanout")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IMG-02:RLY3:HYST PP")
    field(LNK2, "BL04I-VA-IMG-02:RLY3:SETSPOFF PP")
    field(LNK3, "BL04I-VA-IMG-02:RLY3:SP PP")
    field(LNK4, "BL04I-VA-IMG-02:RLY3:SPOFF PP")
    field(LNK5, "BL04I-VA-IMG-02:RLY3:SELSPOFF PP")
}


record(ai, "BL04I-VA-IMG-02:RLY3:SPOFF") 
{
  field(DESC, "")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,7) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

#
# Set the required relay OFF setpoint (provides hysteresis)
# The assumed value will be the higher of either the default gauge hysteresis
# or the value given in the relay_off_level macro.
#
record(ao, "BL04I-VA-IMG-02:RLY3:SPOFFWRITE") 
{
  field(DESC, "Relay Hysteresis Write")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,7) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-IMG-02:RLY3:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-02:RLY3:SPOFF")
  field(OMSL, "closed_loop")
  field(DOL,  "BL04I-VA-IMG-02:RLY3:SELSPOFF")
}


record(ai, "BL04I-VA-IMG-02:RLY3:SETSPOFF") 
{
  field(DESC, "")
  field(DTYP, "Soft Channel")
  field(INP, "0")
#  field(PINI, "YES")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-02:RLY3:SELSPOFF")
}

# The primary objective is to avoid tripping the MPS interlocks
# unecessarily. So ensure that the higher value is adopted of either the existing SPOFF value in the gauge controller
# or the given relay_off_level macro.
# The lowest permissible value is 1.1 x SPON.
record(sel, "BL04I-VA-IMG-02:RLY3:SELSPOFF")
{
    field(DESC, "Relay off setpoint select")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-02:RLY3:SPOFFNOMINAL PP MS")
    field(INPB, "BL04I-VA-IMG-02:RLY3:SETSPOFF PP)")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1000")
    field(LOPR, "1e-12")
    field(FLNK, "BL04I-VA-IMG-02:RLY3:SPOFFWRITE")
}

# :SPOFFNOMINAL calculates the nominal OFF setpoint
# which is simply 10% above :SP
#
record(calc, "BL04I-VA-IMG-02:RLY3:SPOFFNOMINAL") 
  {
  field(DESC, " nominal")
  field(INPA, "BL04I-VA-IMG-02:RLY3:SETSP")
  field(CALC, "(A*1.1)")
  }

record(bo, "BL04I-VA-IMG-02:RLY3:DIS") 
{
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol dissp(001,7) ty_40_5")
}

record(ao, "BL04I-VA-IMG-02:RLY3:SETHYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,7) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-IMG-02:RLY3:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-02:RLY3:HYST")
  #field(DOL, "1e-07")
}

record(ai, "BL04I-VA-IMG-02:RLY3:HYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,7) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
#  field(PINI, "YES")
#  field(FLNK, "BL04I-VA-IMG-02:RLY3:HYSTSEQ")
}

# When the controller hysteresis changes internally
# set the value in the SETSPOFF text entry box accordingly
record(seq, "BL04I-VA-IMG-02:RLY3:HYSTSEQ") 
{
  field(DESC, "Hysteresis Sequence")
  field(SELM, "All")
  field(DOL1, "BL04I-VA-IMG-02:RLY3:SPOFF")
  field(LNK1, "BL04I-VA-IMG-02:RLY3:SETSPOFF.VAL PP")
}


#--------------------------------------------------------------------------------
#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-IMG-02:RLY3:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
record(bi, "BL04I-VA-IMG-02:RLY3:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-02:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
#--------------------------------------------------------------------------------
  # mks937bRelays.db
#% macro, __doc__, Template database for an mks937b Multi-Sensor System Relays configuration. 
# When a relay is 'on' then the associated MPS interlock is 'good'.
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, address, Controller address (001 .. 253)
#
# optional substitutions:
#% macro, relay_number, The relay number (1..12).
#% macro, relay_desc,   The DESC field on the relay setpoint record 
#% macro, relay_off_desc,   The DESC field on the relay setpoint record 
#                       (appears as a label on the Img EDM screen).
#% macro, relay_level,  The desired relay setpoint value.
# vv================vv  New feature request May 2012.
#% macro, relay_off_level,  The desired relay off setpoint value.
#% macro, relay_drvh,   The DRVH field on relay setpoint records 
#                       (limits max value of relay setpoint)
#% macro, relay_drvl,   The DRVL field on relay setpoint records. 
#                       (limits min value of relay setpoint)
#% macro, relay_hopr,   The HOPR field on relay setpoint records 
#                       (high operator value - helps display set correct range).
#% macro, relay_lopr,   The LOPR field on relay setpoint records 
#                       (low operator value - helps display set correct range).
#% macro, relay_hihi,   The HIHI alarm field on the relay setpoint record.
#% macro, relay_lolo,   The LOLO alarm field on the relay setpoint record.
#% macro, relay_high,   The HIGH alarm field on the relay setpoint record.
#% macro, relay_low ,   The LOW alarm field on the relay setpoint record.
#% macro, ilk_write_access_pv ,   Link to the interlocks setpoint global write access record.
#
################################################################################


################################################################################
# Relay - Valve Interlock
#
#% archiver 10 Monitor
#

# Force processing of slow PP records 
record(fanout, "BL04I-VA-IMG-02:RLY4:FAN10S")
{
    field(DESC, "Relay 10s Scan fanout")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-IMG-02:RLY4:MODE")
    field(LNK2, "BL04I-VA-IMG-02:RLY4:DIR")
    field(LNK3, "BL04I-VA-IMG-02:RLY4:SP")
    field(LNK4, "BL04I-VA-IMG-02:RLY4:SPOFF")
    field(LNK5, "BL04I-VA-IMG-02:RLY4:HYST PP")
    field(SELM, "All")
}


record(mbbo, "BL04I-VA-IMG-02:RLY4:SETMODE") 
{
  field(DESC, "Relay Mode")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_mode(001,8) ty_40_5")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-02:RLY4:MODE PP")
}

record(mbbi, "BL04I-VA-IMG-02:RLY4:MODE") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_mode(001,8) ty_40_5")
  field(DESC, "Relay mode")
  field(SCAN, "Passive")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

record(mbbo, "BL04I-VA-IMG-02:RLY4:SETDIR") 
{
  field(DESC, "Relay Direction")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_direction(001,8) ty_40_5")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-IMG-02:RLY4:DIR PP")
}

record(mbbi, "BL04I-VA-IMG-02:RLY4:DIR") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_direction(001,8) ty_40_5")
  field(DESC, "Relay direction")
  field(SCAN, "Passive")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

#
#% archiver 10 Monitor
#% controldesk Valve Interlock readback
#
record(ai, "BL04I-VA-IMG-02:RLY4:SP") 
{
  field(DESC, "RGA I/L")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getsp(001,8) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSP record just once
# at startup.
#
record(bo, "BL04I-VA-IMG-02:RLY4:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-IMG-02:RLY4:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-IMG-02:RLY4:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-IMG-02:RLY4:ILKSETSP:NOWRITE")
    field(LNK2, "BL04I-VA-IMG-02:RLY4:SETSP")
    field(LNK3, "BL04I-VA-IMG-02:RLY4:INITSETSPSDIS")
    field(SELM, "All")
}

record(ao, "BL04I-VA-IMG-02:RLY4:SETSP") 
{
  field(DESC, "Output Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setsp(001,8) ty_40_5")
  field(PREC, "1")
  #field(PINI, "YES")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(DRVH, "0.012")
  field(DRVL, "2.7e-10")
  field(DOL,  "0.0001")
  field(SDIS, "BL04I-VA-IMG-02:RLY4:ILKSETSP:NOWRITE")
  field(FLNK, "BL04I-VA-IMG-02:RLY4:SETSPFAN")
}
# -----------------------------------------------------------------------------------------

# On setting a new interlock relay setpoint, we need to update the 
# default hysteresis value and readback of the new setpoint from the 
# gauge controller.
#
record(fanout, "BL04I-VA-IMG-02:RLY4:SETSPFAN")
{
    field(DESC, "Relay Set SP fanout")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IMG-02:RLY4:HYST PP")
    field(LNK2, "BL04I-VA-IMG-02:RLY4:SETSPOFF PP")
    field(LNK3, "BL04I-VA-IMG-02:RLY4:SP PP")
    field(LNK4, "BL04I-VA-IMG-02:RLY4:SPOFF PP")
    field(LNK5, "BL04I-VA-IMG-02:RLY4:SELSPOFF PP")
}


record(ai, "BL04I-VA-IMG-02:RLY4:SPOFF") 
{
  field(DESC, "")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,8) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

#
# Set the required relay OFF setpoint (provides hysteresis)
# The assumed value will be the higher of either the default gauge hysteresis
# or the value given in the relay_off_level macro.
#
record(ao, "BL04I-VA-IMG-02:RLY4:SPOFFWRITE") 
{
  field(DESC, "Relay Hysteresis Write")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,8) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-IMG-02:RLY4:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-02:RLY4:SPOFF")
  field(OMSL, "closed_loop")
  field(DOL,  "BL04I-VA-IMG-02:RLY4:SELSPOFF")
}


record(ai, "BL04I-VA-IMG-02:RLY4:SETSPOFF") 
{
  field(DESC, "")
  field(DTYP, "Soft Channel")
  field(INP, "0")
#  field(PINI, "YES")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-02:RLY4:SELSPOFF")
}

# The primary objective is to avoid tripping the MPS interlocks
# unecessarily. So ensure that the higher value is adopted of either the existing SPOFF value in the gauge controller
# or the given relay_off_level macro.
# The lowest permissible value is 1.1 x SPON.
record(sel, "BL04I-VA-IMG-02:RLY4:SELSPOFF")
{
    field(DESC, "Relay off setpoint select")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IMG-02:RLY4:SPOFFNOMINAL PP MS")
    field(INPB, "BL04I-VA-IMG-02:RLY4:SETSPOFF PP)")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1000")
    field(LOPR, "1e-12")
    field(FLNK, "BL04I-VA-IMG-02:RLY4:SPOFFWRITE")
}

# :SPOFFNOMINAL calculates the nominal OFF setpoint
# which is simply 10% above :SP
#
record(calc, "BL04I-VA-IMG-02:RLY4:SPOFFNOMINAL") 
  {
  field(DESC, " nominal")
  field(INPA, "BL04I-VA-IMG-02:RLY4:SETSP")
  field(CALC, "(A*1.1)")
  }

record(bo, "BL04I-VA-IMG-02:RLY4:DIS") 
{
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol dissp(001,8) ty_40_5")
}

record(ao, "BL04I-VA-IMG-02:RLY4:SETHYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,8) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-IMG-02:RLY4:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-IMG-02:RLY4:HYST")
  #field(DOL, "0.0001")
}

record(ai, "BL04I-VA-IMG-02:RLY4:HYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,8) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
#  field(PINI, "YES")
#  field(FLNK, "BL04I-VA-IMG-02:RLY4:HYSTSEQ")
}

# When the controller hysteresis changes internally
# set the value in the SETSPOFF text entry box accordingly
record(seq, "BL04I-VA-IMG-02:RLY4:HYSTSEQ") 
{
  field(DESC, "Hysteresis Sequence")
  field(SELM, "All")
  field(DOL1, "BL04I-VA-IMG-02:RLY4:SPOFF")
  field(LNK1, "BL04I-VA-IMG-02:RLY4:SETSPOFF.VAL PP")
}


#--------------------------------------------------------------------------------
#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-IMG-02:RLY4:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
record(bi, "BL04I-VA-IMG-02:RLY4:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-02:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
#--------------------------------------------------------------------------------
  # mks937bRelays.db
#% macro, __doc__, Template database for an mks937b Multi-Sensor System Relays configuration. 
# When a relay is 'on' then the associated MPS interlock is 'good'.
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, address, Controller address (001 .. 253)
#
# optional substitutions:
#% macro, relay_number, The relay number (1..12).
#% macro, relay_desc,   The DESC field on the relay setpoint record 
#% macro, relay_off_desc,   The DESC field on the relay setpoint record 
#                       (appears as a label on the Img EDM screen).
#% macro, relay_level,  The desired relay setpoint value.
# vv================vv  New feature request May 2012.
#% macro, relay_off_level,  The desired relay off setpoint value.
#% macro, relay_drvh,   The DRVH field on relay setpoint records 
#                       (limits max value of relay setpoint)
#% macro, relay_drvl,   The DRVL field on relay setpoint records. 
#                       (limits min value of relay setpoint)
#% macro, relay_hopr,   The HOPR field on relay setpoint records 
#                       (high operator value - helps display set correct range).
#% macro, relay_lopr,   The LOPR field on relay setpoint records 
#                       (low operator value - helps display set correct range).
#% macro, relay_hihi,   The HIHI alarm field on the relay setpoint record.
#% macro, relay_lolo,   The LOLO alarm field on the relay setpoint record.
#% macro, relay_high,   The HIGH alarm field on the relay setpoint record.
#% macro, relay_low ,   The LOW alarm field on the relay setpoint record.
#% macro, ilk_write_access_pv ,   Link to the interlocks setpoint global write access record.
#
################################################################################


################################################################################
# Relay - Valve Interlock
#
#% archiver 10 Monitor
#

# Force processing of slow PP records 
record(fanout, "BL04I-VA-PIRG-01:RLY1:FAN10S")
{
    field(DESC, "Relay 10s Scan fanout")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-PIRG-01:RLY1:MODE")
    field(LNK2, "BL04I-VA-PIRG-01:RLY1:DIR")
    field(LNK3, "BL04I-VA-PIRG-01:RLY1:SP")
    field(LNK4, "BL04I-VA-PIRG-01:RLY1:SPOFF")
    field(LNK5, "BL04I-VA-PIRG-01:RLY1:HYST PP")
    field(SELM, "All")
}


record(mbbo, "BL04I-VA-PIRG-01:RLY1:SETMODE") 
{
  field(DESC, "Relay Mode")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_mode(001,9) ty_40_5")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-PIRG-01:RLY1:MODE PP")
}

record(mbbi, "BL04I-VA-PIRG-01:RLY1:MODE") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_mode(001,9) ty_40_5")
  field(DESC, "Relay mode")
  field(SCAN, "Passive")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

record(mbbo, "BL04I-VA-PIRG-01:RLY1:SETDIR") 
{
  field(DESC, "Relay Direction")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_direction(001,9) ty_40_5")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-PIRG-01:RLY1:DIR PP")
}

record(mbbi, "BL04I-VA-PIRG-01:RLY1:DIR") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_direction(001,9) ty_40_5")
  field(DESC, "Relay direction")
  field(SCAN, "Passive")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

#
#% archiver 10 Monitor
#% controldesk Valve Interlock readback
#
record(ai, "BL04I-VA-PIRG-01:RLY1:SP") 
{
  field(DESC, "Ion Pump I/L On")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getsp(001,9) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSP record just once
# at startup.
#
record(bo, "BL04I-VA-PIRG-01:RLY1:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-PIRG-01:RLY1:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-PIRG-01:RLY1:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-PIRG-01:RLY1:ILKSETSP:NOWRITE")
    field(LNK2, "BL04I-VA-PIRG-01:RLY1:SETSP")
    field(LNK3, "BL04I-VA-PIRG-01:RLY1:INITSETSPSDIS")
    field(SELM, "All")
}

record(ao, "BL04I-VA-PIRG-01:RLY1:SETSP") 
{
  field(DESC, "Output Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setsp(001,9) ty_40_5")
  field(PREC, "1")
  #field(PINI, "YES")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(DRVH, "0.012")
  field(DRVL, "2.7e-10")
  field(DOL,  "0.01")
  field(SDIS, "BL04I-VA-PIRG-01:RLY1:ILKSETSP:NOWRITE")
  field(FLNK, "BL04I-VA-PIRG-01:RLY1:SETSPFAN")
}
# -----------------------------------------------------------------------------------------

# On setting a new interlock relay setpoint, we need to update the 
# default hysteresis value and readback of the new setpoint from the 
# gauge controller.
#
record(fanout, "BL04I-VA-PIRG-01:RLY1:SETSPFAN")
{
    field(DESC, "Relay Set SP fanout")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-PIRG-01:RLY1:HYST PP")
    field(LNK2, "BL04I-VA-PIRG-01:RLY1:SETSPOFF PP")
    field(LNK3, "BL04I-VA-PIRG-01:RLY1:SP PP")
    field(LNK4, "BL04I-VA-PIRG-01:RLY1:SPOFF PP")
    field(LNK5, "BL04I-VA-PIRG-01:RLY1:SELSPOFF PP")
}


record(ai, "BL04I-VA-PIRG-01:RLY1:SPOFF") 
{
  field(DESC, "Ion Pump I/L")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,9) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

#
# Set the required relay OFF setpoint (provides hysteresis)
# The assumed value will be the higher of either the default gauge hysteresis
# or the value given in the relay_off_level macro.
#
record(ao, "BL04I-VA-PIRG-01:RLY1:SPOFFWRITE") 
{
  field(DESC, "Relay Hysteresis Write")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,9) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-PIRG-01:RLY1:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-PIRG-01:RLY1:SPOFF")
  field(OMSL, "closed_loop")
  field(DOL,  "BL04I-VA-PIRG-01:RLY1:SELSPOFF")
}


record(ai, "BL04I-VA-PIRG-01:RLY1:SETSPOFF") 
{
  field(DESC, "Ion Pump I/L")
  field(DTYP, "Soft Channel")
  field(INP, "0")
#  field(PINI, "YES")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-PIRG-01:RLY1:SELSPOFF")
}

# The primary objective is to avoid tripping the MPS interlocks
# unecessarily. So ensure that the higher value is adopted of either the existing SPOFF value in the gauge controller
# or the given relay_off_level macro.
# The lowest permissible value is 1.1 x SPON.
record(sel, "BL04I-VA-PIRG-01:RLY1:SELSPOFF")
{
    field(DESC, "Relay off setpoint select")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-PIRG-01:RLY1:SPOFFNOMINAL PP MS")
    field(INPB, "BL04I-VA-PIRG-01:RLY1:SETSPOFF PP)")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1000")
    field(LOPR, "1e-12")
    field(FLNK, "BL04I-VA-PIRG-01:RLY1:SPOFFWRITE")
}

# :SPOFFNOMINAL calculates the nominal OFF setpoint
# which is simply 10% above :SP
#
record(calc, "BL04I-VA-PIRG-01:RLY1:SPOFFNOMINAL") 
  {
  field(DESC, "Ion Pump I/L nominal")
  field(INPA, "BL04I-VA-PIRG-01:RLY1:SETSP")
  field(CALC, "(A*1.1)")
  }

record(bo, "BL04I-VA-PIRG-01:RLY1:DIS") 
{
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol dissp(001,9) ty_40_5")
}

record(ao, "BL04I-VA-PIRG-01:RLY1:SETHYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,9) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-PIRG-01:RLY1:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-PIRG-01:RLY1:HYST")
  #field(DOL, "0.01")
}

record(ai, "BL04I-VA-PIRG-01:RLY1:HYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,9) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
#  field(PINI, "YES")
#  field(FLNK, "BL04I-VA-PIRG-01:RLY1:HYSTSEQ")
}

# When the controller hysteresis changes internally
# set the value in the SETSPOFF text entry box accordingly
record(seq, "BL04I-VA-PIRG-01:RLY1:HYSTSEQ") 
{
  field(DESC, "Hysteresis Sequence")
  field(SELM, "All")
  field(DOL1, "BL04I-VA-PIRG-01:RLY1:SPOFF")
  field(LNK1, "BL04I-VA-PIRG-01:RLY1:SETSPOFF.VAL PP")
}


#--------------------------------------------------------------------------------
#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-PIRG-01:RLY1:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
record(bi, "BL04I-VA-PIRG-01:RLY1:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-01:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
#--------------------------------------------------------------------------------
  # mks937bRelays.db
#% macro, __doc__, Template database for an mks937b Multi-Sensor System Relays configuration. 
# When a relay is 'on' then the associated MPS interlock is 'good'.
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, address, Controller address (001 .. 253)
#
# optional substitutions:
#% macro, relay_number, The relay number (1..12).
#% macro, relay_desc,   The DESC field on the relay setpoint record 
#% macro, relay_off_desc,   The DESC field on the relay setpoint record 
#                       (appears as a label on the Img EDM screen).
#% macro, relay_level,  The desired relay setpoint value.
# vv================vv  New feature request May 2012.
#% macro, relay_off_level,  The desired relay off setpoint value.
#% macro, relay_drvh,   The DRVH field on relay setpoint records 
#                       (limits max value of relay setpoint)
#% macro, relay_drvl,   The DRVL field on relay setpoint records. 
#                       (limits min value of relay setpoint)
#% macro, relay_hopr,   The HOPR field on relay setpoint records 
#                       (high operator value - helps display set correct range).
#% macro, relay_lopr,   The LOPR field on relay setpoint records 
#                       (low operator value - helps display set correct range).
#% macro, relay_hihi,   The HIHI alarm field on the relay setpoint record.
#% macro, relay_lolo,   The LOLO alarm field on the relay setpoint record.
#% macro, relay_high,   The HIGH alarm field on the relay setpoint record.
#% macro, relay_low ,   The LOW alarm field on the relay setpoint record.
#% macro, ilk_write_access_pv ,   Link to the interlocks setpoint global write access record.
#
################################################################################


################################################################################
# Relay - Valve Interlock
#
#% archiver 10 Monitor
#

# Force processing of slow PP records 
record(fanout, "BL04I-VA-PIRG-01:RLY2:FAN10S")
{
    field(DESC, "Relay 10s Scan fanout")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-PIRG-01:RLY2:MODE")
    field(LNK2, "BL04I-VA-PIRG-01:RLY2:DIR")
    field(LNK3, "BL04I-VA-PIRG-01:RLY2:SP")
    field(LNK4, "BL04I-VA-PIRG-01:RLY2:SPOFF")
    field(LNK5, "BL04I-VA-PIRG-01:RLY2:HYST PP")
    field(SELM, "All")
}


record(mbbo, "BL04I-VA-PIRG-01:RLY2:SETMODE") 
{
  field(DESC, "Relay Mode")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_mode(001,10) ty_40_5")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-PIRG-01:RLY2:MODE PP")
}

record(mbbi, "BL04I-VA-PIRG-01:RLY2:MODE") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_mode(001,10) ty_40_5")
  field(DESC, "Relay mode")
  field(SCAN, "Passive")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

record(mbbo, "BL04I-VA-PIRG-01:RLY2:SETDIR") 
{
  field(DESC, "Relay Direction")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_direction(001,10) ty_40_5")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-PIRG-01:RLY2:DIR PP")
}

record(mbbi, "BL04I-VA-PIRG-01:RLY2:DIR") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_direction(001,10) ty_40_5")
  field(DESC, "Relay direction")
  field(SCAN, "Passive")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

#
#% archiver 10 Monitor
#% controldesk Valve Interlock readback
#
record(ai, "BL04I-VA-PIRG-01:RLY2:SP") 
{
  field(DESC, "MPS I/L 1")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getsp(001,10) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSP record just once
# at startup.
#
record(bo, "BL04I-VA-PIRG-01:RLY2:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-PIRG-01:RLY2:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-PIRG-01:RLY2:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-PIRG-01:RLY2:ILKSETSP:NOWRITE")
    field(LNK2, "BL04I-VA-PIRG-01:RLY2:SETSP")
    field(LNK3, "BL04I-VA-PIRG-01:RLY2:INITSETSPSDIS")
    field(SELM, "All")
}

record(ao, "BL04I-VA-PIRG-01:RLY2:SETSP") 
{
  field(DESC, "Output Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setsp(001,10) ty_40_5")
  field(PREC, "1")
  #field(PINI, "YES")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(DRVH, "0.012")
  field(DRVL, "2.7e-10")
  field(DOL,  "0.01")
  field(SDIS, "BL04I-VA-PIRG-01:RLY2:ILKSETSP:NOWRITE")
  field(FLNK, "BL04I-VA-PIRG-01:RLY2:SETSPFAN")
}
# -----------------------------------------------------------------------------------------

# On setting a new interlock relay setpoint, we need to update the 
# default hysteresis value and readback of the new setpoint from the 
# gauge controller.
#
record(fanout, "BL04I-VA-PIRG-01:RLY2:SETSPFAN")
{
    field(DESC, "Relay Set SP fanout")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-PIRG-01:RLY2:HYST PP")
    field(LNK2, "BL04I-VA-PIRG-01:RLY2:SETSPOFF PP")
    field(LNK3, "BL04I-VA-PIRG-01:RLY2:SP PP")
    field(LNK4, "BL04I-VA-PIRG-01:RLY2:SPOFF PP")
    field(LNK5, "BL04I-VA-PIRG-01:RLY2:SELSPOFF PP")
}


record(ai, "BL04I-VA-PIRG-01:RLY2:SPOFF") 
{
  field(DESC, "MPS I/L")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,10) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

#
# Set the required relay OFF setpoint (provides hysteresis)
# The assumed value will be the higher of either the default gauge hysteresis
# or the value given in the relay_off_level macro.
#
record(ao, "BL04I-VA-PIRG-01:RLY2:SPOFFWRITE") 
{
  field(DESC, "Relay Hysteresis Write")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,10) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-PIRG-01:RLY2:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-PIRG-01:RLY2:SPOFF")
  field(OMSL, "closed_loop")
  field(DOL,  "BL04I-VA-PIRG-01:RLY2:SELSPOFF")
}


record(ai, "BL04I-VA-PIRG-01:RLY2:SETSPOFF") 
{
  field(DESC, "MPS I/L")
  field(DTYP, "Soft Channel")
  field(INP, "0")
#  field(PINI, "YES")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-PIRG-01:RLY2:SELSPOFF")
}

# The primary objective is to avoid tripping the MPS interlocks
# unecessarily. So ensure that the higher value is adopted of either the existing SPOFF value in the gauge controller
# or the given relay_off_level macro.
# The lowest permissible value is 1.1 x SPON.
record(sel, "BL04I-VA-PIRG-01:RLY2:SELSPOFF")
{
    field(DESC, "Relay off setpoint select")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-PIRG-01:RLY2:SPOFFNOMINAL PP MS")
    field(INPB, "BL04I-VA-PIRG-01:RLY2:SETSPOFF PP)")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1000")
    field(LOPR, "1e-12")
    field(FLNK, "BL04I-VA-PIRG-01:RLY2:SPOFFWRITE")
}

# :SPOFFNOMINAL calculates the nominal OFF setpoint
# which is simply 10% above :SP
#
record(calc, "BL04I-VA-PIRG-01:RLY2:SPOFFNOMINAL") 
  {
  field(DESC, "MPS I/L nominal")
  field(INPA, "BL04I-VA-PIRG-01:RLY2:SETSP")
  field(CALC, "(A*1.1)")
  }

record(bo, "BL04I-VA-PIRG-01:RLY2:DIS") 
{
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol dissp(001,10) ty_40_5")
}

record(ao, "BL04I-VA-PIRG-01:RLY2:SETHYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,10) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-PIRG-01:RLY2:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-PIRG-01:RLY2:HYST")
  #field(DOL, "0.01")
}

record(ai, "BL04I-VA-PIRG-01:RLY2:HYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,10) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
#  field(PINI, "YES")
#  field(FLNK, "BL04I-VA-PIRG-01:RLY2:HYSTSEQ")
}

# When the controller hysteresis changes internally
# set the value in the SETSPOFF text entry box accordingly
record(seq, "BL04I-VA-PIRG-01:RLY2:HYSTSEQ") 
{
  field(DESC, "Hysteresis Sequence")
  field(SELM, "All")
  field(DOL1, "BL04I-VA-PIRG-01:RLY2:SPOFF")
  field(LNK1, "BL04I-VA-PIRG-01:RLY2:SETSPOFF.VAL PP")
}


#--------------------------------------------------------------------------------
#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-PIRG-01:RLY2:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
record(bi, "BL04I-VA-PIRG-01:RLY2:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-01:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
#--------------------------------------------------------------------------------
  # mks937bRelays.db
#% macro, __doc__, Template database for an mks937b Multi-Sensor System Relays configuration. 
# When a relay is 'on' then the associated MPS interlock is 'good'.
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, address, Controller address (001 .. 253)
#
# optional substitutions:
#% macro, relay_number, The relay number (1..12).
#% macro, relay_desc,   The DESC field on the relay setpoint record 
#% macro, relay_off_desc,   The DESC field on the relay setpoint record 
#                       (appears as a label on the Img EDM screen).
#% macro, relay_level,  The desired relay setpoint value.
# vv================vv  New feature request May 2012.
#% macro, relay_off_level,  The desired relay off setpoint value.
#% macro, relay_drvh,   The DRVH field on relay setpoint records 
#                       (limits max value of relay setpoint)
#% macro, relay_drvl,   The DRVL field on relay setpoint records. 
#                       (limits min value of relay setpoint)
#% macro, relay_hopr,   The HOPR field on relay setpoint records 
#                       (high operator value - helps display set correct range).
#% macro, relay_lopr,   The LOPR field on relay setpoint records 
#                       (low operator value - helps display set correct range).
#% macro, relay_hihi,   The HIHI alarm field on the relay setpoint record.
#% macro, relay_lolo,   The LOLO alarm field on the relay setpoint record.
#% macro, relay_high,   The HIGH alarm field on the relay setpoint record.
#% macro, relay_low ,   The LOW alarm field on the relay setpoint record.
#% macro, ilk_write_access_pv ,   Link to the interlocks setpoint global write access record.
#
################################################################################


################################################################################
# Relay - Valve Interlock
#
#% archiver 10 Monitor
#

# Force processing of slow PP records 
record(fanout, "BL04I-VA-PIRG-02:RLY1:FAN10S")
{
    field(DESC, "Relay 10s Scan fanout")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-PIRG-02:RLY1:MODE")
    field(LNK2, "BL04I-VA-PIRG-02:RLY1:DIR")
    field(LNK3, "BL04I-VA-PIRG-02:RLY1:SP")
    field(LNK4, "BL04I-VA-PIRG-02:RLY1:SPOFF")
    field(LNK5, "BL04I-VA-PIRG-02:RLY1:HYST PP")
    field(SELM, "All")
}


record(mbbo, "BL04I-VA-PIRG-02:RLY1:SETMODE") 
{
  field(DESC, "Relay Mode")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_mode(001,11) ty_40_5")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-PIRG-02:RLY1:MODE PP")
}

record(mbbi, "BL04I-VA-PIRG-02:RLY1:MODE") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_mode(001,11) ty_40_5")
  field(DESC, "Relay mode")
  field(SCAN, "Passive")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

record(mbbo, "BL04I-VA-PIRG-02:RLY1:SETDIR") 
{
  field(DESC, "Relay Direction")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_direction(001,11) ty_40_5")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-PIRG-02:RLY1:DIR PP")
}

record(mbbi, "BL04I-VA-PIRG-02:RLY1:DIR") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_direction(001,11) ty_40_5")
  field(DESC, "Relay direction")
  field(SCAN, "Passive")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

#
#% archiver 10 Monitor
#% controldesk Valve Interlock readback
#
record(ai, "BL04I-VA-PIRG-02:RLY1:SP") 
{
  field(DESC, "Ion Pump I/L On")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getsp(001,11) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSP record just once
# at startup.
#
record(bo, "BL04I-VA-PIRG-02:RLY1:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-PIRG-02:RLY1:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-PIRG-02:RLY1:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-PIRG-02:RLY1:ILKSETSP:NOWRITE")
    field(LNK2, "BL04I-VA-PIRG-02:RLY1:SETSP")
    field(LNK3, "BL04I-VA-PIRG-02:RLY1:INITSETSPSDIS")
    field(SELM, "All")
}

record(ao, "BL04I-VA-PIRG-02:RLY1:SETSP") 
{
  field(DESC, "Output Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setsp(001,11) ty_40_5")
  field(PREC, "1")
  #field(PINI, "YES")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(DRVH, "0.012")
  field(DRVL, "2.7e-10")
  field(DOL,  "0.01")
  field(SDIS, "BL04I-VA-PIRG-02:RLY1:ILKSETSP:NOWRITE")
  field(FLNK, "BL04I-VA-PIRG-02:RLY1:SETSPFAN")
}
# -----------------------------------------------------------------------------------------

# On setting a new interlock relay setpoint, we need to update the 
# default hysteresis value and readback of the new setpoint from the 
# gauge controller.
#
record(fanout, "BL04I-VA-PIRG-02:RLY1:SETSPFAN")
{
    field(DESC, "Relay Set SP fanout")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-PIRG-02:RLY1:HYST PP")
    field(LNK2, "BL04I-VA-PIRG-02:RLY1:SETSPOFF PP")
    field(LNK3, "BL04I-VA-PIRG-02:RLY1:SP PP")
    field(LNK4, "BL04I-VA-PIRG-02:RLY1:SPOFF PP")
    field(LNK5, "BL04I-VA-PIRG-02:RLY1:SELSPOFF PP")
}


record(ai, "BL04I-VA-PIRG-02:RLY1:SPOFF") 
{
  field(DESC, "Ion Pump I/L")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,11) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

#
# Set the required relay OFF setpoint (provides hysteresis)
# The assumed value will be the higher of either the default gauge hysteresis
# or the value given in the relay_off_level macro.
#
record(ao, "BL04I-VA-PIRG-02:RLY1:SPOFFWRITE") 
{
  field(DESC, "Relay Hysteresis Write")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,11) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-PIRG-02:RLY1:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-PIRG-02:RLY1:SPOFF")
  field(OMSL, "closed_loop")
  field(DOL,  "BL04I-VA-PIRG-02:RLY1:SELSPOFF")
}


record(ai, "BL04I-VA-PIRG-02:RLY1:SETSPOFF") 
{
  field(DESC, "Ion Pump I/L")
  field(DTYP, "Soft Channel")
  field(INP, "0")
#  field(PINI, "YES")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-PIRG-02:RLY1:SELSPOFF")
}

# The primary objective is to avoid tripping the MPS interlocks
# unecessarily. So ensure that the higher value is adopted of either the existing SPOFF value in the gauge controller
# or the given relay_off_level macro.
# The lowest permissible value is 1.1 x SPON.
record(sel, "BL04I-VA-PIRG-02:RLY1:SELSPOFF")
{
    field(DESC, "Relay off setpoint select")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-PIRG-02:RLY1:SPOFFNOMINAL PP MS")
    field(INPB, "BL04I-VA-PIRG-02:RLY1:SETSPOFF PP)")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1000")
    field(LOPR, "1e-12")
    field(FLNK, "BL04I-VA-PIRG-02:RLY1:SPOFFWRITE")
}

# :SPOFFNOMINAL calculates the nominal OFF setpoint
# which is simply 10% above :SP
#
record(calc, "BL04I-VA-PIRG-02:RLY1:SPOFFNOMINAL") 
  {
  field(DESC, "Ion Pump I/L nominal")
  field(INPA, "BL04I-VA-PIRG-02:RLY1:SETSP")
  field(CALC, "(A*1.1)")
  }

record(bo, "BL04I-VA-PIRG-02:RLY1:DIS") 
{
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol dissp(001,11) ty_40_5")
}

record(ao, "BL04I-VA-PIRG-02:RLY1:SETHYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,11) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-PIRG-02:RLY1:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-PIRG-02:RLY1:HYST")
  #field(DOL, "0.01")
}

record(ai, "BL04I-VA-PIRG-02:RLY1:HYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,11) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
#  field(PINI, "YES")
#  field(FLNK, "BL04I-VA-PIRG-02:RLY1:HYSTSEQ")
}

# When the controller hysteresis changes internally
# set the value in the SETSPOFF text entry box accordingly
record(seq, "BL04I-VA-PIRG-02:RLY1:HYSTSEQ") 
{
  field(DESC, "Hysteresis Sequence")
  field(SELM, "All")
  field(DOL1, "BL04I-VA-PIRG-02:RLY1:SPOFF")
  field(LNK1, "BL04I-VA-PIRG-02:RLY1:SETSPOFF.VAL PP")
}


#--------------------------------------------------------------------------------
#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-PIRG-02:RLY1:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
record(bi, "BL04I-VA-PIRG-02:RLY1:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-02:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
#--------------------------------------------------------------------------------
  # mks937bRelays.db
#% macro, __doc__, Template database for an mks937b Multi-Sensor System Relays configuration. 
# When a relay is 'on' then the associated MPS interlock is 'good'.
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, address, Controller address (001 .. 253)
#
# optional substitutions:
#% macro, relay_number, The relay number (1..12).
#% macro, relay_desc,   The DESC field on the relay setpoint record 
#% macro, relay_off_desc,   The DESC field on the relay setpoint record 
#                       (appears as a label on the Img EDM screen).
#% macro, relay_level,  The desired relay setpoint value.
# vv================vv  New feature request May 2012.
#% macro, relay_off_level,  The desired relay off setpoint value.
#% macro, relay_drvh,   The DRVH field on relay setpoint records 
#                       (limits max value of relay setpoint)
#% macro, relay_drvl,   The DRVL field on relay setpoint records. 
#                       (limits min value of relay setpoint)
#% macro, relay_hopr,   The HOPR field on relay setpoint records 
#                       (high operator value - helps display set correct range).
#% macro, relay_lopr,   The LOPR field on relay setpoint records 
#                       (low operator value - helps display set correct range).
#% macro, relay_hihi,   The HIHI alarm field on the relay setpoint record.
#% macro, relay_lolo,   The LOLO alarm field on the relay setpoint record.
#% macro, relay_high,   The HIGH alarm field on the relay setpoint record.
#% macro, relay_low ,   The LOW alarm field on the relay setpoint record.
#% macro, ilk_write_access_pv ,   Link to the interlocks setpoint global write access record.
#
################################################################################


################################################################################
# Relay - Valve Interlock
#
#% archiver 10 Monitor
#

# Force processing of slow PP records 
record(fanout, "BL04I-VA-PIRG-02:RLY2:FAN10S")
{
    field(DESC, "Relay 10s Scan fanout")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-PIRG-02:RLY2:MODE")
    field(LNK2, "BL04I-VA-PIRG-02:RLY2:DIR")
    field(LNK3, "BL04I-VA-PIRG-02:RLY2:SP")
    field(LNK4, "BL04I-VA-PIRG-02:RLY2:SPOFF")
    field(LNK5, "BL04I-VA-PIRG-02:RLY2:HYST PP")
    field(SELM, "All")
}


record(mbbo, "BL04I-VA-PIRG-02:RLY2:SETMODE") 
{
  field(DESC, "Relay Mode")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_mode(001,12) ty_40_5")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-PIRG-02:RLY2:MODE PP")
}

record(mbbi, "BL04I-VA-PIRG-02:RLY2:MODE") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_mode(001,12) ty_40_5")
  field(DESC, "Relay mode")
  field(SCAN, "Passive")
  field(ZRST, "On")
  field(ONST, "Off")
  field(TWST, "Active")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

record(mbbo, "BL04I-VA-PIRG-02:RLY2:SETDIR") 
{
  field(DESC, "Relay Direction")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_direction(001,12) ty_40_5")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
#  field(DOL, "1")
#  field(PINI, "YES")
  field(FLNK, "BL04I-VA-PIRG-02:RLY2:DIR PP")
}

record(mbbi, "BL04I-VA-PIRG-02:RLY2:DIR") 
{
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_direction(001,12) ty_40_5")
  field(DESC, "Relay direction")
  field(SCAN, "Passive")
  field(ZRST, "Above")
  field(ONST, "Below")
  field(UNSV, "MAJOR")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
}

#
#% archiver 10 Monitor
#% controldesk Valve Interlock readback
#
record(ai, "BL04I-VA-PIRG-02:RLY2:SP") 
{
  field(DESC, "MPS I/L 1")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getsp(001,12) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSP record just once
# at startup.
#
record(bo, "BL04I-VA-PIRG-02:RLY2:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-PIRG-02:RLY2:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-PIRG-02:RLY2:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-PIRG-02:RLY2:ILKSETSP:NOWRITE")
    field(LNK2, "BL04I-VA-PIRG-02:RLY2:SETSP")
    field(LNK3, "BL04I-VA-PIRG-02:RLY2:INITSETSPSDIS")
    field(SELM, "All")
}

record(ao, "BL04I-VA-PIRG-02:RLY2:SETSP") 
{
  field(DESC, "Output Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setsp(001,12) ty_40_5")
  field(PREC, "1")
  #field(PINI, "YES")
  field(HOPR, "0.012")
  field(LOPR, "2.7e-10")
  field(DRVH, "0.012")
  field(DRVL, "2.7e-10")
  field(DOL,  "0.01")
  field(SDIS, "BL04I-VA-PIRG-02:RLY2:ILKSETSP:NOWRITE")
  field(FLNK, "BL04I-VA-PIRG-02:RLY2:SETSPFAN")
}
# -----------------------------------------------------------------------------------------

# On setting a new interlock relay setpoint, we need to update the 
# default hysteresis value and readback of the new setpoint from the 
# gauge controller.
#
record(fanout, "BL04I-VA-PIRG-02:RLY2:SETSPFAN")
{
    field(DESC, "Relay Set SP fanout")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-PIRG-02:RLY2:HYST PP")
    field(LNK2, "BL04I-VA-PIRG-02:RLY2:SETSPOFF PP")
    field(LNK3, "BL04I-VA-PIRG-02:RLY2:SP PP")
    field(LNK4, "BL04I-VA-PIRG-02:RLY2:SPOFF PP")
    field(LNK5, "BL04I-VA-PIRG-02:RLY2:SELSPOFF PP")
}


record(ai, "BL04I-VA-PIRG-02:RLY2:SPOFF") 
{
  field(DESC, "MPS I/L")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,12) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HIHI, "0.013")
  field(LOLO, "2.6e-10")
  field(HIGH, "1.1e-06")
  field(LOW, "9e-07")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
}

#
# Set the required relay OFF setpoint (provides hysteresis)
# The assumed value will be the higher of either the default gauge hysteresis
# or the value given in the relay_off_level macro.
#
record(ao, "BL04I-VA-PIRG-02:RLY2:SPOFFWRITE") 
{
  field(DESC, "Relay Hysteresis Write")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,12) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-PIRG-02:RLY2:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-PIRG-02:RLY2:SPOFF")
  field(OMSL, "closed_loop")
  field(DOL,  "BL04I-VA-PIRG-02:RLY2:SELSPOFF")
}


record(ai, "BL04I-VA-PIRG-02:RLY2:SETSPOFF") 
{
  field(DESC, "MPS I/L")
  field(DTYP, "Soft Channel")
  field(INP, "0")
#  field(PINI, "YES")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-PIRG-02:RLY2:SELSPOFF")
}

# The primary objective is to avoid tripping the MPS interlocks
# unecessarily. So ensure that the higher value is adopted of either the existing SPOFF value in the gauge controller
# or the given relay_off_level macro.
# The lowest permissible value is 1.1 x SPON.
record(sel, "BL04I-VA-PIRG-02:RLY2:SELSPOFF")
{
    field(DESC, "Relay off setpoint select")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-PIRG-02:RLY2:SPOFFNOMINAL PP MS")
    field(INPB, "BL04I-VA-PIRG-02:RLY2:SETSPOFF PP)")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1000")
    field(LOPR, "1e-12")
    field(FLNK, "BL04I-VA-PIRG-02:RLY2:SPOFFWRITE")
}

# :SPOFFNOMINAL calculates the nominal OFF setpoint
# which is simply 10% above :SP
#
record(calc, "BL04I-VA-PIRG-02:RLY2:SPOFFNOMINAL") 
  {
  field(DESC, "MPS I/L nominal")
  field(INPA, "BL04I-VA-PIRG-02:RLY2:SETSP")
  field(CALC, "(A*1.1)")
  }

record(bo, "BL04I-VA-PIRG-02:RLY2:DIS") 
{
  field(DESC, "Disable Relay Setpoint")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol dissp(001,12) ty_40_5")
}

record(ao, "BL04I-VA-PIRG-02:RLY2:SETHYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setrelay_hyst(001,12) ty_40_5")
  field(EGU, "mbar")
  field(SDIS, "BL04I-VA-PIRG-02:RLY2:ILKSETSP:NOWRITE")
  field(PREC, "2")
  field(FLNK, "BL04I-VA-PIRG-02:RLY2:HYST")
  #field(DOL, "0.01")
}

record(ai, "BL04I-VA-PIRG-02:RLY2:HYST") 
{
  field(DESC, "Relay Hysteresis")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getrelay_hyst(001,12) ty_40_5")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
#  field(PINI, "YES")
#  field(FLNK, "BL04I-VA-PIRG-02:RLY2:HYSTSEQ")
}

# When the controller hysteresis changes internally
# set the value in the SETSPOFF text entry box accordingly
record(seq, "BL04I-VA-PIRG-02:RLY2:HYSTSEQ") 
{
  field(DESC, "Hysteresis Sequence")
  field(SELM, "All")
  field(DOL1, "BL04I-VA-PIRG-02:RLY2:SPOFF")
  field(LNK1, "BL04I-VA-PIRG-02:RLY2:SETSPOFF.VAL PP")
}


#--------------------------------------------------------------------------------
#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-PIRG-02:RLY2:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume a zero INP link (from :CONSTZERO above) and do nothing.
#
record(bi, "BL04I-VA-PIRG-02:RLY2:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-02:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
#--------------------------------------------------------------------------------
  # mks937bFastRelay.template
#% macro, __doc__, Template database for an mks937b Multi-Sensor System fast-relay output trigger configuration. 
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, address, Controller address (001 .. 253)
#% macro, channel, MKS 937B channel number (1-4)

# optional substitutions:
#% macro, frcsp_desc,   The DESC field on the relay setpoint record 
#% macro, frcsp_level,  The desired relay setpoint value.
#% macro, frcsp_drvh,   The DRVH field on relay setpoint records 
#                       (limits max value of relay setpoint)
#% macro, frcsp_drvl,   The DRVL field on relay setpoint records. 
#                       (limits min value of relay setpoint)
#% macro, frcsp_hopr,   The HOPR field on relay setpoint records 
#                       (high operator value - helps display set correct range).
#% macro, frcsp_lopr,   The LOPR field on relay setpoint records 
#                       (low operator value - helps display set correct range).
#% macro, ilk_write_access_pv ,   Link to the interlocks setpoint global write access record.
#
################################################################################
# 
# FRLY triggers
#
#
# Force processing of slow PP records 
record(fanout, "BL04I-VA-IMG-01:FRLY:FAN10S")
{
    field(DESC, "Fast Relay Scan fanout")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-IMG-01:FRLY:SP PP")
    field(SELM, "All")
}


#% archiver 10 Monitor
#% controldesk IMG FRLY trigger readback
#
record(ai, "BL04I-VA-IMG-01:FRLY:SP") 
{
  field(DESC, "Fast Valve I/L")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getfrc_sp(001,1,BL04I-VA-IMG-01:ERRORNUM) ty_40_5 0")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.0e-2")
  field(LOPR, "1.3e-5")
}


# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSP record just once
# at startup.
#
record(bo, "BL04I-VA-IMG-01:FRLY:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-IMG-01:FRLY:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-IMG-01:FRLY:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-IMG-01:FRLY:ILKSETSP:NOWRITE")
    field(LNK2, "BL04I-VA-IMG-01:FRLY:SETSP")
    field(LNK3, "BL04I-VA-IMG-01:FRLY:INITSETSPSDIS")
    field(SELM, "All")
}

record(ao, "BL04I-VA-IMG-01:FRLY:SETSP") 
{
  field(DESC, "Fast Valve I/L")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setfrc_sp(001,1) ty_40_5 0")
  field(EGU, "mbar")
  field(PREC, "1")
  #field(PINI, "YES")
  field(SDIS, "BL04I-VA-IMG-01:FRLY:ILKSETSP:NOWRITE")
  field(DRVH, "1.2e-2")
  field(DRVL, "2.7e-10")
  field(DOL,  "1e-05")
  field(FLNK, "BL04I-VA-IMG-01:FRLY:SP PP")
}

record(calc, "BL04I-VA-IMG-01:FRLY:EXISTS") 
{
  field(DESC, "Fast Relay Output Exists")
  field(CALC, "1")
  field(INPA, "1")
  field(INPB, "1")
  field(PINI, "YES")
}

#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-IMG-01:FRLY:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume an empty INP and do nothing.
#
record(bi, "BL04I-VA-IMG-01:FRLY:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-01:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
# mks937bFastRelay.template
#% macro, __doc__, Template database for an mks937b Multi-Sensor System fast-relay output trigger configuration. 
# A note on the optional macros: they default to an appropriate hard-coded 
# value if no value is passed for expansion. 
# They are provided to allow the default set points to be changed. 
# Once the set point needs to be changed it may be necessary to alter  
# various other fields defining the range of allowed values. 
# For the majority of applications the defaults should be used.  The levels 
# should only be changed at the request of the vacuum group for non-standard 
# vacuum systems.
#
# required substitutions:
#% macro, device,  device name
#% macro, port,    serial port (steam device code ie /ty/0/1 => ty_0_1)
#% macro, address, Controller address (001 .. 253)
#% macro, channel, MKS 937B channel number (1-4)

# optional substitutions:
#% macro, frcsp_desc,   The DESC field on the relay setpoint record 
#% macro, frcsp_level,  The desired relay setpoint value.
#% macro, frcsp_drvh,   The DRVH field on relay setpoint records 
#                       (limits max value of relay setpoint)
#% macro, frcsp_drvl,   The DRVL field on relay setpoint records. 
#                       (limits min value of relay setpoint)
#% macro, frcsp_hopr,   The HOPR field on relay setpoint records 
#                       (high operator value - helps display set correct range).
#% macro, frcsp_lopr,   The LOPR field on relay setpoint records 
#                       (low operator value - helps display set correct range).
#% macro, ilk_write_access_pv ,   Link to the interlocks setpoint global write access record.
#
################################################################################
# 
# FRLY triggers
#
#
# Force processing of slow PP records 
record(fanout, "BL04I-VA-IMG-02:FRLY:FAN10S")
{
    field(DESC, "Fast Relay Scan fanout")
    field(SCAN, "10 second")
    field(LNK1, "BL04I-VA-IMG-02:FRLY:SP PP")
    field(SELM, "All")
}


#% archiver 10 Monitor
#% controldesk IMG FRLY trigger readback
#
record(ai, "BL04I-VA-IMG-02:FRLY:SP") 
{
  field(DESC, "Fast Valve I/L")
  field(DTYP, "stream")
  field(INP, "@mks937b.protocol getfrc_sp(001,3,BL04I-VA-IMG-02:ERRORNUM) ty_40_5 0")
  field(SCAN, "Passive")
  field(EGU, "mbar")
  field(PREC, "1")
  field(HOPR, "1.0e-2")
  field(LOPR, "1.3e-5")
}


# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSP record just once
# at startup.
#
record(bo, "BL04I-VA-IMG-02:FRLY:INITSETSPSDIS") 
{
  field(DTYP, "Soft Channel")
  field(VAL, "1")
  field(OUT, "BL04I-VA-IMG-02:FRLY:INITSETSPFAN.DISA")
}
record(fanout, "BL04I-VA-IMG-02:FRLY:INITSETSPFAN")
{
    field(DESC, "Relay 1s Scan fanout")
    field(SCAN, "1 second")
    field(LNK1, "BL04I-VA-IMG-02:FRLY:ILKSETSP:NOWRITE")
    field(LNK2, "BL04I-VA-IMG-02:FRLY:SETSP")
    field(LNK3, "BL04I-VA-IMG-02:FRLY:INITSETSPSDIS")
    field(SELM, "All")
}

record(ao, "BL04I-VA-IMG-02:FRLY:SETSP") 
{
  field(DESC, "Fast Valve I/L")
  field(DTYP, "stream")
  field(OUT, "@mks937b.protocol setfrc_sp(001,3) ty_40_5 0")
  field(EGU, "mbar")
  field(PREC, "1")
  #field(PINI, "YES")
  field(SDIS, "BL04I-VA-IMG-02:FRLY:ILKSETSP:NOWRITE")
  field(DRVH, "1.2e-2")
  field(DRVL, "2.7e-10")
  field(DOL,  "1e-05")
  field(FLNK, "BL04I-VA-IMG-02:FRLY:SP PP")
}

record(calc, "BL04I-VA-IMG-02:FRLY:EXISTS") 
{
  field(DESC, "Fast Relay Output Exists")
  field(CALC, "1")
  field(INPA, "3")
  field(INPB, "1")
  field(PINI, "YES")
}

#
# The :CONSTZERO record allows the :ILKSETSP:NOWRITE record (below)
# to have a PV link rather than constant zero value, which would be 
# invalid with the "MS CP" modifiers
#
record(bi, "BL04I-VA-IMG-02:FRLY:CONSTZERO")
  {
  field(DESC, "Constant zero value")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "0")
  field(ZNAM, "Zero")
  field(ONAM, "One")
  }

# Disable the writing of setpoints to hardware so the machine does not trip
# when the IOC is rebooted with lower default interlock pressures
# This record is local to the relay instance, but controlled by the global
# access record - given in the macro parameters. If not supplied, it will
# assume an empty INP and do nothing.
#
record(bi, "BL04I-VA-IMG-02:FRLY:ILKSETSP:NOWRITE")
  {
  field(DESC, "ILK setpoint access")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(INP, "BL04I-VA-GAUGE-02:ILKSETSP:NOWRITE MS CP")
  field(ZNAM, "Allow")
  field(ONAM, "Inhibit")
  }
  
# digitelMpc.db
#% macro, __doc__, Template database for digitel MPC - Controller
# Pete Owens - 30/3/04
#
# substitutions:
#% macro, device, device name
#% macro, port, asyn serial port number
#% macro, unit, unit number for multi-drop serial
################################################################################
# Get Model Number
#
#% controldesk Model Number readback
#
record(stringin, "BL04I-VA-MPC-01:MODEL") 
{
    field(DESC, "Model Number")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto model(01) ty_40_2")
    field(SCAN, "10 second")
}
################################################################################
# Get Version
#
#% controldesk Firmware Revision readback
#
record(stringin, "BL04I-VA-MPC-01:VERSION") 
{
    field(DESC, "Firmware Revision")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto version(01) ty_40_2")
    field(SCAN, "10 second")
}

################################################################################
# Automatically Restart on power up
#
record(bo, "BL04I-VA-MPC-01:SETAUTOST")
{
    field(DESC, "Auto Restart")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setautost(01) ty_40_2")
    field(ZNAM, "No")
    field(ONAM, "Yes")
    field(DOL,  "0")
    field(PINI, "YES")
}
#
#% controldesk Auto Restart smon
#
record(bi, "BL04I-VA-MPC-01:AUTOST")
{
    field(DESC, "Auto Restart")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto autost(01) ty_40_2")
    field(SCAN, "10 second")
    field(ZNAM, "No")
    field(ONAM, "Yes")
}
################################################################################
# Reset Software
#
#% archiver 10 Monitor
#% controldesk Reset Software scon
#
record(bo, "BL04I-VA-MPC-01:RESET")
{
    field(DESC, "Reset Software")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto reset(01) ty_40_2")
    field(ZNAM, "Reset")
    field(ONAM, "Reset")
}
################################################################################

record(stringin, "BL04I-VA-MPC-01:DEBUG")
{
    field(DESC, "Generic command")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto debug(01) ty_40_2")
    field(SCAN, "Passive")
}

# PINI set to ensure the record is initialised with TIMEOUT status,
# which will only change to OK once communication starts.
record(mbbi, "BL04I-VA-MPC-01:COMMS")
    {
    field(DESC, "Communication Status")
    field(DTYP, "Soft Channel")
    field(SCAN, "Passive")
    field(ZRST, "TIMEOUT")
    field(ONST, "OK")
    field(INP, "0")
    field(PINI, "YES")
    }

record(scalcout, "BL04I-VA-MPC-01:COMMSMATCH")
    {
    field(INAA, "BL04I-VA-MPC-01:MODEL.STAT MS CP")
    field(CALC, "printf('%d',AA!='TIMEOUT'?1:0)")
    field(OOPT, "Every Time")
    field(DOPT, "Use CALC")
    field(OUT, "BL04I-VA-MPC-01:COMMS PP MS")
    }
# digitelMpc.db
#% macro, __doc__, Template database for digitel MPC - Controller
# Pete Owens - 30/3/04
#
# substitutions:
#% macro, device, device name
#% macro, port, asyn serial port number
#% macro, unit, unit number for multi-drop serial
################################################################################
# Get Model Number
#
#% controldesk Model Number readback
#
record(stringin, "BL04I-VA-MPC-02:MODEL") 
{
    field(DESC, "Model Number")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto model(01) ty_40_3")
    field(SCAN, "10 second")
}
################################################################################
# Get Version
#
#% controldesk Firmware Revision readback
#
record(stringin, "BL04I-VA-MPC-02:VERSION") 
{
    field(DESC, "Firmware Revision")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto version(01) ty_40_3")
    field(SCAN, "10 second")
}

################################################################################
# Automatically Restart on power up
#
record(bo, "BL04I-VA-MPC-02:SETAUTOST")
{
    field(DESC, "Auto Restart")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setautost(01) ty_40_3")
    field(ZNAM, "No")
    field(ONAM, "Yes")
    field(DOL,  "0")
    field(PINI, "YES")
}
#
#% controldesk Auto Restart smon
#
record(bi, "BL04I-VA-MPC-02:AUTOST")
{
    field(DESC, "Auto Restart")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto autost(01) ty_40_3")
    field(SCAN, "10 second")
    field(ZNAM, "No")
    field(ONAM, "Yes")
}
################################################################################
# Reset Software
#
#% archiver 10 Monitor
#% controldesk Reset Software scon
#
record(bo, "BL04I-VA-MPC-02:RESET")
{
    field(DESC, "Reset Software")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto reset(01) ty_40_3")
    field(ZNAM, "Reset")
    field(ONAM, "Reset")
}
################################################################################

record(stringin, "BL04I-VA-MPC-02:DEBUG")
{
    field(DESC, "Generic command")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto debug(01) ty_40_3")
    field(SCAN, "Passive")
}

# PINI set to ensure the record is initialised with TIMEOUT status,
# which will only change to OK once communication starts.
record(mbbi, "BL04I-VA-MPC-02:COMMS")
    {
    field(DESC, "Communication Status")
    field(DTYP, "Soft Channel")
    field(SCAN, "Passive")
    field(ZRST, "TIMEOUT")
    field(ONST, "OK")
    field(INP, "0")
    field(PINI, "YES")
    }

record(scalcout, "BL04I-VA-MPC-02:COMMSMATCH")
    {
    field(INAA, "BL04I-VA-MPC-02:MODEL.STAT MS CP")
    field(CALC, "printf('%d',AA!='TIMEOUT'?1:0)")
    field(OOPT, "Every Time")
    field(DOPT, "Use CALC")
    field(OUT, "BL04I-VA-MPC-02:COMMS PP MS")
    }
# digitelMpc.db
#% macro, __doc__, Template database for digitel MPC - Controller
# Pete Owens - 30/3/04
#
# substitutions:
#% macro, device, device name
#% macro, port, asyn serial port number
#% macro, unit, unit number for multi-drop serial
################################################################################
# Get Model Number
#
#% controldesk Model Number readback
#
record(stringin, "BL04I-VA-MPC-03:MODEL") 
{
    field(DESC, "Model Number")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto model(01) ty_40_4")
    field(SCAN, "10 second")
}
################################################################################
# Get Version
#
#% controldesk Firmware Revision readback
#
record(stringin, "BL04I-VA-MPC-03:VERSION") 
{
    field(DESC, "Firmware Revision")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto version(01) ty_40_4")
    field(SCAN, "10 second")
}

################################################################################
# Automatically Restart on power up
#
record(bo, "BL04I-VA-MPC-03:SETAUTOST")
{
    field(DESC, "Auto Restart")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setautost(01) ty_40_4")
    field(ZNAM, "No")
    field(ONAM, "Yes")
    field(DOL,  "0")
    field(PINI, "YES")
}
#
#% controldesk Auto Restart smon
#
record(bi, "BL04I-VA-MPC-03:AUTOST")
{
    field(DESC, "Auto Restart")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto autost(01) ty_40_4")
    field(SCAN, "10 second")
    field(ZNAM, "No")
    field(ONAM, "Yes")
}
################################################################################
# Reset Software
#
#% archiver 10 Monitor
#% controldesk Reset Software scon
#
record(bo, "BL04I-VA-MPC-03:RESET")
{
    field(DESC, "Reset Software")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto reset(01) ty_40_4")
    field(ZNAM, "Reset")
    field(ONAM, "Reset")
}
################################################################################

record(stringin, "BL04I-VA-MPC-03:DEBUG")
{
    field(DESC, "Generic command")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto debug(01) ty_40_4")
    field(SCAN, "Passive")
}

# PINI set to ensure the record is initialised with TIMEOUT status,
# which will only change to OK once communication starts.
record(mbbi, "BL04I-VA-MPC-03:COMMS")
    {
    field(DESC, "Communication Status")
    field(DTYP, "Soft Channel")
    field(SCAN, "Passive")
    field(ZRST, "TIMEOUT")
    field(ONST, "OK")
    field(INP, "0")
    field(PINI, "YES")
    }

record(scalcout, "BL04I-VA-MPC-03:COMMSMATCH")
    {
    field(INAA, "BL04I-VA-MPC-03:MODEL.STAT MS CP")
    field(CALC, "printf('%d',AA!='TIMEOUT'?1:0)")
    field(OOPT, "Every Time")
    field(DOPT, "Use CALC")
    field(OUT, "BL04I-VA-MPC-03:COMMS PP MS")
    }
# digitelMpcIonp.template
#% macro, __doc__, Template database for digitel MPC - Ion Pump
# Pete Owens - 30/9/03
#
# substitutions:
#% macro, device, device name
#% macro, name, Object name and gui association name
#% macro, port, asyn serial port number
#% macro, unit, unit number for multi-drop serial (2 hex digits - 05 by default)
#% macro, pump, ion pump number (1 or 2)
#% macro, size, pump size (l/s)
#% macro, sp1on, setpoint1 on
#% macro, sp1off, setpoint1 off
#% macro, sp2on, setpoint2 on
#% macro, sp2off, setpoint2 off
#% macro, alh,  alarm handler tag (Defaults to None) c.f. mp49's commit 80833
#% macro, text, Text to display in the ion pump controller window.
################################################################################

# This associates an edm screen with the template
# % gui, IONP1, edm, digitelMpcIonp2sp.edl, device=BL04I-VA-IONP-01

# This associates BOY screens with the template
# % gui, IONP1, boydetail, digitelMpcApp_opi/ionp_detail.opi, device=BL04I-VA-IONP-01, desc=BL04I-VA-IONP-01, name=IONP1
# % gui, IONP1, boyembed, digitelMpcApp_opi/ionp_embed_box.opi, device=BL04I-VA-IONP-01, desc=BL04I-VA-IONP-01, name=IONP1
# % gui, IONP1, boyembed, digitelMpcApp_opi/ionp_embed.opi, device=BL04I-VA-IONP-01, desc=BL04I-VA-IONP-01, name=IONP1

# These define what PVs a valve detail screen should contain
# % gui, IONP1, readback, Status,   BL04I-VA-IONP-01:STA
# % gui, IONP1, readback, Error Code,  BL04I-VA-IONP-01:ERR
# % gui, IONP1, readback, Voltage,  BL04I-VA-IONP-01:V
# % gui, IONP1, readback, Current,  BL04I-VA-IONP-01:I
# % gui, IONP1, readback, Strapping,  BL04I-VA-IONP-01:HV
# % gui, IONP1, enum, Start,  BL04I-VA-IONP-01:START
# % gui, IONP1, readback, Pump Size,  BL04I-VA-IONP-01:SIZE
# % gui, IONP1, demand, Pump Size,  BL04I-VA-IONP-01:SETSIZE
# % gui, IONP1, readback, Calibration,  BL04I-VA-IONP-01:CAL
# % gui, IONP1, demand, Calibration,  BL04I-VA-IONP-01:SETCAL
# % gui, IONP1, readback, Setpoint 1 On,  BL04I-VA-IONP-01:SP1ON
# % gui, IONP1, demand, Setpoint 1 On,  BL04I-VA-IONP-01:SETSP1ON
# % gui, IONP1, readback, Setpoint 1 Off,  BL04I-VA-IONP-01:SP1OFF
# % gui, IONP1, demand, Setpoint 1 Off,  BL04I-VA-IONP-01:SETSP1OFF
# % gui, IONP1, readback, Setpoint 2 On,  BL04I-VA-IONP-01:SP2ON
# % gui, IONP1, demand, Setpoint 2 On,  BL04I-VA-IONP-01:SETSP2ON
# % gui, IONP1, readback, Setpoint 2 Off,  BL04I-VA-IONP-01:SP2OFF
# % gui, IONP1, demand, Setpoint 2 Off,  BL04I-VA-IONP-01:SETSP2OFF

# Read pump current
#
#% controldesk Current readback
#
record(ai, "BL04I-VA-IONP-01:I") {
    field(DESC, "Pump Current")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto current(01,1) ty_40_2")
    field(SCAN, "1 second")
    field(EGU,  "A")
    field(LOPR, "0.0")
    field(HOPR, "10.0")
    field(PREC, "1")
}
################################################################################
# Read pump pressure
#
#% archiver 10 Monitor
#% controldesk Pressure readback
#
record(ai, "BL04I-VA-IONP-01:P") {
    field(DESC, "Pump Pressure")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto pressure(01,1) ty_40_2")
    field(SCAN, "1 second")
    field(FLNK, "BL04I-VA-IONP-01:PLOG")
    field(EGU,  "mbar")
    field(HOPR, "1000")
    field(LOPR, "1.0E-12")
    field(PREC, "11")
}
record(calcout, "BL04I-VA-IONP-01:ADEL")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-IONP-01:P.ADEL")
    field(INPA, "BL04I-VA-IONP-01:P")
#    field(INPB, "4")
#    field(INPB, "3")
    field(INPB, "2")
    field(SCAN, "10 second")
}
#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-IONP-01:PLOG")
{
    field(DESC, "log Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-IONP-01:P MS")
    field(HOPR, "3")
    field(LOPR, "-12")
#    field(ADEL, "0.1")
#    field(ADEL, "0.125")
#    field(ADEL, "0.176")
    field(ADEL, "0.25")
}
################################################################################
# Read pump voltage
#
#% controldesk Voltage readback
#
record(longin, "BL04I-VA-IONP-01:V") {
    field(DESC, "Pump Voltage")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto voltage(01,1) ty_40_2")
    field(SCAN, "1 second")
    field(EGU,  "V")
    field(LOPR, "0")
    field(HOPR, "10")
}
################################################################################
# Get HV Strapping
#
#% archiver 1 Monitor
#% controldesk HV Strapping readback
#
record(longin, "BL04I-VA-IONP-01:HV") 
{
    field(DESC, "HV Strapping")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto strap(01,1) ty_40_2")
    field(SCAN, "10 second")
    field(EGU,  "V")
    field(LOPR, "5600")
    field(HOPR, "7000")
}
################################################################################
# Get supply status
#
#% archiver 10 Monitor
#% controldesk Supply Status smon
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-VA-IONP-01:STA
record(mbbi, "BL04I-VA-IONP-01:STA")
{
    field(DESC, "Supply Status")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto status(01,1) ty_40_2")
    field(SCAN, "1 second")
    field(ZRST, "Unknown")
    field(ONST, "Waiting")
    field(TWST, "Standby")
    field(THST, "Safe-Conn")
    field(FRST, "Running")
    field(FVST, "Cool Down")
    field(SXST, "Pump Error")
    field(SVST, "HV Switched Off")
    field(EIST, "Interlock")
    field(NIST, "Shut Down")
    field(TEST, "Calibration")
    field(ELST, "Invalid")
    field(TVST, "Invalid")
    field(TTST, "Invalid")
    field(FTST, "Invalid")
    field(FFST, "Invalid")
    field(UNSV, "MAJOR")
    field(ZRSV, "MAJOR")
    field(ONSV, "MAJOR")
    field(TWSV, "MAJOR")
    field(THSV, "MAJOR")
    field(FRSV, "NO_ALARM")
    field(FVSV, "MINOR")
    field(SXSV, "MAJOR")
    field(SVSV, "MAJOR")
    field(EISV, "MAJOR")
    field(NISV, "MAJOR")
    field(TESV, "MAJOR")
    field(ELSV, "MAJOR")
    field(TVSV, "MAJOR")
    field(TTSV, "MAJOR")
    field(FTSV, "MAJOR")
    field(FFSV, "MAJOR")
    field(FLNK, "BL04I-VA-IONP-01:ERRSEL")
}

record(seq, "BL04I-VA-IONP-01:ERRSEQ")
{
    field(DESC, "Get Error if applicable")
    field(SCAN, "Passive")
    field(SELM, "Specified")
    field(SELN, "1")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-IONP-01:ERR PP MS")
    field(DOL2, "BL04I-VA-IONP-01:ERRGET PP MS")
    field(LNK2, "BL04I-VA-IONP-01:ERR PP MS")
}

record(longin, "BL04I-VA-IONP-01:ERRGET")
{
    field(DESC, "Get Error Code")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto err(01,1) ty_40_2")
    field(SCAN, "Passive")
}

record(calcout, "BL04I-VA-IONP-01:ERRSEL")
{
    field(DESC, "Choose which error source")
    field(INPA, "BL04I-VA-IONP-01:STA MS")
    field(CALC, "A>=3?2:1")
    field(OUT, "BL04I-VA-IONP-01:ERRSEQ.SELN PP MS")
}

#
#% archiver 10 Monitor
#% controldesk Error Code smon
#
record(mbbi, "BL04I-VA-IONP-01:ERR")
{
    field(DESC, "Error Code")
    field(DTYP, "Soft Channel")
    field(SCAN, "Passive")
    field(ZRST, "OK")
    field(ONST, "Too many cycles")
    field(TWST, "High pressure")
    field(THST, "High current")
    field(FRST, "High pressure")
    field(FVST, "Pump power")
    field(SXST, "High current")
    field(SVST, "Short circuit")
    field(EIST, "Malfunction")
    field(NIST, "Low voltage")
    field(TEST, "Arc detect")
    field(ELST, "11")
    field(TVST, "12")
    field(TTST, "13")
    field(FTST, "14")
    field(FFST, "15")
    field(UNSV, "MINOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "MINOR")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MINOR")
    field(FVSV, "MINOR")
    field(SXSV, "MINOR")
    field(SVSV, "MINOR")
    field(EISV, "MINOR")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MINOR")
    field(TVSV, "MINOR")
    field(TTSV, "MINOR")
    field(FTSV, "MINOR")
    field(FFSV, "MINOR")
}
################################################################################
# Pump size
#
#% archiver 10 Monitor
#% controldesk Pump Size readback
#
record(longin, "BL04I-VA-IONP-01:SIZE") {
    field(DESC, "Pump Size")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto size(01,1) ty_40_2")
    field(SCAN, "10 second")
    field(EGU,  "l/s")
    field(LOPR, "0")
    field(HOPR, "1200")
}
#
#% archiver 10 Monitor
#% controldesk Pump Size setpoint
#
record(ao, "BL04I-VA-IONP-01:SETSIZE") {
    field(DESC, "Pump Size")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsize(01,1) ty_40_2")
    field(PINI, "YES")
    field(DOL,  "600")
    field(EGU,  "l/s")
    field(DRVL, "0")
    field(DRVH, "1200")
    field(LOPR, "0")
    field(HOPR, "1200")
    field(PREC, "0")
}
################################################################################
# Calibration factor
#
#% archiver 10 Monitor
#% controldesk Calibration Factor readback
#
record(ai, "BL04I-VA-IONP-01:CAL") {
    field(DESC, "Calibration Factor")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto cal(01,1) ty_40_2")
    field(SCAN, "10 second")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
#
#% archiver 10 Monitor
#% controldesk Calibration Factor setpoint
#
record(ao, "BL04I-VA-IONP-01:SETCAL") {
    field(DESC, "Calibration Factor")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setcal(01,1) ty_40_2")
    field(DRVL, "0.0")
    field(DRVH, "9.99")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
################################################################################
# Start
#
#% archiver 10 Monitor
#% controldesk Supply Status scon
#
record(bo, "BL04I-VA-IONP-01:START")
{
    field(DESC, "HV on/off")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto start(01,1) ty_40_2")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
record(bi,"BL04I-VA-IONP-01:STARTING")
{
    field(DESC, "Starting Pumps")
    field(PINI, "YES")
    field(INP,  "0")
    field(ZNAM, "")
    field(ONAM, "Starting")
}

################################################################################
# Setpoints
#
# The MPC and MPCe controllers have four setpoints. Each setpoint has associated
# with it an ON pressure, an OFF pressure and a supply.
# Each pump on the controller is allocated two of the setpoints (pump setpoints 1 & 2).
# The following table describes the mapping of controller setpoints and supplies to
# each pump.
# I Gillingham: April 2015
#
#  Pump number   Pump_Setpoint Controller_Setpoint   Supply  
#      1             1                   1             1
#      2             1                   2             2
#      1             2                   3             1
#      2             2                   4             2

## ----------------- SP1 -------------------------------
#
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSPS1 and SETSPS2 records just once
# at startup.
#
record(bo, "BL04I-VA-IONP-01:INIT:SETSPSDIS") 
    {
    field(DTYP, "Soft Channel")
    field(VAL, "1")
    field(OUT, "BL04I-VA-IONP-01:INIT:SETSPSEQ.DISA")
    }
#
# 1) Get the instrument value for SP1 ON/OFF
# 1a) Wait one second for :RQSTSP1ON to complete and populate :SP1OFF and :SP1ON
# 2) Disable instrument update of setting SP1 ON/OFF
# 3) LOAD SETSP1OFF with SP1OFF
# 4) LOAD SETSP1ON with SP1ON
# 5) Enable instrument update of setting SP1 ON/OFF
# 6) Process seq for SP2
# 7) Disable this seq record from processing again
record(seq, "BL04I-VA-IONP-01:INIT:SETSPSEQ") 
    {
    field(SCAN, "1 second")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IONP-01:RQSTSP1ON PP")
    field(LNK2, "BL04I-VA-IONP-01:SETSPS1.DISA PP")
    field(LNK3, "BL04I-VA-IONP-01:SETSP1OFF PP")
    field(LNK4, "BL04I-VA-IONP-01:SETSP1ON PP")
    field(LNK5, "BL04I-VA-IONP-01:SETSPS1.DISA PP")
    field(LNK6, "BL04I-VA-IONP-01:INIT:SETSP2SEQ PP")
    field(LNK7, "BL04I-VA-IONP-01:INIT:SETSPSDIS PP")
    field(DLY1, "0")
    field(DLY2, "3.0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DLY7, "0")
    field(DOL1, "0")
    field(DOL2, "1")
    field(DOL3, "BL04I-VA-IONP-01:SP1OFF")
    field(DOL4, "BL04I-VA-IONP-01:SP1ON")
    field(DOL5, "0")
    field(DOL6, "0")
    field(DOL7, "1")
    }
    
# 1) Get the instrument value for SP2 ON/OFF
# 1a) Wait one second for :RQSTSP2ON to complete and populate :SP2OFF and :SP2ON
# 2) Disable instrument update of setting SP2 ON/OFF
# 3) LOAD SETSP2OFF with SP2OFF
# 4) LOAD SETSP2ON with SP2ON
# 5) Enable instrument update of setting SP2 ON/OFF
record(seq, "BL04I-VA-IONP-01:INIT:SETSP2SEQ")
    {
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IONP-01:RQSTSP2ON PP")
    field(LNK2, "BL04I-VA-IONP-01:SETSPS2.DISA PP")
    field(LNK3, "BL04I-VA-IONP-01:SETSP2OFF PP")
    field(LNK4, "BL04I-VA-IONP-01:SETSP2ON PP")
    field(LNK5, "BL04I-VA-IONP-01:SETSPS2.DISA PP")
    field(DLY1, "0")
    field(DLY2, "3.0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DOL1, "0")
    field(DOL2, "1")
    field(DOL3, "BL04I-VA-IONP-01:SP2OFF")
    field(DOL4, "BL04I-VA-IONP-01:SP2ON")
    field(DOL5, "0")
    }



# Although requesting SPS is logically an input, a calcout has been 
# used here to allow the return values to be injected directly into the 
# given record names via input links.
#
# Record RQSTSP1OFF is I/O Intr and gets (a copy of) any input, including input that was directed to record RQSTSP1ON
# Record RQSTSP1STATE is I/O Intr and gets (a copy of) any input, including input that was directed to record RQSTSP1ON
 
# sps: Parameter 1) Unit number   2) Device base name    3) Logical setpoint number for this pump (1 | 2) - gets converted to actual setpoint in protocol.
record(ai, "BL04I-VA-IONP-01:RQSTSP1ON") 
    {
    field(DESC, "Rqst Setpoint1")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(INP,  "@digitelMpc.proto getsps(01,BL04I-VA-IONP-01,1) ty_40_2")
    field(PINI, "NO")
    }

# sps: Parameter 1) Unit number   2) Device base name    3) Logical setpoint number for this pump (1 | 2).
record(ai, "BL04I-VA-IONP-01:RQSTSP2ON") 
    {
    field(DESC, "Rqst Setpoint2")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(INP,  "@digitelMpc.proto getsps(01,BL04I-VA-IONP-01,2) ty_40_2")
    field(PINI, "NO")
    }


#% archiver 10 Monitor
#% controldesk Setpoint 1 readback
# This PV is written to directly from the protocol (sps) return string
#
record(ai, "BL04I-VA-IONP-01:SP1ON") 
    {
    field(DESC, "Setpoint 1 On")
    field(DTYP, "Soft Channel")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-01:SP1OFF") 
    {
    field(DESC, "Setpoint 1 Off")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
# This PV is written to directly from the protocol (sps) return string
record(bi,"BL04I-VA-IONP-01:SP1STATE")
    {
    field(DESC, "Setpoint 1 State")
    field(PINI, "NO")
    field(INP,  "0")
    field(ZNAM, "Off")
    field(ONAM, "On")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 setpoint
#
record(ao, "BL04I-VA-IONP-01:SETSP1ON") 
    {
    field(VAL,  "1.0E-7")
    field(DESC, "Setpoint 1 On")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-01:SETSPS1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 Off setpoint
#
record(ao, "BL04I-VA-IONP-01:SETSP1OFF") 
    {
    field(VAL,  "2.0E-7")
    field(DESC, "Setpoint 1 Off")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-01:SETSPS1")
    }

# NB: INPF is written to by :SPNUM1 on PINI
#     The supply number is equivalent to pump number (1 | 2)
#
# INPA => Setpoint ON pressure
# INPB => Setpoint OFF pressure
# INPC => Source (usually equivalent to pump [1|2])
# INPD => Lower pressure working limit
# INPE => Upper pressure working limit
# INPF => Setpoint interlock number [1..4]
#
record(calcout, "BL04I-VA-IONP-01:SETSPS1") 
    {
    field(DESC, "Output Setpoints")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsps(01,BL04I-VA-IONP-01,1) ty_40_2")
##    field(OUT,  "@digitelMpc.proto setsps(01,1) ty_40_2")
    field(INPA, "BL04I-VA-IONP-01:SETSP1ON")
    field(INPB, "BL04I-VA-IONP-01:SETSP1OFF")
    field(INPC, "1")
    field(INPD, "1.01E-10")
    field(INPE, "9.99E-5")
    field(INPF, "BL04I-VA-IONP-01:SPNUM1")
    field(CALC, "((A<D)||(B>E)||(F<1))?0:F")
    field(OOPT, "When Non-zero")
    field(PINI, "NO")
    field(FLNK, "BL04I-VA-IONP-01:RQSTSP1ON")
    }


## ----------------- SP2 -------------------------------

#% archiver 10 Monitor
#% controldesk Setpoint 2 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-01:SP2ON") 
    {
    field(DESC, "Setpoint 2 On")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-01:SP2OFF") 
    {
    field(DESC, "Setpoint 2 Off")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
# This PV is written to directly from the protocol (sps) return string
record(bi,"BL04I-VA-IONP-01:SP2STATE")
    {
    field(DESC, "Setpoint 2 State")
    field(PINI, "NO")
    field(INP,  "0")
    field(ZNAM, "Off")
    field(ONAM, "On")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 setpoint
#
record(ao, "BL04I-VA-IONP-01:SETSP2ON") 
    {
    field(VAL,  "1.0E-7")
    field(DESC, "Setpoint 2 On")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-01:SETSPS2")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 Off setpoint
#
record(ao, "BL04I-VA-IONP-01:SETSP2OFF") 
    {
    field(VAL,  "2.0E-7")
    field(DESC, "Setpoint 2 Off")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-01:SETSPS2")
    }

# NB: INPF is written to by :SPNUM2 on PINI
# INPA => Setpoint ON pressure
# INPB => Setpoint OFF pressure
# INPC => Source (usually equivalent to pump [1|2])
# INPD => Lower pressure working limit
# INPE => Upper pressure working limit
# INPF => Setpoint interlock number [1..4]
#
record(calcout, "BL04I-VA-IONP-01:SETSPS2") 
    {
    field(DESC, "Output Setpoints")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsps(01,BL04I-VA-IONP-01,1) ty_40_2")
##    field(OUT,  "@digitelMpc.proto setsps(01,1) ty_40_2")
    field(INPA, "BL04I-VA-IONP-01:SETSP2ON")
    field(INPB, "BL04I-VA-IONP-01:SETSP2OFF")
    field(INPC, "1")
    field(INPD, "1.01E-10")
    field(INPE, "9.99E-5")
    field(INPF, "BL04I-VA-IONP-01:SPNUM2")    
    field(CALC, "((A<D)||(B>E)||(F<1))?0:F")
    field(OOPT, "When Non-zero")
    field(PINI, "NO")
    field(FLNK, "BL04I-VA-IONP-01:RQSTSP2ON")
    }


# Calculate the controller setpoint number for this pump
# Each setpoint has an ON and an OFF pressure attribute.
# Pump  Pump Setpoint  Controller Setpoint
#   1       1                    1
#   1       2                    3
#   2       1                    2
#   2       2                    4

record(calc, "BL04I-VA-IONP-01:SPNUM1") 
    {
    field(DESC, "Controller setpoints number Pump 1")
    field(INPA, "1")
    field(CALC, "(A>1)?2:1")
    field(PINI, "YES")
    # field(FLNK, "BL04I-VA-IONP-01:SETSPS1")
    }

record(calc, "BL04I-VA-IONP-01:SPNUM2") 
    {
    field(DESC, "Controller setpoints number Pump 2")
    field(INPA, "1")
    field(CALC, "(A>1)?4:3")
    field(PINI, "YES")
    # field(FLNK, "BL04I-VA-IONP-01:SETSPS2")
    }


################################################################################
# Text string on front panel
#
record(stringout, "BL04I-VA-IONP-01:SETTEXT") {
    field(DESC, "Text String")
    field(VAL , "BL04I-VA-IONP-01")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto settext(01,1) ty_40_2")
    field(PINI, "YES")
}
################################################################################

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-IONP-01:ERROR") 
    {
    field(DESC, "Last error message")
    }

# PINI set to ensure the record is initialised with TIMEOUT status,
# which will only change to OK once communication starts.
record(mbbi, "BL04I-VA-IONP-01:COMMS")
    {
    field(DESC, "Communication Status")
    field(DTYP, "Soft Channel")
    field(ZRST, "TIMEOUT")
    field(ONST, "OK")
    field(INP, "0")
    field(PINI, "YES")
    }

record(scalcout, "BL04I-VA-IONP-01:COMMSMATCH")
    {
    field(INAA, "BL04I-VA-IONP-01:P.STAT MS CP")
    field(CALC, "printf('%d',AA!='TIMEOUT'?1:0)")
    field(OOPT, "Every Time")
    field(DOPT, "Use CALC")
    field(OUT, "BL04I-VA-IONP-01:COMMS PP MS")
    }

# digitelMpcIonp.template
#% macro, __doc__, Template database for digitel MPC - Ion Pump
# Pete Owens - 30/9/03
#
# substitutions:
#% macro, device, device name
#% macro, name, Object name and gui association name
#% macro, port, asyn serial port number
#% macro, unit, unit number for multi-drop serial (2 hex digits - 05 by default)
#% macro, pump, ion pump number (1 or 2)
#% macro, size, pump size (l/s)
#% macro, sp1on, setpoint1 on
#% macro, sp1off, setpoint1 off
#% macro, sp2on, setpoint2 on
#% macro, sp2off, setpoint2 off
#% macro, alh,  alarm handler tag (Defaults to None) c.f. mp49's commit 80833
#% macro, text, Text to display in the ion pump controller window.
################################################################################

# This associates an edm screen with the template
# % gui, IONP2, edm, digitelMpcIonp2sp.edl, device=BL04I-VA-IONP-02

# This associates BOY screens with the template
# % gui, IONP2, boydetail, digitelMpcApp_opi/ionp_detail.opi, device=BL04I-VA-IONP-02, desc=BL04I-VA-IONP-02, name=IONP2
# % gui, IONP2, boyembed, digitelMpcApp_opi/ionp_embed_box.opi, device=BL04I-VA-IONP-02, desc=BL04I-VA-IONP-02, name=IONP2
# % gui, IONP2, boyembed, digitelMpcApp_opi/ionp_embed.opi, device=BL04I-VA-IONP-02, desc=BL04I-VA-IONP-02, name=IONP2

# These define what PVs a valve detail screen should contain
# % gui, IONP2, readback, Status,   BL04I-VA-IONP-02:STA
# % gui, IONP2, readback, Error Code,  BL04I-VA-IONP-02:ERR
# % gui, IONP2, readback, Voltage,  BL04I-VA-IONP-02:V
# % gui, IONP2, readback, Current,  BL04I-VA-IONP-02:I
# % gui, IONP2, readback, Strapping,  BL04I-VA-IONP-02:HV
# % gui, IONP2, enum, Start,  BL04I-VA-IONP-02:START
# % gui, IONP2, readback, Pump Size,  BL04I-VA-IONP-02:SIZE
# % gui, IONP2, demand, Pump Size,  BL04I-VA-IONP-02:SETSIZE
# % gui, IONP2, readback, Calibration,  BL04I-VA-IONP-02:CAL
# % gui, IONP2, demand, Calibration,  BL04I-VA-IONP-02:SETCAL
# % gui, IONP2, readback, Setpoint 1 On,  BL04I-VA-IONP-02:SP1ON
# % gui, IONP2, demand, Setpoint 1 On,  BL04I-VA-IONP-02:SETSP1ON
# % gui, IONP2, readback, Setpoint 1 Off,  BL04I-VA-IONP-02:SP1OFF
# % gui, IONP2, demand, Setpoint 1 Off,  BL04I-VA-IONP-02:SETSP1OFF
# % gui, IONP2, readback, Setpoint 2 On,  BL04I-VA-IONP-02:SP2ON
# % gui, IONP2, demand, Setpoint 2 On,  BL04I-VA-IONP-02:SETSP2ON
# % gui, IONP2, readback, Setpoint 2 Off,  BL04I-VA-IONP-02:SP2OFF
# % gui, IONP2, demand, Setpoint 2 Off,  BL04I-VA-IONP-02:SETSP2OFF

# Read pump current
#
#% controldesk Current readback
#
record(ai, "BL04I-VA-IONP-02:I") {
    field(DESC, "Pump Current")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto current(01,1) ty_40_2")
    field(SCAN, "1 second")
    field(EGU,  "A")
    field(LOPR, "0.0")
    field(HOPR, "10.0")
    field(PREC, "1")
}
################################################################################
# Read pump pressure
#
#% archiver 10 Monitor
#% controldesk Pressure readback
#
record(ai, "BL04I-VA-IONP-02:P") {
    field(DESC, "Pump Pressure")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto pressure(01,1) ty_40_2")
    field(SCAN, "1 second")
    field(FLNK, "BL04I-VA-IONP-02:PLOG")
    field(EGU,  "mbar")
    field(HOPR, "1000")
    field(LOPR, "1.0E-12")
    field(PREC, "11")
}
record(calcout, "BL04I-VA-IONP-02:ADEL")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-IONP-02:P.ADEL")
    field(INPA, "BL04I-VA-IONP-02:P")
#    field(INPB, "4")
#    field(INPB, "3")
    field(INPB, "2")
    field(SCAN, "10 second")
}
#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-IONP-02:PLOG")
{
    field(DESC, "log Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-IONP-02:P MS")
    field(HOPR, "3")
    field(LOPR, "-12")
#    field(ADEL, "0.1")
#    field(ADEL, "0.125")
#    field(ADEL, "0.176")
    field(ADEL, "0.25")
}
################################################################################
# Read pump voltage
#
#% controldesk Voltage readback
#
record(longin, "BL04I-VA-IONP-02:V") {
    field(DESC, "Pump Voltage")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto voltage(01,1) ty_40_2")
    field(SCAN, "1 second")
    field(EGU,  "V")
    field(LOPR, "0")
    field(HOPR, "10")
}
################################################################################
# Get HV Strapping
#
#% archiver 1 Monitor
#% controldesk HV Strapping readback
#
record(longin, "BL04I-VA-IONP-02:HV") 
{
    field(DESC, "HV Strapping")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto strap(01,1) ty_40_2")
    field(SCAN, "10 second")
    field(EGU,  "V")
    field(LOPR, "5600")
    field(HOPR, "7000")
}
################################################################################
# Get supply status
#
#% archiver 10 Monitor
#% controldesk Supply Status smon
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-VA-IONP-02:STA
record(mbbi, "BL04I-VA-IONP-02:STA")
{
    field(DESC, "Supply Status")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto status(01,1) ty_40_2")
    field(SCAN, "1 second")
    field(ZRST, "Unknown")
    field(ONST, "Waiting")
    field(TWST, "Standby")
    field(THST, "Safe-Conn")
    field(FRST, "Running")
    field(FVST, "Cool Down")
    field(SXST, "Pump Error")
    field(SVST, "HV Switched Off")
    field(EIST, "Interlock")
    field(NIST, "Shut Down")
    field(TEST, "Calibration")
    field(ELST, "Invalid")
    field(TVST, "Invalid")
    field(TTST, "Invalid")
    field(FTST, "Invalid")
    field(FFST, "Invalid")
    field(UNSV, "MAJOR")
    field(ZRSV, "MAJOR")
    field(ONSV, "MAJOR")
    field(TWSV, "MAJOR")
    field(THSV, "MAJOR")
    field(FRSV, "NO_ALARM")
    field(FVSV, "MINOR")
    field(SXSV, "MAJOR")
    field(SVSV, "MAJOR")
    field(EISV, "MAJOR")
    field(NISV, "MAJOR")
    field(TESV, "MAJOR")
    field(ELSV, "MAJOR")
    field(TVSV, "MAJOR")
    field(TTSV, "MAJOR")
    field(FTSV, "MAJOR")
    field(FFSV, "MAJOR")
    field(FLNK, "BL04I-VA-IONP-02:ERRSEL")
}

record(seq, "BL04I-VA-IONP-02:ERRSEQ")
{
    field(DESC, "Get Error if applicable")
    field(SCAN, "Passive")
    field(SELM, "Specified")
    field(SELN, "1")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-IONP-02:ERR PP MS")
    field(DOL2, "BL04I-VA-IONP-02:ERRGET PP MS")
    field(LNK2, "BL04I-VA-IONP-02:ERR PP MS")
}

record(longin, "BL04I-VA-IONP-02:ERRGET")
{
    field(DESC, "Get Error Code")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto err(01,1) ty_40_2")
    field(SCAN, "Passive")
}

record(calcout, "BL04I-VA-IONP-02:ERRSEL")
{
    field(DESC, "Choose which error source")
    field(INPA, "BL04I-VA-IONP-02:STA MS")
    field(CALC, "A>=3?2:1")
    field(OUT, "BL04I-VA-IONP-02:ERRSEQ.SELN PP MS")
}

#
#% archiver 10 Monitor
#% controldesk Error Code smon
#
record(mbbi, "BL04I-VA-IONP-02:ERR")
{
    field(DESC, "Error Code")
    field(DTYP, "Soft Channel")
    field(SCAN, "Passive")
    field(ZRST, "OK")
    field(ONST, "Too many cycles")
    field(TWST, "High pressure")
    field(THST, "High current")
    field(FRST, "High pressure")
    field(FVST, "Pump power")
    field(SXST, "High current")
    field(SVST, "Short circuit")
    field(EIST, "Malfunction")
    field(NIST, "Low voltage")
    field(TEST, "Arc detect")
    field(ELST, "11")
    field(TVST, "12")
    field(TTST, "13")
    field(FTST, "14")
    field(FFST, "15")
    field(UNSV, "MINOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "MINOR")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MINOR")
    field(FVSV, "MINOR")
    field(SXSV, "MINOR")
    field(SVSV, "MINOR")
    field(EISV, "MINOR")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MINOR")
    field(TVSV, "MINOR")
    field(TTSV, "MINOR")
    field(FTSV, "MINOR")
    field(FFSV, "MINOR")
}
################################################################################
# Pump size
#
#% archiver 10 Monitor
#% controldesk Pump Size readback
#
record(longin, "BL04I-VA-IONP-02:SIZE") {
    field(DESC, "Pump Size")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto size(01,1) ty_40_2")
    field(SCAN, "10 second")
    field(EGU,  "l/s")
    field(LOPR, "0")
    field(HOPR, "1200")
}
#
#% archiver 10 Monitor
#% controldesk Pump Size setpoint
#
record(ao, "BL04I-VA-IONP-02:SETSIZE") {
    field(DESC, "Pump Size")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsize(01,1) ty_40_2")
    field(PINI, "YES")
    field(DOL,  "600")
    field(EGU,  "l/s")
    field(DRVL, "0")
    field(DRVH, "1200")
    field(LOPR, "0")
    field(HOPR, "1200")
    field(PREC, "0")
}
################################################################################
# Calibration factor
#
#% archiver 10 Monitor
#% controldesk Calibration Factor readback
#
record(ai, "BL04I-VA-IONP-02:CAL") {
    field(DESC, "Calibration Factor")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto cal(01,1) ty_40_2")
    field(SCAN, "10 second")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
#
#% archiver 10 Monitor
#% controldesk Calibration Factor setpoint
#
record(ao, "BL04I-VA-IONP-02:SETCAL") {
    field(DESC, "Calibration Factor")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setcal(01,1) ty_40_2")
    field(DRVL, "0.0")
    field(DRVH, "9.99")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
################################################################################
# Start
#
#% archiver 10 Monitor
#% controldesk Supply Status scon
#
record(bo, "BL04I-VA-IONP-02:START")
{
    field(DESC, "HV on/off")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto start(01,1) ty_40_2")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
record(bi,"BL04I-VA-IONP-02:STARTING")
{
    field(DESC, "Starting Pumps")
    field(PINI, "YES")
    field(INP,  "0")
    field(ZNAM, "")
    field(ONAM, "Starting")
}

################################################################################
# Setpoints
#
# The MPC and MPCe controllers have four setpoints. Each setpoint has associated
# with it an ON pressure, an OFF pressure and a supply.
# Each pump on the controller is allocated two of the setpoints (pump setpoints 1 & 2).
# The following table describes the mapping of controller setpoints and supplies to
# each pump.
# I Gillingham: April 2015
#
#  Pump number   Pump_Setpoint Controller_Setpoint   Supply  
#      1             1                   1             1
#      2             1                   2             2
#      1             2                   3             1
#      2             2                   4             2

## ----------------- SP1 -------------------------------
#
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSPS1 and SETSPS2 records just once
# at startup.
#
record(bo, "BL04I-VA-IONP-02:INIT:SETSPSDIS") 
    {
    field(DTYP, "Soft Channel")
    field(VAL, "1")
    field(OUT, "BL04I-VA-IONP-02:INIT:SETSPSEQ.DISA")
    }
#
# 1) Get the instrument value for SP1 ON/OFF
# 1a) Wait one second for :RQSTSP1ON to complete and populate :SP1OFF and :SP1ON
# 2) Disable instrument update of setting SP1 ON/OFF
# 3) LOAD SETSP1OFF with SP1OFF
# 4) LOAD SETSP1ON with SP1ON
# 5) Enable instrument update of setting SP1 ON/OFF
# 6) Process seq for SP2
# 7) Disable this seq record from processing again
record(seq, "BL04I-VA-IONP-02:INIT:SETSPSEQ") 
    {
    field(SCAN, "1 second")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IONP-02:RQSTSP1ON PP")
    field(LNK2, "BL04I-VA-IONP-02:SETSPS1.DISA PP")
    field(LNK3, "BL04I-VA-IONP-02:SETSP1OFF PP")
    field(LNK4, "BL04I-VA-IONP-02:SETSP1ON PP")
    field(LNK5, "BL04I-VA-IONP-02:SETSPS1.DISA PP")
    field(LNK6, "BL04I-VA-IONP-02:INIT:SETSP2SEQ PP")
    field(LNK7, "BL04I-VA-IONP-02:INIT:SETSPSDIS PP")
    field(DLY1, "0")
    field(DLY2, "3.0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DLY7, "0")
    field(DOL1, "0")
    field(DOL2, "1")
    field(DOL3, "BL04I-VA-IONP-02:SP1OFF")
    field(DOL4, "BL04I-VA-IONP-02:SP1ON")
    field(DOL5, "0")
    field(DOL6, "0")
    field(DOL7, "1")
    }
    
# 1) Get the instrument value for SP2 ON/OFF
# 1a) Wait one second for :RQSTSP2ON to complete and populate :SP2OFF and :SP2ON
# 2) Disable instrument update of setting SP2 ON/OFF
# 3) LOAD SETSP2OFF with SP2OFF
# 4) LOAD SETSP2ON with SP2ON
# 5) Enable instrument update of setting SP2 ON/OFF
record(seq, "BL04I-VA-IONP-02:INIT:SETSP2SEQ")
    {
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IONP-02:RQSTSP2ON PP")
    field(LNK2, "BL04I-VA-IONP-02:SETSPS2.DISA PP")
    field(LNK3, "BL04I-VA-IONP-02:SETSP2OFF PP")
    field(LNK4, "BL04I-VA-IONP-02:SETSP2ON PP")
    field(LNK5, "BL04I-VA-IONP-02:SETSPS2.DISA PP")
    field(DLY1, "0")
    field(DLY2, "3.0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DOL1, "0")
    field(DOL2, "1")
    field(DOL3, "BL04I-VA-IONP-02:SP2OFF")
    field(DOL4, "BL04I-VA-IONP-02:SP2ON")
    field(DOL5, "0")
    }



# Although requesting SPS is logically an input, a calcout has been 
# used here to allow the return values to be injected directly into the 
# given record names via input links.
#
# Record RQSTSP1OFF is I/O Intr and gets (a copy of) any input, including input that was directed to record RQSTSP1ON
# Record RQSTSP1STATE is I/O Intr and gets (a copy of) any input, including input that was directed to record RQSTSP1ON
 
# sps: Parameter 1) Unit number   2) Device base name    3) Logical setpoint number for this pump (1 | 2) - gets converted to actual setpoint in protocol.
record(ai, "BL04I-VA-IONP-02:RQSTSP1ON") 
    {
    field(DESC, "Rqst Setpoint1")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(INP,  "@digitelMpc.proto getsps(01,BL04I-VA-IONP-02,1) ty_40_2")
    field(PINI, "NO")
    }

# sps: Parameter 1) Unit number   2) Device base name    3) Logical setpoint number for this pump (1 | 2).
record(ai, "BL04I-VA-IONP-02:RQSTSP2ON") 
    {
    field(DESC, "Rqst Setpoint2")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(INP,  "@digitelMpc.proto getsps(01,BL04I-VA-IONP-02,2) ty_40_2")
    field(PINI, "NO")
    }


#% archiver 10 Monitor
#% controldesk Setpoint 1 readback
# This PV is written to directly from the protocol (sps) return string
#
record(ai, "BL04I-VA-IONP-02:SP1ON") 
    {
    field(DESC, "Setpoint 1 On")
    field(DTYP, "Soft Channel")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-02:SP1OFF") 
    {
    field(DESC, "Setpoint 1 Off")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
# This PV is written to directly from the protocol (sps) return string
record(bi,"BL04I-VA-IONP-02:SP1STATE")
    {
    field(DESC, "Setpoint 1 State")
    field(PINI, "NO")
    field(INP,  "0")
    field(ZNAM, "Off")
    field(ONAM, "On")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 setpoint
#
record(ao, "BL04I-VA-IONP-02:SETSP1ON") 
    {
    field(VAL,  "1.0E-7")
    field(DESC, "Setpoint 1 On")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-02:SETSPS1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 Off setpoint
#
record(ao, "BL04I-VA-IONP-02:SETSP1OFF") 
    {
    field(VAL,  "2.0E-7")
    field(DESC, "Setpoint 1 Off")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-02:SETSPS1")
    }

# NB: INPF is written to by :SPNUM1 on PINI
#     The supply number is equivalent to pump number (1 | 2)
#
# INPA => Setpoint ON pressure
# INPB => Setpoint OFF pressure
# INPC => Source (usually equivalent to pump [1|2])
# INPD => Lower pressure working limit
# INPE => Upper pressure working limit
# INPF => Setpoint interlock number [1..4]
#
record(calcout, "BL04I-VA-IONP-02:SETSPS1") 
    {
    field(DESC, "Output Setpoints")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsps(01,BL04I-VA-IONP-02,1) ty_40_2")
##    field(OUT,  "@digitelMpc.proto setsps(01,1) ty_40_2")
    field(INPA, "BL04I-VA-IONP-02:SETSP1ON")
    field(INPB, "BL04I-VA-IONP-02:SETSP1OFF")
    field(INPC, "1")
    field(INPD, "1.01E-10")
    field(INPE, "9.99E-5")
    field(INPF, "BL04I-VA-IONP-02:SPNUM1")
    field(CALC, "((A<D)||(B>E)||(F<1))?0:F")
    field(OOPT, "When Non-zero")
    field(PINI, "NO")
    field(FLNK, "BL04I-VA-IONP-02:RQSTSP1ON")
    }


## ----------------- SP2 -------------------------------

#% archiver 10 Monitor
#% controldesk Setpoint 2 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-02:SP2ON") 
    {
    field(DESC, "Setpoint 2 On")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-02:SP2OFF") 
    {
    field(DESC, "Setpoint 2 Off")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
# This PV is written to directly from the protocol (sps) return string
record(bi,"BL04I-VA-IONP-02:SP2STATE")
    {
    field(DESC, "Setpoint 2 State")
    field(PINI, "NO")
    field(INP,  "0")
    field(ZNAM, "Off")
    field(ONAM, "On")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 setpoint
#
record(ao, "BL04I-VA-IONP-02:SETSP2ON") 
    {
    field(VAL,  "1.0E-7")
    field(DESC, "Setpoint 2 On")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-02:SETSPS2")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 Off setpoint
#
record(ao, "BL04I-VA-IONP-02:SETSP2OFF") 
    {
    field(VAL,  "2.0E-7")
    field(DESC, "Setpoint 2 Off")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-02:SETSPS2")
    }

# NB: INPF is written to by :SPNUM2 on PINI
# INPA => Setpoint ON pressure
# INPB => Setpoint OFF pressure
# INPC => Source (usually equivalent to pump [1|2])
# INPD => Lower pressure working limit
# INPE => Upper pressure working limit
# INPF => Setpoint interlock number [1..4]
#
record(calcout, "BL04I-VA-IONP-02:SETSPS2") 
    {
    field(DESC, "Output Setpoints")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsps(01,BL04I-VA-IONP-02,1) ty_40_2")
##    field(OUT,  "@digitelMpc.proto setsps(01,1) ty_40_2")
    field(INPA, "BL04I-VA-IONP-02:SETSP2ON")
    field(INPB, "BL04I-VA-IONP-02:SETSP2OFF")
    field(INPC, "1")
    field(INPD, "1.01E-10")
    field(INPE, "9.99E-5")
    field(INPF, "BL04I-VA-IONP-02:SPNUM2")    
    field(CALC, "((A<D)||(B>E)||(F<1))?0:F")
    field(OOPT, "When Non-zero")
    field(PINI, "NO")
    field(FLNK, "BL04I-VA-IONP-02:RQSTSP2ON")
    }


# Calculate the controller setpoint number for this pump
# Each setpoint has an ON and an OFF pressure attribute.
# Pump  Pump Setpoint  Controller Setpoint
#   1       1                    1
#   1       2                    3
#   2       1                    2
#   2       2                    4

record(calc, "BL04I-VA-IONP-02:SPNUM1") 
    {
    field(DESC, "Controller setpoints number Pump 1")
    field(INPA, "1")
    field(CALC, "(A>1)?2:1")
    field(PINI, "YES")
    # field(FLNK, "BL04I-VA-IONP-02:SETSPS1")
    }

record(calc, "BL04I-VA-IONP-02:SPNUM2") 
    {
    field(DESC, "Controller setpoints number Pump 2")
    field(INPA, "1")
    field(CALC, "(A>1)?4:3")
    field(PINI, "YES")
    # field(FLNK, "BL04I-VA-IONP-02:SETSPS2")
    }


################################################################################
# Text string on front panel
#
record(stringout, "BL04I-VA-IONP-02:SETTEXT") {
    field(DESC, "Text String")
    field(VAL , "BL04I-VA-IONP-02")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto settext(01,1) ty_40_2")
    field(PINI, "YES")
}
################################################################################

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-IONP-02:ERROR") 
    {
    field(DESC, "Last error message")
    }

# PINI set to ensure the record is initialised with TIMEOUT status,
# which will only change to OK once communication starts.
record(mbbi, "BL04I-VA-IONP-02:COMMS")
    {
    field(DESC, "Communication Status")
    field(DTYP, "Soft Channel")
    field(ZRST, "TIMEOUT")
    field(ONST, "OK")
    field(INP, "0")
    field(PINI, "YES")
    }

record(scalcout, "BL04I-VA-IONP-02:COMMSMATCH")
    {
    field(INAA, "BL04I-VA-IONP-02:P.STAT MS CP")
    field(CALC, "printf('%d',AA!='TIMEOUT'?1:0)")
    field(OOPT, "Every Time")
    field(DOPT, "Use CALC")
    field(OUT, "BL04I-VA-IONP-02:COMMS PP MS")
    }

# digitelMpcIonp.template
#% macro, __doc__, Template database for digitel MPC - Ion Pump
# Pete Owens - 30/9/03
#
# substitutions:
#% macro, device, device name
#% macro, name, Object name and gui association name
#% macro, port, asyn serial port number
#% macro, unit, unit number for multi-drop serial (2 hex digits - 05 by default)
#% macro, pump, ion pump number (1 or 2)
#% macro, size, pump size (l/s)
#% macro, sp1on, setpoint1 on
#% macro, sp1off, setpoint1 off
#% macro, sp2on, setpoint2 on
#% macro, sp2off, setpoint2 off
#% macro, alh,  alarm handler tag (Defaults to None) c.f. mp49's commit 80833
#% macro, text, Text to display in the ion pump controller window.
################################################################################

# This associates an edm screen with the template
# % gui, IONP3, edm, digitelMpcIonp2sp.edl, device=BL04I-VA-IONP-03

# This associates BOY screens with the template
# % gui, IONP3, boydetail, digitelMpcApp_opi/ionp_detail.opi, device=BL04I-VA-IONP-03, desc=BL04I-VA-IONP-03, name=IONP3
# % gui, IONP3, boyembed, digitelMpcApp_opi/ionp_embed_box.opi, device=BL04I-VA-IONP-03, desc=BL04I-VA-IONP-03, name=IONP3
# % gui, IONP3, boyembed, digitelMpcApp_opi/ionp_embed.opi, device=BL04I-VA-IONP-03, desc=BL04I-VA-IONP-03, name=IONP3

# These define what PVs a valve detail screen should contain
# % gui, IONP3, readback, Status,   BL04I-VA-IONP-03:STA
# % gui, IONP3, readback, Error Code,  BL04I-VA-IONP-03:ERR
# % gui, IONP3, readback, Voltage,  BL04I-VA-IONP-03:V
# % gui, IONP3, readback, Current,  BL04I-VA-IONP-03:I
# % gui, IONP3, readback, Strapping,  BL04I-VA-IONP-03:HV
# % gui, IONP3, enum, Start,  BL04I-VA-IONP-03:START
# % gui, IONP3, readback, Pump Size,  BL04I-VA-IONP-03:SIZE
# % gui, IONP3, demand, Pump Size,  BL04I-VA-IONP-03:SETSIZE
# % gui, IONP3, readback, Calibration,  BL04I-VA-IONP-03:CAL
# % gui, IONP3, demand, Calibration,  BL04I-VA-IONP-03:SETCAL
# % gui, IONP3, readback, Setpoint 1 On,  BL04I-VA-IONP-03:SP1ON
# % gui, IONP3, demand, Setpoint 1 On,  BL04I-VA-IONP-03:SETSP1ON
# % gui, IONP3, readback, Setpoint 1 Off,  BL04I-VA-IONP-03:SP1OFF
# % gui, IONP3, demand, Setpoint 1 Off,  BL04I-VA-IONP-03:SETSP1OFF
# % gui, IONP3, readback, Setpoint 2 On,  BL04I-VA-IONP-03:SP2ON
# % gui, IONP3, demand, Setpoint 2 On,  BL04I-VA-IONP-03:SETSP2ON
# % gui, IONP3, readback, Setpoint 2 Off,  BL04I-VA-IONP-03:SP2OFF
# % gui, IONP3, demand, Setpoint 2 Off,  BL04I-VA-IONP-03:SETSP2OFF

# Read pump current
#
#% controldesk Current readback
#
record(ai, "BL04I-VA-IONP-03:I") {
    field(DESC, "Pump Current")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto current(01,1) ty_40_3")
    field(SCAN, "1 second")
    field(EGU,  "A")
    field(LOPR, "0.0")
    field(HOPR, "10.0")
    field(PREC, "1")
}
################################################################################
# Read pump pressure
#
#% archiver 10 Monitor
#% controldesk Pressure readback
#
record(ai, "BL04I-VA-IONP-03:P") {
    field(DESC, "Pump Pressure")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto pressure(01,1) ty_40_3")
    field(SCAN, "1 second")
    field(FLNK, "BL04I-VA-IONP-03:PLOG")
    field(EGU,  "mbar")
    field(HOPR, "1000")
    field(LOPR, "1.0E-12")
    field(PREC, "11")
}
record(calcout, "BL04I-VA-IONP-03:ADEL")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-IONP-03:P.ADEL")
    field(INPA, "BL04I-VA-IONP-03:P")
#    field(INPB, "4")
#    field(INPB, "3")
    field(INPB, "2")
    field(SCAN, "10 second")
}
#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-IONP-03:PLOG")
{
    field(DESC, "log Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-IONP-03:P MS")
    field(HOPR, "3")
    field(LOPR, "-12")
#    field(ADEL, "0.1")
#    field(ADEL, "0.125")
#    field(ADEL, "0.176")
    field(ADEL, "0.25")
}
################################################################################
# Read pump voltage
#
#% controldesk Voltage readback
#
record(longin, "BL04I-VA-IONP-03:V") {
    field(DESC, "Pump Voltage")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto voltage(01,1) ty_40_3")
    field(SCAN, "1 second")
    field(EGU,  "V")
    field(LOPR, "0")
    field(HOPR, "10")
}
################################################################################
# Get HV Strapping
#
#% archiver 1 Monitor
#% controldesk HV Strapping readback
#
record(longin, "BL04I-VA-IONP-03:HV") 
{
    field(DESC, "HV Strapping")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto strap(01,1) ty_40_3")
    field(SCAN, "10 second")
    field(EGU,  "V")
    field(LOPR, "5600")
    field(HOPR, "7000")
}
################################################################################
# Get supply status
#
#% archiver 10 Monitor
#% controldesk Supply Status smon
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-VA-IONP-03:STA
record(mbbi, "BL04I-VA-IONP-03:STA")
{
    field(DESC, "Supply Status")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto status(01,1) ty_40_3")
    field(SCAN, "1 second")
    field(ZRST, "Unknown")
    field(ONST, "Waiting")
    field(TWST, "Standby")
    field(THST, "Safe-Conn")
    field(FRST, "Running")
    field(FVST, "Cool Down")
    field(SXST, "Pump Error")
    field(SVST, "HV Switched Off")
    field(EIST, "Interlock")
    field(NIST, "Shut Down")
    field(TEST, "Calibration")
    field(ELST, "Invalid")
    field(TVST, "Invalid")
    field(TTST, "Invalid")
    field(FTST, "Invalid")
    field(FFST, "Invalid")
    field(UNSV, "MAJOR")
    field(ZRSV, "MAJOR")
    field(ONSV, "MAJOR")
    field(TWSV, "MAJOR")
    field(THSV, "MAJOR")
    field(FRSV, "NO_ALARM")
    field(FVSV, "MINOR")
    field(SXSV, "MAJOR")
    field(SVSV, "MAJOR")
    field(EISV, "MAJOR")
    field(NISV, "MAJOR")
    field(TESV, "MAJOR")
    field(ELSV, "MAJOR")
    field(TVSV, "MAJOR")
    field(TTSV, "MAJOR")
    field(FTSV, "MAJOR")
    field(FFSV, "MAJOR")
    field(FLNK, "BL04I-VA-IONP-03:ERRSEL")
}

record(seq, "BL04I-VA-IONP-03:ERRSEQ")
{
    field(DESC, "Get Error if applicable")
    field(SCAN, "Passive")
    field(SELM, "Specified")
    field(SELN, "1")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-IONP-03:ERR PP MS")
    field(DOL2, "BL04I-VA-IONP-03:ERRGET PP MS")
    field(LNK2, "BL04I-VA-IONP-03:ERR PP MS")
}

record(longin, "BL04I-VA-IONP-03:ERRGET")
{
    field(DESC, "Get Error Code")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto err(01,1) ty_40_3")
    field(SCAN, "Passive")
}

record(calcout, "BL04I-VA-IONP-03:ERRSEL")
{
    field(DESC, "Choose which error source")
    field(INPA, "BL04I-VA-IONP-03:STA MS")
    field(CALC, "A>=3?2:1")
    field(OUT, "BL04I-VA-IONP-03:ERRSEQ.SELN PP MS")
}

#
#% archiver 10 Monitor
#% controldesk Error Code smon
#
record(mbbi, "BL04I-VA-IONP-03:ERR")
{
    field(DESC, "Error Code")
    field(DTYP, "Soft Channel")
    field(SCAN, "Passive")
    field(ZRST, "OK")
    field(ONST, "Too many cycles")
    field(TWST, "High pressure")
    field(THST, "High current")
    field(FRST, "High pressure")
    field(FVST, "Pump power")
    field(SXST, "High current")
    field(SVST, "Short circuit")
    field(EIST, "Malfunction")
    field(NIST, "Low voltage")
    field(TEST, "Arc detect")
    field(ELST, "11")
    field(TVST, "12")
    field(TTST, "13")
    field(FTST, "14")
    field(FFST, "15")
    field(UNSV, "MINOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "MINOR")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MINOR")
    field(FVSV, "MINOR")
    field(SXSV, "MINOR")
    field(SVSV, "MINOR")
    field(EISV, "MINOR")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MINOR")
    field(TVSV, "MINOR")
    field(TTSV, "MINOR")
    field(FTSV, "MINOR")
    field(FFSV, "MINOR")
}
################################################################################
# Pump size
#
#% archiver 10 Monitor
#% controldesk Pump Size readback
#
record(longin, "BL04I-VA-IONP-03:SIZE") {
    field(DESC, "Pump Size")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto size(01,1) ty_40_3")
    field(SCAN, "10 second")
    field(EGU,  "l/s")
    field(LOPR, "0")
    field(HOPR, "1200")
}
#
#% archiver 10 Monitor
#% controldesk Pump Size setpoint
#
record(ao, "BL04I-VA-IONP-03:SETSIZE") {
    field(DESC, "Pump Size")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsize(01,1) ty_40_3")
    field(PINI, "YES")
    field(DOL,  "500")
    field(EGU,  "l/s")
    field(DRVL, "0")
    field(DRVH, "1200")
    field(LOPR, "0")
    field(HOPR, "1200")
    field(PREC, "0")
}
################################################################################
# Calibration factor
#
#% archiver 10 Monitor
#% controldesk Calibration Factor readback
#
record(ai, "BL04I-VA-IONP-03:CAL") {
    field(DESC, "Calibration Factor")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto cal(01,1) ty_40_3")
    field(SCAN, "10 second")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
#
#% archiver 10 Monitor
#% controldesk Calibration Factor setpoint
#
record(ao, "BL04I-VA-IONP-03:SETCAL") {
    field(DESC, "Calibration Factor")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setcal(01,1) ty_40_3")
    field(DRVL, "0.0")
    field(DRVH, "9.99")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
################################################################################
# Start
#
#% archiver 10 Monitor
#% controldesk Supply Status scon
#
record(bo, "BL04I-VA-IONP-03:START")
{
    field(DESC, "HV on/off")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto start(01,1) ty_40_3")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
record(bi,"BL04I-VA-IONP-03:STARTING")
{
    field(DESC, "Starting Pumps")
    field(PINI, "YES")
    field(INP,  "0")
    field(ZNAM, "")
    field(ONAM, "Starting")
}

################################################################################
# Setpoints
#
# The MPC and MPCe controllers have four setpoints. Each setpoint has associated
# with it an ON pressure, an OFF pressure and a supply.
# Each pump on the controller is allocated two of the setpoints (pump setpoints 1 & 2).
# The following table describes the mapping of controller setpoints and supplies to
# each pump.
# I Gillingham: April 2015
#
#  Pump number   Pump_Setpoint Controller_Setpoint   Supply  
#      1             1                   1             1
#      2             1                   2             2
#      1             2                   3             1
#      2             2                   4             2

## ----------------- SP1 -------------------------------
#
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSPS1 and SETSPS2 records just once
# at startup.
#
record(bo, "BL04I-VA-IONP-03:INIT:SETSPSDIS") 
    {
    field(DTYP, "Soft Channel")
    field(VAL, "1")
    field(OUT, "BL04I-VA-IONP-03:INIT:SETSPSEQ.DISA")
    }
#
# 1) Get the instrument value for SP1 ON/OFF
# 1a) Wait one second for :RQSTSP1ON to complete and populate :SP1OFF and :SP1ON
# 2) Disable instrument update of setting SP1 ON/OFF
# 3) LOAD SETSP1OFF with SP1OFF
# 4) LOAD SETSP1ON with SP1ON
# 5) Enable instrument update of setting SP1 ON/OFF
# 6) Process seq for SP2
# 7) Disable this seq record from processing again
record(seq, "BL04I-VA-IONP-03:INIT:SETSPSEQ") 
    {
    field(SCAN, "1 second")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IONP-03:RQSTSP1ON PP")
    field(LNK2, "BL04I-VA-IONP-03:SETSPS1.DISA PP")
    field(LNK3, "BL04I-VA-IONP-03:SETSP1OFF PP")
    field(LNK4, "BL04I-VA-IONP-03:SETSP1ON PP")
    field(LNK5, "BL04I-VA-IONP-03:SETSPS1.DISA PP")
    field(LNK6, "BL04I-VA-IONP-03:INIT:SETSP2SEQ PP")
    field(LNK7, "BL04I-VA-IONP-03:INIT:SETSPSDIS PP")
    field(DLY1, "0")
    field(DLY2, "3.0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DLY7, "0")
    field(DOL1, "0")
    field(DOL2, "1")
    field(DOL3, "BL04I-VA-IONP-03:SP1OFF")
    field(DOL4, "BL04I-VA-IONP-03:SP1ON")
    field(DOL5, "0")
    field(DOL6, "0")
    field(DOL7, "1")
    }
    
# 1) Get the instrument value for SP2 ON/OFF
# 1a) Wait one second for :RQSTSP2ON to complete and populate :SP2OFF and :SP2ON
# 2) Disable instrument update of setting SP2 ON/OFF
# 3) LOAD SETSP2OFF with SP2OFF
# 4) LOAD SETSP2ON with SP2ON
# 5) Enable instrument update of setting SP2 ON/OFF
record(seq, "BL04I-VA-IONP-03:INIT:SETSP2SEQ")
    {
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IONP-03:RQSTSP2ON PP")
    field(LNK2, "BL04I-VA-IONP-03:SETSPS2.DISA PP")
    field(LNK3, "BL04I-VA-IONP-03:SETSP2OFF PP")
    field(LNK4, "BL04I-VA-IONP-03:SETSP2ON PP")
    field(LNK5, "BL04I-VA-IONP-03:SETSPS2.DISA PP")
    field(DLY1, "0")
    field(DLY2, "3.0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DOL1, "0")
    field(DOL2, "1")
    field(DOL3, "BL04I-VA-IONP-03:SP2OFF")
    field(DOL4, "BL04I-VA-IONP-03:SP2ON")
    field(DOL5, "0")
    }



# Although requesting SPS is logically an input, a calcout has been 
# used here to allow the return values to be injected directly into the 
# given record names via input links.
#
# Record RQSTSP1OFF is I/O Intr and gets (a copy of) any input, including input that was directed to record RQSTSP1ON
# Record RQSTSP1STATE is I/O Intr and gets (a copy of) any input, including input that was directed to record RQSTSP1ON
 
# sps: Parameter 1) Unit number   2) Device base name    3) Logical setpoint number for this pump (1 | 2) - gets converted to actual setpoint in protocol.
record(ai, "BL04I-VA-IONP-03:RQSTSP1ON") 
    {
    field(DESC, "Rqst Setpoint1")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(INP,  "@digitelMpc.proto getsps(01,BL04I-VA-IONP-03,1) ty_40_3")
    field(PINI, "NO")
    }

# sps: Parameter 1) Unit number   2) Device base name    3) Logical setpoint number for this pump (1 | 2).
record(ai, "BL04I-VA-IONP-03:RQSTSP2ON") 
    {
    field(DESC, "Rqst Setpoint2")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(INP,  "@digitelMpc.proto getsps(01,BL04I-VA-IONP-03,2) ty_40_3")
    field(PINI, "NO")
    }


#% archiver 10 Monitor
#% controldesk Setpoint 1 readback
# This PV is written to directly from the protocol (sps) return string
#
record(ai, "BL04I-VA-IONP-03:SP1ON") 
    {
    field(DESC, "Setpoint 1 On")
    field(DTYP, "Soft Channel")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-03:SP1OFF") 
    {
    field(DESC, "Setpoint 1 Off")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
# This PV is written to directly from the protocol (sps) return string
record(bi,"BL04I-VA-IONP-03:SP1STATE")
    {
    field(DESC, "Setpoint 1 State")
    field(PINI, "NO")
    field(INP,  "0")
    field(ZNAM, "Off")
    field(ONAM, "On")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 setpoint
#
record(ao, "BL04I-VA-IONP-03:SETSP1ON") 
    {
    field(VAL,  "1.0E-7")
    field(DESC, "Setpoint 1 On")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-03:SETSPS1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 Off setpoint
#
record(ao, "BL04I-VA-IONP-03:SETSP1OFF") 
    {
    field(VAL,  "2.0E-7")
    field(DESC, "Setpoint 1 Off")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-03:SETSPS1")
    }

# NB: INPF is written to by :SPNUM1 on PINI
#     The supply number is equivalent to pump number (1 | 2)
#
# INPA => Setpoint ON pressure
# INPB => Setpoint OFF pressure
# INPC => Source (usually equivalent to pump [1|2])
# INPD => Lower pressure working limit
# INPE => Upper pressure working limit
# INPF => Setpoint interlock number [1..4]
#
record(calcout, "BL04I-VA-IONP-03:SETSPS1") 
    {
    field(DESC, "Output Setpoints")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsps(01,BL04I-VA-IONP-03,1) ty_40_3")
##    field(OUT,  "@digitelMpc.proto setsps(01,1) ty_40_3")
    field(INPA, "BL04I-VA-IONP-03:SETSP1ON")
    field(INPB, "BL04I-VA-IONP-03:SETSP1OFF")
    field(INPC, "1")
    field(INPD, "1.01E-10")
    field(INPE, "9.99E-5")
    field(INPF, "BL04I-VA-IONP-03:SPNUM1")
    field(CALC, "((A<D)||(B>E)||(F<1))?0:F")
    field(OOPT, "When Non-zero")
    field(PINI, "NO")
    field(FLNK, "BL04I-VA-IONP-03:RQSTSP1ON")
    }


## ----------------- SP2 -------------------------------

#% archiver 10 Monitor
#% controldesk Setpoint 2 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-03:SP2ON") 
    {
    field(DESC, "Setpoint 2 On")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-03:SP2OFF") 
    {
    field(DESC, "Setpoint 2 Off")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
# This PV is written to directly from the protocol (sps) return string
record(bi,"BL04I-VA-IONP-03:SP2STATE")
    {
    field(DESC, "Setpoint 2 State")
    field(PINI, "NO")
    field(INP,  "0")
    field(ZNAM, "Off")
    field(ONAM, "On")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 setpoint
#
record(ao, "BL04I-VA-IONP-03:SETSP2ON") 
    {
    field(VAL,  "1.0E-7")
    field(DESC, "Setpoint 2 On")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-03:SETSPS2")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 Off setpoint
#
record(ao, "BL04I-VA-IONP-03:SETSP2OFF") 
    {
    field(VAL,  "2.0E-7")
    field(DESC, "Setpoint 2 Off")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-03:SETSPS2")
    }

# NB: INPF is written to by :SPNUM2 on PINI
# INPA => Setpoint ON pressure
# INPB => Setpoint OFF pressure
# INPC => Source (usually equivalent to pump [1|2])
# INPD => Lower pressure working limit
# INPE => Upper pressure working limit
# INPF => Setpoint interlock number [1..4]
#
record(calcout, "BL04I-VA-IONP-03:SETSPS2") 
    {
    field(DESC, "Output Setpoints")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsps(01,BL04I-VA-IONP-03,1) ty_40_3")
##    field(OUT,  "@digitelMpc.proto setsps(01,1) ty_40_3")
    field(INPA, "BL04I-VA-IONP-03:SETSP2ON")
    field(INPB, "BL04I-VA-IONP-03:SETSP2OFF")
    field(INPC, "1")
    field(INPD, "1.01E-10")
    field(INPE, "9.99E-5")
    field(INPF, "BL04I-VA-IONP-03:SPNUM2")    
    field(CALC, "((A<D)||(B>E)||(F<1))?0:F")
    field(OOPT, "When Non-zero")
    field(PINI, "NO")
    field(FLNK, "BL04I-VA-IONP-03:RQSTSP2ON")
    }


# Calculate the controller setpoint number for this pump
# Each setpoint has an ON and an OFF pressure attribute.
# Pump  Pump Setpoint  Controller Setpoint
#   1       1                    1
#   1       2                    3
#   2       1                    2
#   2       2                    4

record(calc, "BL04I-VA-IONP-03:SPNUM1") 
    {
    field(DESC, "Controller setpoints number Pump 1")
    field(INPA, "1")
    field(CALC, "(A>1)?2:1")
    field(PINI, "YES")
    # field(FLNK, "BL04I-VA-IONP-03:SETSPS1")
    }

record(calc, "BL04I-VA-IONP-03:SPNUM2") 
    {
    field(DESC, "Controller setpoints number Pump 2")
    field(INPA, "1")
    field(CALC, "(A>1)?4:3")
    field(PINI, "YES")
    # field(FLNK, "BL04I-VA-IONP-03:SETSPS2")
    }


################################################################################
# Text string on front panel
#
record(stringout, "BL04I-VA-IONP-03:SETTEXT") {
    field(DESC, "Text String")
    field(VAL , "BL04I-VA-IONP-03")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto settext(01,1) ty_40_3")
    field(PINI, "YES")
}
################################################################################

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-IONP-03:ERROR") 
    {
    field(DESC, "Last error message")
    }

# PINI set to ensure the record is initialised with TIMEOUT status,
# which will only change to OK once communication starts.
record(mbbi, "BL04I-VA-IONP-03:COMMS")
    {
    field(DESC, "Communication Status")
    field(DTYP, "Soft Channel")
    field(ZRST, "TIMEOUT")
    field(ONST, "OK")
    field(INP, "0")
    field(PINI, "YES")
    }

record(scalcout, "BL04I-VA-IONP-03:COMMSMATCH")
    {
    field(INAA, "BL04I-VA-IONP-03:P.STAT MS CP")
    field(CALC, "printf('%d',AA!='TIMEOUT'?1:0)")
    field(OOPT, "Every Time")
    field(DOPT, "Use CALC")
    field(OUT, "BL04I-VA-IONP-03:COMMS PP MS")
    }

# digitelMpcIonp.template
#% macro, __doc__, Template database for digitel MPC - Ion Pump
# Pete Owens - 30/9/03
#
# substitutions:
#% macro, device, device name
#% macro, name, Object name and gui association name
#% macro, port, asyn serial port number
#% macro, unit, unit number for multi-drop serial (2 hex digits - 05 by default)
#% macro, pump, ion pump number (1 or 2)
#% macro, size, pump size (l/s)
#% macro, sp1on, setpoint1 on
#% macro, sp1off, setpoint1 off
#% macro, sp2on, setpoint2 on
#% macro, sp2off, setpoint2 off
#% macro, alh,  alarm handler tag (Defaults to None) c.f. mp49's commit 80833
#% macro, text, Text to display in the ion pump controller window.
################################################################################

# This associates an edm screen with the template
# % gui, IONP4, edm, digitelMpcIonp2sp.edl, device=BL04I-VA-IONP-04

# This associates BOY screens with the template
# % gui, IONP4, boydetail, digitelMpcApp_opi/ionp_detail.opi, device=BL04I-VA-IONP-04, desc=BL04I-VA-IONP-04, name=IONP4
# % gui, IONP4, boyembed, digitelMpcApp_opi/ionp_embed_box.opi, device=BL04I-VA-IONP-04, desc=BL04I-VA-IONP-04, name=IONP4
# % gui, IONP4, boyembed, digitelMpcApp_opi/ionp_embed.opi, device=BL04I-VA-IONP-04, desc=BL04I-VA-IONP-04, name=IONP4

# These define what PVs a valve detail screen should contain
# % gui, IONP4, readback, Status,   BL04I-VA-IONP-04:STA
# % gui, IONP4, readback, Error Code,  BL04I-VA-IONP-04:ERR
# % gui, IONP4, readback, Voltage,  BL04I-VA-IONP-04:V
# % gui, IONP4, readback, Current,  BL04I-VA-IONP-04:I
# % gui, IONP4, readback, Strapping,  BL04I-VA-IONP-04:HV
# % gui, IONP4, enum, Start,  BL04I-VA-IONP-04:START
# % gui, IONP4, readback, Pump Size,  BL04I-VA-IONP-04:SIZE
# % gui, IONP4, demand, Pump Size,  BL04I-VA-IONP-04:SETSIZE
# % gui, IONP4, readback, Calibration,  BL04I-VA-IONP-04:CAL
# % gui, IONP4, demand, Calibration,  BL04I-VA-IONP-04:SETCAL
# % gui, IONP4, readback, Setpoint 1 On,  BL04I-VA-IONP-04:SP1ON
# % gui, IONP4, demand, Setpoint 1 On,  BL04I-VA-IONP-04:SETSP1ON
# % gui, IONP4, readback, Setpoint 1 Off,  BL04I-VA-IONP-04:SP1OFF
# % gui, IONP4, demand, Setpoint 1 Off,  BL04I-VA-IONP-04:SETSP1OFF
# % gui, IONP4, readback, Setpoint 2 On,  BL04I-VA-IONP-04:SP2ON
# % gui, IONP4, demand, Setpoint 2 On,  BL04I-VA-IONP-04:SETSP2ON
# % gui, IONP4, readback, Setpoint 2 Off,  BL04I-VA-IONP-04:SP2OFF
# % gui, IONP4, demand, Setpoint 2 Off,  BL04I-VA-IONP-04:SETSP2OFF

# Read pump current
#
#% controldesk Current readback
#
record(ai, "BL04I-VA-IONP-04:I") {
    field(DESC, "Pump Current")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto current(01,2) ty_40_3")
    field(SCAN, "1 second")
    field(EGU,  "A")
    field(LOPR, "0.0")
    field(HOPR, "10.0")
    field(PREC, "1")
}
################################################################################
# Read pump pressure
#
#% archiver 10 Monitor
#% controldesk Pressure readback
#
record(ai, "BL04I-VA-IONP-04:P") {
    field(DESC, "Pump Pressure")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto pressure(01,2) ty_40_3")
    field(SCAN, "1 second")
    field(FLNK, "BL04I-VA-IONP-04:PLOG")
    field(EGU,  "mbar")
    field(HOPR, "1000")
    field(LOPR, "1.0E-12")
    field(PREC, "11")
}
record(calcout, "BL04I-VA-IONP-04:ADEL")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-IONP-04:P.ADEL")
    field(INPA, "BL04I-VA-IONP-04:P")
#    field(INPB, "4")
#    field(INPB, "3")
    field(INPB, "2")
    field(SCAN, "10 second")
}
#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-IONP-04:PLOG")
{
    field(DESC, "log Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-IONP-04:P MS")
    field(HOPR, "3")
    field(LOPR, "-12")
#    field(ADEL, "0.1")
#    field(ADEL, "0.125")
#    field(ADEL, "0.176")
    field(ADEL, "0.25")
}
################################################################################
# Read pump voltage
#
#% controldesk Voltage readback
#
record(longin, "BL04I-VA-IONP-04:V") {
    field(DESC, "Pump Voltage")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto voltage(01,2) ty_40_3")
    field(SCAN, "1 second")
    field(EGU,  "V")
    field(LOPR, "0")
    field(HOPR, "10")
}
################################################################################
# Get HV Strapping
#
#% archiver 1 Monitor
#% controldesk HV Strapping readback
#
record(longin, "BL04I-VA-IONP-04:HV") 
{
    field(DESC, "HV Strapping")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto strap(01,2) ty_40_3")
    field(SCAN, "10 second")
    field(EGU,  "V")
    field(LOPR, "5600")
    field(HOPR, "7000")
}
################################################################################
# Get supply status
#
#% archiver 10 Monitor
#% controldesk Supply Status smon
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-VA-IONP-04:STA
record(mbbi, "BL04I-VA-IONP-04:STA")
{
    field(DESC, "Supply Status")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto status(01,2) ty_40_3")
    field(SCAN, "1 second")
    field(ZRST, "Unknown")
    field(ONST, "Waiting")
    field(TWST, "Standby")
    field(THST, "Safe-Conn")
    field(FRST, "Running")
    field(FVST, "Cool Down")
    field(SXST, "Pump Error")
    field(SVST, "HV Switched Off")
    field(EIST, "Interlock")
    field(NIST, "Shut Down")
    field(TEST, "Calibration")
    field(ELST, "Invalid")
    field(TVST, "Invalid")
    field(TTST, "Invalid")
    field(FTST, "Invalid")
    field(FFST, "Invalid")
    field(UNSV, "MAJOR")
    field(ZRSV, "MAJOR")
    field(ONSV, "MAJOR")
    field(TWSV, "MAJOR")
    field(THSV, "MAJOR")
    field(FRSV, "NO_ALARM")
    field(FVSV, "MINOR")
    field(SXSV, "MAJOR")
    field(SVSV, "MAJOR")
    field(EISV, "MAJOR")
    field(NISV, "MAJOR")
    field(TESV, "MAJOR")
    field(ELSV, "MAJOR")
    field(TVSV, "MAJOR")
    field(TTSV, "MAJOR")
    field(FTSV, "MAJOR")
    field(FFSV, "MAJOR")
    field(FLNK, "BL04I-VA-IONP-04:ERRSEL")
}

record(seq, "BL04I-VA-IONP-04:ERRSEQ")
{
    field(DESC, "Get Error if applicable")
    field(SCAN, "Passive")
    field(SELM, "Specified")
    field(SELN, "1")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-IONP-04:ERR PP MS")
    field(DOL2, "BL04I-VA-IONP-04:ERRGET PP MS")
    field(LNK2, "BL04I-VA-IONP-04:ERR PP MS")
}

record(longin, "BL04I-VA-IONP-04:ERRGET")
{
    field(DESC, "Get Error Code")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto err(01,2) ty_40_3")
    field(SCAN, "Passive")
}

record(calcout, "BL04I-VA-IONP-04:ERRSEL")
{
    field(DESC, "Choose which error source")
    field(INPA, "BL04I-VA-IONP-04:STA MS")
    field(CALC, "A>=3?2:1")
    field(OUT, "BL04I-VA-IONP-04:ERRSEQ.SELN PP MS")
}

#
#% archiver 10 Monitor
#% controldesk Error Code smon
#
record(mbbi, "BL04I-VA-IONP-04:ERR")
{
    field(DESC, "Error Code")
    field(DTYP, "Soft Channel")
    field(SCAN, "Passive")
    field(ZRST, "OK")
    field(ONST, "Too many cycles")
    field(TWST, "High pressure")
    field(THST, "High current")
    field(FRST, "High pressure")
    field(FVST, "Pump power")
    field(SXST, "High current")
    field(SVST, "Short circuit")
    field(EIST, "Malfunction")
    field(NIST, "Low voltage")
    field(TEST, "Arc detect")
    field(ELST, "11")
    field(TVST, "12")
    field(TTST, "13")
    field(FTST, "14")
    field(FFST, "15")
    field(UNSV, "MINOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "MINOR")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MINOR")
    field(FVSV, "MINOR")
    field(SXSV, "MINOR")
    field(SVSV, "MINOR")
    field(EISV, "MINOR")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MINOR")
    field(TVSV, "MINOR")
    field(TTSV, "MINOR")
    field(FTSV, "MINOR")
    field(FFSV, "MINOR")
}
################################################################################
# Pump size
#
#% archiver 10 Monitor
#% controldesk Pump Size readback
#
record(longin, "BL04I-VA-IONP-04:SIZE") {
    field(DESC, "Pump Size")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto size(01,2) ty_40_3")
    field(SCAN, "10 second")
    field(EGU,  "l/s")
    field(LOPR, "0")
    field(HOPR, "1200")
}
#
#% archiver 10 Monitor
#% controldesk Pump Size setpoint
#
record(ao, "BL04I-VA-IONP-04:SETSIZE") {
    field(DESC, "Pump Size")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsize(01,2) ty_40_3")
    field(PINI, "YES")
    field(DOL,  "600")
    field(EGU,  "l/s")
    field(DRVL, "0")
    field(DRVH, "1200")
    field(LOPR, "0")
    field(HOPR, "1200")
    field(PREC, "0")
}
################################################################################
# Calibration factor
#
#% archiver 10 Monitor
#% controldesk Calibration Factor readback
#
record(ai, "BL04I-VA-IONP-04:CAL") {
    field(DESC, "Calibration Factor")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto cal(01,2) ty_40_3")
    field(SCAN, "10 second")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
#
#% archiver 10 Monitor
#% controldesk Calibration Factor setpoint
#
record(ao, "BL04I-VA-IONP-04:SETCAL") {
    field(DESC, "Calibration Factor")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setcal(01,2) ty_40_3")
    field(DRVL, "0.0")
    field(DRVH, "9.99")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
################################################################################
# Start
#
#% archiver 10 Monitor
#% controldesk Supply Status scon
#
record(bo, "BL04I-VA-IONP-04:START")
{
    field(DESC, "HV on/off")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto start(01,2) ty_40_3")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
record(bi,"BL04I-VA-IONP-04:STARTING")
{
    field(DESC, "Starting Pumps")
    field(PINI, "YES")
    field(INP,  "0")
    field(ZNAM, "")
    field(ONAM, "Starting")
}

################################################################################
# Setpoints
#
# The MPC and MPCe controllers have four setpoints. Each setpoint has associated
# with it an ON pressure, an OFF pressure and a supply.
# Each pump on the controller is allocated two of the setpoints (pump setpoints 1 & 2).
# The following table describes the mapping of controller setpoints and supplies to
# each pump.
# I Gillingham: April 2015
#
#  Pump number   Pump_Setpoint Controller_Setpoint   Supply  
#      1             1                   1             1
#      2             1                   2             2
#      1             2                   3             1
#      2             2                   4             2

## ----------------- SP1 -------------------------------
#
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSPS1 and SETSPS2 records just once
# at startup.
#
record(bo, "BL04I-VA-IONP-04:INIT:SETSPSDIS") 
    {
    field(DTYP, "Soft Channel")
    field(VAL, "1")
    field(OUT, "BL04I-VA-IONP-04:INIT:SETSPSEQ.DISA")
    }
#
# 1) Get the instrument value for SP1 ON/OFF
# 1a) Wait one second for :RQSTSP1ON to complete and populate :SP1OFF and :SP1ON
# 2) Disable instrument update of setting SP1 ON/OFF
# 3) LOAD SETSP1OFF with SP1OFF
# 4) LOAD SETSP1ON with SP1ON
# 5) Enable instrument update of setting SP1 ON/OFF
# 6) Process seq for SP2
# 7) Disable this seq record from processing again
record(seq, "BL04I-VA-IONP-04:INIT:SETSPSEQ") 
    {
    field(SCAN, "1 second")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IONP-04:RQSTSP1ON PP")
    field(LNK2, "BL04I-VA-IONP-04:SETSPS1.DISA PP")
    field(LNK3, "BL04I-VA-IONP-04:SETSP1OFF PP")
    field(LNK4, "BL04I-VA-IONP-04:SETSP1ON PP")
    field(LNK5, "BL04I-VA-IONP-04:SETSPS1.DISA PP")
    field(LNK6, "BL04I-VA-IONP-04:INIT:SETSP2SEQ PP")
    field(LNK7, "BL04I-VA-IONP-04:INIT:SETSPSDIS PP")
    field(DLY1, "0")
    field(DLY2, "3.0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DLY7, "0")
    field(DOL1, "0")
    field(DOL2, "1")
    field(DOL3, "BL04I-VA-IONP-04:SP1OFF")
    field(DOL4, "BL04I-VA-IONP-04:SP1ON")
    field(DOL5, "0")
    field(DOL6, "0")
    field(DOL7, "1")
    }
    
# 1) Get the instrument value for SP2 ON/OFF
# 1a) Wait one second for :RQSTSP2ON to complete and populate :SP2OFF and :SP2ON
# 2) Disable instrument update of setting SP2 ON/OFF
# 3) LOAD SETSP2OFF with SP2OFF
# 4) LOAD SETSP2ON with SP2ON
# 5) Enable instrument update of setting SP2 ON/OFF
record(seq, "BL04I-VA-IONP-04:INIT:SETSP2SEQ")
    {
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IONP-04:RQSTSP2ON PP")
    field(LNK2, "BL04I-VA-IONP-04:SETSPS2.DISA PP")
    field(LNK3, "BL04I-VA-IONP-04:SETSP2OFF PP")
    field(LNK4, "BL04I-VA-IONP-04:SETSP2ON PP")
    field(LNK5, "BL04I-VA-IONP-04:SETSPS2.DISA PP")
    field(DLY1, "0")
    field(DLY2, "3.0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DOL1, "0")
    field(DOL2, "1")
    field(DOL3, "BL04I-VA-IONP-04:SP2OFF")
    field(DOL4, "BL04I-VA-IONP-04:SP2ON")
    field(DOL5, "0")
    }



# Although requesting SPS is logically an input, a calcout has been 
# used here to allow the return values to be injected directly into the 
# given record names via input links.
#
# Record RQSTSP1OFF is I/O Intr and gets (a copy of) any input, including input that was directed to record RQSTSP1ON
# Record RQSTSP1STATE is I/O Intr and gets (a copy of) any input, including input that was directed to record RQSTSP1ON
 
# sps: Parameter 1) Unit number   2) Device base name    3) Logical setpoint number for this pump (1 | 2) - gets converted to actual setpoint in protocol.
record(ai, "BL04I-VA-IONP-04:RQSTSP1ON") 
    {
    field(DESC, "Rqst Setpoint1")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(INP,  "@digitelMpc.proto getsps(01,BL04I-VA-IONP-04,1) ty_40_3")
    field(PINI, "NO")
    }

# sps: Parameter 1) Unit number   2) Device base name    3) Logical setpoint number for this pump (1 | 2).
record(ai, "BL04I-VA-IONP-04:RQSTSP2ON") 
    {
    field(DESC, "Rqst Setpoint2")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(INP,  "@digitelMpc.proto getsps(01,BL04I-VA-IONP-04,2) ty_40_3")
    field(PINI, "NO")
    }


#% archiver 10 Monitor
#% controldesk Setpoint 1 readback
# This PV is written to directly from the protocol (sps) return string
#
record(ai, "BL04I-VA-IONP-04:SP1ON") 
    {
    field(DESC, "Setpoint 1 On")
    field(DTYP, "Soft Channel")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-04:SP1OFF") 
    {
    field(DESC, "Setpoint 1 Off")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
# This PV is written to directly from the protocol (sps) return string
record(bi,"BL04I-VA-IONP-04:SP1STATE")
    {
    field(DESC, "Setpoint 1 State")
    field(PINI, "NO")
    field(INP,  "0")
    field(ZNAM, "Off")
    field(ONAM, "On")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 setpoint
#
record(ao, "BL04I-VA-IONP-04:SETSP1ON") 
    {
    field(VAL,  "1.0E-7")
    field(DESC, "Setpoint 1 On")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-04:SETSPS1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 Off setpoint
#
record(ao, "BL04I-VA-IONP-04:SETSP1OFF") 
    {
    field(VAL,  "2.0E-7")
    field(DESC, "Setpoint 1 Off")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-04:SETSPS1")
    }

# NB: INPF is written to by :SPNUM1 on PINI
#     The supply number is equivalent to pump number (1 | 2)
#
# INPA => Setpoint ON pressure
# INPB => Setpoint OFF pressure
# INPC => Source (usually equivalent to pump [1|2])
# INPD => Lower pressure working limit
# INPE => Upper pressure working limit
# INPF => Setpoint interlock number [1..4]
#
record(calcout, "BL04I-VA-IONP-04:SETSPS1") 
    {
    field(DESC, "Output Setpoints")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsps(01,BL04I-VA-IONP-04,1) ty_40_3")
##    field(OUT,  "@digitelMpc.proto setsps(01,2) ty_40_3")
    field(INPA, "BL04I-VA-IONP-04:SETSP1ON")
    field(INPB, "BL04I-VA-IONP-04:SETSP1OFF")
    field(INPC, "2")
    field(INPD, "1.01E-10")
    field(INPE, "9.99E-5")
    field(INPF, "BL04I-VA-IONP-04:SPNUM1")
    field(CALC, "((A<D)||(B>E)||(F<1))?0:F")
    field(OOPT, "When Non-zero")
    field(PINI, "NO")
    field(FLNK, "BL04I-VA-IONP-04:RQSTSP1ON")
    }


## ----------------- SP2 -------------------------------

#% archiver 10 Monitor
#% controldesk Setpoint 2 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-04:SP2ON") 
    {
    field(DESC, "Setpoint 2 On")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-04:SP2OFF") 
    {
    field(DESC, "Setpoint 2 Off")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
# This PV is written to directly from the protocol (sps) return string
record(bi,"BL04I-VA-IONP-04:SP2STATE")
    {
    field(DESC, "Setpoint 2 State")
    field(PINI, "NO")
    field(INP,  "0")
    field(ZNAM, "Off")
    field(ONAM, "On")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 setpoint
#
record(ao, "BL04I-VA-IONP-04:SETSP2ON") 
    {
    field(VAL,  "1.0E-7")
    field(DESC, "Setpoint 2 On")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-04:SETSPS2")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 Off setpoint
#
record(ao, "BL04I-VA-IONP-04:SETSP2OFF") 
    {
    field(VAL,  "2.0E-7")
    field(DESC, "Setpoint 2 Off")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-04:SETSPS2")
    }

# NB: INPF is written to by :SPNUM2 on PINI
# INPA => Setpoint ON pressure
# INPB => Setpoint OFF pressure
# INPC => Source (usually equivalent to pump [1|2])
# INPD => Lower pressure working limit
# INPE => Upper pressure working limit
# INPF => Setpoint interlock number [1..4]
#
record(calcout, "BL04I-VA-IONP-04:SETSPS2") 
    {
    field(DESC, "Output Setpoints")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsps(01,BL04I-VA-IONP-04,1) ty_40_3")
##    field(OUT,  "@digitelMpc.proto setsps(01,2) ty_40_3")
    field(INPA, "BL04I-VA-IONP-04:SETSP2ON")
    field(INPB, "BL04I-VA-IONP-04:SETSP2OFF")
    field(INPC, "2")
    field(INPD, "1.01E-10")
    field(INPE, "9.99E-5")
    field(INPF, "BL04I-VA-IONP-04:SPNUM2")    
    field(CALC, "((A<D)||(B>E)||(F<1))?0:F")
    field(OOPT, "When Non-zero")
    field(PINI, "NO")
    field(FLNK, "BL04I-VA-IONP-04:RQSTSP2ON")
    }


# Calculate the controller setpoint number for this pump
# Each setpoint has an ON and an OFF pressure attribute.
# Pump  Pump Setpoint  Controller Setpoint
#   1       1                    1
#   1       2                    3
#   2       1                    2
#   2       2                    4

record(calc, "BL04I-VA-IONP-04:SPNUM1") 
    {
    field(DESC, "Controller setpoints number Pump 1")
    field(INPA, "2")
    field(CALC, "(A>1)?2:1")
    field(PINI, "YES")
    # field(FLNK, "BL04I-VA-IONP-04:SETSPS1")
    }

record(calc, "BL04I-VA-IONP-04:SPNUM2") 
    {
    field(DESC, "Controller setpoints number Pump 2")
    field(INPA, "2")
    field(CALC, "(A>1)?4:3")
    field(PINI, "YES")
    # field(FLNK, "BL04I-VA-IONP-04:SETSPS2")
    }


################################################################################
# Text string on front panel
#
record(stringout, "BL04I-VA-IONP-04:SETTEXT") {
    field(DESC, "Text String")
    field(VAL , "BL04I-VA-IONP-04")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto settext(01,2) ty_40_3")
    field(PINI, "YES")
}
################################################################################

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-IONP-04:ERROR") 
    {
    field(DESC, "Last error message")
    }

# PINI set to ensure the record is initialised with TIMEOUT status,
# which will only change to OK once communication starts.
record(mbbi, "BL04I-VA-IONP-04:COMMS")
    {
    field(DESC, "Communication Status")
    field(DTYP, "Soft Channel")
    field(ZRST, "TIMEOUT")
    field(ONST, "OK")
    field(INP, "0")
    field(PINI, "YES")
    }

record(scalcout, "BL04I-VA-IONP-04:COMMSMATCH")
    {
    field(INAA, "BL04I-VA-IONP-04:P.STAT MS CP")
    field(CALC, "printf('%d',AA!='TIMEOUT'?1:0)")
    field(OOPT, "Every Time")
    field(DOPT, "Use CALC")
    field(OUT, "BL04I-VA-IONP-04:COMMS PP MS")
    }

# digitelMpcIonp.template
#% macro, __doc__, Template database for digitel MPC - Ion Pump
# Pete Owens - 30/9/03
#
# substitutions:
#% macro, device, device name
#% macro, name, Object name and gui association name
#% macro, port, asyn serial port number
#% macro, unit, unit number for multi-drop serial (2 hex digits - 05 by default)
#% macro, pump, ion pump number (1 or 2)
#% macro, size, pump size (l/s)
#% macro, sp1on, setpoint1 on
#% macro, sp1off, setpoint1 off
#% macro, sp2on, setpoint2 on
#% macro, sp2off, setpoint2 off
#% macro, alh,  alarm handler tag (Defaults to None) c.f. mp49's commit 80833
#% macro, text, Text to display in the ion pump controller window.
################################################################################

# This associates an edm screen with the template
# % gui, IONP5, edm, digitelMpcIonp2sp.edl, device=BL04I-VA-IONP-05

# This associates BOY screens with the template
# % gui, IONP5, boydetail, digitelMpcApp_opi/ionp_detail.opi, device=BL04I-VA-IONP-05, desc=BL04I-VA-IONP-05, name=IONP5
# % gui, IONP5, boyembed, digitelMpcApp_opi/ionp_embed_box.opi, device=BL04I-VA-IONP-05, desc=BL04I-VA-IONP-05, name=IONP5
# % gui, IONP5, boyembed, digitelMpcApp_opi/ionp_embed.opi, device=BL04I-VA-IONP-05, desc=BL04I-VA-IONP-05, name=IONP5

# These define what PVs a valve detail screen should contain
# % gui, IONP5, readback, Status,   BL04I-VA-IONP-05:STA
# % gui, IONP5, readback, Error Code,  BL04I-VA-IONP-05:ERR
# % gui, IONP5, readback, Voltage,  BL04I-VA-IONP-05:V
# % gui, IONP5, readback, Current,  BL04I-VA-IONP-05:I
# % gui, IONP5, readback, Strapping,  BL04I-VA-IONP-05:HV
# % gui, IONP5, enum, Start,  BL04I-VA-IONP-05:START
# % gui, IONP5, readback, Pump Size,  BL04I-VA-IONP-05:SIZE
# % gui, IONP5, demand, Pump Size,  BL04I-VA-IONP-05:SETSIZE
# % gui, IONP5, readback, Calibration,  BL04I-VA-IONP-05:CAL
# % gui, IONP5, demand, Calibration,  BL04I-VA-IONP-05:SETCAL
# % gui, IONP5, readback, Setpoint 1 On,  BL04I-VA-IONP-05:SP1ON
# % gui, IONP5, demand, Setpoint 1 On,  BL04I-VA-IONP-05:SETSP1ON
# % gui, IONP5, readback, Setpoint 1 Off,  BL04I-VA-IONP-05:SP1OFF
# % gui, IONP5, demand, Setpoint 1 Off,  BL04I-VA-IONP-05:SETSP1OFF
# % gui, IONP5, readback, Setpoint 2 On,  BL04I-VA-IONP-05:SP2ON
# % gui, IONP5, demand, Setpoint 2 On,  BL04I-VA-IONP-05:SETSP2ON
# % gui, IONP5, readback, Setpoint 2 Off,  BL04I-VA-IONP-05:SP2OFF
# % gui, IONP5, demand, Setpoint 2 Off,  BL04I-VA-IONP-05:SETSP2OFF

# Read pump current
#
#% controldesk Current readback
#
record(ai, "BL04I-VA-IONP-05:I") {
    field(DESC, "Pump Current")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto current(01,1) ty_40_4")
    field(SCAN, "1 second")
    field(EGU,  "A")
    field(LOPR, "0.0")
    field(HOPR, "10.0")
    field(PREC, "1")
}
################################################################################
# Read pump pressure
#
#% archiver 10 Monitor
#% controldesk Pressure readback
#
record(ai, "BL04I-VA-IONP-05:P") {
    field(DESC, "Pump Pressure")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto pressure(01,1) ty_40_4")
    field(SCAN, "1 second")
    field(FLNK, "BL04I-VA-IONP-05:PLOG")
    field(EGU,  "mbar")
    field(HOPR, "1000")
    field(LOPR, "1.0E-12")
    field(PREC, "11")
}
record(calcout, "BL04I-VA-IONP-05:ADEL")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-IONP-05:P.ADEL")
    field(INPA, "BL04I-VA-IONP-05:P")
#    field(INPB, "4")
#    field(INPB, "3")
    field(INPB, "2")
    field(SCAN, "10 second")
}
#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-IONP-05:PLOG")
{
    field(DESC, "log Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-IONP-05:P MS")
    field(HOPR, "3")
    field(LOPR, "-12")
#    field(ADEL, "0.1")
#    field(ADEL, "0.125")
#    field(ADEL, "0.176")
    field(ADEL, "0.25")
}
################################################################################
# Read pump voltage
#
#% controldesk Voltage readback
#
record(longin, "BL04I-VA-IONP-05:V") {
    field(DESC, "Pump Voltage")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto voltage(01,1) ty_40_4")
    field(SCAN, "1 second")
    field(EGU,  "V")
    field(LOPR, "0")
    field(HOPR, "10")
}
################################################################################
# Get HV Strapping
#
#% archiver 1 Monitor
#% controldesk HV Strapping readback
#
record(longin, "BL04I-VA-IONP-05:HV") 
{
    field(DESC, "HV Strapping")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto strap(01,1) ty_40_4")
    field(SCAN, "10 second")
    field(EGU,  "V")
    field(LOPR, "5600")
    field(HOPR, "7000")
}
################################################################################
# Get supply status
#
#% archiver 10 Monitor
#% controldesk Supply Status smon
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-VA-IONP-05:STA
record(mbbi, "BL04I-VA-IONP-05:STA")
{
    field(DESC, "Supply Status")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto status(01,1) ty_40_4")
    field(SCAN, "1 second")
    field(ZRST, "Unknown")
    field(ONST, "Waiting")
    field(TWST, "Standby")
    field(THST, "Safe-Conn")
    field(FRST, "Running")
    field(FVST, "Cool Down")
    field(SXST, "Pump Error")
    field(SVST, "HV Switched Off")
    field(EIST, "Interlock")
    field(NIST, "Shut Down")
    field(TEST, "Calibration")
    field(ELST, "Invalid")
    field(TVST, "Invalid")
    field(TTST, "Invalid")
    field(FTST, "Invalid")
    field(FFST, "Invalid")
    field(UNSV, "MAJOR")
    field(ZRSV, "MAJOR")
    field(ONSV, "MAJOR")
    field(TWSV, "MAJOR")
    field(THSV, "MAJOR")
    field(FRSV, "NO_ALARM")
    field(FVSV, "MINOR")
    field(SXSV, "MAJOR")
    field(SVSV, "MAJOR")
    field(EISV, "MAJOR")
    field(NISV, "MAJOR")
    field(TESV, "MAJOR")
    field(ELSV, "MAJOR")
    field(TVSV, "MAJOR")
    field(TTSV, "MAJOR")
    field(FTSV, "MAJOR")
    field(FFSV, "MAJOR")
    field(FLNK, "BL04I-VA-IONP-05:ERRSEL")
}

record(seq, "BL04I-VA-IONP-05:ERRSEQ")
{
    field(DESC, "Get Error if applicable")
    field(SCAN, "Passive")
    field(SELM, "Specified")
    field(SELN, "1")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-IONP-05:ERR PP MS")
    field(DOL2, "BL04I-VA-IONP-05:ERRGET PP MS")
    field(LNK2, "BL04I-VA-IONP-05:ERR PP MS")
}

record(longin, "BL04I-VA-IONP-05:ERRGET")
{
    field(DESC, "Get Error Code")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto err(01,1) ty_40_4")
    field(SCAN, "Passive")
}

record(calcout, "BL04I-VA-IONP-05:ERRSEL")
{
    field(DESC, "Choose which error source")
    field(INPA, "BL04I-VA-IONP-05:STA MS")
    field(CALC, "A>=3?2:1")
    field(OUT, "BL04I-VA-IONP-05:ERRSEQ.SELN PP MS")
}

#
#% archiver 10 Monitor
#% controldesk Error Code smon
#
record(mbbi, "BL04I-VA-IONP-05:ERR")
{
    field(DESC, "Error Code")
    field(DTYP, "Soft Channel")
    field(SCAN, "Passive")
    field(ZRST, "OK")
    field(ONST, "Too many cycles")
    field(TWST, "High pressure")
    field(THST, "High current")
    field(FRST, "High pressure")
    field(FVST, "Pump power")
    field(SXST, "High current")
    field(SVST, "Short circuit")
    field(EIST, "Malfunction")
    field(NIST, "Low voltage")
    field(TEST, "Arc detect")
    field(ELST, "11")
    field(TVST, "12")
    field(TTST, "13")
    field(FTST, "14")
    field(FFST, "15")
    field(UNSV, "MINOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "MINOR")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MINOR")
    field(FVSV, "MINOR")
    field(SXSV, "MINOR")
    field(SVSV, "MINOR")
    field(EISV, "MINOR")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MINOR")
    field(TVSV, "MINOR")
    field(TTSV, "MINOR")
    field(FTSV, "MINOR")
    field(FFSV, "MINOR")
}
################################################################################
# Pump size
#
#% archiver 10 Monitor
#% controldesk Pump Size readback
#
record(longin, "BL04I-VA-IONP-05:SIZE") {
    field(DESC, "Pump Size")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto size(01,1) ty_40_4")
    field(SCAN, "10 second")
    field(EGU,  "l/s")
    field(LOPR, "0")
    field(HOPR, "1200")
}
#
#% archiver 10 Monitor
#% controldesk Pump Size setpoint
#
record(ao, "BL04I-VA-IONP-05:SETSIZE") {
    field(DESC, "Pump Size")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsize(01,1) ty_40_4")
    field(PINI, "YES")
    field(DOL,  "600")
    field(EGU,  "l/s")
    field(DRVL, "0")
    field(DRVH, "1200")
    field(LOPR, "0")
    field(HOPR, "1200")
    field(PREC, "0")
}
################################################################################
# Calibration factor
#
#% archiver 10 Monitor
#% controldesk Calibration Factor readback
#
record(ai, "BL04I-VA-IONP-05:CAL") {
    field(DESC, "Calibration Factor")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto cal(01,1) ty_40_4")
    field(SCAN, "10 second")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
#
#% archiver 10 Monitor
#% controldesk Calibration Factor setpoint
#
record(ao, "BL04I-VA-IONP-05:SETCAL") {
    field(DESC, "Calibration Factor")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setcal(01,1) ty_40_4")
    field(DRVL, "0.0")
    field(DRVH, "9.99")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
################################################################################
# Start
#
#% archiver 10 Monitor
#% controldesk Supply Status scon
#
record(bo, "BL04I-VA-IONP-05:START")
{
    field(DESC, "HV on/off")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto start(01,1) ty_40_4")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
record(bi,"BL04I-VA-IONP-05:STARTING")
{
    field(DESC, "Starting Pumps")
    field(PINI, "YES")
    field(INP,  "0")
    field(ZNAM, "")
    field(ONAM, "Starting")
}

################################################################################
# Setpoints
#
# The MPC and MPCe controllers have four setpoints. Each setpoint has associated
# with it an ON pressure, an OFF pressure and a supply.
# Each pump on the controller is allocated two of the setpoints (pump setpoints 1 & 2).
# The following table describes the mapping of controller setpoints and supplies to
# each pump.
# I Gillingham: April 2015
#
#  Pump number   Pump_Setpoint Controller_Setpoint   Supply  
#      1             1                   1             1
#      2             1                   2             2
#      1             2                   3             1
#      2             2                   4             2

## ----------------- SP1 -------------------------------
#
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSPS1 and SETSPS2 records just once
# at startup.
#
record(bo, "BL04I-VA-IONP-05:INIT:SETSPSDIS") 
    {
    field(DTYP, "Soft Channel")
    field(VAL, "1")
    field(OUT, "BL04I-VA-IONP-05:INIT:SETSPSEQ.DISA")
    }
#
# 1) Get the instrument value for SP1 ON/OFF
# 1a) Wait one second for :RQSTSP1ON to complete and populate :SP1OFF and :SP1ON
# 2) Disable instrument update of setting SP1 ON/OFF
# 3) LOAD SETSP1OFF with SP1OFF
# 4) LOAD SETSP1ON with SP1ON
# 5) Enable instrument update of setting SP1 ON/OFF
# 6) Process seq for SP2
# 7) Disable this seq record from processing again
record(seq, "BL04I-VA-IONP-05:INIT:SETSPSEQ") 
    {
    field(SCAN, "1 second")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IONP-05:RQSTSP1ON PP")
    field(LNK2, "BL04I-VA-IONP-05:SETSPS1.DISA PP")
    field(LNK3, "BL04I-VA-IONP-05:SETSP1OFF PP")
    field(LNK4, "BL04I-VA-IONP-05:SETSP1ON PP")
    field(LNK5, "BL04I-VA-IONP-05:SETSPS1.DISA PP")
    field(LNK6, "BL04I-VA-IONP-05:INIT:SETSP2SEQ PP")
    field(LNK7, "BL04I-VA-IONP-05:INIT:SETSPSDIS PP")
    field(DLY1, "0")
    field(DLY2, "3.0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DLY7, "0")
    field(DOL1, "0")
    field(DOL2, "1")
    field(DOL3, "BL04I-VA-IONP-05:SP1OFF")
    field(DOL4, "BL04I-VA-IONP-05:SP1ON")
    field(DOL5, "0")
    field(DOL6, "0")
    field(DOL7, "1")
    }
    
# 1) Get the instrument value for SP2 ON/OFF
# 1a) Wait one second for :RQSTSP2ON to complete and populate :SP2OFF and :SP2ON
# 2) Disable instrument update of setting SP2 ON/OFF
# 3) LOAD SETSP2OFF with SP2OFF
# 4) LOAD SETSP2ON with SP2ON
# 5) Enable instrument update of setting SP2 ON/OFF
record(seq, "BL04I-VA-IONP-05:INIT:SETSP2SEQ")
    {
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IONP-05:RQSTSP2ON PP")
    field(LNK2, "BL04I-VA-IONP-05:SETSPS2.DISA PP")
    field(LNK3, "BL04I-VA-IONP-05:SETSP2OFF PP")
    field(LNK4, "BL04I-VA-IONP-05:SETSP2ON PP")
    field(LNK5, "BL04I-VA-IONP-05:SETSPS2.DISA PP")
    field(DLY1, "0")
    field(DLY2, "3.0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DOL1, "0")
    field(DOL2, "1")
    field(DOL3, "BL04I-VA-IONP-05:SP2OFF")
    field(DOL4, "BL04I-VA-IONP-05:SP2ON")
    field(DOL5, "0")
    }



# Although requesting SPS is logically an input, a calcout has been 
# used here to allow the return values to be injected directly into the 
# given record names via input links.
#
# Record RQSTSP1OFF is I/O Intr and gets (a copy of) any input, including input that was directed to record RQSTSP1ON
# Record RQSTSP1STATE is I/O Intr and gets (a copy of) any input, including input that was directed to record RQSTSP1ON
 
# sps: Parameter 1) Unit number   2) Device base name    3) Logical setpoint number for this pump (1 | 2) - gets converted to actual setpoint in protocol.
record(ai, "BL04I-VA-IONP-05:RQSTSP1ON") 
    {
    field(DESC, "Rqst Setpoint1")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(INP,  "@digitelMpc.proto getsps(01,BL04I-VA-IONP-05,1) ty_40_4")
    field(PINI, "NO")
    }

# sps: Parameter 1) Unit number   2) Device base name    3) Logical setpoint number for this pump (1 | 2).
record(ai, "BL04I-VA-IONP-05:RQSTSP2ON") 
    {
    field(DESC, "Rqst Setpoint2")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(INP,  "@digitelMpc.proto getsps(01,BL04I-VA-IONP-05,2) ty_40_4")
    field(PINI, "NO")
    }


#% archiver 10 Monitor
#% controldesk Setpoint 1 readback
# This PV is written to directly from the protocol (sps) return string
#
record(ai, "BL04I-VA-IONP-05:SP1ON") 
    {
    field(DESC, "Setpoint 1 On")
    field(DTYP, "Soft Channel")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-05:SP1OFF") 
    {
    field(DESC, "Setpoint 1 Off")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
# This PV is written to directly from the protocol (sps) return string
record(bi,"BL04I-VA-IONP-05:SP1STATE")
    {
    field(DESC, "Setpoint 1 State")
    field(PINI, "NO")
    field(INP,  "0")
    field(ZNAM, "Off")
    field(ONAM, "On")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 setpoint
#
record(ao, "BL04I-VA-IONP-05:SETSP1ON") 
    {
    field(VAL,  "1.0E-7")
    field(DESC, "Setpoint 1 On")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-05:SETSPS1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 Off setpoint
#
record(ao, "BL04I-VA-IONP-05:SETSP1OFF") 
    {
    field(VAL,  "2.0E-7")
    field(DESC, "Setpoint 1 Off")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-05:SETSPS1")
    }

# NB: INPF is written to by :SPNUM1 on PINI
#     The supply number is equivalent to pump number (1 | 2)
#
# INPA => Setpoint ON pressure
# INPB => Setpoint OFF pressure
# INPC => Source (usually equivalent to pump [1|2])
# INPD => Lower pressure working limit
# INPE => Upper pressure working limit
# INPF => Setpoint interlock number [1..4]
#
record(calcout, "BL04I-VA-IONP-05:SETSPS1") 
    {
    field(DESC, "Output Setpoints")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsps(01,BL04I-VA-IONP-05,1) ty_40_4")
##    field(OUT,  "@digitelMpc.proto setsps(01,1) ty_40_4")
    field(INPA, "BL04I-VA-IONP-05:SETSP1ON")
    field(INPB, "BL04I-VA-IONP-05:SETSP1OFF")
    field(INPC, "1")
    field(INPD, "1.01E-10")
    field(INPE, "9.99E-5")
    field(INPF, "BL04I-VA-IONP-05:SPNUM1")
    field(CALC, "((A<D)||(B>E)||(F<1))?0:F")
    field(OOPT, "When Non-zero")
    field(PINI, "NO")
    field(FLNK, "BL04I-VA-IONP-05:RQSTSP1ON")
    }


## ----------------- SP2 -------------------------------

#% archiver 10 Monitor
#% controldesk Setpoint 2 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-05:SP2ON") 
    {
    field(DESC, "Setpoint 2 On")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-05:SP2OFF") 
    {
    field(DESC, "Setpoint 2 Off")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
# This PV is written to directly from the protocol (sps) return string
record(bi,"BL04I-VA-IONP-05:SP2STATE")
    {
    field(DESC, "Setpoint 2 State")
    field(PINI, "NO")
    field(INP,  "0")
    field(ZNAM, "Off")
    field(ONAM, "On")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 setpoint
#
record(ao, "BL04I-VA-IONP-05:SETSP2ON") 
    {
    field(VAL,  "1.0E-7")
    field(DESC, "Setpoint 2 On")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-05:SETSPS2")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 Off setpoint
#
record(ao, "BL04I-VA-IONP-05:SETSP2OFF") 
    {
    field(VAL,  "2.0E-7")
    field(DESC, "Setpoint 2 Off")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-05:SETSPS2")
    }

# NB: INPF is written to by :SPNUM2 on PINI
# INPA => Setpoint ON pressure
# INPB => Setpoint OFF pressure
# INPC => Source (usually equivalent to pump [1|2])
# INPD => Lower pressure working limit
# INPE => Upper pressure working limit
# INPF => Setpoint interlock number [1..4]
#
record(calcout, "BL04I-VA-IONP-05:SETSPS2") 
    {
    field(DESC, "Output Setpoints")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsps(01,BL04I-VA-IONP-05,1) ty_40_4")
##    field(OUT,  "@digitelMpc.proto setsps(01,1) ty_40_4")
    field(INPA, "BL04I-VA-IONP-05:SETSP2ON")
    field(INPB, "BL04I-VA-IONP-05:SETSP2OFF")
    field(INPC, "1")
    field(INPD, "1.01E-10")
    field(INPE, "9.99E-5")
    field(INPF, "BL04I-VA-IONP-05:SPNUM2")    
    field(CALC, "((A<D)||(B>E)||(F<1))?0:F")
    field(OOPT, "When Non-zero")
    field(PINI, "NO")
    field(FLNK, "BL04I-VA-IONP-05:RQSTSP2ON")
    }


# Calculate the controller setpoint number for this pump
# Each setpoint has an ON and an OFF pressure attribute.
# Pump  Pump Setpoint  Controller Setpoint
#   1       1                    1
#   1       2                    3
#   2       1                    2
#   2       2                    4

record(calc, "BL04I-VA-IONP-05:SPNUM1") 
    {
    field(DESC, "Controller setpoints number Pump 1")
    field(INPA, "1")
    field(CALC, "(A>1)?2:1")
    field(PINI, "YES")
    # field(FLNK, "BL04I-VA-IONP-05:SETSPS1")
    }

record(calc, "BL04I-VA-IONP-05:SPNUM2") 
    {
    field(DESC, "Controller setpoints number Pump 2")
    field(INPA, "1")
    field(CALC, "(A>1)?4:3")
    field(PINI, "YES")
    # field(FLNK, "BL04I-VA-IONP-05:SETSPS2")
    }


################################################################################
# Text string on front panel
#
record(stringout, "BL04I-VA-IONP-05:SETTEXT") {
    field(DESC, "Text String")
    field(VAL , "BL04I-VA-IONP-05")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto settext(01,1) ty_40_4")
    field(PINI, "YES")
}
################################################################################

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-IONP-05:ERROR") 
    {
    field(DESC, "Last error message")
    }

# PINI set to ensure the record is initialised with TIMEOUT status,
# which will only change to OK once communication starts.
record(mbbi, "BL04I-VA-IONP-05:COMMS")
    {
    field(DESC, "Communication Status")
    field(DTYP, "Soft Channel")
    field(ZRST, "TIMEOUT")
    field(ONST, "OK")
    field(INP, "0")
    field(PINI, "YES")
    }

record(scalcout, "BL04I-VA-IONP-05:COMMSMATCH")
    {
    field(INAA, "BL04I-VA-IONP-05:P.STAT MS CP")
    field(CALC, "printf('%d',AA!='TIMEOUT'?1:0)")
    field(OOPT, "Every Time")
    field(DOPT, "Use CALC")
    field(OUT, "BL04I-VA-IONP-05:COMMS PP MS")
    }

# digitelMpcIonp.template
#% macro, __doc__, Template database for digitel MPC - Ion Pump
# Pete Owens - 30/9/03
#
# substitutions:
#% macro, device, device name
#% macro, name, Object name and gui association name
#% macro, port, asyn serial port number
#% macro, unit, unit number for multi-drop serial (2 hex digits - 05 by default)
#% macro, pump, ion pump number (1 or 2)
#% macro, size, pump size (l/s)
#% macro, sp1on, setpoint1 on
#% macro, sp1off, setpoint1 off
#% macro, sp2on, setpoint2 on
#% macro, sp2off, setpoint2 off
#% macro, alh,  alarm handler tag (Defaults to None) c.f. mp49's commit 80833
#% macro, text, Text to display in the ion pump controller window.
################################################################################

# This associates an edm screen with the template
# % gui, IONP6, edm, digitelMpcIonp2sp.edl, device=BL04I-VA-IONP-06

# This associates BOY screens with the template
# % gui, IONP6, boydetail, digitelMpcApp_opi/ionp_detail.opi, device=BL04I-VA-IONP-06, desc=BL04I-VA-IONP-06, name=IONP6
# % gui, IONP6, boyembed, digitelMpcApp_opi/ionp_embed_box.opi, device=BL04I-VA-IONP-06, desc=BL04I-VA-IONP-06, name=IONP6
# % gui, IONP6, boyembed, digitelMpcApp_opi/ionp_embed.opi, device=BL04I-VA-IONP-06, desc=BL04I-VA-IONP-06, name=IONP6

# These define what PVs a valve detail screen should contain
# % gui, IONP6, readback, Status,   BL04I-VA-IONP-06:STA
# % gui, IONP6, readback, Error Code,  BL04I-VA-IONP-06:ERR
# % gui, IONP6, readback, Voltage,  BL04I-VA-IONP-06:V
# % gui, IONP6, readback, Current,  BL04I-VA-IONP-06:I
# % gui, IONP6, readback, Strapping,  BL04I-VA-IONP-06:HV
# % gui, IONP6, enum, Start,  BL04I-VA-IONP-06:START
# % gui, IONP6, readback, Pump Size,  BL04I-VA-IONP-06:SIZE
# % gui, IONP6, demand, Pump Size,  BL04I-VA-IONP-06:SETSIZE
# % gui, IONP6, readback, Calibration,  BL04I-VA-IONP-06:CAL
# % gui, IONP6, demand, Calibration,  BL04I-VA-IONP-06:SETCAL
# % gui, IONP6, readback, Setpoint 1 On,  BL04I-VA-IONP-06:SP1ON
# % gui, IONP6, demand, Setpoint 1 On,  BL04I-VA-IONP-06:SETSP1ON
# % gui, IONP6, readback, Setpoint 1 Off,  BL04I-VA-IONP-06:SP1OFF
# % gui, IONP6, demand, Setpoint 1 Off,  BL04I-VA-IONP-06:SETSP1OFF
# % gui, IONP6, readback, Setpoint 2 On,  BL04I-VA-IONP-06:SP2ON
# % gui, IONP6, demand, Setpoint 2 On,  BL04I-VA-IONP-06:SETSP2ON
# % gui, IONP6, readback, Setpoint 2 Off,  BL04I-VA-IONP-06:SP2OFF
# % gui, IONP6, demand, Setpoint 2 Off,  BL04I-VA-IONP-06:SETSP2OFF

# Read pump current
#
#% controldesk Current readback
#
record(ai, "BL04I-VA-IONP-06:I") {
    field(DESC, "Pump Current")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto current(01,2) ty_40_4")
    field(SCAN, "1 second")
    field(EGU,  "A")
    field(LOPR, "0.0")
    field(HOPR, "10.0")
    field(PREC, "1")
}
################################################################################
# Read pump pressure
#
#% archiver 10 Monitor
#% controldesk Pressure readback
#
record(ai, "BL04I-VA-IONP-06:P") {
    field(DESC, "Pump Pressure")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto pressure(01,2) ty_40_4")
    field(SCAN, "1 second")
    field(FLNK, "BL04I-VA-IONP-06:PLOG")
    field(EGU,  "mbar")
    field(HOPR, "1000")
    field(LOPR, "1.0E-12")
    field(PREC, "11")
}
record(calcout, "BL04I-VA-IONP-06:ADEL")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-IONP-06:P.ADEL")
    field(INPA, "BL04I-VA-IONP-06:P")
#    field(INPB, "4")
#    field(INPB, "3")
    field(INPB, "2")
    field(SCAN, "10 second")
}
#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-IONP-06:PLOG")
{
    field(DESC, "log Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-IONP-06:P MS")
    field(HOPR, "3")
    field(LOPR, "-12")
#    field(ADEL, "0.1")
#    field(ADEL, "0.125")
#    field(ADEL, "0.176")
    field(ADEL, "0.25")
}
################################################################################
# Read pump voltage
#
#% controldesk Voltage readback
#
record(longin, "BL04I-VA-IONP-06:V") {
    field(DESC, "Pump Voltage")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto voltage(01,2) ty_40_4")
    field(SCAN, "1 second")
    field(EGU,  "V")
    field(LOPR, "0")
    field(HOPR, "10")
}
################################################################################
# Get HV Strapping
#
#% archiver 1 Monitor
#% controldesk HV Strapping readback
#
record(longin, "BL04I-VA-IONP-06:HV") 
{
    field(DESC, "HV Strapping")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto strap(01,2) ty_40_4")
    field(SCAN, "10 second")
    field(EGU,  "V")
    field(LOPR, "5600")
    field(HOPR, "7000")
}
################################################################################
# Get supply status
#
#% archiver 10 Monitor
#% controldesk Supply Status smon
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-VA-IONP-06:STA
record(mbbi, "BL04I-VA-IONP-06:STA")
{
    field(DESC, "Supply Status")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto status(01,2) ty_40_4")
    field(SCAN, "1 second")
    field(ZRST, "Unknown")
    field(ONST, "Waiting")
    field(TWST, "Standby")
    field(THST, "Safe-Conn")
    field(FRST, "Running")
    field(FVST, "Cool Down")
    field(SXST, "Pump Error")
    field(SVST, "HV Switched Off")
    field(EIST, "Interlock")
    field(NIST, "Shut Down")
    field(TEST, "Calibration")
    field(ELST, "Invalid")
    field(TVST, "Invalid")
    field(TTST, "Invalid")
    field(FTST, "Invalid")
    field(FFST, "Invalid")
    field(UNSV, "MAJOR")
    field(ZRSV, "MAJOR")
    field(ONSV, "MAJOR")
    field(TWSV, "MAJOR")
    field(THSV, "MAJOR")
    field(FRSV, "NO_ALARM")
    field(FVSV, "MINOR")
    field(SXSV, "MAJOR")
    field(SVSV, "MAJOR")
    field(EISV, "MAJOR")
    field(NISV, "MAJOR")
    field(TESV, "MAJOR")
    field(ELSV, "MAJOR")
    field(TVSV, "MAJOR")
    field(TTSV, "MAJOR")
    field(FTSV, "MAJOR")
    field(FFSV, "MAJOR")
    field(FLNK, "BL04I-VA-IONP-06:ERRSEL")
}

record(seq, "BL04I-VA-IONP-06:ERRSEQ")
{
    field(DESC, "Get Error if applicable")
    field(SCAN, "Passive")
    field(SELM, "Specified")
    field(SELN, "1")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-IONP-06:ERR PP MS")
    field(DOL2, "BL04I-VA-IONP-06:ERRGET PP MS")
    field(LNK2, "BL04I-VA-IONP-06:ERR PP MS")
}

record(longin, "BL04I-VA-IONP-06:ERRGET")
{
    field(DESC, "Get Error Code")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto err(01,2) ty_40_4")
    field(SCAN, "Passive")
}

record(calcout, "BL04I-VA-IONP-06:ERRSEL")
{
    field(DESC, "Choose which error source")
    field(INPA, "BL04I-VA-IONP-06:STA MS")
    field(CALC, "A>=3?2:1")
    field(OUT, "BL04I-VA-IONP-06:ERRSEQ.SELN PP MS")
}

#
#% archiver 10 Monitor
#% controldesk Error Code smon
#
record(mbbi, "BL04I-VA-IONP-06:ERR")
{
    field(DESC, "Error Code")
    field(DTYP, "Soft Channel")
    field(SCAN, "Passive")
    field(ZRST, "OK")
    field(ONST, "Too many cycles")
    field(TWST, "High pressure")
    field(THST, "High current")
    field(FRST, "High pressure")
    field(FVST, "Pump power")
    field(SXST, "High current")
    field(SVST, "Short circuit")
    field(EIST, "Malfunction")
    field(NIST, "Low voltage")
    field(TEST, "Arc detect")
    field(ELST, "11")
    field(TVST, "12")
    field(TTST, "13")
    field(FTST, "14")
    field(FFST, "15")
    field(UNSV, "MINOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "MINOR")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MINOR")
    field(FVSV, "MINOR")
    field(SXSV, "MINOR")
    field(SVSV, "MINOR")
    field(EISV, "MINOR")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MINOR")
    field(TVSV, "MINOR")
    field(TTSV, "MINOR")
    field(FTSV, "MINOR")
    field(FFSV, "MINOR")
}
################################################################################
# Pump size
#
#% archiver 10 Monitor
#% controldesk Pump Size readback
#
record(longin, "BL04I-VA-IONP-06:SIZE") {
    field(DESC, "Pump Size")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto size(01,2) ty_40_4")
    field(SCAN, "10 second")
    field(EGU,  "l/s")
    field(LOPR, "0")
    field(HOPR, "1200")
}
#
#% archiver 10 Monitor
#% controldesk Pump Size setpoint
#
record(ao, "BL04I-VA-IONP-06:SETSIZE") {
    field(DESC, "Pump Size")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsize(01,2) ty_40_4")
    field(PINI, "YES")
    field(DOL,  "600")
    field(EGU,  "l/s")
    field(DRVL, "0")
    field(DRVH, "1200")
    field(LOPR, "0")
    field(HOPR, "1200")
    field(PREC, "0")
}
################################################################################
# Calibration factor
#
#% archiver 10 Monitor
#% controldesk Calibration Factor readback
#
record(ai, "BL04I-VA-IONP-06:CAL") {
    field(DESC, "Calibration Factor")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto cal(01,2) ty_40_4")
    field(SCAN, "10 second")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
#
#% archiver 10 Monitor
#% controldesk Calibration Factor setpoint
#
record(ao, "BL04I-VA-IONP-06:SETCAL") {
    field(DESC, "Calibration Factor")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setcal(01,2) ty_40_4")
    field(DRVL, "0.0")
    field(DRVH, "9.99")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
################################################################################
# Start
#
#% archiver 10 Monitor
#% controldesk Supply Status scon
#
record(bo, "BL04I-VA-IONP-06:START")
{
    field(DESC, "HV on/off")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto start(01,2) ty_40_4")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
record(bi,"BL04I-VA-IONP-06:STARTING")
{
    field(DESC, "Starting Pumps")
    field(PINI, "YES")
    field(INP,  "0")
    field(ZNAM, "")
    field(ONAM, "Starting")
}

################################################################################
# Setpoints
#
# The MPC and MPCe controllers have four setpoints. Each setpoint has associated
# with it an ON pressure, an OFF pressure and a supply.
# Each pump on the controller is allocated two of the setpoints (pump setpoints 1 & 2).
# The following table describes the mapping of controller setpoints and supplies to
# each pump.
# I Gillingham: April 2015
#
#  Pump number   Pump_Setpoint Controller_Setpoint   Supply  
#      1             1                   1             1
#      2             1                   2             2
#      1             2                   3             1
#      2             2                   4             2

## ----------------- SP1 -------------------------------
#
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSPS1 and SETSPS2 records just once
# at startup.
#
record(bo, "BL04I-VA-IONP-06:INIT:SETSPSDIS") 
    {
    field(DTYP, "Soft Channel")
    field(VAL, "1")
    field(OUT, "BL04I-VA-IONP-06:INIT:SETSPSEQ.DISA")
    }
#
# 1) Get the instrument value for SP1 ON/OFF
# 1a) Wait one second for :RQSTSP1ON to complete and populate :SP1OFF and :SP1ON
# 2) Disable instrument update of setting SP1 ON/OFF
# 3) LOAD SETSP1OFF with SP1OFF
# 4) LOAD SETSP1ON with SP1ON
# 5) Enable instrument update of setting SP1 ON/OFF
# 6) Process seq for SP2
# 7) Disable this seq record from processing again
record(seq, "BL04I-VA-IONP-06:INIT:SETSPSEQ") 
    {
    field(SCAN, "1 second")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IONP-06:RQSTSP1ON PP")
    field(LNK2, "BL04I-VA-IONP-06:SETSPS1.DISA PP")
    field(LNK3, "BL04I-VA-IONP-06:SETSP1OFF PP")
    field(LNK4, "BL04I-VA-IONP-06:SETSP1ON PP")
    field(LNK5, "BL04I-VA-IONP-06:SETSPS1.DISA PP")
    field(LNK6, "BL04I-VA-IONP-06:INIT:SETSP2SEQ PP")
    field(LNK7, "BL04I-VA-IONP-06:INIT:SETSPSDIS PP")
    field(DLY1, "0")
    field(DLY2, "3.0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DLY7, "0")
    field(DOL1, "0")
    field(DOL2, "1")
    field(DOL3, "BL04I-VA-IONP-06:SP1OFF")
    field(DOL4, "BL04I-VA-IONP-06:SP1ON")
    field(DOL5, "0")
    field(DOL6, "0")
    field(DOL7, "1")
    }
    
# 1) Get the instrument value for SP2 ON/OFF
# 1a) Wait one second for :RQSTSP2ON to complete and populate :SP2OFF and :SP2ON
# 2) Disable instrument update of setting SP2 ON/OFF
# 3) LOAD SETSP2OFF with SP2OFF
# 4) LOAD SETSP2ON with SP2ON
# 5) Enable instrument update of setting SP2 ON/OFF
record(seq, "BL04I-VA-IONP-06:INIT:SETSP2SEQ")
    {
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IONP-06:RQSTSP2ON PP")
    field(LNK2, "BL04I-VA-IONP-06:SETSPS2.DISA PP")
    field(LNK3, "BL04I-VA-IONP-06:SETSP2OFF PP")
    field(LNK4, "BL04I-VA-IONP-06:SETSP2ON PP")
    field(LNK5, "BL04I-VA-IONP-06:SETSPS2.DISA PP")
    field(DLY1, "0")
    field(DLY2, "3.0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DOL1, "0")
    field(DOL2, "1")
    field(DOL3, "BL04I-VA-IONP-06:SP2OFF")
    field(DOL4, "BL04I-VA-IONP-06:SP2ON")
    field(DOL5, "0")
    }



# Although requesting SPS is logically an input, a calcout has been 
# used here to allow the return values to be injected directly into the 
# given record names via input links.
#
# Record RQSTSP1OFF is I/O Intr and gets (a copy of) any input, including input that was directed to record RQSTSP1ON
# Record RQSTSP1STATE is I/O Intr and gets (a copy of) any input, including input that was directed to record RQSTSP1ON
 
# sps: Parameter 1) Unit number   2) Device base name    3) Logical setpoint number for this pump (1 | 2) - gets converted to actual setpoint in protocol.
record(ai, "BL04I-VA-IONP-06:RQSTSP1ON") 
    {
    field(DESC, "Rqst Setpoint1")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(INP,  "@digitelMpc.proto getsps(01,BL04I-VA-IONP-06,1) ty_40_4")
    field(PINI, "NO")
    }

# sps: Parameter 1) Unit number   2) Device base name    3) Logical setpoint number for this pump (1 | 2).
record(ai, "BL04I-VA-IONP-06:RQSTSP2ON") 
    {
    field(DESC, "Rqst Setpoint2")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(INP,  "@digitelMpc.proto getsps(01,BL04I-VA-IONP-06,2) ty_40_4")
    field(PINI, "NO")
    }


#% archiver 10 Monitor
#% controldesk Setpoint 1 readback
# This PV is written to directly from the protocol (sps) return string
#
record(ai, "BL04I-VA-IONP-06:SP1ON") 
    {
    field(DESC, "Setpoint 1 On")
    field(DTYP, "Soft Channel")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-06:SP1OFF") 
    {
    field(DESC, "Setpoint 1 Off")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
# This PV is written to directly from the protocol (sps) return string
record(bi,"BL04I-VA-IONP-06:SP1STATE")
    {
    field(DESC, "Setpoint 1 State")
    field(PINI, "NO")
    field(INP,  "0")
    field(ZNAM, "Off")
    field(ONAM, "On")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 setpoint
#
record(ao, "BL04I-VA-IONP-06:SETSP1ON") 
    {
    field(VAL,  "1.0E-7")
    field(DESC, "Setpoint 1 On")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-06:SETSPS1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 Off setpoint
#
record(ao, "BL04I-VA-IONP-06:SETSP1OFF") 
    {
    field(VAL,  "2.0E-7")
    field(DESC, "Setpoint 1 Off")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-06:SETSPS1")
    }

# NB: INPF is written to by :SPNUM1 on PINI
#     The supply number is equivalent to pump number (1 | 2)
#
# INPA => Setpoint ON pressure
# INPB => Setpoint OFF pressure
# INPC => Source (usually equivalent to pump [1|2])
# INPD => Lower pressure working limit
# INPE => Upper pressure working limit
# INPF => Setpoint interlock number [1..4]
#
record(calcout, "BL04I-VA-IONP-06:SETSPS1") 
    {
    field(DESC, "Output Setpoints")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsps(01,BL04I-VA-IONP-06,1) ty_40_4")
##    field(OUT,  "@digitelMpc.proto setsps(01,2) ty_40_4")
    field(INPA, "BL04I-VA-IONP-06:SETSP1ON")
    field(INPB, "BL04I-VA-IONP-06:SETSP1OFF")
    field(INPC, "2")
    field(INPD, "1.01E-10")
    field(INPE, "9.99E-5")
    field(INPF, "BL04I-VA-IONP-06:SPNUM1")
    field(CALC, "((A<D)||(B>E)||(F<1))?0:F")
    field(OOPT, "When Non-zero")
    field(PINI, "NO")
    field(FLNK, "BL04I-VA-IONP-06:RQSTSP1ON")
    }


## ----------------- SP2 -------------------------------

#% archiver 10 Monitor
#% controldesk Setpoint 2 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-06:SP2ON") 
    {
    field(DESC, "Setpoint 2 On")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-06:SP2OFF") 
    {
    field(DESC, "Setpoint 2 Off")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
# This PV is written to directly from the protocol (sps) return string
record(bi,"BL04I-VA-IONP-06:SP2STATE")
    {
    field(DESC, "Setpoint 2 State")
    field(PINI, "NO")
    field(INP,  "0")
    field(ZNAM, "Off")
    field(ONAM, "On")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 setpoint
#
record(ao, "BL04I-VA-IONP-06:SETSP2ON") 
    {
    field(VAL,  "1.0E-7")
    field(DESC, "Setpoint 2 On")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-06:SETSPS2")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 Off setpoint
#
record(ao, "BL04I-VA-IONP-06:SETSP2OFF") 
    {
    field(VAL,  "2.0E-7")
    field(DESC, "Setpoint 2 Off")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-06:SETSPS2")
    }

# NB: INPF is written to by :SPNUM2 on PINI
# INPA => Setpoint ON pressure
# INPB => Setpoint OFF pressure
# INPC => Source (usually equivalent to pump [1|2])
# INPD => Lower pressure working limit
# INPE => Upper pressure working limit
# INPF => Setpoint interlock number [1..4]
#
record(calcout, "BL04I-VA-IONP-06:SETSPS2") 
    {
    field(DESC, "Output Setpoints")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsps(01,BL04I-VA-IONP-06,1) ty_40_4")
##    field(OUT,  "@digitelMpc.proto setsps(01,2) ty_40_4")
    field(INPA, "BL04I-VA-IONP-06:SETSP2ON")
    field(INPB, "BL04I-VA-IONP-06:SETSP2OFF")
    field(INPC, "2")
    field(INPD, "1.01E-10")
    field(INPE, "9.99E-5")
    field(INPF, "BL04I-VA-IONP-06:SPNUM2")    
    field(CALC, "((A<D)||(B>E)||(F<1))?0:F")
    field(OOPT, "When Non-zero")
    field(PINI, "NO")
    field(FLNK, "BL04I-VA-IONP-06:RQSTSP2ON")
    }


# Calculate the controller setpoint number for this pump
# Each setpoint has an ON and an OFF pressure attribute.
# Pump  Pump Setpoint  Controller Setpoint
#   1       1                    1
#   1       2                    3
#   2       1                    2
#   2       2                    4

record(calc, "BL04I-VA-IONP-06:SPNUM1") 
    {
    field(DESC, "Controller setpoints number Pump 1")
    field(INPA, "2")
    field(CALC, "(A>1)?2:1")
    field(PINI, "YES")
    # field(FLNK, "BL04I-VA-IONP-06:SETSPS1")
    }

record(calc, "BL04I-VA-IONP-06:SPNUM2") 
    {
    field(DESC, "Controller setpoints number Pump 2")
    field(INPA, "2")
    field(CALC, "(A>1)?4:3")
    field(PINI, "YES")
    # field(FLNK, "BL04I-VA-IONP-06:SETSPS2")
    }


################################################################################
# Text string on front panel
#
record(stringout, "BL04I-VA-IONP-06:SETTEXT") {
    field(DESC, "Text String")
    field(VAL , "BL04I-VA-IONP-06")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto settext(01,2) ty_40_4")
    field(PINI, "YES")
}
################################################################################

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-IONP-06:ERROR") 
    {
    field(DESC, "Last error message")
    }

# PINI set to ensure the record is initialised with TIMEOUT status,
# which will only change to OK once communication starts.
record(mbbi, "BL04I-VA-IONP-06:COMMS")
    {
    field(DESC, "Communication Status")
    field(DTYP, "Soft Channel")
    field(ZRST, "TIMEOUT")
    field(ONST, "OK")
    field(INP, "0")
    field(PINI, "YES")
    }

record(scalcout, "BL04I-VA-IONP-06:COMMSMATCH")
    {
    field(INAA, "BL04I-VA-IONP-06:P.STAT MS CP")
    field(CALC, "printf('%d',AA!='TIMEOUT'?1:0)")
    field(OOPT, "Every Time")
    field(DOPT, "Use CALC")
    field(OUT, "BL04I-VA-IONP-06:COMMS PP MS")
    }

# digitelMpcIonp.template
#% macro, __doc__, Template database for digitel MPC - Ion Pump
# Pete Owens - 30/9/03
#
# substitutions:
#% macro, device, device name
#% macro, name, Object name and gui association name
#% macro, port, asyn serial port number
#% macro, unit, unit number for multi-drop serial (2 hex digits - 05 by default)
#% macro, pump, ion pump number (1 or 2)
#% macro, size, pump size (l/s)
#% macro, sp1on, setpoint1 on
#% macro, sp1off, setpoint1 off
#% macro, sp2on, setpoint2 on
#% macro, sp2off, setpoint2 off
#% macro, alh,  alarm handler tag (Defaults to None) c.f. mp49's commit 80833
#% macro, text, Text to display in the ion pump controller window.
################################################################################

# This associates an edm screen with the template
# % gui, IONP7, edm, digitelMpcIonp2sp.edl, device=BL04I-VA-IONP-07

# This associates BOY screens with the template
# % gui, IONP7, boydetail, digitelMpcApp_opi/ionp_detail.opi, device=BL04I-VA-IONP-07, desc=BL04I-VA-IONP-07, name=IONP7
# % gui, IONP7, boyembed, digitelMpcApp_opi/ionp_embed_box.opi, device=BL04I-VA-IONP-07, desc=BL04I-VA-IONP-07, name=IONP7
# % gui, IONP7, boyembed, digitelMpcApp_opi/ionp_embed.opi, device=BL04I-VA-IONP-07, desc=BL04I-VA-IONP-07, name=IONP7

# These define what PVs a valve detail screen should contain
# % gui, IONP7, readback, Status,   BL04I-VA-IONP-07:STA
# % gui, IONP7, readback, Error Code,  BL04I-VA-IONP-07:ERR
# % gui, IONP7, readback, Voltage,  BL04I-VA-IONP-07:V
# % gui, IONP7, readback, Current,  BL04I-VA-IONP-07:I
# % gui, IONP7, readback, Strapping,  BL04I-VA-IONP-07:HV
# % gui, IONP7, enum, Start,  BL04I-VA-IONP-07:START
# % gui, IONP7, readback, Pump Size,  BL04I-VA-IONP-07:SIZE
# % gui, IONP7, demand, Pump Size,  BL04I-VA-IONP-07:SETSIZE
# % gui, IONP7, readback, Calibration,  BL04I-VA-IONP-07:CAL
# % gui, IONP7, demand, Calibration,  BL04I-VA-IONP-07:SETCAL
# % gui, IONP7, readback, Setpoint 1 On,  BL04I-VA-IONP-07:SP1ON
# % gui, IONP7, demand, Setpoint 1 On,  BL04I-VA-IONP-07:SETSP1ON
# % gui, IONP7, readback, Setpoint 1 Off,  BL04I-VA-IONP-07:SP1OFF
# % gui, IONP7, demand, Setpoint 1 Off,  BL04I-VA-IONP-07:SETSP1OFF
# % gui, IONP7, readback, Setpoint 2 On,  BL04I-VA-IONP-07:SP2ON
# % gui, IONP7, demand, Setpoint 2 On,  BL04I-VA-IONP-07:SETSP2ON
# % gui, IONP7, readback, Setpoint 2 Off,  BL04I-VA-IONP-07:SP2OFF
# % gui, IONP7, demand, Setpoint 2 Off,  BL04I-VA-IONP-07:SETSP2OFF

# Read pump current
#
#% controldesk Current readback
#
record(ai, "BL04I-VA-IONP-07:I") {
    field(DESC, "Pump Current")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto current(01,2) ty_40_4")
    field(SCAN, "1 second")
    field(EGU,  "A")
    field(LOPR, "0.0")
    field(HOPR, "10.0")
    field(PREC, "1")
}
################################################################################
# Read pump pressure
#
#% archiver 10 Monitor
#% controldesk Pressure readback
#
record(ai, "BL04I-VA-IONP-07:P") {
    field(DESC, "Pump Pressure")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto pressure(01,2) ty_40_4")
    field(SCAN, "1 second")
    field(FLNK, "BL04I-VA-IONP-07:PLOG")
    field(EGU,  "mbar")
    field(HOPR, "1000")
    field(LOPR, "1.0E-12")
    field(PREC, "11")
}
record(calcout, "BL04I-VA-IONP-07:ADEL")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-IONP-07:P.ADEL")
    field(INPA, "BL04I-VA-IONP-07:P")
#    field(INPB, "4")
#    field(INPB, "3")
    field(INPB, "2")
    field(SCAN, "10 second")
}
#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-IONP-07:PLOG")
{
    field(DESC, "log Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-IONP-07:P MS")
    field(HOPR, "3")
    field(LOPR, "-12")
#    field(ADEL, "0.1")
#    field(ADEL, "0.125")
#    field(ADEL, "0.176")
    field(ADEL, "0.25")
}
################################################################################
# Read pump voltage
#
#% controldesk Voltage readback
#
record(longin, "BL04I-VA-IONP-07:V") {
    field(DESC, "Pump Voltage")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto voltage(01,2) ty_40_4")
    field(SCAN, "1 second")
    field(EGU,  "V")
    field(LOPR, "0")
    field(HOPR, "10")
}
################################################################################
# Get HV Strapping
#
#% archiver 1 Monitor
#% controldesk HV Strapping readback
#
record(longin, "BL04I-VA-IONP-07:HV") 
{
    field(DESC, "HV Strapping")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto strap(01,2) ty_40_4")
    field(SCAN, "10 second")
    field(EGU,  "V")
    field(LOPR, "5600")
    field(HOPR, "7000")
}
################################################################################
# Get supply status
#
#% archiver 10 Monitor
#% controldesk Supply Status smon
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-VA-IONP-07:STA
record(mbbi, "BL04I-VA-IONP-07:STA")
{
    field(DESC, "Supply Status")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto status(01,2) ty_40_4")
    field(SCAN, "1 second")
    field(ZRST, "Unknown")
    field(ONST, "Waiting")
    field(TWST, "Standby")
    field(THST, "Safe-Conn")
    field(FRST, "Running")
    field(FVST, "Cool Down")
    field(SXST, "Pump Error")
    field(SVST, "HV Switched Off")
    field(EIST, "Interlock")
    field(NIST, "Shut Down")
    field(TEST, "Calibration")
    field(ELST, "Invalid")
    field(TVST, "Invalid")
    field(TTST, "Invalid")
    field(FTST, "Invalid")
    field(FFST, "Invalid")
    field(UNSV, "MAJOR")
    field(ZRSV, "MAJOR")
    field(ONSV, "MAJOR")
    field(TWSV, "MAJOR")
    field(THSV, "MAJOR")
    field(FRSV, "NO_ALARM")
    field(FVSV, "MINOR")
    field(SXSV, "MAJOR")
    field(SVSV, "MAJOR")
    field(EISV, "MAJOR")
    field(NISV, "MAJOR")
    field(TESV, "MAJOR")
    field(ELSV, "MAJOR")
    field(TVSV, "MAJOR")
    field(TTSV, "MAJOR")
    field(FTSV, "MAJOR")
    field(FFSV, "MAJOR")
    field(FLNK, "BL04I-VA-IONP-07:ERRSEL")
}

record(seq, "BL04I-VA-IONP-07:ERRSEQ")
{
    field(DESC, "Get Error if applicable")
    field(SCAN, "Passive")
    field(SELM, "Specified")
    field(SELN, "1")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-IONP-07:ERR PP MS")
    field(DOL2, "BL04I-VA-IONP-07:ERRGET PP MS")
    field(LNK2, "BL04I-VA-IONP-07:ERR PP MS")
}

record(longin, "BL04I-VA-IONP-07:ERRGET")
{
    field(DESC, "Get Error Code")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto err(01,2) ty_40_4")
    field(SCAN, "Passive")
}

record(calcout, "BL04I-VA-IONP-07:ERRSEL")
{
    field(DESC, "Choose which error source")
    field(INPA, "BL04I-VA-IONP-07:STA MS")
    field(CALC, "A>=3?2:1")
    field(OUT, "BL04I-VA-IONP-07:ERRSEQ.SELN PP MS")
}

#
#% archiver 10 Monitor
#% controldesk Error Code smon
#
record(mbbi, "BL04I-VA-IONP-07:ERR")
{
    field(DESC, "Error Code")
    field(DTYP, "Soft Channel")
    field(SCAN, "Passive")
    field(ZRST, "OK")
    field(ONST, "Too many cycles")
    field(TWST, "High pressure")
    field(THST, "High current")
    field(FRST, "High pressure")
    field(FVST, "Pump power")
    field(SXST, "High current")
    field(SVST, "Short circuit")
    field(EIST, "Malfunction")
    field(NIST, "Low voltage")
    field(TEST, "Arc detect")
    field(ELST, "11")
    field(TVST, "12")
    field(TTST, "13")
    field(FTST, "14")
    field(FFST, "15")
    field(UNSV, "MINOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "MINOR")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MINOR")
    field(FVSV, "MINOR")
    field(SXSV, "MINOR")
    field(SVSV, "MINOR")
    field(EISV, "MINOR")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MINOR")
    field(TVSV, "MINOR")
    field(TTSV, "MINOR")
    field(FTSV, "MINOR")
    field(FFSV, "MINOR")
}
################################################################################
# Pump size
#
#% archiver 10 Monitor
#% controldesk Pump Size readback
#
record(longin, "BL04I-VA-IONP-07:SIZE") {
    field(DESC, "Pump Size")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto size(01,2) ty_40_4")
    field(SCAN, "10 second")
    field(EGU,  "l/s")
    field(LOPR, "0")
    field(HOPR, "1200")
}
#
#% archiver 10 Monitor
#% controldesk Pump Size setpoint
#
record(ao, "BL04I-VA-IONP-07:SETSIZE") {
    field(DESC, "Pump Size")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsize(01,2) ty_40_4")
    field(PINI, "YES")
    field(DOL,  "600")
    field(EGU,  "l/s")
    field(DRVL, "0")
    field(DRVH, "1200")
    field(LOPR, "0")
    field(HOPR, "1200")
    field(PREC, "0")
}
################################################################################
# Calibration factor
#
#% archiver 10 Monitor
#% controldesk Calibration Factor readback
#
record(ai, "BL04I-VA-IONP-07:CAL") {
    field(DESC, "Calibration Factor")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto cal(01,2) ty_40_4")
    field(SCAN, "10 second")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
#
#% archiver 10 Monitor
#% controldesk Calibration Factor setpoint
#
record(ao, "BL04I-VA-IONP-07:SETCAL") {
    field(DESC, "Calibration Factor")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setcal(01,2) ty_40_4")
    field(DRVL, "0.0")
    field(DRVH, "9.99")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
################################################################################
# Start
#
#% archiver 10 Monitor
#% controldesk Supply Status scon
#
record(bo, "BL04I-VA-IONP-07:START")
{
    field(DESC, "HV on/off")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto start(01,2) ty_40_4")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
record(bi,"BL04I-VA-IONP-07:STARTING")
{
    field(DESC, "Starting Pumps")
    field(PINI, "YES")
    field(INP,  "0")
    field(ZNAM, "")
    field(ONAM, "Starting")
}

################################################################################
# Setpoints
#
# The MPC and MPCe controllers have four setpoints. Each setpoint has associated
# with it an ON pressure, an OFF pressure and a supply.
# Each pump on the controller is allocated two of the setpoints (pump setpoints 1 & 2).
# The following table describes the mapping of controller setpoints and supplies to
# each pump.
# I Gillingham: April 2015
#
#  Pump number   Pump_Setpoint Controller_Setpoint   Supply  
#      1             1                   1             1
#      2             1                   2             2
#      1             2                   3             1
#      2             2                   4             2

## ----------------- SP1 -------------------------------
#
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSPS1 and SETSPS2 records just once
# at startup.
#
record(bo, "BL04I-VA-IONP-07:INIT:SETSPSDIS") 
    {
    field(DTYP, "Soft Channel")
    field(VAL, "1")
    field(OUT, "BL04I-VA-IONP-07:INIT:SETSPSEQ.DISA")
    }
#
# 1) Get the instrument value for SP1 ON/OFF
# 1a) Wait one second for :RQSTSP1ON to complete and populate :SP1OFF and :SP1ON
# 2) Disable instrument update of setting SP1 ON/OFF
# 3) LOAD SETSP1OFF with SP1OFF
# 4) LOAD SETSP1ON with SP1ON
# 5) Enable instrument update of setting SP1 ON/OFF
# 6) Process seq for SP2
# 7) Disable this seq record from processing again
record(seq, "BL04I-VA-IONP-07:INIT:SETSPSEQ") 
    {
    field(SCAN, "1 second")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IONP-07:RQSTSP1ON PP")
    field(LNK2, "BL04I-VA-IONP-07:SETSPS1.DISA PP")
    field(LNK3, "BL04I-VA-IONP-07:SETSP1OFF PP")
    field(LNK4, "BL04I-VA-IONP-07:SETSP1ON PP")
    field(LNK5, "BL04I-VA-IONP-07:SETSPS1.DISA PP")
    field(LNK6, "BL04I-VA-IONP-07:INIT:SETSP2SEQ PP")
    field(LNK7, "BL04I-VA-IONP-07:INIT:SETSPSDIS PP")
    field(DLY1, "0")
    field(DLY2, "3.0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DLY7, "0")
    field(DOL1, "0")
    field(DOL2, "1")
    field(DOL3, "BL04I-VA-IONP-07:SP1OFF")
    field(DOL4, "BL04I-VA-IONP-07:SP1ON")
    field(DOL5, "0")
    field(DOL6, "0")
    field(DOL7, "1")
    }
    
# 1) Get the instrument value for SP2 ON/OFF
# 1a) Wait one second for :RQSTSP2ON to complete and populate :SP2OFF and :SP2ON
# 2) Disable instrument update of setting SP2 ON/OFF
# 3) LOAD SETSP2OFF with SP2OFF
# 4) LOAD SETSP2ON with SP2ON
# 5) Enable instrument update of setting SP2 ON/OFF
record(seq, "BL04I-VA-IONP-07:INIT:SETSP2SEQ")
    {
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IONP-07:RQSTSP2ON PP")
    field(LNK2, "BL04I-VA-IONP-07:SETSPS2.DISA PP")
    field(LNK3, "BL04I-VA-IONP-07:SETSP2OFF PP")
    field(LNK4, "BL04I-VA-IONP-07:SETSP2ON PP")
    field(LNK5, "BL04I-VA-IONP-07:SETSPS2.DISA PP")
    field(DLY1, "0")
    field(DLY2, "3.0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DOL1, "0")
    field(DOL2, "1")
    field(DOL3, "BL04I-VA-IONP-07:SP2OFF")
    field(DOL4, "BL04I-VA-IONP-07:SP2ON")
    field(DOL5, "0")
    }



# Although requesting SPS is logically an input, a calcout has been 
# used here to allow the return values to be injected directly into the 
# given record names via input links.
#
# Record RQSTSP1OFF is I/O Intr and gets (a copy of) any input, including input that was directed to record RQSTSP1ON
# Record RQSTSP1STATE is I/O Intr and gets (a copy of) any input, including input that was directed to record RQSTSP1ON
 
# sps: Parameter 1) Unit number   2) Device base name    3) Logical setpoint number for this pump (1 | 2) - gets converted to actual setpoint in protocol.
record(ai, "BL04I-VA-IONP-07:RQSTSP1ON") 
    {
    field(DESC, "Rqst Setpoint1")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(INP,  "@digitelMpc.proto getsps(01,BL04I-VA-IONP-07,1) ty_40_4")
    field(PINI, "NO")
    }

# sps: Parameter 1) Unit number   2) Device base name    3) Logical setpoint number for this pump (1 | 2).
record(ai, "BL04I-VA-IONP-07:RQSTSP2ON") 
    {
    field(DESC, "Rqst Setpoint2")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(INP,  "@digitelMpc.proto getsps(01,BL04I-VA-IONP-07,2) ty_40_4")
    field(PINI, "NO")
    }


#% archiver 10 Monitor
#% controldesk Setpoint 1 readback
# This PV is written to directly from the protocol (sps) return string
#
record(ai, "BL04I-VA-IONP-07:SP1ON") 
    {
    field(DESC, "Setpoint 1 On")
    field(DTYP, "Soft Channel")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-07:SP1OFF") 
    {
    field(DESC, "Setpoint 1 Off")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
# This PV is written to directly from the protocol (sps) return string
record(bi,"BL04I-VA-IONP-07:SP1STATE")
    {
    field(DESC, "Setpoint 1 State")
    field(PINI, "NO")
    field(INP,  "0")
    field(ZNAM, "Off")
    field(ONAM, "On")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 setpoint
#
record(ao, "BL04I-VA-IONP-07:SETSP1ON") 
    {
    field(VAL,  "1.0E-7")
    field(DESC, "Setpoint 1 On")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-07:SETSPS1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 Off setpoint
#
record(ao, "BL04I-VA-IONP-07:SETSP1OFF") 
    {
    field(VAL,  "2.0E-7")
    field(DESC, "Setpoint 1 Off")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-07:SETSPS1")
    }

# NB: INPF is written to by :SPNUM1 on PINI
#     The supply number is equivalent to pump number (1 | 2)
#
# INPA => Setpoint ON pressure
# INPB => Setpoint OFF pressure
# INPC => Source (usually equivalent to pump [1|2])
# INPD => Lower pressure working limit
# INPE => Upper pressure working limit
# INPF => Setpoint interlock number [1..4]
#
record(calcout, "BL04I-VA-IONP-07:SETSPS1") 
    {
    field(DESC, "Output Setpoints")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsps(01,BL04I-VA-IONP-07,1) ty_40_4")
##    field(OUT,  "@digitelMpc.proto setsps(01,2) ty_40_4")
    field(INPA, "BL04I-VA-IONP-07:SETSP1ON")
    field(INPB, "BL04I-VA-IONP-07:SETSP1OFF")
    field(INPC, "2")
    field(INPD, "1.01E-10")
    field(INPE, "9.99E-5")
    field(INPF, "BL04I-VA-IONP-07:SPNUM1")
    field(CALC, "((A<D)||(B>E)||(F<1))?0:F")
    field(OOPT, "When Non-zero")
    field(PINI, "NO")
    field(FLNK, "BL04I-VA-IONP-07:RQSTSP1ON")
    }


## ----------------- SP2 -------------------------------

#% archiver 10 Monitor
#% controldesk Setpoint 2 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-07:SP2ON") 
    {
    field(DESC, "Setpoint 2 On")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-07:SP2OFF") 
    {
    field(DESC, "Setpoint 2 Off")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
# This PV is written to directly from the protocol (sps) return string
record(bi,"BL04I-VA-IONP-07:SP2STATE")
    {
    field(DESC, "Setpoint 2 State")
    field(PINI, "NO")
    field(INP,  "0")
    field(ZNAM, "Off")
    field(ONAM, "On")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 setpoint
#
record(ao, "BL04I-VA-IONP-07:SETSP2ON") 
    {
    field(VAL,  "1.0E-7")
    field(DESC, "Setpoint 2 On")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-07:SETSPS2")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 Off setpoint
#
record(ao, "BL04I-VA-IONP-07:SETSP2OFF") 
    {
    field(VAL,  "2.0E-7")
    field(DESC, "Setpoint 2 Off")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-07:SETSPS2")
    }

# NB: INPF is written to by :SPNUM2 on PINI
# INPA => Setpoint ON pressure
# INPB => Setpoint OFF pressure
# INPC => Source (usually equivalent to pump [1|2])
# INPD => Lower pressure working limit
# INPE => Upper pressure working limit
# INPF => Setpoint interlock number [1..4]
#
record(calcout, "BL04I-VA-IONP-07:SETSPS2") 
    {
    field(DESC, "Output Setpoints")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsps(01,BL04I-VA-IONP-07,1) ty_40_4")
##    field(OUT,  "@digitelMpc.proto setsps(01,2) ty_40_4")
    field(INPA, "BL04I-VA-IONP-07:SETSP2ON")
    field(INPB, "BL04I-VA-IONP-07:SETSP2OFF")
    field(INPC, "2")
    field(INPD, "1.01E-10")
    field(INPE, "9.99E-5")
    field(INPF, "BL04I-VA-IONP-07:SPNUM2")    
    field(CALC, "((A<D)||(B>E)||(F<1))?0:F")
    field(OOPT, "When Non-zero")
    field(PINI, "NO")
    field(FLNK, "BL04I-VA-IONP-07:RQSTSP2ON")
    }


# Calculate the controller setpoint number for this pump
# Each setpoint has an ON and an OFF pressure attribute.
# Pump  Pump Setpoint  Controller Setpoint
#   1       1                    1
#   1       2                    3
#   2       1                    2
#   2       2                    4

record(calc, "BL04I-VA-IONP-07:SPNUM1") 
    {
    field(DESC, "Controller setpoints number Pump 1")
    field(INPA, "2")
    field(CALC, "(A>1)?2:1")
    field(PINI, "YES")
    # field(FLNK, "BL04I-VA-IONP-07:SETSPS1")
    }

record(calc, "BL04I-VA-IONP-07:SPNUM2") 
    {
    field(DESC, "Controller setpoints number Pump 2")
    field(INPA, "2")
    field(CALC, "(A>1)?4:3")
    field(PINI, "YES")
    # field(FLNK, "BL04I-VA-IONP-07:SETSPS2")
    }


################################################################################
# Text string on front panel
#
record(stringout, "BL04I-VA-IONP-07:SETTEXT") {
    field(DESC, "Text String")
    field(VAL , "BL04I-VA-IONP-07")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto settext(01,2) ty_40_4")
    field(PINI, "YES")
}
################################################################################

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-IONP-07:ERROR") 
    {
    field(DESC, "Last error message")
    }

# PINI set to ensure the record is initialised with TIMEOUT status,
# which will only change to OK once communication starts.
record(mbbi, "BL04I-VA-IONP-07:COMMS")
    {
    field(DESC, "Communication Status")
    field(DTYP, "Soft Channel")
    field(ZRST, "TIMEOUT")
    field(ONST, "OK")
    field(INP, "0")
    field(PINI, "YES")
    }

record(scalcout, "BL04I-VA-IONP-07:COMMSMATCH")
    {
    field(INAA, "BL04I-VA-IONP-07:P.STAT MS CP")
    field(CALC, "printf('%d',AA!='TIMEOUT'?1:0)")
    field(OOPT, "Every Time")
    field(DOPT, "Use CALC")
    field(OUT, "BL04I-VA-IONP-07:COMMS PP MS")
    }

# digitelMpcIonp.template
#% macro, __doc__, Template database for digitel MPC - Ion Pump
# Pete Owens - 30/9/03
#
# substitutions:
#% macro, device, device name
#% macro, name, Object name and gui association name
#% macro, port, asyn serial port number
#% macro, unit, unit number for multi-drop serial (2 hex digits - 05 by default)
#% macro, pump, ion pump number (1 or 2)
#% macro, size, pump size (l/s)
#% macro, sp1on, setpoint1 on
#% macro, sp1off, setpoint1 off
#% macro, sp2on, setpoint2 on
#% macro, sp2off, setpoint2 off
#% macro, alh,  alarm handler tag (Defaults to None) c.f. mp49's commit 80833
#% macro, text, Text to display in the ion pump controller window.
################################################################################

# This associates an edm screen with the template
# % gui, IONP11, edm, digitelMpcIonp2sp.edl, device=BL04I-VA-IONP-11

# This associates BOY screens with the template
# % gui, IONP11, boydetail, digitelMpcApp_opi/ionp_detail.opi, device=BL04I-VA-IONP-11, desc=BL04I-VA-IONP-11, name=IONP11
# % gui, IONP11, boyembed, digitelMpcApp_opi/ionp_embed_box.opi, device=BL04I-VA-IONP-11, desc=BL04I-VA-IONP-11, name=IONP11
# % gui, IONP11, boyembed, digitelMpcApp_opi/ionp_embed.opi, device=BL04I-VA-IONP-11, desc=BL04I-VA-IONP-11, name=IONP11

# These define what PVs a valve detail screen should contain
# % gui, IONP11, readback, Status,   BL04I-VA-IONP-11:STA
# % gui, IONP11, readback, Error Code,  BL04I-VA-IONP-11:ERR
# % gui, IONP11, readback, Voltage,  BL04I-VA-IONP-11:V
# % gui, IONP11, readback, Current,  BL04I-VA-IONP-11:I
# % gui, IONP11, readback, Strapping,  BL04I-VA-IONP-11:HV
# % gui, IONP11, enum, Start,  BL04I-VA-IONP-11:START
# % gui, IONP11, readback, Pump Size,  BL04I-VA-IONP-11:SIZE
# % gui, IONP11, demand, Pump Size,  BL04I-VA-IONP-11:SETSIZE
# % gui, IONP11, readback, Calibration,  BL04I-VA-IONP-11:CAL
# % gui, IONP11, demand, Calibration,  BL04I-VA-IONP-11:SETCAL
# % gui, IONP11, readback, Setpoint 1 On,  BL04I-VA-IONP-11:SP1ON
# % gui, IONP11, demand, Setpoint 1 On,  BL04I-VA-IONP-11:SETSP1ON
# % gui, IONP11, readback, Setpoint 1 Off,  BL04I-VA-IONP-11:SP1OFF
# % gui, IONP11, demand, Setpoint 1 Off,  BL04I-VA-IONP-11:SETSP1OFF
# % gui, IONP11, readback, Setpoint 2 On,  BL04I-VA-IONP-11:SP2ON
# % gui, IONP11, demand, Setpoint 2 On,  BL04I-VA-IONP-11:SETSP2ON
# % gui, IONP11, readback, Setpoint 2 Off,  BL04I-VA-IONP-11:SP2OFF
# % gui, IONP11, demand, Setpoint 2 Off,  BL04I-VA-IONP-11:SETSP2OFF

# Read pump current
#
#% controldesk Current readback
#
record(ai, "BL04I-VA-IONP-11:I") {
    field(DESC, "Pump Current")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto current(01,2) ty_40_2")
    field(SCAN, "1 second")
    field(EGU,  "A")
    field(LOPR, "0.0")
    field(HOPR, "10.0")
    field(PREC, "1")
}
################################################################################
# Read pump pressure
#
#% archiver 10 Monitor
#% controldesk Pressure readback
#
record(ai, "BL04I-VA-IONP-11:P") {
    field(DESC, "Pump Pressure")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto pressure(01,2) ty_40_2")
    field(SCAN, "1 second")
    field(FLNK, "BL04I-VA-IONP-11:PLOG")
    field(EGU,  "mbar")
    field(HOPR, "1000")
    field(LOPR, "1.0E-12")
    field(PREC, "11")
}
record(calcout, "BL04I-VA-IONP-11:ADEL")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-IONP-11:P.ADEL")
    field(INPA, "BL04I-VA-IONP-11:P")
#    field(INPB, "4")
#    field(INPB, "3")
    field(INPB, "2")
    field(SCAN, "10 second")
}
#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-IONP-11:PLOG")
{
    field(DESC, "log Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-IONP-11:P MS")
    field(HOPR, "3")
    field(LOPR, "-12")
#    field(ADEL, "0.1")
#    field(ADEL, "0.125")
#    field(ADEL, "0.176")
    field(ADEL, "0.25")
}
################################################################################
# Read pump voltage
#
#% controldesk Voltage readback
#
record(longin, "BL04I-VA-IONP-11:V") {
    field(DESC, "Pump Voltage")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto voltage(01,2) ty_40_2")
    field(SCAN, "1 second")
    field(EGU,  "V")
    field(LOPR, "0")
    field(HOPR, "10")
}
################################################################################
# Get HV Strapping
#
#% archiver 1 Monitor
#% controldesk HV Strapping readback
#
record(longin, "BL04I-VA-IONP-11:HV") 
{
    field(DESC, "HV Strapping")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto strap(01,2) ty_40_2")
    field(SCAN, "10 second")
    field(EGU,  "V")
    field(LOPR, "5600")
    field(HOPR, "7000")
}
################################################################################
# Get supply status
#
#% archiver 10 Monitor
#% controldesk Supply Status smon
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-VA-IONP-11:STA
record(mbbi, "BL04I-VA-IONP-11:STA")
{
    field(DESC, "Supply Status")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto status(01,2) ty_40_2")
    field(SCAN, "1 second")
    field(ZRST, "Unknown")
    field(ONST, "Waiting")
    field(TWST, "Standby")
    field(THST, "Safe-Conn")
    field(FRST, "Running")
    field(FVST, "Cool Down")
    field(SXST, "Pump Error")
    field(SVST, "HV Switched Off")
    field(EIST, "Interlock")
    field(NIST, "Shut Down")
    field(TEST, "Calibration")
    field(ELST, "Invalid")
    field(TVST, "Invalid")
    field(TTST, "Invalid")
    field(FTST, "Invalid")
    field(FFST, "Invalid")
    field(UNSV, "MAJOR")
    field(ZRSV, "MAJOR")
    field(ONSV, "MAJOR")
    field(TWSV, "MAJOR")
    field(THSV, "MAJOR")
    field(FRSV, "NO_ALARM")
    field(FVSV, "MINOR")
    field(SXSV, "MAJOR")
    field(SVSV, "MAJOR")
    field(EISV, "MAJOR")
    field(NISV, "MAJOR")
    field(TESV, "MAJOR")
    field(ELSV, "MAJOR")
    field(TVSV, "MAJOR")
    field(TTSV, "MAJOR")
    field(FTSV, "MAJOR")
    field(FFSV, "MAJOR")
    field(FLNK, "BL04I-VA-IONP-11:ERRSEL")
}

record(seq, "BL04I-VA-IONP-11:ERRSEQ")
{
    field(DESC, "Get Error if applicable")
    field(SCAN, "Passive")
    field(SELM, "Specified")
    field(SELN, "1")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-IONP-11:ERR PP MS")
    field(DOL2, "BL04I-VA-IONP-11:ERRGET PP MS")
    field(LNK2, "BL04I-VA-IONP-11:ERR PP MS")
}

record(longin, "BL04I-VA-IONP-11:ERRGET")
{
    field(DESC, "Get Error Code")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto err(01,2) ty_40_2")
    field(SCAN, "Passive")
}

record(calcout, "BL04I-VA-IONP-11:ERRSEL")
{
    field(DESC, "Choose which error source")
    field(INPA, "BL04I-VA-IONP-11:STA MS")
    field(CALC, "A>=3?2:1")
    field(OUT, "BL04I-VA-IONP-11:ERRSEQ.SELN PP MS")
}

#
#% archiver 10 Monitor
#% controldesk Error Code smon
#
record(mbbi, "BL04I-VA-IONP-11:ERR")
{
    field(DESC, "Error Code")
    field(DTYP, "Soft Channel")
    field(SCAN, "Passive")
    field(ZRST, "OK")
    field(ONST, "Too many cycles")
    field(TWST, "High pressure")
    field(THST, "High current")
    field(FRST, "High pressure")
    field(FVST, "Pump power")
    field(SXST, "High current")
    field(SVST, "Short circuit")
    field(EIST, "Malfunction")
    field(NIST, "Low voltage")
    field(TEST, "Arc detect")
    field(ELST, "11")
    field(TVST, "12")
    field(TTST, "13")
    field(FTST, "14")
    field(FFST, "15")
    field(UNSV, "MINOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "MINOR")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MINOR")
    field(FVSV, "MINOR")
    field(SXSV, "MINOR")
    field(SVSV, "MINOR")
    field(EISV, "MINOR")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MINOR")
    field(TVSV, "MINOR")
    field(TTSV, "MINOR")
    field(FTSV, "MINOR")
    field(FFSV, "MINOR")
}
################################################################################
# Pump size
#
#% archiver 10 Monitor
#% controldesk Pump Size readback
#
record(longin, "BL04I-VA-IONP-11:SIZE") {
    field(DESC, "Pump Size")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto size(01,2) ty_40_2")
    field(SCAN, "10 second")
    field(EGU,  "l/s")
    field(LOPR, "0")
    field(HOPR, "1200")
}
#
#% archiver 10 Monitor
#% controldesk Pump Size setpoint
#
record(ao, "BL04I-VA-IONP-11:SETSIZE") {
    field(DESC, "Pump Size")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsize(01,2) ty_40_2")
    field(PINI, "YES")
    field(DOL,  "340")
    field(EGU,  "l/s")
    field(DRVL, "0")
    field(DRVH, "1200")
    field(LOPR, "0")
    field(HOPR, "1200")
    field(PREC, "0")
}
################################################################################
# Calibration factor
#
#% archiver 10 Monitor
#% controldesk Calibration Factor readback
#
record(ai, "BL04I-VA-IONP-11:CAL") {
    field(DESC, "Calibration Factor")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto cal(01,2) ty_40_2")
    field(SCAN, "10 second")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
#
#% archiver 10 Monitor
#% controldesk Calibration Factor setpoint
#
record(ao, "BL04I-VA-IONP-11:SETCAL") {
    field(DESC, "Calibration Factor")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setcal(01,2) ty_40_2")
    field(DRVL, "0.0")
    field(DRVH, "9.99")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
################################################################################
# Start
#
#% archiver 10 Monitor
#% controldesk Supply Status scon
#
record(bo, "BL04I-VA-IONP-11:START")
{
    field(DESC, "HV on/off")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto start(01,2) ty_40_2")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
record(bi,"BL04I-VA-IONP-11:STARTING")
{
    field(DESC, "Starting Pumps")
    field(PINI, "YES")
    field(INP,  "0")
    field(ZNAM, "")
    field(ONAM, "Starting")
}

################################################################################
# Setpoints
#
# The MPC and MPCe controllers have four setpoints. Each setpoint has associated
# with it an ON pressure, an OFF pressure and a supply.
# Each pump on the controller is allocated two of the setpoints (pump setpoints 1 & 2).
# The following table describes the mapping of controller setpoints and supplies to
# each pump.
# I Gillingham: April 2015
#
#  Pump number   Pump_Setpoint Controller_Setpoint   Supply  
#      1             1                   1             1
#      2             1                   2             2
#      1             2                   3             1
#      2             2                   4             2

## ----------------- SP1 -------------------------------
#
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSPS1 and SETSPS2 records just once
# at startup.
#
record(bo, "BL04I-VA-IONP-11:INIT:SETSPSDIS") 
    {
    field(DTYP, "Soft Channel")
    field(VAL, "1")
    field(OUT, "BL04I-VA-IONP-11:INIT:SETSPSEQ.DISA")
    }
#
# 1) Get the instrument value for SP1 ON/OFF
# 1a) Wait one second for :RQSTSP1ON to complete and populate :SP1OFF and :SP1ON
# 2) Disable instrument update of setting SP1 ON/OFF
# 3) LOAD SETSP1OFF with SP1OFF
# 4) LOAD SETSP1ON with SP1ON
# 5) Enable instrument update of setting SP1 ON/OFF
# 6) Process seq for SP2
# 7) Disable this seq record from processing again
record(seq, "BL04I-VA-IONP-11:INIT:SETSPSEQ") 
    {
    field(SCAN, "1 second")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IONP-11:RQSTSP1ON PP")
    field(LNK2, "BL04I-VA-IONP-11:SETSPS1.DISA PP")
    field(LNK3, "BL04I-VA-IONP-11:SETSP1OFF PP")
    field(LNK4, "BL04I-VA-IONP-11:SETSP1ON PP")
    field(LNK5, "BL04I-VA-IONP-11:SETSPS1.DISA PP")
    field(LNK6, "BL04I-VA-IONP-11:INIT:SETSP2SEQ PP")
    field(LNK7, "BL04I-VA-IONP-11:INIT:SETSPSDIS PP")
    field(DLY1, "0")
    field(DLY2, "3.0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DLY7, "0")
    field(DOL1, "0")
    field(DOL2, "1")
    field(DOL3, "BL04I-VA-IONP-11:SP1OFF")
    field(DOL4, "BL04I-VA-IONP-11:SP1ON")
    field(DOL5, "0")
    field(DOL6, "0")
    field(DOL7, "1")
    }
    
# 1) Get the instrument value for SP2 ON/OFF
# 1a) Wait one second for :RQSTSP2ON to complete and populate :SP2OFF and :SP2ON
# 2) Disable instrument update of setting SP2 ON/OFF
# 3) LOAD SETSP2OFF with SP2OFF
# 4) LOAD SETSP2ON with SP2ON
# 5) Enable instrument update of setting SP2 ON/OFF
record(seq, "BL04I-VA-IONP-11:INIT:SETSP2SEQ")
    {
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IONP-11:RQSTSP2ON PP")
    field(LNK2, "BL04I-VA-IONP-11:SETSPS2.DISA PP")
    field(LNK3, "BL04I-VA-IONP-11:SETSP2OFF PP")
    field(LNK4, "BL04I-VA-IONP-11:SETSP2ON PP")
    field(LNK5, "BL04I-VA-IONP-11:SETSPS2.DISA PP")
    field(DLY1, "0")
    field(DLY2, "3.0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DOL1, "0")
    field(DOL2, "1")
    field(DOL3, "BL04I-VA-IONP-11:SP2OFF")
    field(DOL4, "BL04I-VA-IONP-11:SP2ON")
    field(DOL5, "0")
    }



# Although requesting SPS is logically an input, a calcout has been 
# used here to allow the return values to be injected directly into the 
# given record names via input links.
#
# Record RQSTSP1OFF is I/O Intr and gets (a copy of) any input, including input that was directed to record RQSTSP1ON
# Record RQSTSP1STATE is I/O Intr and gets (a copy of) any input, including input that was directed to record RQSTSP1ON
 
# sps: Parameter 1) Unit number   2) Device base name    3) Logical setpoint number for this pump (1 | 2) - gets converted to actual setpoint in protocol.
record(ai, "BL04I-VA-IONP-11:RQSTSP1ON") 
    {
    field(DESC, "Rqst Setpoint1")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(INP,  "@digitelMpc.proto getsps(01,BL04I-VA-IONP-11,1) ty_40_2")
    field(PINI, "NO")
    }

# sps: Parameter 1) Unit number   2) Device base name    3) Logical setpoint number for this pump (1 | 2).
record(ai, "BL04I-VA-IONP-11:RQSTSP2ON") 
    {
    field(DESC, "Rqst Setpoint2")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(INP,  "@digitelMpc.proto getsps(01,BL04I-VA-IONP-11,2) ty_40_2")
    field(PINI, "NO")
    }


#% archiver 10 Monitor
#% controldesk Setpoint 1 readback
# This PV is written to directly from the protocol (sps) return string
#
record(ai, "BL04I-VA-IONP-11:SP1ON") 
    {
    field(DESC, "Setpoint 1 On")
    field(DTYP, "Soft Channel")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-11:SP1OFF") 
    {
    field(DESC, "Setpoint 1 Off")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
# This PV is written to directly from the protocol (sps) return string
record(bi,"BL04I-VA-IONP-11:SP1STATE")
    {
    field(DESC, "Setpoint 1 State")
    field(PINI, "NO")
    field(INP,  "0")
    field(ZNAM, "Off")
    field(ONAM, "On")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 setpoint
#
record(ao, "BL04I-VA-IONP-11:SETSP1ON") 
    {
    field(VAL,  "1.0E-7")
    field(DESC, "Setpoint 1 On")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-11:SETSPS1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 Off setpoint
#
record(ao, "BL04I-VA-IONP-11:SETSP1OFF") 
    {
    field(VAL,  "2.0E-7")
    field(DESC, "Setpoint 1 Off")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-11:SETSPS1")
    }

# NB: INPF is written to by :SPNUM1 on PINI
#     The supply number is equivalent to pump number (1 | 2)
#
# INPA => Setpoint ON pressure
# INPB => Setpoint OFF pressure
# INPC => Source (usually equivalent to pump [1|2])
# INPD => Lower pressure working limit
# INPE => Upper pressure working limit
# INPF => Setpoint interlock number [1..4]
#
record(calcout, "BL04I-VA-IONP-11:SETSPS1") 
    {
    field(DESC, "Output Setpoints")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsps(01,BL04I-VA-IONP-11,1) ty_40_2")
##    field(OUT,  "@digitelMpc.proto setsps(01,2) ty_40_2")
    field(INPA, "BL04I-VA-IONP-11:SETSP1ON")
    field(INPB, "BL04I-VA-IONP-11:SETSP1OFF")
    field(INPC, "2")
    field(INPD, "1.01E-10")
    field(INPE, "9.99E-5")
    field(INPF, "BL04I-VA-IONP-11:SPNUM1")
    field(CALC, "((A<D)||(B>E)||(F<1))?0:F")
    field(OOPT, "When Non-zero")
    field(PINI, "NO")
    field(FLNK, "BL04I-VA-IONP-11:RQSTSP1ON")
    }


## ----------------- SP2 -------------------------------

#% archiver 10 Monitor
#% controldesk Setpoint 2 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-11:SP2ON") 
    {
    field(DESC, "Setpoint 2 On")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-11:SP2OFF") 
    {
    field(DESC, "Setpoint 2 Off")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
# This PV is written to directly from the protocol (sps) return string
record(bi,"BL04I-VA-IONP-11:SP2STATE")
    {
    field(DESC, "Setpoint 2 State")
    field(PINI, "NO")
    field(INP,  "0")
    field(ZNAM, "Off")
    field(ONAM, "On")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 setpoint
#
record(ao, "BL04I-VA-IONP-11:SETSP2ON") 
    {
    field(VAL,  "1.0E-7")
    field(DESC, "Setpoint 2 On")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-11:SETSPS2")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 Off setpoint
#
record(ao, "BL04I-VA-IONP-11:SETSP2OFF") 
    {
    field(VAL,  "2.0E-7")
    field(DESC, "Setpoint 2 Off")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-11:SETSPS2")
    }

# NB: INPF is written to by :SPNUM2 on PINI
# INPA => Setpoint ON pressure
# INPB => Setpoint OFF pressure
# INPC => Source (usually equivalent to pump [1|2])
# INPD => Lower pressure working limit
# INPE => Upper pressure working limit
# INPF => Setpoint interlock number [1..4]
#
record(calcout, "BL04I-VA-IONP-11:SETSPS2") 
    {
    field(DESC, "Output Setpoints")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsps(01,BL04I-VA-IONP-11,1) ty_40_2")
##    field(OUT,  "@digitelMpc.proto setsps(01,2) ty_40_2")
    field(INPA, "BL04I-VA-IONP-11:SETSP2ON")
    field(INPB, "BL04I-VA-IONP-11:SETSP2OFF")
    field(INPC, "2")
    field(INPD, "1.01E-10")
    field(INPE, "9.99E-5")
    field(INPF, "BL04I-VA-IONP-11:SPNUM2")    
    field(CALC, "((A<D)||(B>E)||(F<1))?0:F")
    field(OOPT, "When Non-zero")
    field(PINI, "NO")
    field(FLNK, "BL04I-VA-IONP-11:RQSTSP2ON")
    }


# Calculate the controller setpoint number for this pump
# Each setpoint has an ON and an OFF pressure attribute.
# Pump  Pump Setpoint  Controller Setpoint
#   1       1                    1
#   1       2                    3
#   2       1                    2
#   2       2                    4

record(calc, "BL04I-VA-IONP-11:SPNUM1") 
    {
    field(DESC, "Controller setpoints number Pump 1")
    field(INPA, "2")
    field(CALC, "(A>1)?2:1")
    field(PINI, "YES")
    # field(FLNK, "BL04I-VA-IONP-11:SETSPS1")
    }

record(calc, "BL04I-VA-IONP-11:SPNUM2") 
    {
    field(DESC, "Controller setpoints number Pump 2")
    field(INPA, "2")
    field(CALC, "(A>1)?4:3")
    field(PINI, "YES")
    # field(FLNK, "BL04I-VA-IONP-11:SETSPS2")
    }


################################################################################
# Text string on front panel
#
record(stringout, "BL04I-VA-IONP-11:SETTEXT") {
    field(DESC, "Text String")
    field(VAL , "BL04I-VA-IONP-11")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto settext(01,2) ty_40_2")
    field(PINI, "YES")
}
################################################################################

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-IONP-11:ERROR") 
    {
    field(DESC, "Last error message")
    }

# PINI set to ensure the record is initialised with TIMEOUT status,
# which will only change to OK once communication starts.
record(mbbi, "BL04I-VA-IONP-11:COMMS")
    {
    field(DESC, "Communication Status")
    field(DTYP, "Soft Channel")
    field(ZRST, "TIMEOUT")
    field(ONST, "OK")
    field(INP, "0")
    field(PINI, "YES")
    }

record(scalcout, "BL04I-VA-IONP-11:COMMSMATCH")
    {
    field(INAA, "BL04I-VA-IONP-11:P.STAT MS CP")
    field(CALC, "printf('%d',AA!='TIMEOUT'?1:0)")
    field(OOPT, "Every Time")
    field(DOPT, "Use CALC")
    field(OUT, "BL04I-VA-IONP-11:COMMS PP MS")
    }

# digitelMpcIonp.template
#% macro, __doc__, Template database for digitel MPC - Ion Pump
# Pete Owens - 30/9/03
#
# substitutions:
#% macro, device, device name
#% macro, name, Object name and gui association name
#% macro, port, asyn serial port number
#% macro, unit, unit number for multi-drop serial (2 hex digits - 05 by default)
#% macro, pump, ion pump number (1 or 2)
#% macro, size, pump size (l/s)
#% macro, sp1on, setpoint1 on
#% macro, sp1off, setpoint1 off
#% macro, sp2on, setpoint2 on
#% macro, sp2off, setpoint2 off
#% macro, alh,  alarm handler tag (Defaults to None) c.f. mp49's commit 80833
#% macro, text, Text to display in the ion pump controller window.
################################################################################

# This associates an edm screen with the template
# % gui, IONP12, edm, digitelMpcIonp2sp.edl, device=BL04I-VA-IONP-12

# This associates BOY screens with the template
# % gui, IONP12, boydetail, digitelMpcApp_opi/ionp_detail.opi, device=BL04I-VA-IONP-12, desc=BL04I-VA-IONP-12, name=IONP12
# % gui, IONP12, boyembed, digitelMpcApp_opi/ionp_embed_box.opi, device=BL04I-VA-IONP-12, desc=BL04I-VA-IONP-12, name=IONP12
# % gui, IONP12, boyembed, digitelMpcApp_opi/ionp_embed.opi, device=BL04I-VA-IONP-12, desc=BL04I-VA-IONP-12, name=IONP12

# These define what PVs a valve detail screen should contain
# % gui, IONP12, readback, Status,   BL04I-VA-IONP-12:STA
# % gui, IONP12, readback, Error Code,  BL04I-VA-IONP-12:ERR
# % gui, IONP12, readback, Voltage,  BL04I-VA-IONP-12:V
# % gui, IONP12, readback, Current,  BL04I-VA-IONP-12:I
# % gui, IONP12, readback, Strapping,  BL04I-VA-IONP-12:HV
# % gui, IONP12, enum, Start,  BL04I-VA-IONP-12:START
# % gui, IONP12, readback, Pump Size,  BL04I-VA-IONP-12:SIZE
# % gui, IONP12, demand, Pump Size,  BL04I-VA-IONP-12:SETSIZE
# % gui, IONP12, readback, Calibration,  BL04I-VA-IONP-12:CAL
# % gui, IONP12, demand, Calibration,  BL04I-VA-IONP-12:SETCAL
# % gui, IONP12, readback, Setpoint 1 On,  BL04I-VA-IONP-12:SP1ON
# % gui, IONP12, demand, Setpoint 1 On,  BL04I-VA-IONP-12:SETSP1ON
# % gui, IONP12, readback, Setpoint 1 Off,  BL04I-VA-IONP-12:SP1OFF
# % gui, IONP12, demand, Setpoint 1 Off,  BL04I-VA-IONP-12:SETSP1OFF
# % gui, IONP12, readback, Setpoint 2 On,  BL04I-VA-IONP-12:SP2ON
# % gui, IONP12, demand, Setpoint 2 On,  BL04I-VA-IONP-12:SETSP2ON
# % gui, IONP12, readback, Setpoint 2 Off,  BL04I-VA-IONP-12:SP2OFF
# % gui, IONP12, demand, Setpoint 2 Off,  BL04I-VA-IONP-12:SETSP2OFF

# Read pump current
#
#% controldesk Current readback
#
record(ai, "BL04I-VA-IONP-12:I") {
    field(DESC, "Pump Current")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto current(01,2) ty_40_2")
    field(SCAN, "1 second")
    field(EGU,  "A")
    field(LOPR, "0.0")
    field(HOPR, "10.0")
    field(PREC, "1")
}
################################################################################
# Read pump pressure
#
#% archiver 10 Monitor
#% controldesk Pressure readback
#
record(ai, "BL04I-VA-IONP-12:P") {
    field(DESC, "Pump Pressure")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto pressure(01,2) ty_40_2")
    field(SCAN, "1 second")
    field(FLNK, "BL04I-VA-IONP-12:PLOG")
    field(EGU,  "mbar")
    field(HOPR, "1000")
    field(LOPR, "1.0E-12")
    field(PREC, "11")
}
record(calcout, "BL04I-VA-IONP-12:ADEL")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-IONP-12:P.ADEL")
    field(INPA, "BL04I-VA-IONP-12:P")
#    field(INPB, "4")
#    field(INPB, "3")
    field(INPB, "2")
    field(SCAN, "10 second")
}
#
#% archiver 1 Monitor
#
record(calc, "BL04I-VA-IONP-12:PLOG")
{
    field(DESC, "log Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-IONP-12:P MS")
    field(HOPR, "3")
    field(LOPR, "-12")
#    field(ADEL, "0.1")
#    field(ADEL, "0.125")
#    field(ADEL, "0.176")
    field(ADEL, "0.25")
}
################################################################################
# Read pump voltage
#
#% controldesk Voltage readback
#
record(longin, "BL04I-VA-IONP-12:V") {
    field(DESC, "Pump Voltage")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto voltage(01,2) ty_40_2")
    field(SCAN, "1 second")
    field(EGU,  "V")
    field(LOPR, "0")
    field(HOPR, "10")
}
################################################################################
# Get HV Strapping
#
#% archiver 1 Monitor
#% controldesk HV Strapping readback
#
record(longin, "BL04I-VA-IONP-12:HV") 
{
    field(DESC, "HV Strapping")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto strap(01,2) ty_40_2")
    field(SCAN, "10 second")
    field(EGU,  "V")
    field(LOPR, "5600")
    field(HOPR, "7000")
}
################################################################################
# Get supply status
#
#% archiver 10 Monitor
#% controldesk Supply Status smon
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-VA-IONP-12:STA
record(mbbi, "BL04I-VA-IONP-12:STA")
{
    field(DESC, "Supply Status")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto status(01,2) ty_40_2")
    field(SCAN, "1 second")
    field(ZRST, "Unknown")
    field(ONST, "Waiting")
    field(TWST, "Standby")
    field(THST, "Safe-Conn")
    field(FRST, "Running")
    field(FVST, "Cool Down")
    field(SXST, "Pump Error")
    field(SVST, "HV Switched Off")
    field(EIST, "Interlock")
    field(NIST, "Shut Down")
    field(TEST, "Calibration")
    field(ELST, "Invalid")
    field(TVST, "Invalid")
    field(TTST, "Invalid")
    field(FTST, "Invalid")
    field(FFST, "Invalid")
    field(UNSV, "MAJOR")
    field(ZRSV, "MAJOR")
    field(ONSV, "MAJOR")
    field(TWSV, "MAJOR")
    field(THSV, "MAJOR")
    field(FRSV, "NO_ALARM")
    field(FVSV, "MINOR")
    field(SXSV, "MAJOR")
    field(SVSV, "MAJOR")
    field(EISV, "MAJOR")
    field(NISV, "MAJOR")
    field(TESV, "MAJOR")
    field(ELSV, "MAJOR")
    field(TVSV, "MAJOR")
    field(TTSV, "MAJOR")
    field(FTSV, "MAJOR")
    field(FFSV, "MAJOR")
    field(FLNK, "BL04I-VA-IONP-12:ERRSEL")
}

record(seq, "BL04I-VA-IONP-12:ERRSEQ")
{
    field(DESC, "Get Error if applicable")
    field(SCAN, "Passive")
    field(SELM, "Specified")
    field(SELN, "1")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-IONP-12:ERR PP MS")
    field(DOL2, "BL04I-VA-IONP-12:ERRGET PP MS")
    field(LNK2, "BL04I-VA-IONP-12:ERR PP MS")
}

record(longin, "BL04I-VA-IONP-12:ERRGET")
{
    field(DESC, "Get Error Code")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto err(01,2) ty_40_2")
    field(SCAN, "Passive")
}

record(calcout, "BL04I-VA-IONP-12:ERRSEL")
{
    field(DESC, "Choose which error source")
    field(INPA, "BL04I-VA-IONP-12:STA MS")
    field(CALC, "A>=3?2:1")
    field(OUT, "BL04I-VA-IONP-12:ERRSEQ.SELN PP MS")
}

#
#% archiver 10 Monitor
#% controldesk Error Code smon
#
record(mbbi, "BL04I-VA-IONP-12:ERR")
{
    field(DESC, "Error Code")
    field(DTYP, "Soft Channel")
    field(SCAN, "Passive")
    field(ZRST, "OK")
    field(ONST, "Too many cycles")
    field(TWST, "High pressure")
    field(THST, "High current")
    field(FRST, "High pressure")
    field(FVST, "Pump power")
    field(SXST, "High current")
    field(SVST, "Short circuit")
    field(EIST, "Malfunction")
    field(NIST, "Low voltage")
    field(TEST, "Arc detect")
    field(ELST, "11")
    field(TVST, "12")
    field(TTST, "13")
    field(FTST, "14")
    field(FFST, "15")
    field(UNSV, "MINOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "MINOR")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MINOR")
    field(FVSV, "MINOR")
    field(SXSV, "MINOR")
    field(SVSV, "MINOR")
    field(EISV, "MINOR")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MINOR")
    field(TVSV, "MINOR")
    field(TTSV, "MINOR")
    field(FTSV, "MINOR")
    field(FFSV, "MINOR")
}
################################################################################
# Pump size
#
#% archiver 10 Monitor
#% controldesk Pump Size readback
#
record(longin, "BL04I-VA-IONP-12:SIZE") {
    field(DESC, "Pump Size")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto size(01,2) ty_40_2")
    field(SCAN, "10 second")
    field(EGU,  "l/s")
    field(LOPR, "0")
    field(HOPR, "1200")
}
#
#% archiver 10 Monitor
#% controldesk Pump Size setpoint
#
record(ao, "BL04I-VA-IONP-12:SETSIZE") {
    field(DESC, "Pump Size")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsize(01,2) ty_40_2")
    field(PINI, "YES")
    field(DOL,  "340")
    field(EGU,  "l/s")
    field(DRVL, "0")
    field(DRVH, "1200")
    field(LOPR, "0")
    field(HOPR, "1200")
    field(PREC, "0")
}
################################################################################
# Calibration factor
#
#% archiver 10 Monitor
#% controldesk Calibration Factor readback
#
record(ai, "BL04I-VA-IONP-12:CAL") {
    field(DESC, "Calibration Factor")
    field(DTYP, "stream")
    field(INP,  "@digitelMpc.proto cal(01,2) ty_40_2")
    field(SCAN, "10 second")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
#
#% archiver 10 Monitor
#% controldesk Calibration Factor setpoint
#
record(ao, "BL04I-VA-IONP-12:SETCAL") {
    field(DESC, "Calibration Factor")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setcal(01,2) ty_40_2")
    field(DRVL, "0.0")
    field(DRVH, "9.99")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
################################################################################
# Start
#
#% archiver 10 Monitor
#% controldesk Supply Status scon
#
record(bo, "BL04I-VA-IONP-12:START")
{
    field(DESC, "HV on/off")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto start(01,2) ty_40_2")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
record(bi,"BL04I-VA-IONP-12:STARTING")
{
    field(DESC, "Starting Pumps")
    field(PINI, "YES")
    field(INP,  "0")
    field(ZNAM, "")
    field(ONAM, "Starting")
}

################################################################################
# Setpoints
#
# The MPC and MPCe controllers have four setpoints. Each setpoint has associated
# with it an ON pressure, an OFF pressure and a supply.
# Each pump on the controller is allocated two of the setpoints (pump setpoints 1 & 2).
# The following table describes the mapping of controller setpoints and supplies to
# each pump.
# I Gillingham: April 2015
#
#  Pump number   Pump_Setpoint Controller_Setpoint   Supply  
#      1             1                   1             1
#      2             1                   2             2
#      1             2                   3             1
#      2             2                   4             2

## ----------------- SP1 -------------------------------
#
# -----------------------------------------------------------------------------------------
# These two records work together to provide one scan
# to correctly initialise the SETSPS1 and SETSPS2 records just once
# at startup.
#
record(bo, "BL04I-VA-IONP-12:INIT:SETSPSDIS") 
    {
    field(DTYP, "Soft Channel")
    field(VAL, "1")
    field(OUT, "BL04I-VA-IONP-12:INIT:SETSPSEQ.DISA")
    }
#
# 1) Get the instrument value for SP1 ON/OFF
# 1a) Wait one second for :RQSTSP1ON to complete and populate :SP1OFF and :SP1ON
# 2) Disable instrument update of setting SP1 ON/OFF
# 3) LOAD SETSP1OFF with SP1OFF
# 4) LOAD SETSP1ON with SP1ON
# 5) Enable instrument update of setting SP1 ON/OFF
# 6) Process seq for SP2
# 7) Disable this seq record from processing again
record(seq, "BL04I-VA-IONP-12:INIT:SETSPSEQ") 
    {
    field(SCAN, "1 second")
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IONP-12:RQSTSP1ON PP")
    field(LNK2, "BL04I-VA-IONP-12:SETSPS1.DISA PP")
    field(LNK3, "BL04I-VA-IONP-12:SETSP1OFF PP")
    field(LNK4, "BL04I-VA-IONP-12:SETSP1ON PP")
    field(LNK5, "BL04I-VA-IONP-12:SETSPS1.DISA PP")
    field(LNK6, "BL04I-VA-IONP-12:INIT:SETSP2SEQ PP")
    field(LNK7, "BL04I-VA-IONP-12:INIT:SETSPSDIS PP")
    field(DLY1, "0")
    field(DLY2, "3.0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DLY7, "0")
    field(DOL1, "0")
    field(DOL2, "1")
    field(DOL3, "BL04I-VA-IONP-12:SP1OFF")
    field(DOL4, "BL04I-VA-IONP-12:SP1ON")
    field(DOL5, "0")
    field(DOL6, "0")
    field(DOL7, "1")
    }
    
# 1) Get the instrument value for SP2 ON/OFF
# 1a) Wait one second for :RQSTSP2ON to complete and populate :SP2OFF and :SP2ON
# 2) Disable instrument update of setting SP2 ON/OFF
# 3) LOAD SETSP2OFF with SP2OFF
# 4) LOAD SETSP2ON with SP2ON
# 5) Enable instrument update of setting SP2 ON/OFF
record(seq, "BL04I-VA-IONP-12:INIT:SETSP2SEQ")
    {
    field(SELM, "All")
    field(LNK1, "BL04I-VA-IONP-12:RQSTSP2ON PP")
    field(LNK2, "BL04I-VA-IONP-12:SETSPS2.DISA PP")
    field(LNK3, "BL04I-VA-IONP-12:SETSP2OFF PP")
    field(LNK4, "BL04I-VA-IONP-12:SETSP2ON PP")
    field(LNK5, "BL04I-VA-IONP-12:SETSPS2.DISA PP")
    field(DLY1, "0")
    field(DLY2, "3.0")
    field(DLY3, "0")
    field(DLY4, "0")
    field(DOL1, "0")
    field(DOL2, "1")
    field(DOL3, "BL04I-VA-IONP-12:SP2OFF")
    field(DOL4, "BL04I-VA-IONP-12:SP2ON")
    field(DOL5, "0")
    }



# Although requesting SPS is logically an input, a calcout has been 
# used here to allow the return values to be injected directly into the 
# given record names via input links.
#
# Record RQSTSP1OFF is I/O Intr and gets (a copy of) any input, including input that was directed to record RQSTSP1ON
# Record RQSTSP1STATE is I/O Intr and gets (a copy of) any input, including input that was directed to record RQSTSP1ON
 
# sps: Parameter 1) Unit number   2) Device base name    3) Logical setpoint number for this pump (1 | 2) - gets converted to actual setpoint in protocol.
record(ai, "BL04I-VA-IONP-12:RQSTSP1ON") 
    {
    field(DESC, "Rqst Setpoint1")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(INP,  "@digitelMpc.proto getsps(01,BL04I-VA-IONP-12,1) ty_40_2")
    field(PINI, "NO")
    }

# sps: Parameter 1) Unit number   2) Device base name    3) Logical setpoint number for this pump (1 | 2).
record(ai, "BL04I-VA-IONP-12:RQSTSP2ON") 
    {
    field(DESC, "Rqst Setpoint2")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(INP,  "@digitelMpc.proto getsps(01,BL04I-VA-IONP-12,2) ty_40_2")
    field(PINI, "NO")
    }


#% archiver 10 Monitor
#% controldesk Setpoint 1 readback
# This PV is written to directly from the protocol (sps) return string
#
record(ai, "BL04I-VA-IONP-12:SP1ON") 
    {
    field(DESC, "Setpoint 1 On")
    field(DTYP, "Soft Channel")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-12:SP1OFF") 
    {
    field(DESC, "Setpoint 1 Off")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
# This PV is written to directly from the protocol (sps) return string
record(bi,"BL04I-VA-IONP-12:SP1STATE")
    {
    field(DESC, "Setpoint 1 State")
    field(PINI, "NO")
    field(INP,  "0")
    field(ZNAM, "Off")
    field(ONAM, "On")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 setpoint
#
record(ao, "BL04I-VA-IONP-12:SETSP1ON") 
    {
    field(VAL,  "1.0E-7")
    field(DESC, "Setpoint 1 On")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-12:SETSPS1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 1 Off setpoint
#
record(ao, "BL04I-VA-IONP-12:SETSP1OFF") 
    {
    field(VAL,  "2.0E-7")
    field(DESC, "Setpoint 1 Off")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-12:SETSPS1")
    }

# NB: INPF is written to by :SPNUM1 on PINI
#     The supply number is equivalent to pump number (1 | 2)
#
# INPA => Setpoint ON pressure
# INPB => Setpoint OFF pressure
# INPC => Source (usually equivalent to pump [1|2])
# INPD => Lower pressure working limit
# INPE => Upper pressure working limit
# INPF => Setpoint interlock number [1..4]
#
record(calcout, "BL04I-VA-IONP-12:SETSPS1") 
    {
    field(DESC, "Output Setpoints")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsps(01,BL04I-VA-IONP-12,1) ty_40_2")
##    field(OUT,  "@digitelMpc.proto setsps(01,2) ty_40_2")
    field(INPA, "BL04I-VA-IONP-12:SETSP1ON")
    field(INPB, "BL04I-VA-IONP-12:SETSP1OFF")
    field(INPC, "2")
    field(INPD, "1.01E-10")
    field(INPE, "9.99E-5")
    field(INPF, "BL04I-VA-IONP-12:SPNUM1")
    field(CALC, "((A<D)||(B>E)||(F<1))?0:F")
    field(OOPT, "When Non-zero")
    field(PINI, "NO")
    field(FLNK, "BL04I-VA-IONP-12:RQSTSP1ON")
    }


## ----------------- SP2 -------------------------------

#% archiver 10 Monitor
#% controldesk Setpoint 2 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-12:SP2ON") 
    {
    field(DESC, "Setpoint 2 On")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 readback
#
# This PV is written to directly from the protocol (sps) return string
record(ai, "BL04I-VA-IONP-12:SP2OFF") 
    {
    field(DESC, "Setpoint 2 Off")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    }
# This PV is written to directly from the protocol (sps) return string
record(bi,"BL04I-VA-IONP-12:SP2STATE")
    {
    field(DESC, "Setpoint 2 State")
    field(PINI, "NO")
    field(INP,  "0")
    field(ZNAM, "Off")
    field(ONAM, "On")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 setpoint
#
record(ao, "BL04I-VA-IONP-12:SETSP2ON") 
    {
    field(VAL,  "1.0E-7")
    field(DESC, "Setpoint 2 On")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-12:SETSPS2")
    }
#
#% archiver 10 Monitor
#% controldesk Setpoint 2 Off setpoint
#
record(ao, "BL04I-VA-IONP-12:SETSP2OFF") 
    {
    field(VAL,  "2.0E-7")
    field(DESC, "Setpoint 2 Off")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
    field(FLNK, "BL04I-VA-IONP-12:SETSPS2")
    }

# NB: INPF is written to by :SPNUM2 on PINI
# INPA => Setpoint ON pressure
# INPB => Setpoint OFF pressure
# INPC => Source (usually equivalent to pump [1|2])
# INPD => Lower pressure working limit
# INPE => Upper pressure working limit
# INPF => Setpoint interlock number [1..4]
#
record(calcout, "BL04I-VA-IONP-12:SETSPS2") 
    {
    field(DESC, "Output Setpoints")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto setsps(01,BL04I-VA-IONP-12,1) ty_40_2")
##    field(OUT,  "@digitelMpc.proto setsps(01,2) ty_40_2")
    field(INPA, "BL04I-VA-IONP-12:SETSP2ON")
    field(INPB, "BL04I-VA-IONP-12:SETSP2OFF")
    field(INPC, "2")
    field(INPD, "1.01E-10")
    field(INPE, "9.99E-5")
    field(INPF, "BL04I-VA-IONP-12:SPNUM2")    
    field(CALC, "((A<D)||(B>E)||(F<1))?0:F")
    field(OOPT, "When Non-zero")
    field(PINI, "NO")
    field(FLNK, "BL04I-VA-IONP-12:RQSTSP2ON")
    }


# Calculate the controller setpoint number for this pump
# Each setpoint has an ON and an OFF pressure attribute.
# Pump  Pump Setpoint  Controller Setpoint
#   1       1                    1
#   1       2                    3
#   2       1                    2
#   2       2                    4

record(calc, "BL04I-VA-IONP-12:SPNUM1") 
    {
    field(DESC, "Controller setpoints number Pump 1")
    field(INPA, "2")
    field(CALC, "(A>1)?2:1")
    field(PINI, "YES")
    # field(FLNK, "BL04I-VA-IONP-12:SETSPS1")
    }

record(calc, "BL04I-VA-IONP-12:SPNUM2") 
    {
    field(DESC, "Controller setpoints number Pump 2")
    field(INPA, "2")
    field(CALC, "(A>1)?4:3")
    field(PINI, "YES")
    # field(FLNK, "BL04I-VA-IONP-12:SETSPS2")
    }


################################################################################
# Text string on front panel
#
record(stringout, "BL04I-VA-IONP-12:SETTEXT") {
    field(DESC, "Text String")
    field(VAL , "BL04I-VA-IONP-12")
    field(DTYP, "stream")
    field(OUT,  "@digitelMpc.proto settext(01,2) ty_40_2")
    field(PINI, "YES")
}
################################################################################

################################################################################
# Text error message
#
record(stringin, "BL04I-VA-IONP-12:ERROR") 
    {
    field(DESC, "Last error message")
    }

# PINI set to ensure the record is initialised with TIMEOUT status,
# which will only change to OK once communication starts.
record(mbbi, "BL04I-VA-IONP-12:COMMS")
    {
    field(DESC, "Communication Status")
    field(DTYP, "Soft Channel")
    field(ZRST, "TIMEOUT")
    field(ONST, "OK")
    field(INP, "0")
    field(PINI, "YES")
    }

record(scalcout, "BL04I-VA-IONP-12:COMMSMATCH")
    {
    field(INAA, "BL04I-VA-IONP-12:P.STAT MS CP")
    field(CALC, "printf('%d',AA!='TIMEOUT'?1:0)")
    field(OOPT, "Every Time")
    field(DOPT, "Use CALC")
    field(OUT, "BL04I-VA-IONP-12:COMMS PP MS")
    }

# digitelMpcIonpGroup.db
#% macro, __doc__, Template database for a group of up to 8 digitel MPC Ion Pumps
# Pete Owens - 3/5/05
#
# substitutions:
# % macro, device, device name
# % macro, delay, delay between starting pumps
# % macro, ionp1, Ion pump 1 device name
# % macro, ionp2, Ion pump 2 device name
# % macro, ionp3, Ion pump 3 device name
# % macro, ionp4, Ion pump 4 device name
# % macro, ionp5, Ion pump 5 device name
# % macro, ionp6, Ion pump 6 device name
# % macro, ionp7, Ion pump 7 device name
# % macro, ionp8, Ion pump 8 device name

################################################################################
# Maximum pump current
#
record(sel, "BL04I-VA-GIONP-01:I") 
{
    field(DESC, "Pump Current")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-01:I")
    field(INPB, "BL04I-VA-IONP-02:I")
    field(INPC, "BL04I-VA-IONP-02:I")
    field(INPD, "BL04I-VA-IONP-02:I")
    field(INPE, "BL04I-VA-IONP-02:I")
    field(INPF, "BL04I-VA-IONP-02:I")
    field(INPG, "BL04I-VA-IONP-02:I")
    field(INPH, "BL04I-VA-IONP-02:I")
    field(SCAN, "1 second")
    field(EGU,  "A")
    field(LOPR, "0.0")
    field(HOPR, "10.0")
    field(PREC, "1")
}
################################################################################
# Maximum pump pressure
#
record(sel, "BL04I-VA-GIONP-01:P")
{
    field(DESC, "Pressure")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-01:P")
    field(INPB, "BL04I-VA-IONP-02:P")
    field(INPC, "BL04I-VA-IONP-02:P")
    field(INPD, "BL04I-VA-IONP-02:P")
    field(INPE, "BL04I-VA-IONP-02:P")
    field(INPF, "BL04I-VA-IONP-02:P")
    field(INPG, "BL04I-VA-IONP-02:P")
    field(INPH, "BL04I-VA-IONP-02:P")
    field(EGU,  "mbar")
    field(HOPR, "1000")
    field(LOPR, "1.0E-12")
    field(PREC, "11")
}
record(calc, "BL04I-VA-GIONP-01:PLOG")
{
    field(DESC, "log Pressure")
    field(SCAN, "1 second")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-GIONP-01:P PP")
    field(HOPR, "3")
    field(LOPR, "-12")
}
################################################################################
# Maximum pump voltage
#
record(sel, "BL04I-VA-GIONP-01:V") 
{
    field(DESC, "Pump Voltage")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-01:V")
    field(INPB, "BL04I-VA-IONP-02:V")
    field(INPC, "BL04I-VA-IONP-02:V")
    field(INPD, "BL04I-VA-IONP-02:V")
    field(INPE, "BL04I-VA-IONP-02:V")
    field(INPF, "BL04I-VA-IONP-02:V")
    field(INPG, "BL04I-VA-IONP-02:V")
    field(INPH, "BL04I-VA-IONP-02:V")
    field(SCAN, "1 second")
    field(EGU,  "V")
    field(LOPR, "0")
    field(HOPR, "10")
}
################################################################################
# Maximum HV Strapping
#
record(sel, "BL04I-VA-GIONP-01:HV") 
{
    field(DESC, "HV Strapping")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-01:HV")
    field(INPB, "BL04I-VA-IONP-02:HV")
    field(INPC, "BL04I-VA-IONP-02:HV")
    field(INPD, "BL04I-VA-IONP-02:HV")
    field(INPE, "BL04I-VA-IONP-02:HV")
    field(INPF, "BL04I-VA-IONP-02:HV")
    field(INPG, "BL04I-VA-IONP-02:HV")
    field(INPH, "BL04I-VA-IONP-02:HV")
    field(SCAN, "10 second")
    field(EGU,  "V")
    field(LOPR, "5600")
    field(HOPR, "7000")
}
################################################################################
# Worst supply status
#
record(mbbi, "BL04I-VA-GIONP-01:STA")
{
    field(DESC, "Supply Status")
    field(INP,  "BL04I-VA-GIONP-01:CALSTA PP MS")
    field(SCAN, "1 second")
    field(ZRST, "Unknown")
    field(ONST, "Waiting")
    field(TWST, "Standby")
    field(THST, "Safe-Conn")
    field(FRST, "Running")
    field(FVST, "Cool Down")
    field(SXST, "Pump Error")
    field(SVST, "HV Switched Off")
    field(EIST, "Interlock")
    field(NIST, "Shut Down")
    field(TEST, "Calibration")
    field(ELST, "Invalid")
    field(TVST, "Invalid")
    field(TTST, "Invalid")
    field(FTST, "Invalid")
    field(FFST, "Invalid")
}
record(calc, "BL04I-VA-GIONP-01:CALSTA")
{
    field(DESC, "Calculate Status")
    field(CALC, "A>C?A:(B<C?B:C)")
    field(INPA, "BL04I-VA-GIONP-01:MAXSTA PP MS")
    field(INPB, "BL04I-VA-GIONP-01:MINSTA PP MS")
    field(INPC, "4")
}
record(sel, "BL04I-VA-GIONP-01:MAXSTA") 
{
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-01:STA MS")
    field(INPB, "BL04I-VA-IONP-02:STA MS")
    field(INPC, "BL04I-VA-IONP-02:STA MS")
    field(INPD, "BL04I-VA-IONP-02:STA MS")
    field(INPE, "BL04I-VA-IONP-02:STA MS")
    field(INPF, "BL04I-VA-IONP-02:STA MS")
    field(INPG, "BL04I-VA-IONP-02:STA MS")
    field(INPH, "BL04I-VA-IONP-02:STA MS")
}
record(sel, "BL04I-VA-GIONP-01:MINSTA") 
{
    field(SELM, "Low Signal")
    field(INPA, "BL04I-VA-IONP-01:STA MS")
    field(INPB, "BL04I-VA-IONP-02:STA MS")
    field(INPC, "BL04I-VA-IONP-02:STA MS")
    field(INPD, "BL04I-VA-IONP-02:STA MS")
    field(INPE, "BL04I-VA-IONP-02:STA MS")
    field(INPF, "BL04I-VA-IONP-02:STA MS")
    field(INPG, "BL04I-VA-IONP-02:STA MS")
    field(INPH, "BL04I-VA-IONP-02:STA MS")
}
record(mbbi, "BL04I-VA-GIONP-01:ERR")
{
    field(DESC, "Error Code")
    field(INP,  "BL04I-VA-GIONP-01:SELERR PP")
    field(SCAN, "1 second")
    field(ZRST, "OK")
    field(ONST, "Too many cycles")
    field(TWST, "High pressure")
    field(THST, "High current")
    field(FRST, "High pressure")
    field(FVST, "Pump power")
    field(SXST, "High current")
    field(SVST, "Short circuit")
    field(EIST, "Malfunction")
    field(NIST, "Low voltage")
    field(TEST, "Arc detect")
    field(ELST, "11")
    field(TVST, "12")
    field(TTST, "13")
    field(FTST, "14")
    field(FFST, "15")
    field(UNSV, "MINOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "MINOR")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MINOR")
    field(FVSV, "MINOR")
    field(SXSV, "MINOR")
    field(SVSV, "MINOR")
    field(EISV, "MINOR")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MINOR")
    field(TVSV, "MINOR")
    field(TTSV, "MINOR")
    field(FTSV, "MINOR")
    field(FFSV, "MINOR")
}
record(sel, "BL04I-VA-GIONP-01:SELERR") 
{
    field(DESC, "Select Error")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-01:ERR")
    field(INPB, "BL04I-VA-IONP-02:ERR")
    field(INPC, "BL04I-VA-IONP-02:ERR")
    field(INPD, "BL04I-VA-IONP-02:ERR")
    field(INPE, "BL04I-VA-IONP-02:ERR")
    field(INPF, "BL04I-VA-IONP-02:ERR")
    field(INPG, "BL04I-VA-IONP-02:ERR")
    field(INPH, "BL04I-VA-IONP-02:ERR")
}
################################################################################
# Pump size
#
record(sel, "BL04I-VA-GIONP-01:SIZE")
{
    field(DESC, "Pump Size")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-01:SIZE")
    field(INPB, "BL04I-VA-IONP-02:SIZE")
    field(INPC, "BL04I-VA-IONP-02:SIZE")
    field(INPD, "BL04I-VA-IONP-02:SIZE")
    field(INPE, "BL04I-VA-IONP-02:SIZE")
    field(INPF, "BL04I-VA-IONP-02:SIZE")
    field(INPG, "BL04I-VA-IONP-02:SIZE")
    field(INPH, "BL04I-VA-IONP-02:SIZE")
    field(EGU,  "l/s")
    field(LOPR, "0")
    field(HOPR, "1200")
}
record(ao, "BL04I-VA-GIONP-01:SETSIZE")
{
    field(DESC, "Pump Size")
    field(DOL,  "BL04I-VA-GIONP-01:SIZE PP")
    field(OMSL, "closed_loop")
    field(SCAN, "1 second")
    field(EGU,  "l/s")
    field(DRVL, "0")
    field(DRVH, "1200")
    field(LOPR, "0")
    field(HOPR, "1200")
    field(PREC, "0")
}
################################################################################
# Calibration factor
#
record(sel, "BL04I-VA-GIONP-01:CAL") {
    field(DESC, "Calibration Factor")
    field(SELM, "Median Signal")
    field(INPA, "BL04I-VA-IONP-01:CAL")
    field(INPB, "BL04I-VA-IONP-02:CAL")
    field(INPC, "BL04I-VA-IONP-02:CAL")
    field(INPD, "BL04I-VA-IONP-02:CAL")
    field(INPE, "BL04I-VA-IONP-02:CAL")
    field(INPF, "BL04I-VA-IONP-02:CAL")
    field(INPG, "BL04I-VA-IONP-02:CAL")
    field(INPH, "BL04I-VA-IONP-02:CAL")
    field(SCAN, "1 second")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
record(ao, "BL04I-VA-GIONP-01:SETCAL") {
    field(DESC, "Calibration Factor")
    field(FLNK, "BL04I-VA-GIONP-01:SEQCAL")
    field(DRVL, "0.0")
    field(DRVH, "9.99")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
record(seq, "BL04I-VA-GIONP-01:SEQCAL")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIONP-01:SETCAL")
    field(DOL2, "BL04I-VA-GIONP-01:SETCAL")
    field(DOL3, "BL04I-VA-GIONP-01:SETCAL")
    field(DOL4, "BL04I-VA-GIONP-01:SETCAL")
    field(DOL5, "BL04I-VA-GIONP-01:SETCAL")
    field(DOL6, "BL04I-VA-GIONP-01:SETCAL")
    field(DOL7, "BL04I-VA-GIONP-01:SETCAL")
    field(DOL8, "BL04I-VA-GIONP-01:SETCAL")
    field(LNK1, "BL04I-VA-IONP-01:SETCAL CA")
    field(LNK2, "BL04I-VA-IONP-02:SETCAL CA")
    field(LNK3, "BL04I-VA-IONP-02:SETCAL CA")
    field(LNK4, "BL04I-VA-IONP-02:SETCAL CA")
    field(LNK5, "BL04I-VA-IONP-02:SETCAL CA")
    field(LNK6, "BL04I-VA-IONP-02:SETCAL CA")
    field(LNK7, "BL04I-VA-IONP-02:SETCAL CA")
    field(LNK8, "BL04I-VA-IONP-02:SETCAL CA")
}
################################################################################
# Start
#
record(bo, "BL04I-VA-GIONP-01:START")
{
    field(DESC, "HV on/off")
    field(FLNK, "BL04I-VA-GIONP-01:START1")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
record(bi,"BL04I-VA-GIONP-01:STARTING")
{
    field(DESC, "Starting Pumps")
    field(PINI, "YES")
    field(INP,  "0")
    field(ZNAM, "")
    field(ONAM, "Starting")
}
record(calc,"BL04I-VA-GIONP-01:START0")
{
    field(DESC, "START + 1")
    field(CALC, "A+1")
    field(INPA, "BL04I-VA-GIONP-01:START")
}
record(seq, "BL04I-VA-GIONP-01:START1")
{
    field(DESC, "Stop or Start Pumps")
    field(SELM, "Specified")
    field(SELL, "BL04I-VA-GIONP-01:START0 PP")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-GIONP-01:SEQSTOP PP")
    field(LNK2, "BL04I-VA-GIONP-01:SEQSTART PP")
}
record(seq, "BL04I-VA-GIONP-01:SEQSTOP")
{
    field(DESC, "Stop Pumps")
    field(SELM, "All")
    field(DOL1, "0")
    field(DOL2, "0")
    field(DOL3, "0")
    field(DOL4, "0")
    field(DOL5, "0")
    field(DOL6, "0")
    field(DOL7, "0")
    field(DOL8, "0")
    field(LNK1, "BL04I-VA-IONP-01:START CA")
    field(LNK2, "BL04I-VA-IONP-02:START CA")
    field(LNK3, "BL04I-VA-IONP-02:START CA")
    field(LNK4, "BL04I-VA-IONP-02:START CA")
    field(LNK5, "BL04I-VA-IONP-02:START CA")
    field(LNK6, "BL04I-VA-IONP-02:START CA")
    field(LNK7, "BL04I-VA-IONP-02:START CA")
    field(LNK8, "BL04I-VA-IONP-02:START CA")
}
record(seq, "BL04I-VA-GIONP-01:SEQSTART")
{
    field(DESC, "Strart Pumps")
    field(SELM, "All")
    field(DOL1, "1")
    field(DOL2, "BL04I-VA-GIONP-01:START")
    field(DOL3, "BL04I-VA-GIONP-01:START")
    field(DOL4, "BL04I-VA-GIONP-01:START")
    field(DOL5, "BL04I-VA-GIONP-01:START")
    field(DOL6, "BL04I-VA-GIONP-01:START")
    field(DOL7, "BL04I-VA-GIONP-01:START")
    field(DOL8, "BL04I-VA-GIONP-01:START")
    field(DOL9, "BL04I-VA-GIONP-01:START")
    field(DOLA, "0")
    field(DLY1, "0")
    field(DLY2, "0")
    field(DLY3, "10")
    field(DLY4, "10")
    field(DLY5, "10")
    field(DLY6, "10")
    field(DLY7, "10")
    field(DLY8, "10")
    field(DLY9, "10")
    field(DLYA, "10")
    field(LNK1, "BL04I-VA-GIONP-01:STARTING PP")
    field(LNK2, "BL04I-VA-IONP-01:START CA")
    field(LNK3, "BL04I-VA-IONP-02:START CA")
    field(LNK4, "BL04I-VA-IONP-02:START CA")
    field(LNK5, "BL04I-VA-IONP-02:START CA")
    field(LNK6, "BL04I-VA-IONP-02:START CA")
    field(LNK7, "BL04I-VA-IONP-02:START CA")
    field(LNK8, "BL04I-VA-IONP-02:START CA")
    field(LNK9, "BL04I-VA-IONP-02:START CA")
    field(LNKA, "BL04I-VA-GIONP-01:STARTING PP")
}
################################################################################
# Setpoints
#
record(sel, "BL04I-VA-GIONP-01:SP1") {
    field(DESC, "Setpoint 1")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-01:SP1")
    field(INPB, "BL04I-VA-IONP-02:SP1")
    field(INPC, "BL04I-VA-IONP-02:SP1")
    field(INPD, "BL04I-VA-IONP-02:SP1")
    field(INPE, "BL04I-VA-IONP-02:SP1")
    field(INPF, "BL04I-VA-IONP-02:SP1")
    field(INPG, "BL04I-VA-IONP-02:SP1")
    field(INPH, "BL04I-VA-IONP-02:SP1")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
}
record(ao, "BL04I-VA-GIONP-01:SETSP1") {
    field(DESC, "Setpoint On")
    field(FLNK, "BL04I-VA-GIONP-01:SEQSP1")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
}
record(seq, "BL04I-VA-GIONP-01:SEQSP1")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIONP-01:SETSP1")
    field(DOL2, "BL04I-VA-GIONP-01:SETSP1")
    field(DOL3, "BL04I-VA-GIONP-01:SETSP1")
    field(DOL4, "BL04I-VA-GIONP-01:SETSP1")
    field(DOL5, "BL04I-VA-GIONP-01:SETSP1")
    field(DOL6, "BL04I-VA-GIONP-01:SETSP1")
    field(DOL7, "BL04I-VA-GIONP-01:SETSP1")
    field(DOL8, "BL04I-VA-GIONP-01:SETSP1")
    field(LNK1, "BL04I-VA-IONP-01:SETSP1 CA")
    field(LNK2, "BL04I-VA-IONP-02:SETSP1 CA")
    field(LNK3, "BL04I-VA-IONP-02:SETSP1 CA")
    field(LNK4, "BL04I-VA-IONP-02:SETSP1 CA")
    field(LNK5, "BL04I-VA-IONP-02:SETSP1 CA")
    field(LNK6, "BL04I-VA-IONP-02:SETSP1 CA")
    field(LNK7, "BL04I-VA-IONP-02:SETSP1 CA")
    field(LNK8, "BL04I-VA-IONP-02:SETSP1 CA")
}
record(sel, "BL04I-VA-GIONP-01:SP2") {
    field(DESC, "Setpoint Off")
    field(SELM, "Low Signal")
    field(INPA, "BL04I-VA-IONP-01:SP2")
    field(INPB, "BL04I-VA-IONP-02:SP2")
    field(INPC, "BL04I-VA-IONP-02:SP2")
    field(INPD, "BL04I-VA-IONP-02:SP2")
    field(INPE, "BL04I-VA-IONP-02:SP2")
    field(INPF, "BL04I-VA-IONP-02:SP2")
    field(INPG, "BL04I-VA-IONP-02:SP2")
    field(INPH, "BL04I-VA-IONP-02:SP2")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
}
record(ao, "BL04I-VA-GIONP-01:SETSP2") {
    field(DESC, "Setpoint 2")
    field(FLNK, "BL04I-VA-GIONP-01:SEQSP2")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
}
record(seq, "BL04I-VA-GIONP-01:SEQSP2")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIONP-01:SETSP2")
    field(DOL2, "BL04I-VA-GIONP-01:SETSP2")
    field(DOL3, "BL04I-VA-GIONP-01:SETSP2")
    field(DOL4, "BL04I-VA-GIONP-01:SETSP2")
    field(DOL5, "BL04I-VA-GIONP-01:SETSP2")
    field(DOL6, "BL04I-VA-GIONP-01:SETSP2")
    field(DOL7, "BL04I-VA-GIONP-01:SETSP2")
    field(DOL8, "BL04I-VA-GIONP-01:SETSP2")
    field(LNK1, "BL04I-VA-IONP-01:SETSP2 CA")
    field(LNK2, "BL04I-VA-IONP-02:SETSP2 CA")
    field(LNK3, "BL04I-VA-IONP-02:SETSP2 CA")
    field(LNK4, "BL04I-VA-IONP-02:SETSP2 CA")
    field(LNK5, "BL04I-VA-IONP-02:SETSP2 CA")
    field(LNK6, "BL04I-VA-IONP-02:SETSP2 CA")
    field(LNK7, "BL04I-VA-IONP-02:SETSP2 CA")
    field(LNK8, "BL04I-VA-IONP-02:SETSP2 CA")
}
################################################################################


# digitelMpcIonpGroup.db
#% macro, __doc__, Template database for a group of up to 8 digitel MPC Ion Pumps
# Pete Owens - 3/5/05
#
# substitutions:
# % macro, device, device name
# % macro, delay, delay between starting pumps
# % macro, ionp1, Ion pump 1 device name
# % macro, ionp2, Ion pump 2 device name
# % macro, ionp3, Ion pump 3 device name
# % macro, ionp4, Ion pump 4 device name
# % macro, ionp5, Ion pump 5 device name
# % macro, ionp6, Ion pump 6 device name
# % macro, ionp7, Ion pump 7 device name
# % macro, ionp8, Ion pump 8 device name

################################################################################
# Maximum pump current
#
record(sel, "BL04I-VA-GIONP-04:I") 
{
    field(DESC, "Pump Current")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-05:I")
    field(INPB, "BL04I-VA-IONP-06:I")
    field(INPC, "BL04I-VA-IONP-06:I")
    field(INPD, "BL04I-VA-IONP-06:I")
    field(INPE, "BL04I-VA-IONP-06:I")
    field(INPF, "BL04I-VA-IONP-06:I")
    field(INPG, "BL04I-VA-IONP-06:I")
    field(INPH, "BL04I-VA-IONP-06:I")
    field(SCAN, "1 second")
    field(EGU,  "A")
    field(LOPR, "0.0")
    field(HOPR, "10.0")
    field(PREC, "1")
}
################################################################################
# Maximum pump pressure
#
record(sel, "BL04I-VA-GIONP-04:P")
{
    field(DESC, "Pressure")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-05:P")
    field(INPB, "BL04I-VA-IONP-06:P")
    field(INPC, "BL04I-VA-IONP-06:P")
    field(INPD, "BL04I-VA-IONP-06:P")
    field(INPE, "BL04I-VA-IONP-06:P")
    field(INPF, "BL04I-VA-IONP-06:P")
    field(INPG, "BL04I-VA-IONP-06:P")
    field(INPH, "BL04I-VA-IONP-06:P")
    field(EGU,  "mbar")
    field(HOPR, "1000")
    field(LOPR, "1.0E-12")
    field(PREC, "11")
}
record(calc, "BL04I-VA-GIONP-04:PLOG")
{
    field(DESC, "log Pressure")
    field(SCAN, "1 second")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-GIONP-04:P PP")
    field(HOPR, "3")
    field(LOPR, "-12")
}
################################################################################
# Maximum pump voltage
#
record(sel, "BL04I-VA-GIONP-04:V") 
{
    field(DESC, "Pump Voltage")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-05:V")
    field(INPB, "BL04I-VA-IONP-06:V")
    field(INPC, "BL04I-VA-IONP-06:V")
    field(INPD, "BL04I-VA-IONP-06:V")
    field(INPE, "BL04I-VA-IONP-06:V")
    field(INPF, "BL04I-VA-IONP-06:V")
    field(INPG, "BL04I-VA-IONP-06:V")
    field(INPH, "BL04I-VA-IONP-06:V")
    field(SCAN, "1 second")
    field(EGU,  "V")
    field(LOPR, "0")
    field(HOPR, "10")
}
################################################################################
# Maximum HV Strapping
#
record(sel, "BL04I-VA-GIONP-04:HV") 
{
    field(DESC, "HV Strapping")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-05:HV")
    field(INPB, "BL04I-VA-IONP-06:HV")
    field(INPC, "BL04I-VA-IONP-06:HV")
    field(INPD, "BL04I-VA-IONP-06:HV")
    field(INPE, "BL04I-VA-IONP-06:HV")
    field(INPF, "BL04I-VA-IONP-06:HV")
    field(INPG, "BL04I-VA-IONP-06:HV")
    field(INPH, "BL04I-VA-IONP-06:HV")
    field(SCAN, "10 second")
    field(EGU,  "V")
    field(LOPR, "5600")
    field(HOPR, "7000")
}
################################################################################
# Worst supply status
#
record(mbbi, "BL04I-VA-GIONP-04:STA")
{
    field(DESC, "Supply Status")
    field(INP,  "BL04I-VA-GIONP-04:CALSTA PP MS")
    field(SCAN, "1 second")
    field(ZRST, "Unknown")
    field(ONST, "Waiting")
    field(TWST, "Standby")
    field(THST, "Safe-Conn")
    field(FRST, "Running")
    field(FVST, "Cool Down")
    field(SXST, "Pump Error")
    field(SVST, "HV Switched Off")
    field(EIST, "Interlock")
    field(NIST, "Shut Down")
    field(TEST, "Calibration")
    field(ELST, "Invalid")
    field(TVST, "Invalid")
    field(TTST, "Invalid")
    field(FTST, "Invalid")
    field(FFST, "Invalid")
}
record(calc, "BL04I-VA-GIONP-04:CALSTA")
{
    field(DESC, "Calculate Status")
    field(CALC, "A>C?A:(B<C?B:C)")
    field(INPA, "BL04I-VA-GIONP-04:MAXSTA PP MS")
    field(INPB, "BL04I-VA-GIONP-04:MINSTA PP MS")
    field(INPC, "4")
}
record(sel, "BL04I-VA-GIONP-04:MAXSTA") 
{
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-05:STA MS")
    field(INPB, "BL04I-VA-IONP-06:STA MS")
    field(INPC, "BL04I-VA-IONP-06:STA MS")
    field(INPD, "BL04I-VA-IONP-06:STA MS")
    field(INPE, "BL04I-VA-IONP-06:STA MS")
    field(INPF, "BL04I-VA-IONP-06:STA MS")
    field(INPG, "BL04I-VA-IONP-06:STA MS")
    field(INPH, "BL04I-VA-IONP-06:STA MS")
}
record(sel, "BL04I-VA-GIONP-04:MINSTA") 
{
    field(SELM, "Low Signal")
    field(INPA, "BL04I-VA-IONP-05:STA MS")
    field(INPB, "BL04I-VA-IONP-06:STA MS")
    field(INPC, "BL04I-VA-IONP-06:STA MS")
    field(INPD, "BL04I-VA-IONP-06:STA MS")
    field(INPE, "BL04I-VA-IONP-06:STA MS")
    field(INPF, "BL04I-VA-IONP-06:STA MS")
    field(INPG, "BL04I-VA-IONP-06:STA MS")
    field(INPH, "BL04I-VA-IONP-06:STA MS")
}
record(mbbi, "BL04I-VA-GIONP-04:ERR")
{
    field(DESC, "Error Code")
    field(INP,  "BL04I-VA-GIONP-04:SELERR PP")
    field(SCAN, "1 second")
    field(ZRST, "OK")
    field(ONST, "Too many cycles")
    field(TWST, "High pressure")
    field(THST, "High current")
    field(FRST, "High pressure")
    field(FVST, "Pump power")
    field(SXST, "High current")
    field(SVST, "Short circuit")
    field(EIST, "Malfunction")
    field(NIST, "Low voltage")
    field(TEST, "Arc detect")
    field(ELST, "11")
    field(TVST, "12")
    field(TTST, "13")
    field(FTST, "14")
    field(FFST, "15")
    field(UNSV, "MINOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "MINOR")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MINOR")
    field(FVSV, "MINOR")
    field(SXSV, "MINOR")
    field(SVSV, "MINOR")
    field(EISV, "MINOR")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MINOR")
    field(TVSV, "MINOR")
    field(TTSV, "MINOR")
    field(FTSV, "MINOR")
    field(FFSV, "MINOR")
}
record(sel, "BL04I-VA-GIONP-04:SELERR") 
{
    field(DESC, "Select Error")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-05:ERR")
    field(INPB, "BL04I-VA-IONP-06:ERR")
    field(INPC, "BL04I-VA-IONP-06:ERR")
    field(INPD, "BL04I-VA-IONP-06:ERR")
    field(INPE, "BL04I-VA-IONP-06:ERR")
    field(INPF, "BL04I-VA-IONP-06:ERR")
    field(INPG, "BL04I-VA-IONP-06:ERR")
    field(INPH, "BL04I-VA-IONP-06:ERR")
}
################################################################################
# Pump size
#
record(sel, "BL04I-VA-GIONP-04:SIZE")
{
    field(DESC, "Pump Size")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-05:SIZE")
    field(INPB, "BL04I-VA-IONP-06:SIZE")
    field(INPC, "BL04I-VA-IONP-06:SIZE")
    field(INPD, "BL04I-VA-IONP-06:SIZE")
    field(INPE, "BL04I-VA-IONP-06:SIZE")
    field(INPF, "BL04I-VA-IONP-06:SIZE")
    field(INPG, "BL04I-VA-IONP-06:SIZE")
    field(INPH, "BL04I-VA-IONP-06:SIZE")
    field(EGU,  "l/s")
    field(LOPR, "0")
    field(HOPR, "1200")
}
record(ao, "BL04I-VA-GIONP-04:SETSIZE")
{
    field(DESC, "Pump Size")
    field(DOL,  "BL04I-VA-GIONP-04:SIZE PP")
    field(OMSL, "closed_loop")
    field(SCAN, "1 second")
    field(EGU,  "l/s")
    field(DRVL, "0")
    field(DRVH, "1200")
    field(LOPR, "0")
    field(HOPR, "1200")
    field(PREC, "0")
}
################################################################################
# Calibration factor
#
record(sel, "BL04I-VA-GIONP-04:CAL") {
    field(DESC, "Calibration Factor")
    field(SELM, "Median Signal")
    field(INPA, "BL04I-VA-IONP-05:CAL")
    field(INPB, "BL04I-VA-IONP-06:CAL")
    field(INPC, "BL04I-VA-IONP-06:CAL")
    field(INPD, "BL04I-VA-IONP-06:CAL")
    field(INPE, "BL04I-VA-IONP-06:CAL")
    field(INPF, "BL04I-VA-IONP-06:CAL")
    field(INPG, "BL04I-VA-IONP-06:CAL")
    field(INPH, "BL04I-VA-IONP-06:CAL")
    field(SCAN, "1 second")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
record(ao, "BL04I-VA-GIONP-04:SETCAL") {
    field(DESC, "Calibration Factor")
    field(FLNK, "BL04I-VA-GIONP-04:SEQCAL")
    field(DRVL, "0.0")
    field(DRVH, "9.99")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
record(seq, "BL04I-VA-GIONP-04:SEQCAL")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIONP-04:SETCAL")
    field(DOL2, "BL04I-VA-GIONP-04:SETCAL")
    field(DOL3, "BL04I-VA-GIONP-04:SETCAL")
    field(DOL4, "BL04I-VA-GIONP-04:SETCAL")
    field(DOL5, "BL04I-VA-GIONP-04:SETCAL")
    field(DOL6, "BL04I-VA-GIONP-04:SETCAL")
    field(DOL7, "BL04I-VA-GIONP-04:SETCAL")
    field(DOL8, "BL04I-VA-GIONP-04:SETCAL")
    field(LNK1, "BL04I-VA-IONP-05:SETCAL CA")
    field(LNK2, "BL04I-VA-IONP-06:SETCAL CA")
    field(LNK3, "BL04I-VA-IONP-06:SETCAL CA")
    field(LNK4, "BL04I-VA-IONP-06:SETCAL CA")
    field(LNK5, "BL04I-VA-IONP-06:SETCAL CA")
    field(LNK6, "BL04I-VA-IONP-06:SETCAL CA")
    field(LNK7, "BL04I-VA-IONP-06:SETCAL CA")
    field(LNK8, "BL04I-VA-IONP-06:SETCAL CA")
}
################################################################################
# Start
#
record(bo, "BL04I-VA-GIONP-04:START")
{
    field(DESC, "HV on/off")
    field(FLNK, "BL04I-VA-GIONP-04:START1")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
record(bi,"BL04I-VA-GIONP-04:STARTING")
{
    field(DESC, "Starting Pumps")
    field(PINI, "YES")
    field(INP,  "0")
    field(ZNAM, "")
    field(ONAM, "Starting")
}
record(calc,"BL04I-VA-GIONP-04:START0")
{
    field(DESC, "START + 1")
    field(CALC, "A+1")
    field(INPA, "BL04I-VA-GIONP-04:START")
}
record(seq, "BL04I-VA-GIONP-04:START1")
{
    field(DESC, "Stop or Start Pumps")
    field(SELM, "Specified")
    field(SELL, "BL04I-VA-GIONP-04:START0 PP")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-GIONP-04:SEQSTOP PP")
    field(LNK2, "BL04I-VA-GIONP-04:SEQSTART PP")
}
record(seq, "BL04I-VA-GIONP-04:SEQSTOP")
{
    field(DESC, "Stop Pumps")
    field(SELM, "All")
    field(DOL1, "0")
    field(DOL2, "0")
    field(DOL3, "0")
    field(DOL4, "0")
    field(DOL5, "0")
    field(DOL6, "0")
    field(DOL7, "0")
    field(DOL8, "0")
    field(LNK1, "BL04I-VA-IONP-05:START CA")
    field(LNK2, "BL04I-VA-IONP-06:START CA")
    field(LNK3, "BL04I-VA-IONP-06:START CA")
    field(LNK4, "BL04I-VA-IONP-06:START CA")
    field(LNK5, "BL04I-VA-IONP-06:START CA")
    field(LNK6, "BL04I-VA-IONP-06:START CA")
    field(LNK7, "BL04I-VA-IONP-06:START CA")
    field(LNK8, "BL04I-VA-IONP-06:START CA")
}
record(seq, "BL04I-VA-GIONP-04:SEQSTART")
{
    field(DESC, "Strart Pumps")
    field(SELM, "All")
    field(DOL1, "1")
    field(DOL2, "BL04I-VA-GIONP-04:START")
    field(DOL3, "BL04I-VA-GIONP-04:START")
    field(DOL4, "BL04I-VA-GIONP-04:START")
    field(DOL5, "BL04I-VA-GIONP-04:START")
    field(DOL6, "BL04I-VA-GIONP-04:START")
    field(DOL7, "BL04I-VA-GIONP-04:START")
    field(DOL8, "BL04I-VA-GIONP-04:START")
    field(DOL9, "BL04I-VA-GIONP-04:START")
    field(DOLA, "0")
    field(DLY1, "0")
    field(DLY2, "0")
    field(DLY3, "10")
    field(DLY4, "10")
    field(DLY5, "10")
    field(DLY6, "10")
    field(DLY7, "10")
    field(DLY8, "10")
    field(DLY9, "10")
    field(DLYA, "10")
    field(LNK1, "BL04I-VA-GIONP-04:STARTING PP")
    field(LNK2, "BL04I-VA-IONP-05:START CA")
    field(LNK3, "BL04I-VA-IONP-06:START CA")
    field(LNK4, "BL04I-VA-IONP-06:START CA")
    field(LNK5, "BL04I-VA-IONP-06:START CA")
    field(LNK6, "BL04I-VA-IONP-06:START CA")
    field(LNK7, "BL04I-VA-IONP-06:START CA")
    field(LNK8, "BL04I-VA-IONP-06:START CA")
    field(LNK9, "BL04I-VA-IONP-06:START CA")
    field(LNKA, "BL04I-VA-GIONP-04:STARTING PP")
}
################################################################################
# Setpoints
#
record(sel, "BL04I-VA-GIONP-04:SP1") {
    field(DESC, "Setpoint 1")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-05:SP1")
    field(INPB, "BL04I-VA-IONP-06:SP1")
    field(INPC, "BL04I-VA-IONP-06:SP1")
    field(INPD, "BL04I-VA-IONP-06:SP1")
    field(INPE, "BL04I-VA-IONP-06:SP1")
    field(INPF, "BL04I-VA-IONP-06:SP1")
    field(INPG, "BL04I-VA-IONP-06:SP1")
    field(INPH, "BL04I-VA-IONP-06:SP1")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
}
record(ao, "BL04I-VA-GIONP-04:SETSP1") {
    field(DESC, "Setpoint On")
    field(FLNK, "BL04I-VA-GIONP-04:SEQSP1")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
}
record(seq, "BL04I-VA-GIONP-04:SEQSP1")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIONP-04:SETSP1")
    field(DOL2, "BL04I-VA-GIONP-04:SETSP1")
    field(DOL3, "BL04I-VA-GIONP-04:SETSP1")
    field(DOL4, "BL04I-VA-GIONP-04:SETSP1")
    field(DOL5, "BL04I-VA-GIONP-04:SETSP1")
    field(DOL6, "BL04I-VA-GIONP-04:SETSP1")
    field(DOL7, "BL04I-VA-GIONP-04:SETSP1")
    field(DOL8, "BL04I-VA-GIONP-04:SETSP1")
    field(LNK1, "BL04I-VA-IONP-05:SETSP1 CA")
    field(LNK2, "BL04I-VA-IONP-06:SETSP1 CA")
    field(LNK3, "BL04I-VA-IONP-06:SETSP1 CA")
    field(LNK4, "BL04I-VA-IONP-06:SETSP1 CA")
    field(LNK5, "BL04I-VA-IONP-06:SETSP1 CA")
    field(LNK6, "BL04I-VA-IONP-06:SETSP1 CA")
    field(LNK7, "BL04I-VA-IONP-06:SETSP1 CA")
    field(LNK8, "BL04I-VA-IONP-06:SETSP1 CA")
}
record(sel, "BL04I-VA-GIONP-04:SP2") {
    field(DESC, "Setpoint Off")
    field(SELM, "Low Signal")
    field(INPA, "BL04I-VA-IONP-05:SP2")
    field(INPB, "BL04I-VA-IONP-06:SP2")
    field(INPC, "BL04I-VA-IONP-06:SP2")
    field(INPD, "BL04I-VA-IONP-06:SP2")
    field(INPE, "BL04I-VA-IONP-06:SP2")
    field(INPF, "BL04I-VA-IONP-06:SP2")
    field(INPG, "BL04I-VA-IONP-06:SP2")
    field(INPH, "BL04I-VA-IONP-06:SP2")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
}
record(ao, "BL04I-VA-GIONP-04:SETSP2") {
    field(DESC, "Setpoint 2")
    field(FLNK, "BL04I-VA-GIONP-04:SEQSP2")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
}
record(seq, "BL04I-VA-GIONP-04:SEQSP2")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIONP-04:SETSP2")
    field(DOL2, "BL04I-VA-GIONP-04:SETSP2")
    field(DOL3, "BL04I-VA-GIONP-04:SETSP2")
    field(DOL4, "BL04I-VA-GIONP-04:SETSP2")
    field(DOL5, "BL04I-VA-GIONP-04:SETSP2")
    field(DOL6, "BL04I-VA-GIONP-04:SETSP2")
    field(DOL7, "BL04I-VA-GIONP-04:SETSP2")
    field(DOL8, "BL04I-VA-GIONP-04:SETSP2")
    field(LNK1, "BL04I-VA-IONP-05:SETSP2 CA")
    field(LNK2, "BL04I-VA-IONP-06:SETSP2 CA")
    field(LNK3, "BL04I-VA-IONP-06:SETSP2 CA")
    field(LNK4, "BL04I-VA-IONP-06:SETSP2 CA")
    field(LNK5, "BL04I-VA-IONP-06:SETSP2 CA")
    field(LNK6, "BL04I-VA-IONP-06:SETSP2 CA")
    field(LNK7, "BL04I-VA-IONP-06:SETSP2 CA")
    field(LNK8, "BL04I-VA-IONP-06:SETSP2 CA")
}
################################################################################


# digitelMpcIonpGroup.db
#% macro, __doc__, Template database for a group of up to 8 digitel MPC Ion Pumps
# Pete Owens - 3/5/05
#
# substitutions:
# % macro, device, device name
# % macro, delay, delay between starting pumps
# % macro, ionp1, Ion pump 1 device name
# % macro, ionp2, Ion pump 2 device name
# % macro, ionp3, Ion pump 3 device name
# % macro, ionp4, Ion pump 4 device name
# % macro, ionp5, Ion pump 5 device name
# % macro, ionp6, Ion pump 6 device name
# % macro, ionp7, Ion pump 7 device name
# % macro, ionp8, Ion pump 8 device name

################################################################################
# Maximum pump current
#
record(sel, "BL04I-VA-GIONP-98:I") 
{
    field(DESC, "Pump Current")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GIONP-01:I")
    field(INPB, "BL04I-VA-IONP-03:I")
    field(INPC, "BL04I-VA-IONP-04:I")
    field(INPD, "BL04I-VA-IONP-05:I")
    field(INPE, "BL04I-VA-IONP-06:I")
    field(INPF, "BL04I-VA-IONP-06:I")
    field(INPG, "BL04I-VA-IONP-06:I")
    field(INPH, "BL04I-VA-IONP-06:I")
    field(SCAN, "1 second")
    field(EGU,  "A")
    field(LOPR, "0.0")
    field(HOPR, "10.0")
    field(PREC, "1")
}
################################################################################
# Maximum pump pressure
#
record(sel, "BL04I-VA-GIONP-98:P")
{
    field(DESC, "Pressure")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GIONP-01:P")
    field(INPB, "BL04I-VA-IONP-03:P")
    field(INPC, "BL04I-VA-IONP-04:P")
    field(INPD, "BL04I-VA-IONP-05:P")
    field(INPE, "BL04I-VA-IONP-06:P")
    field(INPF, "BL04I-VA-IONP-06:P")
    field(INPG, "BL04I-VA-IONP-06:P")
    field(INPH, "BL04I-VA-IONP-06:P")
    field(EGU,  "mbar")
    field(HOPR, "1000")
    field(LOPR, "1.0E-12")
    field(PREC, "11")
}
record(calc, "BL04I-VA-GIONP-98:PLOG")
{
    field(DESC, "log Pressure")
    field(SCAN, "1 second")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-GIONP-98:P PP")
    field(HOPR, "3")
    field(LOPR, "-12")
}
################################################################################
# Maximum pump voltage
#
record(sel, "BL04I-VA-GIONP-98:V") 
{
    field(DESC, "Pump Voltage")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GIONP-01:V")
    field(INPB, "BL04I-VA-IONP-03:V")
    field(INPC, "BL04I-VA-IONP-04:V")
    field(INPD, "BL04I-VA-IONP-05:V")
    field(INPE, "BL04I-VA-IONP-06:V")
    field(INPF, "BL04I-VA-IONP-06:V")
    field(INPG, "BL04I-VA-IONP-06:V")
    field(INPH, "BL04I-VA-IONP-06:V")
    field(SCAN, "1 second")
    field(EGU,  "V")
    field(LOPR, "0")
    field(HOPR, "10")
}
################################################################################
# Maximum HV Strapping
#
record(sel, "BL04I-VA-GIONP-98:HV") 
{
    field(DESC, "HV Strapping")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GIONP-01:HV")
    field(INPB, "BL04I-VA-IONP-03:HV")
    field(INPC, "BL04I-VA-IONP-04:HV")
    field(INPD, "BL04I-VA-IONP-05:HV")
    field(INPE, "BL04I-VA-IONP-06:HV")
    field(INPF, "BL04I-VA-IONP-06:HV")
    field(INPG, "BL04I-VA-IONP-06:HV")
    field(INPH, "BL04I-VA-IONP-06:HV")
    field(SCAN, "10 second")
    field(EGU,  "V")
    field(LOPR, "5600")
    field(HOPR, "7000")
}
################################################################################
# Worst supply status
#
record(mbbi, "BL04I-VA-GIONP-98:STA")
{
    field(DESC, "Supply Status")
    field(INP,  "BL04I-VA-GIONP-98:CALSTA PP MS")
    field(SCAN, "1 second")
    field(ZRST, "Unknown")
    field(ONST, "Waiting")
    field(TWST, "Standby")
    field(THST, "Safe-Conn")
    field(FRST, "Running")
    field(FVST, "Cool Down")
    field(SXST, "Pump Error")
    field(SVST, "HV Switched Off")
    field(EIST, "Interlock")
    field(NIST, "Shut Down")
    field(TEST, "Calibration")
    field(ELST, "Invalid")
    field(TVST, "Invalid")
    field(TTST, "Invalid")
    field(FTST, "Invalid")
    field(FFST, "Invalid")
}
record(calc, "BL04I-VA-GIONP-98:CALSTA")
{
    field(DESC, "Calculate Status")
    field(CALC, "A>C?A:(B<C?B:C)")
    field(INPA, "BL04I-VA-GIONP-98:MAXSTA PP MS")
    field(INPB, "BL04I-VA-GIONP-98:MINSTA PP MS")
    field(INPC, "4")
}
record(sel, "BL04I-VA-GIONP-98:MAXSTA") 
{
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GIONP-01:STA MS")
    field(INPB, "BL04I-VA-IONP-03:STA MS")
    field(INPC, "BL04I-VA-IONP-04:STA MS")
    field(INPD, "BL04I-VA-IONP-05:STA MS")
    field(INPE, "BL04I-VA-IONP-06:STA MS")
    field(INPF, "BL04I-VA-IONP-06:STA MS")
    field(INPG, "BL04I-VA-IONP-06:STA MS")
    field(INPH, "BL04I-VA-IONP-06:STA MS")
}
record(sel, "BL04I-VA-GIONP-98:MINSTA") 
{
    field(SELM, "Low Signal")
    field(INPA, "BL04I-VA-GIONP-01:STA MS")
    field(INPB, "BL04I-VA-IONP-03:STA MS")
    field(INPC, "BL04I-VA-IONP-04:STA MS")
    field(INPD, "BL04I-VA-IONP-05:STA MS")
    field(INPE, "BL04I-VA-IONP-06:STA MS")
    field(INPF, "BL04I-VA-IONP-06:STA MS")
    field(INPG, "BL04I-VA-IONP-06:STA MS")
    field(INPH, "BL04I-VA-IONP-06:STA MS")
}
record(mbbi, "BL04I-VA-GIONP-98:ERR")
{
    field(DESC, "Error Code")
    field(INP,  "BL04I-VA-GIONP-98:SELERR PP")
    field(SCAN, "1 second")
    field(ZRST, "OK")
    field(ONST, "Too many cycles")
    field(TWST, "High pressure")
    field(THST, "High current")
    field(FRST, "High pressure")
    field(FVST, "Pump power")
    field(SXST, "High current")
    field(SVST, "Short circuit")
    field(EIST, "Malfunction")
    field(NIST, "Low voltage")
    field(TEST, "Arc detect")
    field(ELST, "11")
    field(TVST, "12")
    field(TTST, "13")
    field(FTST, "14")
    field(FFST, "15")
    field(UNSV, "MINOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "MINOR")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MINOR")
    field(FVSV, "MINOR")
    field(SXSV, "MINOR")
    field(SVSV, "MINOR")
    field(EISV, "MINOR")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MINOR")
    field(TVSV, "MINOR")
    field(TTSV, "MINOR")
    field(FTSV, "MINOR")
    field(FFSV, "MINOR")
}
record(sel, "BL04I-VA-GIONP-98:SELERR") 
{
    field(DESC, "Select Error")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GIONP-01:ERR")
    field(INPB, "BL04I-VA-IONP-03:ERR")
    field(INPC, "BL04I-VA-IONP-04:ERR")
    field(INPD, "BL04I-VA-IONP-05:ERR")
    field(INPE, "BL04I-VA-IONP-06:ERR")
    field(INPF, "BL04I-VA-IONP-06:ERR")
    field(INPG, "BL04I-VA-IONP-06:ERR")
    field(INPH, "BL04I-VA-IONP-06:ERR")
}
################################################################################
# Pump size
#
record(sel, "BL04I-VA-GIONP-98:SIZE")
{
    field(DESC, "Pump Size")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GIONP-01:SIZE")
    field(INPB, "BL04I-VA-IONP-03:SIZE")
    field(INPC, "BL04I-VA-IONP-04:SIZE")
    field(INPD, "BL04I-VA-IONP-05:SIZE")
    field(INPE, "BL04I-VA-IONP-06:SIZE")
    field(INPF, "BL04I-VA-IONP-06:SIZE")
    field(INPG, "BL04I-VA-IONP-06:SIZE")
    field(INPH, "BL04I-VA-IONP-06:SIZE")
    field(EGU,  "l/s")
    field(LOPR, "0")
    field(HOPR, "1200")
}
record(ao, "BL04I-VA-GIONP-98:SETSIZE")
{
    field(DESC, "Pump Size")
    field(DOL,  "BL04I-VA-GIONP-98:SIZE PP")
    field(OMSL, "closed_loop")
    field(SCAN, "1 second")
    field(EGU,  "l/s")
    field(DRVL, "0")
    field(DRVH, "1200")
    field(LOPR, "0")
    field(HOPR, "1200")
    field(PREC, "0")
}
################################################################################
# Calibration factor
#
record(sel, "BL04I-VA-GIONP-98:CAL") {
    field(DESC, "Calibration Factor")
    field(SELM, "Median Signal")
    field(INPA, "BL04I-VA-GIONP-01:CAL")
    field(INPB, "BL04I-VA-IONP-03:CAL")
    field(INPC, "BL04I-VA-IONP-04:CAL")
    field(INPD, "BL04I-VA-IONP-05:CAL")
    field(INPE, "BL04I-VA-IONP-06:CAL")
    field(INPF, "BL04I-VA-IONP-06:CAL")
    field(INPG, "BL04I-VA-IONP-06:CAL")
    field(INPH, "BL04I-VA-IONP-06:CAL")
    field(SCAN, "1 second")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
record(ao, "BL04I-VA-GIONP-98:SETCAL") {
    field(DESC, "Calibration Factor")
    field(FLNK, "BL04I-VA-GIONP-98:SEQCAL")
    field(DRVL, "0.0")
    field(DRVH, "9.99")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
record(seq, "BL04I-VA-GIONP-98:SEQCAL")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIONP-98:SETCAL")
    field(DOL2, "BL04I-VA-GIONP-98:SETCAL")
    field(DOL3, "BL04I-VA-GIONP-98:SETCAL")
    field(DOL4, "BL04I-VA-GIONP-98:SETCAL")
    field(DOL5, "BL04I-VA-GIONP-98:SETCAL")
    field(DOL6, "BL04I-VA-GIONP-98:SETCAL")
    field(DOL7, "BL04I-VA-GIONP-98:SETCAL")
    field(DOL8, "BL04I-VA-GIONP-98:SETCAL")
    field(LNK1, "BL04I-VA-GIONP-01:SETCAL CA")
    field(LNK2, "BL04I-VA-IONP-03:SETCAL CA")
    field(LNK3, "BL04I-VA-IONP-04:SETCAL CA")
    field(LNK4, "BL04I-VA-IONP-05:SETCAL CA")
    field(LNK5, "BL04I-VA-IONP-06:SETCAL CA")
    field(LNK6, "BL04I-VA-IONP-06:SETCAL CA")
    field(LNK7, "BL04I-VA-IONP-06:SETCAL CA")
    field(LNK8, "BL04I-VA-IONP-06:SETCAL CA")
}
################################################################################
# Start
#
record(bo, "BL04I-VA-GIONP-98:START")
{
    field(DESC, "HV on/off")
    field(FLNK, "BL04I-VA-GIONP-98:START1")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
record(bi,"BL04I-VA-GIONP-98:STARTING")
{
    field(DESC, "Starting Pumps")
    field(PINI, "YES")
    field(INP,  "0")
    field(ZNAM, "")
    field(ONAM, "Starting")
}
record(calc,"BL04I-VA-GIONP-98:START0")
{
    field(DESC, "START + 1")
    field(CALC, "A+1")
    field(INPA, "BL04I-VA-GIONP-98:START")
}
record(seq, "BL04I-VA-GIONP-98:START1")
{
    field(DESC, "Stop or Start Pumps")
    field(SELM, "Specified")
    field(SELL, "BL04I-VA-GIONP-98:START0 PP")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-GIONP-98:SEQSTOP PP")
    field(LNK2, "BL04I-VA-GIONP-98:SEQSTART PP")
}
record(seq, "BL04I-VA-GIONP-98:SEQSTOP")
{
    field(DESC, "Stop Pumps")
    field(SELM, "All")
    field(DOL1, "0")
    field(DOL2, "0")
    field(DOL3, "0")
    field(DOL4, "0")
    field(DOL5, "0")
    field(DOL6, "0")
    field(DOL7, "0")
    field(DOL8, "0")
    field(LNK1, "BL04I-VA-GIONP-01:START CA")
    field(LNK2, "BL04I-VA-IONP-03:START CA")
    field(LNK3, "BL04I-VA-IONP-04:START CA")
    field(LNK4, "BL04I-VA-IONP-05:START CA")
    field(LNK5, "BL04I-VA-IONP-06:START CA")
    field(LNK6, "BL04I-VA-IONP-06:START CA")
    field(LNK7, "BL04I-VA-IONP-06:START CA")
    field(LNK8, "BL04I-VA-IONP-06:START CA")
}
record(seq, "BL04I-VA-GIONP-98:SEQSTART")
{
    field(DESC, "Strart Pumps")
    field(SELM, "All")
    field(DOL1, "1")
    field(DOL2, "BL04I-VA-GIONP-98:START")
    field(DOL3, "BL04I-VA-GIONP-98:START")
    field(DOL4, "BL04I-VA-GIONP-98:START")
    field(DOL5, "BL04I-VA-GIONP-98:START")
    field(DOL6, "BL04I-VA-GIONP-98:START")
    field(DOL7, "BL04I-VA-GIONP-98:START")
    field(DOL8, "BL04I-VA-GIONP-98:START")
    field(DOL9, "BL04I-VA-GIONP-98:START")
    field(DOLA, "0")
    field(DLY1, "0")
    field(DLY2, "0")
    field(DLY3, "10")
    field(DLY4, "10")
    field(DLY5, "10")
    field(DLY6, "10")
    field(DLY7, "10")
    field(DLY8, "10")
    field(DLY9, "10")
    field(DLYA, "10")
    field(LNK1, "BL04I-VA-GIONP-98:STARTING PP")
    field(LNK2, "BL04I-VA-GIONP-01:START CA")
    field(LNK3, "BL04I-VA-IONP-03:START CA")
    field(LNK4, "BL04I-VA-IONP-04:START CA")
    field(LNK5, "BL04I-VA-IONP-05:START CA")
    field(LNK6, "BL04I-VA-IONP-06:START CA")
    field(LNK7, "BL04I-VA-IONP-06:START CA")
    field(LNK8, "BL04I-VA-IONP-06:START CA")
    field(LNK9, "BL04I-VA-IONP-06:START CA")
    field(LNKA, "BL04I-VA-GIONP-98:STARTING PP")
}
################################################################################
# Setpoints
#
record(sel, "BL04I-VA-GIONP-98:SP1") {
    field(DESC, "Setpoint 1")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-GIONP-01:SP1")
    field(INPB, "BL04I-VA-IONP-03:SP1")
    field(INPC, "BL04I-VA-IONP-04:SP1")
    field(INPD, "BL04I-VA-IONP-05:SP1")
    field(INPE, "BL04I-VA-IONP-06:SP1")
    field(INPF, "BL04I-VA-IONP-06:SP1")
    field(INPG, "BL04I-VA-IONP-06:SP1")
    field(INPH, "BL04I-VA-IONP-06:SP1")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
}
record(ao, "BL04I-VA-GIONP-98:SETSP1") {
    field(DESC, "Setpoint On")
    field(FLNK, "BL04I-VA-GIONP-98:SEQSP1")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
}
record(seq, "BL04I-VA-GIONP-98:SEQSP1")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIONP-98:SETSP1")
    field(DOL2, "BL04I-VA-GIONP-98:SETSP1")
    field(DOL3, "BL04I-VA-GIONP-98:SETSP1")
    field(DOL4, "BL04I-VA-GIONP-98:SETSP1")
    field(DOL5, "BL04I-VA-GIONP-98:SETSP1")
    field(DOL6, "BL04I-VA-GIONP-98:SETSP1")
    field(DOL7, "BL04I-VA-GIONP-98:SETSP1")
    field(DOL8, "BL04I-VA-GIONP-98:SETSP1")
    field(LNK1, "BL04I-VA-GIONP-01:SETSP1 CA")
    field(LNK2, "BL04I-VA-IONP-03:SETSP1 CA")
    field(LNK3, "BL04I-VA-IONP-04:SETSP1 CA")
    field(LNK4, "BL04I-VA-IONP-05:SETSP1 CA")
    field(LNK5, "BL04I-VA-IONP-06:SETSP1 CA")
    field(LNK6, "BL04I-VA-IONP-06:SETSP1 CA")
    field(LNK7, "BL04I-VA-IONP-06:SETSP1 CA")
    field(LNK8, "BL04I-VA-IONP-06:SETSP1 CA")
}
record(sel, "BL04I-VA-GIONP-98:SP2") {
    field(DESC, "Setpoint Off")
    field(SELM, "Low Signal")
    field(INPA, "BL04I-VA-GIONP-01:SP2")
    field(INPB, "BL04I-VA-IONP-03:SP2")
    field(INPC, "BL04I-VA-IONP-04:SP2")
    field(INPD, "BL04I-VA-IONP-05:SP2")
    field(INPE, "BL04I-VA-IONP-06:SP2")
    field(INPF, "BL04I-VA-IONP-06:SP2")
    field(INPG, "BL04I-VA-IONP-06:SP2")
    field(INPH, "BL04I-VA-IONP-06:SP2")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
}
record(ao, "BL04I-VA-GIONP-98:SETSP2") {
    field(DESC, "Setpoint 2")
    field(FLNK, "BL04I-VA-GIONP-98:SEQSP2")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
}
record(seq, "BL04I-VA-GIONP-98:SEQSP2")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIONP-98:SETSP2")
    field(DOL2, "BL04I-VA-GIONP-98:SETSP2")
    field(DOL3, "BL04I-VA-GIONP-98:SETSP2")
    field(DOL4, "BL04I-VA-GIONP-98:SETSP2")
    field(DOL5, "BL04I-VA-GIONP-98:SETSP2")
    field(DOL6, "BL04I-VA-GIONP-98:SETSP2")
    field(DOL7, "BL04I-VA-GIONP-98:SETSP2")
    field(DOL8, "BL04I-VA-GIONP-98:SETSP2")
    field(LNK1, "BL04I-VA-GIONP-01:SETSP2 CA")
    field(LNK2, "BL04I-VA-IONP-03:SETSP2 CA")
    field(LNK3, "BL04I-VA-IONP-04:SETSP2 CA")
    field(LNK4, "BL04I-VA-IONP-05:SETSP2 CA")
    field(LNK5, "BL04I-VA-IONP-06:SETSP2 CA")
    field(LNK6, "BL04I-VA-IONP-06:SETSP2 CA")
    field(LNK7, "BL04I-VA-IONP-06:SETSP2 CA")
    field(LNK8, "BL04I-VA-IONP-06:SETSP2 CA")
}
################################################################################


# digitelMpcIonpGroup.db
#% macro, __doc__, Template database for a group of up to 8 digitel MPC Ion Pumps
# Pete Owens - 3/5/05
#
# substitutions:
# % macro, device, device name
# % macro, delay, delay between starting pumps
# % macro, ionp1, Ion pump 1 device name
# % macro, ionp2, Ion pump 2 device name
# % macro, ionp3, Ion pump 3 device name
# % macro, ionp4, Ion pump 4 device name
# % macro, ionp5, Ion pump 5 device name
# % macro, ionp6, Ion pump 6 device name
# % macro, ionp7, Ion pump 7 device name
# % macro, ionp8, Ion pump 8 device name

################################################################################
# Maximum pump current
#
record(sel, "BL04I-VA-GIONP-99:I") 
{
    field(DESC, "Pump Current")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-07:I")
    field(INPB, "BL04I-VA-IONP-07:I")
    field(INPC, "BL04I-VA-IONP-07:I")
    field(INPD, "BL04I-VA-IONP-07:I")
    field(INPE, "BL04I-VA-IONP-07:I")
    field(INPF, "BL04I-VA-IONP-07:I")
    field(INPG, "BL04I-VA-IONP-07:I")
    field(INPH, "BL04I-VA-IONP-07:I")
    field(SCAN, "1 second")
    field(EGU,  "A")
    field(LOPR, "0.0")
    field(HOPR, "10.0")
    field(PREC, "1")
}
################################################################################
# Maximum pump pressure
#
record(sel, "BL04I-VA-GIONP-99:P")
{
    field(DESC, "Pressure")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-07:P")
    field(INPB, "BL04I-VA-IONP-07:P")
    field(INPC, "BL04I-VA-IONP-07:P")
    field(INPD, "BL04I-VA-IONP-07:P")
    field(INPE, "BL04I-VA-IONP-07:P")
    field(INPF, "BL04I-VA-IONP-07:P")
    field(INPG, "BL04I-VA-IONP-07:P")
    field(INPH, "BL04I-VA-IONP-07:P")
    field(EGU,  "mbar")
    field(HOPR, "1000")
    field(LOPR, "1.0E-12")
    field(PREC, "11")
}
record(calc, "BL04I-VA-GIONP-99:PLOG")
{
    field(DESC, "log Pressure")
    field(SCAN, "1 second")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-GIONP-99:P PP")
    field(HOPR, "3")
    field(LOPR, "-12")
}
################################################################################
# Maximum pump voltage
#
record(sel, "BL04I-VA-GIONP-99:V") 
{
    field(DESC, "Pump Voltage")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-07:V")
    field(INPB, "BL04I-VA-IONP-07:V")
    field(INPC, "BL04I-VA-IONP-07:V")
    field(INPD, "BL04I-VA-IONP-07:V")
    field(INPE, "BL04I-VA-IONP-07:V")
    field(INPF, "BL04I-VA-IONP-07:V")
    field(INPG, "BL04I-VA-IONP-07:V")
    field(INPH, "BL04I-VA-IONP-07:V")
    field(SCAN, "1 second")
    field(EGU,  "V")
    field(LOPR, "0")
    field(HOPR, "10")
}
################################################################################
# Maximum HV Strapping
#
record(sel, "BL04I-VA-GIONP-99:HV") 
{
    field(DESC, "HV Strapping")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-07:HV")
    field(INPB, "BL04I-VA-IONP-07:HV")
    field(INPC, "BL04I-VA-IONP-07:HV")
    field(INPD, "BL04I-VA-IONP-07:HV")
    field(INPE, "BL04I-VA-IONP-07:HV")
    field(INPF, "BL04I-VA-IONP-07:HV")
    field(INPG, "BL04I-VA-IONP-07:HV")
    field(INPH, "BL04I-VA-IONP-07:HV")
    field(SCAN, "10 second")
    field(EGU,  "V")
    field(LOPR, "5600")
    field(HOPR, "7000")
}
################################################################################
# Worst supply status
#
record(mbbi, "BL04I-VA-GIONP-99:STA")
{
    field(DESC, "Supply Status")
    field(INP,  "BL04I-VA-GIONP-99:CALSTA PP MS")
    field(SCAN, "1 second")
    field(ZRST, "Unknown")
    field(ONST, "Waiting")
    field(TWST, "Standby")
    field(THST, "Safe-Conn")
    field(FRST, "Running")
    field(FVST, "Cool Down")
    field(SXST, "Pump Error")
    field(SVST, "HV Switched Off")
    field(EIST, "Interlock")
    field(NIST, "Shut Down")
    field(TEST, "Calibration")
    field(ELST, "Invalid")
    field(TVST, "Invalid")
    field(TTST, "Invalid")
    field(FTST, "Invalid")
    field(FFST, "Invalid")
}
record(calc, "BL04I-VA-GIONP-99:CALSTA")
{
    field(DESC, "Calculate Status")
    field(CALC, "A>C?A:(B<C?B:C)")
    field(INPA, "BL04I-VA-GIONP-99:MAXSTA PP MS")
    field(INPB, "BL04I-VA-GIONP-99:MINSTA PP MS")
    field(INPC, "4")
}
record(sel, "BL04I-VA-GIONP-99:MAXSTA") 
{
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-07:STA MS")
    field(INPB, "BL04I-VA-IONP-07:STA MS")
    field(INPC, "BL04I-VA-IONP-07:STA MS")
    field(INPD, "BL04I-VA-IONP-07:STA MS")
    field(INPE, "BL04I-VA-IONP-07:STA MS")
    field(INPF, "BL04I-VA-IONP-07:STA MS")
    field(INPG, "BL04I-VA-IONP-07:STA MS")
    field(INPH, "BL04I-VA-IONP-07:STA MS")
}
record(sel, "BL04I-VA-GIONP-99:MINSTA") 
{
    field(SELM, "Low Signal")
    field(INPA, "BL04I-VA-IONP-07:STA MS")
    field(INPB, "BL04I-VA-IONP-07:STA MS")
    field(INPC, "BL04I-VA-IONP-07:STA MS")
    field(INPD, "BL04I-VA-IONP-07:STA MS")
    field(INPE, "BL04I-VA-IONP-07:STA MS")
    field(INPF, "BL04I-VA-IONP-07:STA MS")
    field(INPG, "BL04I-VA-IONP-07:STA MS")
    field(INPH, "BL04I-VA-IONP-07:STA MS")
}
record(mbbi, "BL04I-VA-GIONP-99:ERR")
{
    field(DESC, "Error Code")
    field(INP,  "BL04I-VA-GIONP-99:SELERR PP")
    field(SCAN, "1 second")
    field(ZRST, "OK")
    field(ONST, "Too many cycles")
    field(TWST, "High pressure")
    field(THST, "High current")
    field(FRST, "High pressure")
    field(FVST, "Pump power")
    field(SXST, "High current")
    field(SVST, "Short circuit")
    field(EIST, "Malfunction")
    field(NIST, "Low voltage")
    field(TEST, "Arc detect")
    field(ELST, "11")
    field(TVST, "12")
    field(TTST, "13")
    field(FTST, "14")
    field(FFST, "15")
    field(UNSV, "MINOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "MINOR")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MINOR")
    field(FVSV, "MINOR")
    field(SXSV, "MINOR")
    field(SVSV, "MINOR")
    field(EISV, "MINOR")
    field(NISV, "MINOR")
    field(TESV, "MINOR")
    field(ELSV, "MINOR")
    field(TVSV, "MINOR")
    field(TTSV, "MINOR")
    field(FTSV, "MINOR")
    field(FFSV, "MINOR")
}
record(sel, "BL04I-VA-GIONP-99:SELERR") 
{
    field(DESC, "Select Error")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-07:ERR")
    field(INPB, "BL04I-VA-IONP-07:ERR")
    field(INPC, "BL04I-VA-IONP-07:ERR")
    field(INPD, "BL04I-VA-IONP-07:ERR")
    field(INPE, "BL04I-VA-IONP-07:ERR")
    field(INPF, "BL04I-VA-IONP-07:ERR")
    field(INPG, "BL04I-VA-IONP-07:ERR")
    field(INPH, "BL04I-VA-IONP-07:ERR")
}
################################################################################
# Pump size
#
record(sel, "BL04I-VA-GIONP-99:SIZE")
{
    field(DESC, "Pump Size")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-07:SIZE")
    field(INPB, "BL04I-VA-IONP-07:SIZE")
    field(INPC, "BL04I-VA-IONP-07:SIZE")
    field(INPD, "BL04I-VA-IONP-07:SIZE")
    field(INPE, "BL04I-VA-IONP-07:SIZE")
    field(INPF, "BL04I-VA-IONP-07:SIZE")
    field(INPG, "BL04I-VA-IONP-07:SIZE")
    field(INPH, "BL04I-VA-IONP-07:SIZE")
    field(EGU,  "l/s")
    field(LOPR, "0")
    field(HOPR, "1200")
}
record(ao, "BL04I-VA-GIONP-99:SETSIZE")
{
    field(DESC, "Pump Size")
    field(DOL,  "BL04I-VA-GIONP-99:SIZE PP")
    field(OMSL, "closed_loop")
    field(SCAN, "1 second")
    field(EGU,  "l/s")
    field(DRVL, "0")
    field(DRVH, "1200")
    field(LOPR, "0")
    field(HOPR, "1200")
    field(PREC, "0")
}
################################################################################
# Calibration factor
#
record(sel, "BL04I-VA-GIONP-99:CAL") {
    field(DESC, "Calibration Factor")
    field(SELM, "Median Signal")
    field(INPA, "BL04I-VA-IONP-07:CAL")
    field(INPB, "BL04I-VA-IONP-07:CAL")
    field(INPC, "BL04I-VA-IONP-07:CAL")
    field(INPD, "BL04I-VA-IONP-07:CAL")
    field(INPE, "BL04I-VA-IONP-07:CAL")
    field(INPF, "BL04I-VA-IONP-07:CAL")
    field(INPG, "BL04I-VA-IONP-07:CAL")
    field(INPH, "BL04I-VA-IONP-07:CAL")
    field(SCAN, "1 second")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
record(ao, "BL04I-VA-GIONP-99:SETCAL") {
    field(DESC, "Calibration Factor")
    field(FLNK, "BL04I-VA-GIONP-99:SEQCAL")
    field(DRVL, "0.0")
    field(DRVH, "9.99")
    field(LOPR, "0.0")
    field(HOPR, "9.99")
    field(PREC, "2")
}
record(seq, "BL04I-VA-GIONP-99:SEQCAL")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIONP-99:SETCAL")
    field(DOL2, "BL04I-VA-GIONP-99:SETCAL")
    field(DOL3, "BL04I-VA-GIONP-99:SETCAL")
    field(DOL4, "BL04I-VA-GIONP-99:SETCAL")
    field(DOL5, "BL04I-VA-GIONP-99:SETCAL")
    field(DOL6, "BL04I-VA-GIONP-99:SETCAL")
    field(DOL7, "BL04I-VA-GIONP-99:SETCAL")
    field(DOL8, "BL04I-VA-GIONP-99:SETCAL")
    field(LNK1, "BL04I-VA-IONP-07:SETCAL CA")
    field(LNK2, "BL04I-VA-IONP-07:SETCAL CA")
    field(LNK3, "BL04I-VA-IONP-07:SETCAL CA")
    field(LNK4, "BL04I-VA-IONP-07:SETCAL CA")
    field(LNK5, "BL04I-VA-IONP-07:SETCAL CA")
    field(LNK6, "BL04I-VA-IONP-07:SETCAL CA")
    field(LNK7, "BL04I-VA-IONP-07:SETCAL CA")
    field(LNK8, "BL04I-VA-IONP-07:SETCAL CA")
}
################################################################################
# Start
#
record(bo, "BL04I-VA-GIONP-99:START")
{
    field(DESC, "HV on/off")
    field(FLNK, "BL04I-VA-GIONP-99:START1")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
record(bi,"BL04I-VA-GIONP-99:STARTING")
{
    field(DESC, "Starting Pumps")
    field(PINI, "YES")
    field(INP,  "0")
    field(ZNAM, "")
    field(ONAM, "Starting")
}
record(calc,"BL04I-VA-GIONP-99:START0")
{
    field(DESC, "START + 1")
    field(CALC, "A+1")
    field(INPA, "BL04I-VA-GIONP-99:START")
}
record(seq, "BL04I-VA-GIONP-99:START1")
{
    field(DESC, "Stop or Start Pumps")
    field(SELM, "Specified")
    field(SELL, "BL04I-VA-GIONP-99:START0 PP")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-GIONP-99:SEQSTOP PP")
    field(LNK2, "BL04I-VA-GIONP-99:SEQSTART PP")
}
record(seq, "BL04I-VA-GIONP-99:SEQSTOP")
{
    field(DESC, "Stop Pumps")
    field(SELM, "All")
    field(DOL1, "0")
    field(DOL2, "0")
    field(DOL3, "0")
    field(DOL4, "0")
    field(DOL5, "0")
    field(DOL6, "0")
    field(DOL7, "0")
    field(DOL8, "0")
    field(LNK1, "BL04I-VA-IONP-07:START CA")
    field(LNK2, "BL04I-VA-IONP-07:START CA")
    field(LNK3, "BL04I-VA-IONP-07:START CA")
    field(LNK4, "BL04I-VA-IONP-07:START CA")
    field(LNK5, "BL04I-VA-IONP-07:START CA")
    field(LNK6, "BL04I-VA-IONP-07:START CA")
    field(LNK7, "BL04I-VA-IONP-07:START CA")
    field(LNK8, "BL04I-VA-IONP-07:START CA")
}
record(seq, "BL04I-VA-GIONP-99:SEQSTART")
{
    field(DESC, "Strart Pumps")
    field(SELM, "All")
    field(DOL1, "1")
    field(DOL2, "BL04I-VA-GIONP-99:START")
    field(DOL3, "BL04I-VA-GIONP-99:START")
    field(DOL4, "BL04I-VA-GIONP-99:START")
    field(DOL5, "BL04I-VA-GIONP-99:START")
    field(DOL6, "BL04I-VA-GIONP-99:START")
    field(DOL7, "BL04I-VA-GIONP-99:START")
    field(DOL8, "BL04I-VA-GIONP-99:START")
    field(DOL9, "BL04I-VA-GIONP-99:START")
    field(DOLA, "0")
    field(DLY1, "0")
    field(DLY2, "0")
    field(DLY3, "10")
    field(DLY4, "10")
    field(DLY5, "10")
    field(DLY6, "10")
    field(DLY7, "10")
    field(DLY8, "10")
    field(DLY9, "10")
    field(DLYA, "10")
    field(LNK1, "BL04I-VA-GIONP-99:STARTING PP")
    field(LNK2, "BL04I-VA-IONP-07:START CA")
    field(LNK3, "BL04I-VA-IONP-07:START CA")
    field(LNK4, "BL04I-VA-IONP-07:START CA")
    field(LNK5, "BL04I-VA-IONP-07:START CA")
    field(LNK6, "BL04I-VA-IONP-07:START CA")
    field(LNK7, "BL04I-VA-IONP-07:START CA")
    field(LNK8, "BL04I-VA-IONP-07:START CA")
    field(LNK9, "BL04I-VA-IONP-07:START CA")
    field(LNKA, "BL04I-VA-GIONP-99:STARTING PP")
}
################################################################################
# Setpoints
#
record(sel, "BL04I-VA-GIONP-99:SP1") {
    field(DESC, "Setpoint 1")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-IONP-07:SP1")
    field(INPB, "BL04I-VA-IONP-07:SP1")
    field(INPC, "BL04I-VA-IONP-07:SP1")
    field(INPD, "BL04I-VA-IONP-07:SP1")
    field(INPE, "BL04I-VA-IONP-07:SP1")
    field(INPF, "BL04I-VA-IONP-07:SP1")
    field(INPG, "BL04I-VA-IONP-07:SP1")
    field(INPH, "BL04I-VA-IONP-07:SP1")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
}
record(ao, "BL04I-VA-GIONP-99:SETSP1") {
    field(DESC, "Setpoint On")
    field(FLNK, "BL04I-VA-GIONP-99:SEQSP1")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
}
record(seq, "BL04I-VA-GIONP-99:SEQSP1")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIONP-99:SETSP1")
    field(DOL2, "BL04I-VA-GIONP-99:SETSP1")
    field(DOL3, "BL04I-VA-GIONP-99:SETSP1")
    field(DOL4, "BL04I-VA-GIONP-99:SETSP1")
    field(DOL5, "BL04I-VA-GIONP-99:SETSP1")
    field(DOL6, "BL04I-VA-GIONP-99:SETSP1")
    field(DOL7, "BL04I-VA-GIONP-99:SETSP1")
    field(DOL8, "BL04I-VA-GIONP-99:SETSP1")
    field(LNK1, "BL04I-VA-IONP-07:SETSP1 CA")
    field(LNK2, "BL04I-VA-IONP-07:SETSP1 CA")
    field(LNK3, "BL04I-VA-IONP-07:SETSP1 CA")
    field(LNK4, "BL04I-VA-IONP-07:SETSP1 CA")
    field(LNK5, "BL04I-VA-IONP-07:SETSP1 CA")
    field(LNK6, "BL04I-VA-IONP-07:SETSP1 CA")
    field(LNK7, "BL04I-VA-IONP-07:SETSP1 CA")
    field(LNK8, "BL04I-VA-IONP-07:SETSP1 CA")
}
record(sel, "BL04I-VA-GIONP-99:SP2") {
    field(DESC, "Setpoint Off")
    field(SELM, "Low Signal")
    field(INPA, "BL04I-VA-IONP-07:SP2")
    field(INPB, "BL04I-VA-IONP-07:SP2")
    field(INPC, "BL04I-VA-IONP-07:SP2")
    field(INPD, "BL04I-VA-IONP-07:SP2")
    field(INPE, "BL04I-VA-IONP-07:SP2")
    field(INPF, "BL04I-VA-IONP-07:SP2")
    field(INPG, "BL04I-VA-IONP-07:SP2")
    field(INPH, "BL04I-VA-IONP-07:SP2")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
}
record(ao, "BL04I-VA-GIONP-99:SETSP2") {
    field(DESC, "Setpoint 2")
    field(FLNK, "BL04I-VA-GIONP-99:SEQSP2")
    field(EGU,  "mbar")
    field(DRVL, "1.0E-10")
    field(DRVH, "1.0E-4")
    field(LOPR, "0.0")
    field(HOPR, "1000.0")
    field(PREC, "1")
}
record(seq, "BL04I-VA-GIONP-99:SEQSP2")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GIONP-99:SETSP2")
    field(DOL2, "BL04I-VA-GIONP-99:SETSP2")
    field(DOL3, "BL04I-VA-GIONP-99:SETSP2")
    field(DOL4, "BL04I-VA-GIONP-99:SETSP2")
    field(DOL5, "BL04I-VA-GIONP-99:SETSP2")
    field(DOL6, "BL04I-VA-GIONP-99:SETSP2")
    field(DOL7, "BL04I-VA-GIONP-99:SETSP2")
    field(DOL8, "BL04I-VA-GIONP-99:SETSP2")
    field(LNK1, "BL04I-VA-IONP-07:SETSP2 CA")
    field(LNK2, "BL04I-VA-IONP-07:SETSP2 CA")
    field(LNK3, "BL04I-VA-IONP-07:SETSP2 CA")
    field(LNK4, "BL04I-VA-IONP-07:SETSP2 CA")
    field(LNK5, "BL04I-VA-IONP-07:SETSP2 CA")
    field(LNK6, "BL04I-VA-IONP-07:SETSP2 CA")
    field(LNK7, "BL04I-VA-IONP-07:SETSP2 CA")
    field(LNK8, "BL04I-VA-IONP-07:SETSP2 CA")
}
################################################################################


#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBD("../../dbd/vacuumValve.dbd")
#! DBDEND
#% macro, __doc__, Template that reads common blocks of memory into records so 
# that it can be used in the valve templates
#% macro, device, Device prefix
#% macro, port, Asyn port, e.g. ty_40_0


################################################################################
# Read 120 words of memory from the valve control crate and store it into 12 10
# word blocks. These can then be read by other templates.

# Read first 30 words of DM memory from the valve control crate
record(waveform, "BL04I-VA-VLVCC-01:READBACK1") {
  field(DESC, "Read memory 0000-0029")
  field(SCAN, "1 second")
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto readDM30(0000) ty_40_0")
  field(NELM, "30")
  field(FTVL, "USHORT")
  field(FLNK, "BL04I-VA-VLVCC-01:BLOCK00")
  field(PRIO, "MEDIUM")
}

# Read second 30 words of DM memory from the valve control crate
record(waveform, "BL04I-VA-VLVCC-01:READBACK2") {
  field(DESC, "Read memory 0030-0059")
  field(SCAN, "1 second")
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto readDM30(0030) ty_40_0")
  field(NELM, "30")
  field(FTVL, "USHORT")
  field(FLNK, "BL04I-VA-VLVCC-01:BLOCK03")
  field(PRIO, "MEDIUM")
}

# Read third 30 words of DM memory from the valve control crate
record(waveform, "BL04I-VA-VLVCC-01:READBACK3") {
  field(DESC, "Read memory 0060-0089")
  field(SCAN, "1 second")
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto readDM30(0060) ty_40_0")
  field(NELM, "30")
  field(FTVL, "USHORT")
  field(FLNK, "BL04I-VA-VLVCC-01:BLOCK06")
  field(PRIO, "MEDIUM")
}

# Read fourth 30 words of DM memory from the valve control crate
record(waveform, "BL04I-VA-VLVCC-01:READBACK4") {
  field(DESC, "Read memory 0090-0119")
  field(SCAN, "1 second")
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto readDM30(0090) ty_40_0")
  field(NELM, "30")
  field(FTVL, "USHORT")
  field(FLNK, "BL04I-VA-VLVCC-01:BLOCK09")
  field(PRIO, "MEDIUM")
}

# Read memory 0101
record(subArray, "BL04I-VA-VLVCC-01:INPADB") {
  field(DESC, "Current air debounce")
  field(FLNK, "BL04I-VA-VLVCC-01:ADB")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK10.VAL CP MS")
  field(MALM, "10")
  field(INDX, "1")
}

# Memory 0000-0009
record(subArray, "BL04I-VA-VLVCC-01:BLOCK00") {
  field(DESC, "Block 00 parameters")
  field(FLNK, "BL04I-VA-VLVCC-01:BLOCK01")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:READBACK1 MS")
  field(MALM, "30")
  field(NELM, "10")
  field(INDX, "0")
}

# Memory 0010-0019
# Normally valve 1
record(subArray, "BL04I-VA-VLVCC-01:BLOCK01") {
  field(DESC, "Block 01 parameters")
  field(FLNK, "BL04I-VA-VLVCC-01:BLOCK02")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:READBACK1 MS")
  field(MALM, "30")
  field(NELM, "10")
  field(INDX, "10")
}

# Memory 0020-0029
# Normally valve 2
record(subArray, "BL04I-VA-VLVCC-01:BLOCK02") {
  field(DESC, "Block 02 parameters")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:READBACK1 MS")
  field(MALM, "30")
  field(NELM, "10")
  field(INDX, "20")
}

# Memory 0030-0039
# Normally valve 3
record(subArray, "BL04I-VA-VLVCC-01:BLOCK03") {
  field(DESC, "Block 03 parameters")
  field(FLNK, "BL04I-VA-VLVCC-01:BLOCK04")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:READBACK2 MS")
  field(MALM, "30")
  field(NELM, "10")
  field(INDX, "0")
}

# Memory 0040-0049
# Normally valve 4
record(subArray, "BL04I-VA-VLVCC-01:BLOCK04") {
  field(DESC, "Block 04 parameters")
  field(FLNK, "BL04I-VA-VLVCC-01:BLOCK05")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:READBACK2 MS")
  field(MALM, "30")
  field(NELM, "10")
  field(INDX, "10")
}

# Memory 0050-0059
# Normally valve 5
record(subArray, "BL04I-VA-VLVCC-01:BLOCK05") {
  field(DESC, "Block 05 parameters")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:READBACK2 MS")
  field(MALM, "30")
  field(NELM, "10")
  field(INDX, "20")
}

# Memory 0060-0069
# Normally valve 6
record(subArray, "BL04I-VA-VLVCC-01:BLOCK06") {
  field(DESC, "Block 06 parameters")
  field(FLNK, "BL04I-VA-VLVCC-01:BLOCK07")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:READBACK3 MS")
  field(MALM, "30")
  field(NELM, "10")
  field(INDX, "0")
}

# Memory 0070-0079
record(subArray, "BL04I-VA-VLVCC-01:BLOCK07") {
  field(DESC, "Block 07 parameters")
  field(FLNK, "BL04I-VA-VLVCC-01:BLOCK08")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:READBACK3 MS")
  field(MALM, "30")
  field(NELM, "10")
  field(INDX, "10")
}

# Memory 0080-0089
record(subArray, "BL04I-VA-VLVCC-01:BLOCK08") {
  field(DESC, "Block 08 parameters")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:READBACK3 MS")
  field(MALM, "30")
  field(NELM, "10")
  field(INDX, "20")
}

# Memory 0090-0099
record(subArray, "BL04I-VA-VLVCC-01:BLOCK09") {
  field(DESC, "Block 09 parameters")
  field(FLNK, "BL04I-VA-VLVCC-01:BLOCK10")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:READBACK4 MS")
  field(MALM, "30")
  field(NELM, "10")
  field(INDX, "0")
}

# Memory 0100-0109
record(subArray, "BL04I-VA-VLVCC-01:BLOCK10") {
  field(DESC, "Block 10 parameters")
  field(FLNK, "BL04I-VA-VLVCC-01:BLOCK11")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:READBACK4 MS")
  field(MALM, "30")
  field(NELM, "10")
  field(INDX, "10")
}

# Memory 0110-0119
record(subArray, "BL04I-VA-VLVCC-01:BLOCK11") {
  field(DESC, "Block 11 parameters")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:READBACK4 MS")
  field(MALM, "30")
  field(NELM, "10")
  field(INDX, "20")
}

# Read memory 0001 (Software version)
record(subArray, "BL04I-VA-VLVCC-01:INPSOFT") {
  field(DESC, "Software version")
  field(FLNK, "BL04I-VA-VLVCC-01:CALSRVC")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK00.VAL CP MS")
  field(MALM, "10")
  field(INDX, "1")
}


#
# HEX 43xx OR 6301 => SR Valve Controller
#
record(calc, "BL04I-VA-VLVCC-01:CALSRVC") {
  field(CALC, "(((A>>8)=67)||(A=25345))?1:0")
  field(INPA, "BL04I-VA-VLVCC-01:INPSOFT.VAL MS")
  field(FLNK, "BL04I-VA-VLVCC-01:SRVC")
}
# SR Valve Controller
# % archiver 10 Monitor
# % controldesk SR Valve smon
record(bi, "BL04I-VA-VLVCC-01:SRVC") {
  field(DESC, "SR Valve Controller")
  field(INP, "BL04I-VA-VLVCC-01:CALSRVC MS")
  field(PHAS, "1")
  field(ZNAM, "No")
  field(ONAM, "Yes")
}

################################################################################
# Air Pressure De-bounce Time
#
#% controldesk Air Pressure De-bounce Time setpoint
#
record(ao, "BL04I-VA-VLVCC-01:SETADB") {
  field(DESC, "De-bounce Time")
  field(EGU, "s")
  field(PREC, "1")
  field(DOL, "10.0")
  field(PINI, "YES")
  field(OUT, "BL04I-VA-VLVCC-01:CALADB.A PP")
}

record(calcout, "BL04I-VA-VLVCC-01:CALADB") {
  field(OUT, "BL04I-VA-VLVCC-01:OUTADB PP")
  field(CALC, "A*10.0")
}

record(ao, "BL04I-VA-VLVCC-01:OUTADB") {
  field(DTYP, "stream")
  field(OUT, "@Hostlink.proto write(0101) ty_40_0")
  field(DESC, "Output ADB field")
  field(PRIO, "HIGH")
}

# % archiver 10 Monitor
# % controldesk Air Pressure De-bounce Time readback
record(calc, "BL04I-VA-VLVCC-01:ADB") {
  field(DESC, "De-bounce Time")
  field(CALC, "A/10.0")
  field(INPA, "BL04I-VA-VLVCC-01:INPADB.VAL MS")
  field(EGU, "s")
  field(PREC, "1")
}

################################################################################
# Air Pressure Health Status
#
# Read memory 0003 (Raw air pressure health bit pattern. Bit 0 => Valve 1, Bit 1 => Valve 2, etc...)
record(subArray, "BL04I-VA-VLVCC-01:INPRAWAIR") 
{
  field(DESC, "Raw air status all valves")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK00.VAL CP MS")
  field(MALM, "10")
  field(NELM, "1")
  field(INDX, "3")
}

record(mbbiDirect, "BL04I-VA-VLVCC-01:RAWAIRALL") 
{
  field(DESC, "Raw air pressure health")
  field(SCAN, "1 second")
  field(INP,  "BL04I-VA-VLVCC-01:INPRAWAIR PP MS")
  field(FLNK, "BL04I-VA-VLVCC-01:RAWAIRV01")
}

record(bi, "BL04I-VA-VLVCC-01:RAWAIRV01") 
{
  field(DESC, "Raw air status for valve")
  field(INP, "BL04I-VA-VLVCC-01:RAWAIRALL.B0 MS")
  field(SCAN, "Passive")
  field(ZNAM, "Low")
  field(ONAM, "Good")
  field(FLNK, "BL04I-VA-VLVCC-01:RAWAIRV02")
}
record(bi, "BL04I-VA-VLVCC-01:RAWAIRV02") 
{
  field(DESC, "Raw air status for valve")
  field(INP, "BL04I-VA-VLVCC-01:RAWAIRALL.B1 MS")
  field(SCAN, "Passive")
  field(ZNAM, "Low")
  field(ONAM, "Good")
  field(FLNK, "BL04I-VA-VLVCC-01:RAWAIRV03")
}
record(bi, "BL04I-VA-VLVCC-01:RAWAIRV03") 
{
  field(DESC, "Raw air status for valve")
  field(INP, "BL04I-VA-VLVCC-01:RAWAIRALL.B2 MS")
  field(SCAN, "Passive")
  field(ZNAM, "Low")
  field(ONAM, "Good")
  field(FLNK, "BL04I-VA-VLVCC-01:RAWAIRV04")
}
record(bi, "BL04I-VA-VLVCC-01:RAWAIRV04") 
{
  field(DESC, "Raw air status for valve")
  field(INP, "BL04I-VA-VLVCC-01:RAWAIRALL.B3 MS")
  field(SCAN, "Passive")
  field(ZNAM, "Low")
  field(ONAM, "Good")
  field(FLNK, "BL04I-VA-VLVCC-01:RAWAIRV05")
}
record(bi, "BL04I-VA-VLVCC-01:RAWAIRV05") 
{
  field(DESC, "Raw air status for valve")
  field(INP, "BL04I-VA-VLVCC-01:RAWAIRALL.B4 MS")
  field(SCAN, "Passive")
  field(ZNAM, "Low")
  field(ONAM, "Good")
  field(FLNK, "BL04I-VA-VLVCC-01:RAWAIRV06")
}
record(bi, "BL04I-VA-VLVCC-01:RAWAIRV06") 
{
  field(DESC, "Raw air status for valve")
  field(INP, "BL04I-VA-VLVCC-01:RAWAIRALL.B5 MS")
  field(SCAN, "Passive")
  field(ZNAM, "Low")
  field(ONAM, "Good")
  field(FLNK, "BL04I-VA-VLVCC-01:RAWAIRV07")
}
record(bi, "BL04I-VA-VLVCC-01:RAWAIRV07") 
{
  field(DESC, "Raw air status for valve")
  field(INP, "BL04I-VA-VLVCC-01:RAWAIRALL.B6 MS")
  field(SCAN, "Passive")
  field(ZNAM, "Low")
  field(ONAM, "Good")
  field(FLNK, "BL04I-VA-VLVCC-01:RAWAIRV08")
}
record(bi, "BL04I-VA-VLVCC-01:RAWAIRV08") 
{
  field(DESC, "Raw air status for valve")
  field(INP, "BL04I-VA-VLVCC-01:RAWAIRALL.B7 MS")
  field(SCAN, "Passive")
  field(ZNAM, "Low")
  field(ONAM, "Good")
}

#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBD("../../dbd/vacuumValve.dbd")
#! DBDEND


# vacuumValve.template
#% macro, __doc__, Template database for a vacuum valve
# Pete Owens - 26/4/04
# Ian Gillingham - 2009 on ...
# 
# substitutions:
#% macro, device, device name
#% macro, vlvcc, device name of valve control crate
#% macro, port, seral port number (from device manager table)
#% macro, valve, valve number (1-4 within PLC)
#% macro, allowpv, If specified, then only write an open command when this is non-zero. MUST have CP at the end of it
#% macro, whylocked, String to output to EDM synoptic as to precisely why the device is locked and by whom
#% macro, ilk0, Interlock description 0
#% macro, ilk1, Interlock description 1
#% macro, ilk2, Interlock description 2
#% macro, ilk3, Interlock description 3
#% macro, ilk4, Interlock description 4
#% macro, ilk5, Interlock description 5
#% macro, ilk6, Interlock description 6
#% macro, ilk7, Interlock description 7
#% macro, ilk8, Interlock description 8
#% macro, ilk9, Interlock description 9
#% macro, ilk10, Interlock description 10
#% macro, ilk11, Interlock description 11
#% macro, ilk12, Interlock description 12
#% macro, ilk13, Interlock description 13
#% macro, ilk14, Interlock description 14
#% macro, ilk15, Interlock description 15
#% macro, gilk0, Gauge interlock description 0
#% macro, gilk1, Gauge interlock description 1
#% macro, gilk2, Gauge interlock description 2
#% macro, gilk3, Gauge interlock description 3
#% macro, gilk4, Gauge interlock description 4
#% macro, gilk5, Gauge interlock description 5
#% macro, gilk6, Gauge interlock description 6
#% macro, gilk7, Gauge interlock description 7
#% macro, gilk8, Gauge interlock description 8
#% macro, gilk9, Gauge interlock description 9
#% macro, gilk10, Gauge interlock description 10
#% macro, gilk11, Gauge interlock description 11
#% macro, gilk12, Gauge interlock description 12
#% macro, gilk13, Gauge interlock description 13
#% macro, gilk14, Gauge interlock description 14
#% macro, gilk15, Gauge interlock description 15
#% macro, con_label0, Label string for control value 0 (Optional - defaults to Open)
#% macro, con_label1, Label string for control value 1 (Optional - defaults to Close)
#% macro, con_label2, Label string for control value 2 (Optional - defaults to Reset)
#% macro, sta_label0, Label string for status value 0 (Optional - defaults to Fault)
#% macro, sta_label1, Label string for status value 1 (Optional - defaults to Open)
#% macro, sta_label2, Label string for status value 2 (Optional - defaults to Opening)
#% macro, sta_label3, Label string for status value 3 (Optional - defaults to Closed)
#% macro, sta_label4, Label string for status value 4 (Optional - defaults to Closing)

#% macro, tclose_high, HIGH alarm level for TCLOSE record (Optional - defaults to 0)
#% macro, tclose_hihi, HIHI alarm level for TCLOSE record (Optional - defaults to 0)
#% macro, tclose_hsv,  HSV  HIGH severity level for TCLOSE record (Optional - defaults to NO_ALARM)
#% macro, tclose_hhsv, HHSV HIHI severity level for TCLOSE record (Optional - defaults to NO_ALARM)
#% macro, name, Object name and associated gui name

# ##############################################################################
# Control
# 
# % archiver 10 Monitor
# % controldesk Status scon
# % gda,interface,vacuumValve,vacuum,Valve,Valve and shutter controls
# % gda,subsystem,vacuumValve,valve,Set,Set valve state
## Use this PV to request the valve to open or close
# The request will be checked by BL04I-VA-VALVE-01:CALCCON
record(mbbo, "BL04I-VA-VALVE-01:CON") {
  field(DESC, "Control")
  field(ZRST, "Open")
  field(ONST, "Close")
  field(TWST, "Reset")
  field(VAL, "0")
  field(OUT, "BL04I-VA-VALVE-01:CALCCON.A PP")
}

## If this PV is non-zero then an open request will be allowed by 
# BL04I-VA-VALVE-01:CALCCON
record(bi, "BL04I-VA-VALVE-01:OPENALLOWED") 
{
  field(DESC, "Allow/inhibit valve opening")
  field(INP, "")
  field(VAL, "1")
  field(ONAM, "Yes")
  field(ZNAM, "No")    
}

record(stringout, "BL04I-VA-VALVE-01:WHYLOCKED") 
{
  field(DESC, "Reason why device is locked")
  field(VAL, "Open command not allowed")
}

## Pass all requests through to the PLC unless it is an open request and 
# BL04I-VA-VALVE-01:OPENALLOWED is zero
record(calcout, "BL04I-VA-VALVE-01:CALCCON") {
  field(INPB, "BL04I-VA-VALVE-01:OPENALLOWED")
  field(OUT, "BL04I-VA-VALVE-01:ACTUALCON PP")
  field(CALC, "(B=0&A=0)?0:1")
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "A")
}

## Send the request down to the PLC
record(mbbo, "BL04I-VA-VALVE-01:ACTUALCON") {
  field(DESC, "Control")
  field(DTYP, "stream")
  field(OUT, "@Hostlink.proto write(0010) ty_40_0")
  field(ZRST, "Open")
  field(ONST, "Close")
  field(TWST, "Reset")
  field(PRIO, "HIGH")
}

record(bi, "BL04I-VA-VALVE-01:OPENING") {
  field(DESC, "Opening Valves")
  field(PINI, "YES")
  field(INP, "0")
  field(ONAM, "Opening")
}

# % archiver 10 Monitor
record(mbbi, "BL04I-VA-VALVE-01:LASTCON") {
  field(DESC, "Control Readback")
  field(DTYP, "Soft Channel")
  field(ZRST, "Open")
  field(ONST, "Close")
  field(TWST, "Reset")
  field(INP, "BL04I-VA-VALVE-01:GETLASTCON.VAL MS")
}

# ###################################################################
# Interlock Status
# 
# % archiver 10 Monitor
# % controldesk Interlock Status smon
record(mbbi, "BL04I-VA-VALVE-01:ILKSTA") {
  field(DESC, "Interlock Status")
  field(DTYP, "Soft Channel")
  field(ZRST, "Failed")
  field(ONST, "Run Ilks OK")
  field(TWST, "OK")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
  field(INP, "BL04I-VA-VALVE-01:GETILKSTA.VAL MS")
}

# #########################################################################
# Status
# 
# % archiver 10 Monitor
# % controldesk Status smon
# % gui, VALVE1, sevr
record(mbbi, "BL04I-VA-VALVE-01:STA") {
  field(DESC, "Status")
  field(DTYP, "Soft Channel")
  field(ZRST, "Fault")
  field(ONST, "Open")
  field(TWST, "Opening")
  field(THST, "Closed")
  field(FRST, "Closing")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
  field(THSV, "NO_ALARM")
  field(FRSV, "NO_ALARM")
  field(INP, "BL04I-VA-VALVE-01:GETSTA MS")
}

# this tells the gui that this device is moving if STA is Opening or Closing
# % gui, VALVE1, status
record(calcout, "BL04I-VA-VALVE-01:MOVN") {
  field(DTYP, "Soft Channel")
  field(DESC, "Is valve moving")
  field(INPA, "BL04I-VA-VALVE-01:STA CP")
  field(CALC, "A=2|A=4")
}



# ############################################################################
# Number of Operations
# 
# % archiver 10 Monitor
# % controldesk Number of Operations readback
record(longin, "BL04I-VA-VALVE-01:OPS") {
  field(DESC, "Operations")
  field(DTYP, "Soft Channel")
  field(HOPR, "10000")
  field(LOPR, "0")
  field(HIHI, "10000")
  field(HIGH, "9000")
  field(LOW, "0")
  field(LOLO, "-1")
  field(HHSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
  field(LLSV, "MAJOR")
  field(INP, "BL04I-VA-VALVE-01:GETOPS.VAL MS")
}

# #########################################################################
# Mode
record(mbbiDirect, "BL04I-VA-VALVE-01:MODSTA") {
  field(DESC, "Mode")
  field(DTYP, "Raw Soft Channel")
  field(INP, "BL04I-VA-VALVE-01:GETMODSTA MS")
}

# Operational/Service Mode
#% archiver 10 Monitor
#% controldesk Mode smon
#
record(bi, "BL04I-VA-VALVE-01:MODE") {
  field(DESC, "Mode")
  field(INP, "BL04I-VA-VALVE-01:MODSTA.B0 CP MS")
  field(ZNAM, "Operational")
  field(ONAM, "Service")
}


# Raw Air Pressure Status bit pattern for given valve
#% archiver 10 Monitor
#% controldesk Raw Air Pressure Status smon
#
record(bi, "BL04I-VA-VALVE-01:RAWAIRSTA") 
{
  field(DESC, "Raw Air Pressure Status")
  field(INP, "BL04I-VA-VLVCC-01:RAWAIRV01 CP MS")
  field(ZNAM, "Low")
  field(ONAM, "Good")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
}

# SR Valve Controller
#% archiver 10 Monitor
#% controldesk SR Valve smon
#
record(bi, "BL04I-VA-VALVE-01:SRVC") {
  field(DESC, "SR Valve Controller")
  field(INP, "BL04I-VA-VLVCC-01:SRVC CP MS")
  field(SCAN, "Passive")
  field(ZNAM, "No")
  field(ONAM, "Yes")
}

record(longin, "BL04I-VA-VALVE-01:SOFTWARE") {
  field(DESC, "Software version")
  field(DTYP, "Soft Channel")
  field(INP, "BL04I-VA-VLVCC-01:INPSOFT CP MS")
}

# ######################################################################
# Close time trip
#
#% controldesk Close Timeout setpoint
#
record(longin, "BL04I-VA-VALVE-01:INPMINTCLS") {
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0107) ty_40_0")
}

#
#% archiver 10 Monitor
#% controldesk Minimum Close Time readback
#
record(calc, "BL04I-VA-VALVE-01:MINTCLS") {
  field(DESC, "Min Close Time")
  field(CALC, "A/10.0")
  field(INPA, "BL04I-VA-VALVE-01:INPMINTCLS PP MS")
  field(EGU, "s")
  field(PREC, "1")
  field(SCAN, "1 second")
  field(HOPR, "10")
  field(LOPR, "2")
  field(HIHI, "10")
  field(HHSV, "MAJOR")
}

record(longin, "BL04I-VA-VALVE-01:INPMAXTCLS") {
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0105) ty_40_0")
}

#
#% archiver 10 Monitor
#% controldesk Maximum Close Time readback
#
record(calc, "BL04I-VA-VALVE-01:MAXTCLS") {
  field(DESC, "Max Close Time")
  field(CALC, "A/10.0")
  field(INPA, "BL04I-VA-VALVE-01:INPMAXTCLS PP MS")
  field(EGU, "s")
  field(PREC, "1")
  field(SCAN, "1 second")
  field(HOPR, "10")
  field(LOPR, "2")
  field(HIHI, "10")
  field(HHSV, "MINOR")
}

record(longin, "BL04I-VA-VALVE-01:INPTCLOSE") 
{
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0104) ty_40_0")
}

#
#% archiver 10 Monitor
#% controldesk Current Close Time readback
#
record(calc, "BL04I-VA-VALVE-01:TCLOSE") 
{
  field(DESC, "Close Time")
  field(CALC, "A/10.0")
  field(INPA, "BL04I-VA-VALVE-01:INPTCLOSE PP MS")
  field(EGU, "s")
  field(PREC, "1")
  field(SCAN, "1 second")
  field(HOPR, "10")
  field(LOPR, "2")
  field(HIGH, "0")
  field(HIHI, "0")
  field(HSV,  "NO_ALARM")
  field(HHSV, "NO_ALARM")
}

################################################################################
# Interlocks
# 
# % archiver 10 Monitor
# % controldesk Latched Interlock Status smon
record(mbbiDirect, "BL04I-VA-VALVE-01:ILK") {
  field(DESC, "Latched Interlocks")
  field(DTYP, "Raw Soft Channel")
  field(INP, "BL04I-VA-VALVE-01:GETILK.VAL MS")
}

################################################################################
# Individual Interlocks
#
record(bi, "BL04I-VA-VALVE-01:ILK0") {
  field(DESC, "Interlock 0")
  field(INP, "BL04I-VA-VALVE-01:ILK.B0 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Air Healthy")
  field(ONAM, "Air Healthy")
}

record(bi, "BL04I-VA-VALVE-01:ILK1") {
  field(DESC, "Interlock 1")
  field(INP, "BL04I-VA-VALVE-01:ILK.B1 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "IMG 03 Healthy")
  field(ONAM, "IMG 03 Healthy")
}

record(bi, "BL04I-VA-VALVE-01:ILK2") {
  field(DESC, "Interlock 2")
  field(INP, "BL04I-VA-VALVE-01:ILK.B2 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "IMG 04 Healthy")
  field(ONAM, "IMG 04 Healthy")
}

record(bi, "BL04I-VA-VALVE-01:ILK3") {
  field(DESC, "Interlock 3")
  field(INP, "BL04I-VA-VALVE-01:ILK.B3 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "PIRG 03 Healthy")
  field(ONAM, "PIRG 03 Healthy")
}

record(bi, "BL04I-VA-VALVE-01:ILK4") {
  field(DESC, "Interlock 4")
  field(INP, "BL04I-VA-VALVE-01:ILK.B4 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "PIRG 04 Healthy")
  field(ONAM, "PIRG 04 Healthy")
}

record(bi, "BL04I-VA-VALVE-01:ILK5") {
  field(DESC, "Interlock 5")
  field(INP, "BL04I-VA-VALVE-01:ILK.B5 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "QBPM1 Out/V1 Open")
  field(ONAM, "QBPM1 Out/V1 Open")
}

record(bi, "BL04I-VA-VALVE-01:ILK6") {
  field(DESC, "Interlock 6")
  field(INP, "BL04I-VA-VALVE-01:ILK.B6 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-01:ILK7") {
  field(DESC, "Interlock 7")
  field(INP, "BL04I-VA-VALVE-01:ILK.B7 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "QBPM3 Out/V1 Open")
  field(ONAM, "QBPM3 Out/V1 Open")
}

record(bi, "BL04I-VA-VALVE-01:ILK8") {
  field(DESC, "Interlock 8")
  field(INP, "BL04I-VA-VALVE-01:ILK.B8 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-01:ILK9") {
  field(DESC, "Interlock 9")
  field(INP, "BL04I-VA-VALVE-01:ILK.B9 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-01:ILK10") {
  field(DESC, "Interlock 10")
  field(INP, "BL04I-VA-VALVE-01:ILK.BA CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-01:ILK11") {
  field(DESC, "Interlock 11")
  field(INP, "BL04I-VA-VALVE-01:ILK.BB CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-01:ILK12") {
  field(DESC, "Interlock 12")
  field(INP, "BL04I-VA-VALVE-01:ILK.BC CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-01:ILK13") {
  field(DESC, "Interlock 13")
  field(INP, "BL04I-VA-VALVE-01:ILK.BD CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-01:ILK14") {
  field(DESC, "Interlock 14")
  field(INP, "BL04I-VA-VALVE-01:ILK.BE CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-01:ILK15") {
  field(DESC, "Interlock 15")
  field(INP, "BL04I-VA-VALVE-01:ILK.BF CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Valve OK")
  field(ONAM, "Valve OK")
}

# % archiver 10 Monitor
# % controldesk Gauge Interlock Status smon
record(mbbiDirect, "BL04I-VA-VALVE-01:GILK") {
  field(DESC, "Gauge Interlocks")
  field(INP, "BL04I-VA-VALVE-01:GETGILK MS")
}

# % archiver 10 Monitor
# % controldesk Initial Interlock Status smon
record(mbbiDirect, "BL04I-VA-VALVE-01:INIILK") {
  field(DESC, "Initial Interlock")
  field(INP, "BL04I-VA-VALVE-01:GETINIILK MS")
}

# % archiver 10 Monitor
# % controldesk Current Interlock Status smon
record(mbbiDirect, "BL04I-VA-VALVE-01:RAWILK") {
  field(DESC, "Current Interlocks")
  field(INP, "BL04I-VA-VALVE-01:GETRAWILK MS")
}

record(subArray, "BL04I-VA-VALVE-01:GETLASTCON") {
  field(DESC, "Get control readback")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-01:LASTCON")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK01 CP MS")
  field(INDX, "1")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-01:GETILKSTA") {
  field(DESC, "Get interlock status")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-01:ILKSTA")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK01 CP MS")
  field(INDX, "2")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-01:GETSTA") {
  field(DESC, "Get status")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-01:STA")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK01 CP MS")
  field(INDX, "3")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-01:GETOPS") {
  field(DESC, "Get operations")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-01:OPS")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK01 CP MS")
  field(INDX, "4")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-01:GETMODSTA") {
  field(DESC, "Get mode")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-01:MODSTA")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK01 CP MS")
  field(INDX, "5")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-01:GETILK") {
  field(DESC, "Get latched interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-01:ILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK01 CP MS")
  field(INDX, "6")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-01:GETINIILK") {
  field(DESC, "Get initial interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-01:INIILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK01 CP MS")
  field(INDX, "7")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-01:GETRAWILK") {
  field(DESC, "Get current interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-01:RAWILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK01 CP MS")
  field(INDX, "8")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-01:GETGILK") {
  field(DESC, "Get gauge interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-01:GILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK01 CP MS")
  field(INDX, "9")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk IMG Interlock Status smon
#
record(mbbiDirect, "BL04I-VA-VALVE-01:IMGILK") {
  field(DESC, "IMG Interlocks")
  field(INP, "BL04I-VA-VALVE-01:GETIMGILK MS")
}

record(subArray, "BL04I-VA-VALVE-01:GETIMGILK") {
  field(DESC, "IMG Interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-01:IMGILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK00 CP MS")
  field(INDX, "5")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk Pirani Interlock Status smon
#
record(mbbiDirect, "BL04I-VA-VALVE-01:PIRGILK") {
  field(DESC, "Pirani Interlocks")
  field(INP, "BL04I-VA-VALVE-01:GETPIRGILK PP MS")
}

record(subArray, "BL04I-VA-VALVE-01:GETPIRGILK") {
  field(DESC, "Pirani Interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-01:PIRGILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK00 CP MS")
  field(INDX, "6")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk Initial/Run Vacuum Status smon
#
record(mbbiDirect, "BL04I-VA-VALVE-01:IRVAC") {
  field(DESC, "Initial/Run Vacuum")
  field(INP, "BL04I-VA-VALVE-01:GETIRVAC PP MS")
}

record(subArray, "BL04I-VA-VALVE-01:GETIRVAC") {
  field(DESC, "Initial/Run Vacuum")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-01:IRVAC")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK00 CP MS")
  field(INDX, "7")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk Close Time smon
#
#record(calc, "BL04I-VA-VALVE-01:TCLOSE") 
#{
#  field(DESC, "Time to close")
#  field(EGU, "s")
#  field(PREC, "1")
#  field(CALC, "A/10.0")
#  field(INPA, "BL04I-VA-VALVE-01:GETTCLOSE PP MS")
#  field(HIGH, "0")
#  field(HIHI, "0")
#  field(HSV,  "NO_ALARM")
#  field(HHSV, "NO_ALARM")
# }

# This is a helper record to ensure the valve macro is
# correctly converted to a decimal integer (instead of octal if leading zero given),
# ready for input to GETTCLOSE.INDX
#record(calcout, "BL04I-VA-VALVE-01:VNUM") 
#{
#  field(DESC, "The valve index number")
#  field(CALC, "A")
#  field(INPA, "01")
#  field(OUT, "BL04I-VA-VALVE-01:GETTCLOSE.INDX PP")
#  field(PINI, "YES")
#}

#record(subArray, "BL04I-VA-VALVE-01:GETTCLOSE") {
#  field(DESC, "Time to close")
#  field(DTYP, "Soft Channel")
#  field(FLNK, "BL04I-VA-VALVE-01:TCLOSE")
#  field(FTVL, "USHORT")
#  field(INP, "BL04I-VA-VLVCC-01:BLOCK11 CP MS")
##  field(INDX, "01")
#  field(MALM, "10")
#}

################################################################################
# Individual Gauge Interlocks
#
record(mbbiDirect, "BL04I-VA-VALVE-01:GAUGEILK") {
  field(DESC, "Combined Gauge Interlock")
  field(INP, "BL04I-VA-VALVE-01:CALGILK PP MS")
}

record(calc, "BL04I-VA-VALVE-01:CALGILK") {
  field(CALC, "A&B")
  field(FLNK, "BL04I-VA-VALVE-01:GAUGEILK")
  field(INPA, "BL04I-VA-VALVE-01:IMGILK CP MS")
  field(INPB, "BL04I-VA-VALVE-01:PIRGILK CP MS")
}

record(bi, "BL04I-VA-VALVE-01:GILK0") {
  field(DESC, "Gauge ILK 0")
  field(INP, "BL04I-VA-VALVE-01:GAUGEILK.B0 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-01")
  field(ONAM, "GAUGE-01")
}

record(bi, "BL04I-VA-VALVE-01:GILK1") {
  field(DESC, "Gauge ILK 1")
  field(INP, "BL04I-VA-VALVE-01:GAUGEILK.B1 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-02")
  field(ONAM, "GAUGE-02")
}

record(bi, "BL04I-VA-VALVE-01:GILK2") {
  field(DESC, "Gauge ILK 2")
  field(INP, "BL04I-VA-VALVE-01:GAUGEILK.B2 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-03")
  field(ONAM, "GAUGE-03")
}

record(bi, "BL04I-VA-VALVE-01:GILK3") {
  field(DESC, "Gauge ILK 3")
  field(INP, "BL04I-VA-VALVE-01:GAUGEILK.B3 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-04")
  field(ONAM, "GAUGE-04")
}

record(bi, "BL04I-VA-VALVE-01:GILK4") {
  field(DESC, "Gauge ILK 4")
  field(INP, "BL04I-VA-VALVE-01:GAUGEILK.B4 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-05")
  field(ONAM, "GAUGE-05")
}

record(bi, "BL04I-VA-VALVE-01:GILK5") {
  field(DESC, "Gauge ILK 5")
  field(INP, "BL04I-VA-VALVE-01:GAUGEILK.B5 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-06")
  field(ONAM, "GAUGE-06")
}

record(bi, "BL04I-VA-VALVE-01:GILK6") {
  field(DESC, "Gauge ILK 6")
  field(INP, "BL04I-VA-VALVE-01:GAUGEILK.B6 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-01:GILK7") {
  field(DESC, "Gauge ILK 7")
  field(INP, "BL04I-VA-VALVE-01:GAUGEILK.B7 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-01:GILK8") {
  field(DESC, "Gauge ILK 8")
  field(INP, "BL04I-VA-VALVE-01:GAUGEILK.B8 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-01:GILK9") {
  field(DESC, "Gauge ILK 9")
  field(INP, "BL04I-VA-VALVE-01:GAUGEILK.B9 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-01:GILK10") {
  field(DESC, "Gauge ILK 10")
  field(INP, "BL04I-VA-VALVE-01:GAUGEILK.BA CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-01:GILK11") {
  field(DESC, "Gauge ILK 11")
  field(INP, "BL04I-VA-VALVE-01:GAUGEILK.BB CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-01:GILK12") {
  field(DESC, "Gauge ILK 12")
  field(INP, "BL04I-VA-VALVE-01:GAUGEILK.BC CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-01:GILK13") {
  field(DESC, "Gauge ILK 13")
  field(INP, "BL04I-VA-VALVE-01:GAUGEILK.BD CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-01:GILK14") {
  field(DESC, "Gauge ILK 14")
  field(INP, "BL04I-VA-VALVE-01:GAUGEILK.BE CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-01:GILK15") {
  field(DESC, "Gauge ILK 15")
  field(INP, "BL04I-VA-VALVE-01:GAUGEILK.BF CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

################################################################################
# Air Pressure De-bounce Time
#
#% controldesk Air Pressure De-bounce Time setpoint
#
record(ao, "BL04I-VA-VALVE-01:SETADB") {
  field(DESC, "De-bounce Time")
  field(EGU, "s")
  field(PREC, "1")
  field(DOL, "10.0")
  field(PINI, "YES")
# field(OUT, "BL04I-VA-VLVCC-01:CALADB.A PP")
  field(FLNK, "BL04I-VA-VALVE-01:CALTIMEOUT PP")
}

#
#% archiver 10 Monitor
#% controldesk Air Pressure De-bounce Time readback
#
record(calc, "BL04I-VA-VALVE-01:ADB") {
  field(DESC, "De-bounce Time")
  field(CALC, "A/10.0")
# field(INPA, "BL04I-VA-VLVCC-01:INPADB CP MS")
  field(INPA, "BL04I-VA-VALVE-01:INPTIMEOUT PP MS")
  field(SCAN, "1 second")
  field(EGU, "s")
  field(PREC, "1")
}

##### New for inidividual valve ADB values #####
record(calcout, "BL04I-VA-VALVE-01:CALTIMEOUT") {
  field(OUT, "BL04I-VA-VALVE-01:OUTTIMEOUT PP")
  field(CALC, "A*10.0")
  field(INPA, "BL04I-VA-VALVE-01:SETADB")
}

record(ao, "BL04I-VA-VALVE-01:OUTTIMEOUT") {
  field(DTYP, "stream")
  field(OUT, "@Hostlink.proto write(0103) ty_40_0")
}

record(longin, "BL04I-VA-VALVE-01:INPTIMEOUT") {
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0100) ty_40_0")
}

# Supplemental records to make this into a caput callback device that gda can control

#% macro, desc, Box label for gui
#% macro, gda_name, GDA name to export to gda as if it exists
#% macro, gda_desc, GDA description

# This associates an edm screen with the template
# % gui, VALVE1, edm, vacuumValve.edl, device=BL04I-VA-VALVE-01
# % gui, VALVE1, edmembed, vacuumValve-embed.edl, device=BL04I-VA-VALVE-01,box-label=BL04I-VA-VALVE-01

#% gdatag,template,pneumaticCallback,,
#% gdatag,mbbinary,rw,,CONTROL
record(mbbo, "BL04I-VA-VALVE-01:CON") {
  field(FLNK,"BL04I-VA-VALVE-01:SETBUSY")
}

record(calcout, "BL04I-VA-VALVE-01:SETBUSY")
{
    field(CALC, "1")
    field(OUT, "BL04I-VA-VALVE-01:BUSY PP NMS")
    field(FLNK,"BL04I-VA-VALVE-01:DONECALC")
}

record(busy, "BL04I-VA-VALVE-01:BUSY")
{
}

record(calcout,"BL04I-VA-VALVE-01:DONECALC")
{
	field(INPA,"BL04I-VA-VALVE-01:CON MS")
	field(INPB,"BL04I-VA-VALVE-01:STA CPP MS")
	field(INPC,"BL04I-VA-VALVE-01:ILKSTA CPP MS")
	field(INPD,"BL04I-VA-VALVE-01:LASTCON CPP MS")	
	field(CALC,"((A=D)&(((A*2+1)=B)|A=2|C=0))?0:1")
	field(OOPT, "When Zero")
	field(DOPT, "Use CALC")
	field(OUT,"BL04I-VA-VALVE-01:BUSY CA NMS")
}

# This makes the component icon reflect the status
# % gui, VALVE1, sevr
#% gdatag,mbbinary,ro,,STA
record(mbbi, "BL04I-VA-VALVE-01:STA") {
}

#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBD("../../dbd/vacuumValve.dbd")
#! DBDEND


# vacuumValve.template
#% macro, __doc__, Template database for a vacuum valve
# Pete Owens - 26/4/04
# Ian Gillingham - 2009 on ...
# 
# substitutions:
#% macro, device, device name
#% macro, vlvcc, device name of valve control crate
#% macro, port, seral port number (from device manager table)
#% macro, valve, valve number (1-4 within PLC)
#% macro, allowpv, If specified, then only write an open command when this is non-zero. MUST have CP at the end of it
#% macro, whylocked, String to output to EDM synoptic as to precisely why the device is locked and by whom
#% macro, ilk0, Interlock description 0
#% macro, ilk1, Interlock description 1
#% macro, ilk2, Interlock description 2
#% macro, ilk3, Interlock description 3
#% macro, ilk4, Interlock description 4
#% macro, ilk5, Interlock description 5
#% macro, ilk6, Interlock description 6
#% macro, ilk7, Interlock description 7
#% macro, ilk8, Interlock description 8
#% macro, ilk9, Interlock description 9
#% macro, ilk10, Interlock description 10
#% macro, ilk11, Interlock description 11
#% macro, ilk12, Interlock description 12
#% macro, ilk13, Interlock description 13
#% macro, ilk14, Interlock description 14
#% macro, ilk15, Interlock description 15
#% macro, gilk0, Gauge interlock description 0
#% macro, gilk1, Gauge interlock description 1
#% macro, gilk2, Gauge interlock description 2
#% macro, gilk3, Gauge interlock description 3
#% macro, gilk4, Gauge interlock description 4
#% macro, gilk5, Gauge interlock description 5
#% macro, gilk6, Gauge interlock description 6
#% macro, gilk7, Gauge interlock description 7
#% macro, gilk8, Gauge interlock description 8
#% macro, gilk9, Gauge interlock description 9
#% macro, gilk10, Gauge interlock description 10
#% macro, gilk11, Gauge interlock description 11
#% macro, gilk12, Gauge interlock description 12
#% macro, gilk13, Gauge interlock description 13
#% macro, gilk14, Gauge interlock description 14
#% macro, gilk15, Gauge interlock description 15
#% macro, con_label0, Label string for control value 0 (Optional - defaults to Open)
#% macro, con_label1, Label string for control value 1 (Optional - defaults to Close)
#% macro, con_label2, Label string for control value 2 (Optional - defaults to Reset)
#% macro, sta_label0, Label string for status value 0 (Optional - defaults to Fault)
#% macro, sta_label1, Label string for status value 1 (Optional - defaults to Open)
#% macro, sta_label2, Label string for status value 2 (Optional - defaults to Opening)
#% macro, sta_label3, Label string for status value 3 (Optional - defaults to Closed)
#% macro, sta_label4, Label string for status value 4 (Optional - defaults to Closing)

#% macro, tclose_high, HIGH alarm level for TCLOSE record (Optional - defaults to 0)
#% macro, tclose_hihi, HIHI alarm level for TCLOSE record (Optional - defaults to 0)
#% macro, tclose_hsv,  HSV  HIGH severity level for TCLOSE record (Optional - defaults to NO_ALARM)
#% macro, tclose_hhsv, HHSV HIHI severity level for TCLOSE record (Optional - defaults to NO_ALARM)
#% macro, name, Object name and associated gui name

# ##############################################################################
# Control
# 
# % archiver 10 Monitor
# % controldesk Status scon
# % gda,interface,vacuumValve,vacuum,Valve,Valve and shutter controls
# % gda,subsystem,vacuumValve,valve,Set,Set valve state
## Use this PV to request the valve to open or close
# The request will be checked by BL04I-VA-VALVE-02:CALCCON
record(mbbo, "BL04I-VA-VALVE-02:CON") {
  field(DESC, "Control")
  field(ZRST, "Open")
  field(ONST, "Close")
  field(TWST, "Reset")
  field(VAL, "0")
  field(OUT, "BL04I-VA-VALVE-02:CALCCON.A PP")
}

## If this PV is non-zero then an open request will be allowed by 
# BL04I-VA-VALVE-02:CALCCON
record(bi, "BL04I-VA-VALVE-02:OPENALLOWED") 
{
  field(DESC, "Allow/inhibit valve opening")
  field(INP, "")
  field(VAL, "1")
  field(ONAM, "Yes")
  field(ZNAM, "No")    
}

record(stringout, "BL04I-VA-VALVE-02:WHYLOCKED") 
{
  field(DESC, "Reason why device is locked")
  field(VAL, "Open command not allowed")
}

## Pass all requests through to the PLC unless it is an open request and 
# BL04I-VA-VALVE-02:OPENALLOWED is zero
record(calcout, "BL04I-VA-VALVE-02:CALCCON") {
  field(INPB, "BL04I-VA-VALVE-02:OPENALLOWED")
  field(OUT, "BL04I-VA-VALVE-02:ACTUALCON PP")
  field(CALC, "(B=0&A=0)?0:1")
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "A")
}

## Send the request down to the PLC
record(mbbo, "BL04I-VA-VALVE-02:ACTUALCON") {
  field(DESC, "Control")
  field(DTYP, "stream")
  field(OUT, "@Hostlink.proto write(0020) ty_40_0")
  field(ZRST, "Open")
  field(ONST, "Close")
  field(TWST, "Reset")
  field(PRIO, "HIGH")
}

record(bi, "BL04I-VA-VALVE-02:OPENING") {
  field(DESC, "Opening Valves")
  field(PINI, "YES")
  field(INP, "0")
  field(ONAM, "Opening")
}

# % archiver 10 Monitor
record(mbbi, "BL04I-VA-VALVE-02:LASTCON") {
  field(DESC, "Control Readback")
  field(DTYP, "Soft Channel")
  field(ZRST, "Open")
  field(ONST, "Close")
  field(TWST, "Reset")
  field(INP, "BL04I-VA-VALVE-02:GETLASTCON.VAL MS")
}

# ###################################################################
# Interlock Status
# 
# % archiver 10 Monitor
# % controldesk Interlock Status smon
record(mbbi, "BL04I-VA-VALVE-02:ILKSTA") {
  field(DESC, "Interlock Status")
  field(DTYP, "Soft Channel")
  field(ZRST, "Failed")
  field(ONST, "Run Ilks OK")
  field(TWST, "OK")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
  field(INP, "BL04I-VA-VALVE-02:GETILKSTA.VAL MS")
}

# #########################################################################
# Status
# 
# % archiver 10 Monitor
# % controldesk Status smon
# % gui, VALVE2, sevr
record(mbbi, "BL04I-VA-VALVE-02:STA") {
  field(DESC, "Status")
  field(DTYP, "Soft Channel")
  field(ZRST, "Fault")
  field(ONST, "Open")
  field(TWST, "Opening")
  field(THST, "Closed")
  field(FRST, "Closing")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
  field(THSV, "NO_ALARM")
  field(FRSV, "NO_ALARM")
  field(INP, "BL04I-VA-VALVE-02:GETSTA MS")
}

# this tells the gui that this device is moving if STA is Opening or Closing
# % gui, VALVE2, status
record(calcout, "BL04I-VA-VALVE-02:MOVN") {
  field(DTYP, "Soft Channel")
  field(DESC, "Is valve moving")
  field(INPA, "BL04I-VA-VALVE-02:STA CP")
  field(CALC, "A=2|A=4")
}



# ############################################################################
# Number of Operations
# 
# % archiver 10 Monitor
# % controldesk Number of Operations readback
record(longin, "BL04I-VA-VALVE-02:OPS") {
  field(DESC, "Operations")
  field(DTYP, "Soft Channel")
  field(HOPR, "10000")
  field(LOPR, "0")
  field(HIHI, "10000")
  field(HIGH, "9000")
  field(LOW, "0")
  field(LOLO, "-1")
  field(HHSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
  field(LLSV, "MAJOR")
  field(INP, "BL04I-VA-VALVE-02:GETOPS.VAL MS")
}

# #########################################################################
# Mode
record(mbbiDirect, "BL04I-VA-VALVE-02:MODSTA") {
  field(DESC, "Mode")
  field(DTYP, "Raw Soft Channel")
  field(INP, "BL04I-VA-VALVE-02:GETMODSTA MS")
}

# Operational/Service Mode
#% archiver 10 Monitor
#% controldesk Mode smon
#
record(bi, "BL04I-VA-VALVE-02:MODE") {
  field(DESC, "Mode")
  field(INP, "BL04I-VA-VALVE-02:MODSTA.B0 CP MS")
  field(ZNAM, "Operational")
  field(ONAM, "Service")
}


# Raw Air Pressure Status bit pattern for given valve
#% archiver 10 Monitor
#% controldesk Raw Air Pressure Status smon
#
record(bi, "BL04I-VA-VALVE-02:RAWAIRSTA") 
{
  field(DESC, "Raw Air Pressure Status")
  field(INP, "BL04I-VA-VLVCC-01:RAWAIRV02 CP MS")
  field(ZNAM, "Low")
  field(ONAM, "Good")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
}

# SR Valve Controller
#% archiver 10 Monitor
#% controldesk SR Valve smon
#
record(bi, "BL04I-VA-VALVE-02:SRVC") {
  field(DESC, "SR Valve Controller")
  field(INP, "BL04I-VA-VLVCC-01:SRVC CP MS")
  field(SCAN, "Passive")
  field(ZNAM, "No")
  field(ONAM, "Yes")
}

record(longin, "BL04I-VA-VALVE-02:SOFTWARE") {
  field(DESC, "Software version")
  field(DTYP, "Soft Channel")
  field(INP, "BL04I-VA-VLVCC-01:INPSOFT CP MS")
}

# ######################################################################
# Close time trip
#
#% controldesk Close Timeout setpoint
#
record(longin, "BL04I-VA-VALVE-02:INPMINTCLS") {
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0207) ty_40_0")
}

#
#% archiver 10 Monitor
#% controldesk Minimum Close Time readback
#
record(calc, "BL04I-VA-VALVE-02:MINTCLS") {
  field(DESC, "Min Close Time")
  field(CALC, "A/10.0")
  field(INPA, "BL04I-VA-VALVE-02:INPMINTCLS PP MS")
  field(EGU, "s")
  field(PREC, "1")
  field(SCAN, "1 second")
  field(HOPR, "10")
  field(LOPR, "2")
  field(HIHI, "10")
  field(HHSV, "MAJOR")
}

record(longin, "BL04I-VA-VALVE-02:INPMAXTCLS") {
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0205) ty_40_0")
}

#
#% archiver 10 Monitor
#% controldesk Maximum Close Time readback
#
record(calc, "BL04I-VA-VALVE-02:MAXTCLS") {
  field(DESC, "Max Close Time")
  field(CALC, "A/10.0")
  field(INPA, "BL04I-VA-VALVE-02:INPMAXTCLS PP MS")
  field(EGU, "s")
  field(PREC, "1")
  field(SCAN, "1 second")
  field(HOPR, "10")
  field(LOPR, "2")
  field(HIHI, "10")
  field(HHSV, "MINOR")
}

record(longin, "BL04I-VA-VALVE-02:INPTCLOSE") 
{
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0204) ty_40_0")
}

#
#% archiver 10 Monitor
#% controldesk Current Close Time readback
#
record(calc, "BL04I-VA-VALVE-02:TCLOSE") 
{
  field(DESC, "Close Time")
  field(CALC, "A/10.0")
  field(INPA, "BL04I-VA-VALVE-02:INPTCLOSE PP MS")
  field(EGU, "s")
  field(PREC, "1")
  field(SCAN, "1 second")
  field(HOPR, "10")
  field(LOPR, "2")
  field(HIGH, "0")
  field(HIHI, "0")
  field(HSV,  "NO_ALARM")
  field(HHSV, "NO_ALARM")
}

################################################################################
# Interlocks
# 
# % archiver 10 Monitor
# % controldesk Latched Interlock Status smon
record(mbbiDirect, "BL04I-VA-VALVE-02:ILK") {
  field(DESC, "Latched Interlocks")
  field(DTYP, "Raw Soft Channel")
  field(INP, "BL04I-VA-VALVE-02:GETILK.VAL MS")
}

################################################################################
# Individual Interlocks
#
record(bi, "BL04I-VA-VALVE-02:ILK0") {
  field(DESC, "Interlock 0")
  field(INP, "BL04I-VA-VALVE-02:ILK.B0 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Air Healthy")
  field(ONAM, "Air Healthy")
}

record(bi, "BL04I-VA-VALVE-02:ILK1") {
  field(DESC, "Interlock 1")
  field(INP, "BL04I-VA-VALVE-02:ILK.B1 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "IMG 04 Healthy")
  field(ONAM, "IMG 04 Healthy")
}

record(bi, "BL04I-VA-VALVE-02:ILK2") {
  field(DESC, "Interlock 2")
  field(INP, "BL04I-VA-VALVE-02:ILK.B2 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "IMG 05 Healthy")
  field(ONAM, "IMG 05 Healthy")
}

record(bi, "BL04I-VA-VALVE-02:ILK3") {
  field(DESC, "Interlock 3")
  field(INP, "BL04I-VA-VALVE-02:ILK.B3 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "PIRG 04 Healthy")
  field(ONAM, "PIRG 04 Healthy")
}

record(bi, "BL04I-VA-VALVE-02:ILK4") {
  field(DESC, "Interlock 4")
  field(INP, "BL04I-VA-VALVE-02:ILK.B4 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "PIRG 05 Healthy")
  field(ONAM, "PIRG 05 Healthy")
}

record(bi, "BL04I-VA-VALVE-02:ILK5") {
  field(DESC, "Interlock 5")
  field(INP, "BL04I-VA-VALVE-02:ILK.B5 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "QBPM1 Out/V2 Open")
  field(ONAM, "QBPM1 Out/V2 Open")
}

record(bi, "BL04I-VA-VALVE-02:ILK6") {
  field(DESC, "Interlock 6")
  field(INP, "BL04I-VA-VALVE-02:ILK.B6 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-02:ILK7") {
  field(DESC, "Interlock 7")
  field(INP, "BL04I-VA-VALVE-02:ILK.B7 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "QBPM3 Out/V2 Open")
  field(ONAM, "QBPM3 Out/V2 Open")
}

record(bi, "BL04I-VA-VALVE-02:ILK8") {
  field(DESC, "Interlock 8")
  field(INP, "BL04I-VA-VALVE-02:ILK.B8 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-02:ILK9") {
  field(DESC, "Interlock 9")
  field(INP, "BL04I-VA-VALVE-02:ILK.B9 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-02:ILK10") {
  field(DESC, "Interlock 10")
  field(INP, "BL04I-VA-VALVE-02:ILK.BA CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-02:ILK11") {
  field(DESC, "Interlock 11")
  field(INP, "BL04I-VA-VALVE-02:ILK.BB CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-02:ILK12") {
  field(DESC, "Interlock 12")
  field(INP, "BL04I-VA-VALVE-02:ILK.BC CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-02:ILK13") {
  field(DESC, "Interlock 13")
  field(INP, "BL04I-VA-VALVE-02:ILK.BD CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-02:ILK14") {
  field(DESC, "Interlock 14")
  field(INP, "BL04I-VA-VALVE-02:ILK.BE CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-02:ILK15") {
  field(DESC, "Interlock 15")
  field(INP, "BL04I-VA-VALVE-02:ILK.BF CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Valve OK")
  field(ONAM, "Valve OK")
}

# % archiver 10 Monitor
# % controldesk Gauge Interlock Status smon
record(mbbiDirect, "BL04I-VA-VALVE-02:GILK") {
  field(DESC, "Gauge Interlocks")
  field(INP, "BL04I-VA-VALVE-02:GETGILK MS")
}

# % archiver 10 Monitor
# % controldesk Initial Interlock Status smon
record(mbbiDirect, "BL04I-VA-VALVE-02:INIILK") {
  field(DESC, "Initial Interlock")
  field(INP, "BL04I-VA-VALVE-02:GETINIILK MS")
}

# % archiver 10 Monitor
# % controldesk Current Interlock Status smon
record(mbbiDirect, "BL04I-VA-VALVE-02:RAWILK") {
  field(DESC, "Current Interlocks")
  field(INP, "BL04I-VA-VALVE-02:GETRAWILK MS")
}

record(subArray, "BL04I-VA-VALVE-02:GETLASTCON") {
  field(DESC, "Get control readback")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-02:LASTCON")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK02 CP MS")
  field(INDX, "1")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-02:GETILKSTA") {
  field(DESC, "Get interlock status")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-02:ILKSTA")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK02 CP MS")
  field(INDX, "2")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-02:GETSTA") {
  field(DESC, "Get status")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-02:STA")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK02 CP MS")
  field(INDX, "3")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-02:GETOPS") {
  field(DESC, "Get operations")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-02:OPS")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK02 CP MS")
  field(INDX, "4")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-02:GETMODSTA") {
  field(DESC, "Get mode")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-02:MODSTA")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK02 CP MS")
  field(INDX, "5")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-02:GETILK") {
  field(DESC, "Get latched interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-02:ILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK02 CP MS")
  field(INDX, "6")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-02:GETINIILK") {
  field(DESC, "Get initial interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-02:INIILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK02 CP MS")
  field(INDX, "7")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-02:GETRAWILK") {
  field(DESC, "Get current interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-02:RAWILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK02 CP MS")
  field(INDX, "8")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-02:GETGILK") {
  field(DESC, "Get gauge interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-02:GILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK02 CP MS")
  field(INDX, "9")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk IMG Interlock Status smon
#
record(mbbiDirect, "BL04I-VA-VALVE-02:IMGILK") {
  field(DESC, "IMG Interlocks")
  field(INP, "BL04I-VA-VALVE-02:GETIMGILK MS")
}

record(subArray, "BL04I-VA-VALVE-02:GETIMGILK") {
  field(DESC, "IMG Interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-02:IMGILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK00 CP MS")
  field(INDX, "5")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk Pirani Interlock Status smon
#
record(mbbiDirect, "BL04I-VA-VALVE-02:PIRGILK") {
  field(DESC, "Pirani Interlocks")
  field(INP, "BL04I-VA-VALVE-02:GETPIRGILK PP MS")
}

record(subArray, "BL04I-VA-VALVE-02:GETPIRGILK") {
  field(DESC, "Pirani Interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-02:PIRGILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK00 CP MS")
  field(INDX, "6")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk Initial/Run Vacuum Status smon
#
record(mbbiDirect, "BL04I-VA-VALVE-02:IRVAC") {
  field(DESC, "Initial/Run Vacuum")
  field(INP, "BL04I-VA-VALVE-02:GETIRVAC PP MS")
}

record(subArray, "BL04I-VA-VALVE-02:GETIRVAC") {
  field(DESC, "Initial/Run Vacuum")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-02:IRVAC")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK00 CP MS")
  field(INDX, "7")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk Close Time smon
#
#record(calc, "BL04I-VA-VALVE-02:TCLOSE") 
#{
#  field(DESC, "Time to close")
#  field(EGU, "s")
#  field(PREC, "1")
#  field(CALC, "A/10.0")
#  field(INPA, "BL04I-VA-VALVE-02:GETTCLOSE PP MS")
#  field(HIGH, "0")
#  field(HIHI, "0")
#  field(HSV,  "NO_ALARM")
#  field(HHSV, "NO_ALARM")
# }

# This is a helper record to ensure the valve macro is
# correctly converted to a decimal integer (instead of octal if leading zero given),
# ready for input to GETTCLOSE.INDX
#record(calcout, "BL04I-VA-VALVE-02:VNUM") 
#{
#  field(DESC, "The valve index number")
#  field(CALC, "A")
#  field(INPA, "02")
#  field(OUT, "BL04I-VA-VALVE-02:GETTCLOSE.INDX PP")
#  field(PINI, "YES")
#}

#record(subArray, "BL04I-VA-VALVE-02:GETTCLOSE") {
#  field(DESC, "Time to close")
#  field(DTYP, "Soft Channel")
#  field(FLNK, "BL04I-VA-VALVE-02:TCLOSE")
#  field(FTVL, "USHORT")
#  field(INP, "BL04I-VA-VLVCC-01:BLOCK11 CP MS")
##  field(INDX, "02")
#  field(MALM, "10")
#}

################################################################################
# Individual Gauge Interlocks
#
record(mbbiDirect, "BL04I-VA-VALVE-02:GAUGEILK") {
  field(DESC, "Combined Gauge Interlock")
  field(INP, "BL04I-VA-VALVE-02:CALGILK PP MS")
}

record(calc, "BL04I-VA-VALVE-02:CALGILK") {
  field(CALC, "A&B")
  field(FLNK, "BL04I-VA-VALVE-02:GAUGEILK")
  field(INPA, "BL04I-VA-VALVE-02:IMGILK CP MS")
  field(INPB, "BL04I-VA-VALVE-02:PIRGILK CP MS")
}

record(bi, "BL04I-VA-VALVE-02:GILK0") {
  field(DESC, "Gauge ILK 0")
  field(INP, "BL04I-VA-VALVE-02:GAUGEILK.B0 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-01")
  field(ONAM, "GAUGE-01")
}

record(bi, "BL04I-VA-VALVE-02:GILK1") {
  field(DESC, "Gauge ILK 1")
  field(INP, "BL04I-VA-VALVE-02:GAUGEILK.B1 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-02")
  field(ONAM, "GAUGE-02")
}

record(bi, "BL04I-VA-VALVE-02:GILK2") {
  field(DESC, "Gauge ILK 2")
  field(INP, "BL04I-VA-VALVE-02:GAUGEILK.B2 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-03")
  field(ONAM, "GAUGE-03")
}

record(bi, "BL04I-VA-VALVE-02:GILK3") {
  field(DESC, "Gauge ILK 3")
  field(INP, "BL04I-VA-VALVE-02:GAUGEILK.B3 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-04")
  field(ONAM, "GAUGE-04")
}

record(bi, "BL04I-VA-VALVE-02:GILK4") {
  field(DESC, "Gauge ILK 4")
  field(INP, "BL04I-VA-VALVE-02:GAUGEILK.B4 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-05")
  field(ONAM, "GAUGE-05")
}

record(bi, "BL04I-VA-VALVE-02:GILK5") {
  field(DESC, "Gauge ILK 5")
  field(INP, "BL04I-VA-VALVE-02:GAUGEILK.B5 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-06")
  field(ONAM, "GAUGE-06")
}

record(bi, "BL04I-VA-VALVE-02:GILK6") {
  field(DESC, "Gauge ILK 6")
  field(INP, "BL04I-VA-VALVE-02:GAUGEILK.B6 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-02:GILK7") {
  field(DESC, "Gauge ILK 7")
  field(INP, "BL04I-VA-VALVE-02:GAUGEILK.B7 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-02:GILK8") {
  field(DESC, "Gauge ILK 8")
  field(INP, "BL04I-VA-VALVE-02:GAUGEILK.B8 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-02:GILK9") {
  field(DESC, "Gauge ILK 9")
  field(INP, "BL04I-VA-VALVE-02:GAUGEILK.B9 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-02:GILK10") {
  field(DESC, "Gauge ILK 10")
  field(INP, "BL04I-VA-VALVE-02:GAUGEILK.BA CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-02:GILK11") {
  field(DESC, "Gauge ILK 11")
  field(INP, "BL04I-VA-VALVE-02:GAUGEILK.BB CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-02:GILK12") {
  field(DESC, "Gauge ILK 12")
  field(INP, "BL04I-VA-VALVE-02:GAUGEILK.BC CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-02:GILK13") {
  field(DESC, "Gauge ILK 13")
  field(INP, "BL04I-VA-VALVE-02:GAUGEILK.BD CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-02:GILK14") {
  field(DESC, "Gauge ILK 14")
  field(INP, "BL04I-VA-VALVE-02:GAUGEILK.BE CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-02:GILK15") {
  field(DESC, "Gauge ILK 15")
  field(INP, "BL04I-VA-VALVE-02:GAUGEILK.BF CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

################################################################################
# Air Pressure De-bounce Time
#
#% controldesk Air Pressure De-bounce Time setpoint
#
record(ao, "BL04I-VA-VALVE-02:SETADB") {
  field(DESC, "De-bounce Time")
  field(EGU, "s")
  field(PREC, "1")
  field(DOL, "10.0")
  field(PINI, "YES")
# field(OUT, "BL04I-VA-VLVCC-01:CALADB.A PP")
  field(FLNK, "BL04I-VA-VALVE-02:CALTIMEOUT PP")
}

#
#% archiver 10 Monitor
#% controldesk Air Pressure De-bounce Time readback
#
record(calc, "BL04I-VA-VALVE-02:ADB") {
  field(DESC, "De-bounce Time")
  field(CALC, "A/10.0")
# field(INPA, "BL04I-VA-VLVCC-01:INPADB CP MS")
  field(INPA, "BL04I-VA-VALVE-02:INPTIMEOUT PP MS")
  field(SCAN, "1 second")
  field(EGU, "s")
  field(PREC, "1")
}

##### New for inidividual valve ADB values #####
record(calcout, "BL04I-VA-VALVE-02:CALTIMEOUT") {
  field(OUT, "BL04I-VA-VALVE-02:OUTTIMEOUT PP")
  field(CALC, "A*10.0")
  field(INPA, "BL04I-VA-VALVE-02:SETADB")
}

record(ao, "BL04I-VA-VALVE-02:OUTTIMEOUT") {
  field(DTYP, "stream")
  field(OUT, "@Hostlink.proto write(0203) ty_40_0")
}

record(longin, "BL04I-VA-VALVE-02:INPTIMEOUT") {
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0200) ty_40_0")
}

# Supplemental records to make this into a caput callback device that gda can control

#% macro, desc, Box label for gui
#% macro, gda_name, GDA name to export to gda as if it exists
#% macro, gda_desc, GDA description

# This associates an edm screen with the template
# % gui, VALVE2, edm, vacuumValve.edl, device=BL04I-VA-VALVE-02
# % gui, VALVE2, edmembed, vacuumValve-embed.edl, device=BL04I-VA-VALVE-02,box-label=BL04I-VA-VALVE-02

#% gdatag,template,pneumaticCallback,,
#% gdatag,mbbinary,rw,,CONTROL
record(mbbo, "BL04I-VA-VALVE-02:CON") {
  field(FLNK,"BL04I-VA-VALVE-02:SETBUSY")
}

record(calcout, "BL04I-VA-VALVE-02:SETBUSY")
{
    field(CALC, "1")
    field(OUT, "BL04I-VA-VALVE-02:BUSY PP NMS")
    field(FLNK,"BL04I-VA-VALVE-02:DONECALC")
}

record(busy, "BL04I-VA-VALVE-02:BUSY")
{
}

record(calcout,"BL04I-VA-VALVE-02:DONECALC")
{
	field(INPA,"BL04I-VA-VALVE-02:CON MS")
	field(INPB,"BL04I-VA-VALVE-02:STA CPP MS")
	field(INPC,"BL04I-VA-VALVE-02:ILKSTA CPP MS")
	field(INPD,"BL04I-VA-VALVE-02:LASTCON CPP MS")	
	field(CALC,"((A=D)&(((A*2+1)=B)|A=2|C=0))?0:1")
	field(OOPT, "When Zero")
	field(DOPT, "Use CALC")
	field(OUT,"BL04I-VA-VALVE-02:BUSY CA NMS")
}

# This makes the component icon reflect the status
# % gui, VALVE2, sevr
#% gdatag,mbbinary,ro,,STA
record(mbbi, "BL04I-VA-VALVE-02:STA") {
}

#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBD("../../dbd/vacuumValve.dbd")
#! DBDEND


# vacuumValve.template
#% macro, __doc__, Template database for a vacuum valve
# Pete Owens - 26/4/04
# Ian Gillingham - 2009 on ...
# 
# substitutions:
#% macro, device, device name
#% macro, vlvcc, device name of valve control crate
#% macro, port, seral port number (from device manager table)
#% macro, valve, valve number (1-4 within PLC)
#% macro, allowpv, If specified, then only write an open command when this is non-zero. MUST have CP at the end of it
#% macro, whylocked, String to output to EDM synoptic as to precisely why the device is locked and by whom
#% macro, ilk0, Interlock description 0
#% macro, ilk1, Interlock description 1
#% macro, ilk2, Interlock description 2
#% macro, ilk3, Interlock description 3
#% macro, ilk4, Interlock description 4
#% macro, ilk5, Interlock description 5
#% macro, ilk6, Interlock description 6
#% macro, ilk7, Interlock description 7
#% macro, ilk8, Interlock description 8
#% macro, ilk9, Interlock description 9
#% macro, ilk10, Interlock description 10
#% macro, ilk11, Interlock description 11
#% macro, ilk12, Interlock description 12
#% macro, ilk13, Interlock description 13
#% macro, ilk14, Interlock description 14
#% macro, ilk15, Interlock description 15
#% macro, gilk0, Gauge interlock description 0
#% macro, gilk1, Gauge interlock description 1
#% macro, gilk2, Gauge interlock description 2
#% macro, gilk3, Gauge interlock description 3
#% macro, gilk4, Gauge interlock description 4
#% macro, gilk5, Gauge interlock description 5
#% macro, gilk6, Gauge interlock description 6
#% macro, gilk7, Gauge interlock description 7
#% macro, gilk8, Gauge interlock description 8
#% macro, gilk9, Gauge interlock description 9
#% macro, gilk10, Gauge interlock description 10
#% macro, gilk11, Gauge interlock description 11
#% macro, gilk12, Gauge interlock description 12
#% macro, gilk13, Gauge interlock description 13
#% macro, gilk14, Gauge interlock description 14
#% macro, gilk15, Gauge interlock description 15
#% macro, con_label0, Label string for control value 0 (Optional - defaults to Open)
#% macro, con_label1, Label string for control value 1 (Optional - defaults to Close)
#% macro, con_label2, Label string for control value 2 (Optional - defaults to Reset)
#% macro, sta_label0, Label string for status value 0 (Optional - defaults to Fault)
#% macro, sta_label1, Label string for status value 1 (Optional - defaults to Open)
#% macro, sta_label2, Label string for status value 2 (Optional - defaults to Opening)
#% macro, sta_label3, Label string for status value 3 (Optional - defaults to Closed)
#% macro, sta_label4, Label string for status value 4 (Optional - defaults to Closing)

#% macro, tclose_high, HIGH alarm level for TCLOSE record (Optional - defaults to 0)
#% macro, tclose_hihi, HIHI alarm level for TCLOSE record (Optional - defaults to 0)
#% macro, tclose_hsv,  HSV  HIGH severity level for TCLOSE record (Optional - defaults to NO_ALARM)
#% macro, tclose_hhsv, HHSV HIHI severity level for TCLOSE record (Optional - defaults to NO_ALARM)
#% macro, name, Object name and associated gui name

# ##############################################################################
# Control
# 
# % archiver 10 Monitor
# % controldesk Status scon
# % gda,interface,vacuumValve,vacuum,Valve,Valve and shutter controls
# % gda,subsystem,vacuumValve,valve,Set,Set valve state
## Use this PV to request the valve to open or close
# The request will be checked by BL04I-VA-VALVE-03:CALCCON
record(mbbo, "BL04I-VA-VALVE-03:CON") {
  field(DESC, "Control")
  field(ZRST, "Open")
  field(ONST, "Close")
  field(TWST, "Reset")
  field(VAL, "0")
  field(OUT, "BL04I-VA-VALVE-03:CALCCON.A PP")
}

## If this PV is non-zero then an open request will be allowed by 
# BL04I-VA-VALVE-03:CALCCON
record(bi, "BL04I-VA-VALVE-03:OPENALLOWED") 
{
  field(DESC, "Allow/inhibit valve opening")
  field(INP, "")
  field(VAL, "1")
  field(ONAM, "Yes")
  field(ZNAM, "No")    
}

record(stringout, "BL04I-VA-VALVE-03:WHYLOCKED") 
{
  field(DESC, "Reason why device is locked")
  field(VAL, "Open command not allowed")
}

## Pass all requests through to the PLC unless it is an open request and 
# BL04I-VA-VALVE-03:OPENALLOWED is zero
record(calcout, "BL04I-VA-VALVE-03:CALCCON") {
  field(INPB, "BL04I-VA-VALVE-03:OPENALLOWED")
  field(OUT, "BL04I-VA-VALVE-03:ACTUALCON PP")
  field(CALC, "(B=0&A=0)?0:1")
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "A")
}

## Send the request down to the PLC
record(mbbo, "BL04I-VA-VALVE-03:ACTUALCON") {
  field(DESC, "Control")
  field(DTYP, "stream")
  field(OUT, "@Hostlink.proto write(0030) ty_40_0")
  field(ZRST, "Open")
  field(ONST, "Close")
  field(TWST, "Reset")
  field(PRIO, "HIGH")
}

record(bi, "BL04I-VA-VALVE-03:OPENING") {
  field(DESC, "Opening Valves")
  field(PINI, "YES")
  field(INP, "0")
  field(ONAM, "Opening")
}

# % archiver 10 Monitor
record(mbbi, "BL04I-VA-VALVE-03:LASTCON") {
  field(DESC, "Control Readback")
  field(DTYP, "Soft Channel")
  field(ZRST, "Open")
  field(ONST, "Close")
  field(TWST, "Reset")
  field(INP, "BL04I-VA-VALVE-03:GETLASTCON.VAL MS")
}

# ###################################################################
# Interlock Status
# 
# % archiver 10 Monitor
# % controldesk Interlock Status smon
record(mbbi, "BL04I-VA-VALVE-03:ILKSTA") {
  field(DESC, "Interlock Status")
  field(DTYP, "Soft Channel")
  field(ZRST, "Failed")
  field(ONST, "Run Ilks OK")
  field(TWST, "OK")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
  field(INP, "BL04I-VA-VALVE-03:GETILKSTA.VAL MS")
}

# #########################################################################
# Status
# 
# % archiver 10 Monitor
# % controldesk Status smon
# % gui, VALVE3, sevr
record(mbbi, "BL04I-VA-VALVE-03:STA") {
  field(DESC, "Status")
  field(DTYP, "Soft Channel")
  field(ZRST, "Fault")
  field(ONST, "Open")
  field(TWST, "Opening")
  field(THST, "Closed")
  field(FRST, "Closing")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
  field(THSV, "NO_ALARM")
  field(FRSV, "NO_ALARM")
  field(INP, "BL04I-VA-VALVE-03:GETSTA MS")
}

# this tells the gui that this device is moving if STA is Opening or Closing
# % gui, VALVE3, status
record(calcout, "BL04I-VA-VALVE-03:MOVN") {
  field(DTYP, "Soft Channel")
  field(DESC, "Is valve moving")
  field(INPA, "BL04I-VA-VALVE-03:STA CP")
  field(CALC, "A=2|A=4")
}



# ############################################################################
# Number of Operations
# 
# % archiver 10 Monitor
# % controldesk Number of Operations readback
record(longin, "BL04I-VA-VALVE-03:OPS") {
  field(DESC, "Operations")
  field(DTYP, "Soft Channel")
  field(HOPR, "10000")
  field(LOPR, "0")
  field(HIHI, "10000")
  field(HIGH, "9000")
  field(LOW, "0")
  field(LOLO, "-1")
  field(HHSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
  field(LLSV, "MAJOR")
  field(INP, "BL04I-VA-VALVE-03:GETOPS.VAL MS")
}

# #########################################################################
# Mode
record(mbbiDirect, "BL04I-VA-VALVE-03:MODSTA") {
  field(DESC, "Mode")
  field(DTYP, "Raw Soft Channel")
  field(INP, "BL04I-VA-VALVE-03:GETMODSTA MS")
}

# Operational/Service Mode
#% archiver 10 Monitor
#% controldesk Mode smon
#
record(bi, "BL04I-VA-VALVE-03:MODE") {
  field(DESC, "Mode")
  field(INP, "BL04I-VA-VALVE-03:MODSTA.B0 CP MS")
  field(ZNAM, "Operational")
  field(ONAM, "Service")
}


# Raw Air Pressure Status bit pattern for given valve
#% archiver 10 Monitor
#% controldesk Raw Air Pressure Status smon
#
record(bi, "BL04I-VA-VALVE-03:RAWAIRSTA") 
{
  field(DESC, "Raw Air Pressure Status")
  field(INP, "BL04I-VA-VLVCC-01:RAWAIRV03 CP MS")
  field(ZNAM, "Low")
  field(ONAM, "Good")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
}

# SR Valve Controller
#% archiver 10 Monitor
#% controldesk SR Valve smon
#
record(bi, "BL04I-VA-VALVE-03:SRVC") {
  field(DESC, "SR Valve Controller")
  field(INP, "BL04I-VA-VLVCC-01:SRVC CP MS")
  field(SCAN, "Passive")
  field(ZNAM, "No")
  field(ONAM, "Yes")
}

record(longin, "BL04I-VA-VALVE-03:SOFTWARE") {
  field(DESC, "Software version")
  field(DTYP, "Soft Channel")
  field(INP, "BL04I-VA-VLVCC-01:INPSOFT CP MS")
}

# ######################################################################
# Close time trip
#
#% controldesk Close Timeout setpoint
#
record(longin, "BL04I-VA-VALVE-03:INPMINTCLS") {
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0307) ty_40_0")
}

#
#% archiver 10 Monitor
#% controldesk Minimum Close Time readback
#
record(calc, "BL04I-VA-VALVE-03:MINTCLS") {
  field(DESC, "Min Close Time")
  field(CALC, "A/10.0")
  field(INPA, "BL04I-VA-VALVE-03:INPMINTCLS PP MS")
  field(EGU, "s")
  field(PREC, "1")
  field(SCAN, "1 second")
  field(HOPR, "10")
  field(LOPR, "2")
  field(HIHI, "10")
  field(HHSV, "MAJOR")
}

record(longin, "BL04I-VA-VALVE-03:INPMAXTCLS") {
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0305) ty_40_0")
}

#
#% archiver 10 Monitor
#% controldesk Maximum Close Time readback
#
record(calc, "BL04I-VA-VALVE-03:MAXTCLS") {
  field(DESC, "Max Close Time")
  field(CALC, "A/10.0")
  field(INPA, "BL04I-VA-VALVE-03:INPMAXTCLS PP MS")
  field(EGU, "s")
  field(PREC, "1")
  field(SCAN, "1 second")
  field(HOPR, "10")
  field(LOPR, "2")
  field(HIHI, "10")
  field(HHSV, "MINOR")
}

record(longin, "BL04I-VA-VALVE-03:INPTCLOSE") 
{
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0304) ty_40_0")
}

#
#% archiver 10 Monitor
#% controldesk Current Close Time readback
#
record(calc, "BL04I-VA-VALVE-03:TCLOSE") 
{
  field(DESC, "Close Time")
  field(CALC, "A/10.0")
  field(INPA, "BL04I-VA-VALVE-03:INPTCLOSE PP MS")
  field(EGU, "s")
  field(PREC, "1")
  field(SCAN, "1 second")
  field(HOPR, "10")
  field(LOPR, "2")
  field(HIGH, "0")
  field(HIHI, "0")
  field(HSV,  "NO_ALARM")
  field(HHSV, "NO_ALARM")
}

################################################################################
# Interlocks
# 
# % archiver 10 Monitor
# % controldesk Latched Interlock Status smon
record(mbbiDirect, "BL04I-VA-VALVE-03:ILK") {
  field(DESC, "Latched Interlocks")
  field(DTYP, "Raw Soft Channel")
  field(INP, "BL04I-VA-VALVE-03:GETILK.VAL MS")
}

################################################################################
# Individual Interlocks
#
record(bi, "BL04I-VA-VALVE-03:ILK0") {
  field(DESC, "Interlock 0")
  field(INP, "BL04I-VA-VALVE-03:ILK.B0 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Air Healthy")
  field(ONAM, "Air Healthy")
}

record(bi, "BL04I-VA-VALVE-03:ILK1") {
  field(DESC, "Interlock 1")
  field(INP, "BL04I-VA-VALVE-03:ILK.B1 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "IMG 05 Healthy")
  field(ONAM, "IMG 05 Healthy")
}

record(bi, "BL04I-VA-VALVE-03:ILK2") {
  field(DESC, "Interlock 2")
  field(INP, "BL04I-VA-VALVE-03:ILK.B2 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "IMG 06 Healthy")
  field(ONAM, "IMG 06 Healthy")
}

record(bi, "BL04I-VA-VALVE-03:ILK3") {
  field(DESC, "Interlock 3")
  field(INP, "BL04I-VA-VALVE-03:ILK.B3 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "PIRG 05 Healthy")
  field(ONAM, "PIRG 05 Healthy")
}

record(bi, "BL04I-VA-VALVE-03:ILK4") {
  field(DESC, "Interlock 4")
  field(INP, "BL04I-VA-VALVE-03:ILK.B4 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "PIRG 06 Healthy")
  field(ONAM, "PIRG 06 Healthy")
}

record(bi, "BL04I-VA-VALVE-03:ILK5") {
  field(DESC, "Interlock 5")
  field(INP, "BL04I-VA-VALVE-03:ILK.B5 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "QBPM1 Out/V3 Open")
  field(ONAM, "QBPM1 Out/V3 Open")
}

record(bi, "BL04I-VA-VALVE-03:ILK6") {
  field(DESC, "Interlock 6")
  field(INP, "BL04I-VA-VALVE-03:ILK.B6 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-03:ILK7") {
  field(DESC, "Interlock 7")
  field(INP, "BL04I-VA-VALVE-03:ILK.B7 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "QBPM3 Out/V3 Open")
  field(ONAM, "QBPM3 Out/V3 Open")
}

record(bi, "BL04I-VA-VALVE-03:ILK8") {
  field(DESC, "Interlock 8")
  field(INP, "BL04I-VA-VALVE-03:ILK.B8 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-03:ILK9") {
  field(DESC, "Interlock 9")
  field(INP, "BL04I-VA-VALVE-03:ILK.B9 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-03:ILK10") {
  field(DESC, "Interlock 10")
  field(INP, "BL04I-VA-VALVE-03:ILK.BA CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-03:ILK11") {
  field(DESC, "Interlock 11")
  field(INP, "BL04I-VA-VALVE-03:ILK.BB CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-03:ILK12") {
  field(DESC, "Interlock 12")
  field(INP, "BL04I-VA-VALVE-03:ILK.BC CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-03:ILK13") {
  field(DESC, "Interlock 13")
  field(INP, "BL04I-VA-VALVE-03:ILK.BD CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-03:ILK14") {
  field(DESC, "Interlock 14")
  field(INP, "BL04I-VA-VALVE-03:ILK.BE CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-03:ILK15") {
  field(DESC, "Interlock 15")
  field(INP, "BL04I-VA-VALVE-03:ILK.BF CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Valve OK")
  field(ONAM, "Valve OK")
}

# % archiver 10 Monitor
# % controldesk Gauge Interlock Status smon
record(mbbiDirect, "BL04I-VA-VALVE-03:GILK") {
  field(DESC, "Gauge Interlocks")
  field(INP, "BL04I-VA-VALVE-03:GETGILK MS")
}

# % archiver 10 Monitor
# % controldesk Initial Interlock Status smon
record(mbbiDirect, "BL04I-VA-VALVE-03:INIILK") {
  field(DESC, "Initial Interlock")
  field(INP, "BL04I-VA-VALVE-03:GETINIILK MS")
}

# % archiver 10 Monitor
# % controldesk Current Interlock Status smon
record(mbbiDirect, "BL04I-VA-VALVE-03:RAWILK") {
  field(DESC, "Current Interlocks")
  field(INP, "BL04I-VA-VALVE-03:GETRAWILK MS")
}

record(subArray, "BL04I-VA-VALVE-03:GETLASTCON") {
  field(DESC, "Get control readback")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-03:LASTCON")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK03 CP MS")
  field(INDX, "1")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-03:GETILKSTA") {
  field(DESC, "Get interlock status")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-03:ILKSTA")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK03 CP MS")
  field(INDX, "2")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-03:GETSTA") {
  field(DESC, "Get status")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-03:STA")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK03 CP MS")
  field(INDX, "3")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-03:GETOPS") {
  field(DESC, "Get operations")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-03:OPS")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK03 CP MS")
  field(INDX, "4")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-03:GETMODSTA") {
  field(DESC, "Get mode")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-03:MODSTA")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK03 CP MS")
  field(INDX, "5")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-03:GETILK") {
  field(DESC, "Get latched interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-03:ILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK03 CP MS")
  field(INDX, "6")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-03:GETINIILK") {
  field(DESC, "Get initial interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-03:INIILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK03 CP MS")
  field(INDX, "7")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-03:GETRAWILK") {
  field(DESC, "Get current interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-03:RAWILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK03 CP MS")
  field(INDX, "8")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-03:GETGILK") {
  field(DESC, "Get gauge interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-03:GILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK03 CP MS")
  field(INDX, "9")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk IMG Interlock Status smon
#
record(mbbiDirect, "BL04I-VA-VALVE-03:IMGILK") {
  field(DESC, "IMG Interlocks")
  field(INP, "BL04I-VA-VALVE-03:GETIMGILK MS")
}

record(subArray, "BL04I-VA-VALVE-03:GETIMGILK") {
  field(DESC, "IMG Interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-03:IMGILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK00 CP MS")
  field(INDX, "5")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk Pirani Interlock Status smon
#
record(mbbiDirect, "BL04I-VA-VALVE-03:PIRGILK") {
  field(DESC, "Pirani Interlocks")
  field(INP, "BL04I-VA-VALVE-03:GETPIRGILK PP MS")
}

record(subArray, "BL04I-VA-VALVE-03:GETPIRGILK") {
  field(DESC, "Pirani Interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-03:PIRGILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK00 CP MS")
  field(INDX, "6")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk Initial/Run Vacuum Status smon
#
record(mbbiDirect, "BL04I-VA-VALVE-03:IRVAC") {
  field(DESC, "Initial/Run Vacuum")
  field(INP, "BL04I-VA-VALVE-03:GETIRVAC PP MS")
}

record(subArray, "BL04I-VA-VALVE-03:GETIRVAC") {
  field(DESC, "Initial/Run Vacuum")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-03:IRVAC")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK00 CP MS")
  field(INDX, "7")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk Close Time smon
#
#record(calc, "BL04I-VA-VALVE-03:TCLOSE") 
#{
#  field(DESC, "Time to close")
#  field(EGU, "s")
#  field(PREC, "1")
#  field(CALC, "A/10.0")
#  field(INPA, "BL04I-VA-VALVE-03:GETTCLOSE PP MS")
#  field(HIGH, "0")
#  field(HIHI, "0")
#  field(HSV,  "NO_ALARM")
#  field(HHSV, "NO_ALARM")
# }

# This is a helper record to ensure the valve macro is
# correctly converted to a decimal integer (instead of octal if leading zero given),
# ready for input to GETTCLOSE.INDX
#record(calcout, "BL04I-VA-VALVE-03:VNUM") 
#{
#  field(DESC, "The valve index number")
#  field(CALC, "A")
#  field(INPA, "03")
#  field(OUT, "BL04I-VA-VALVE-03:GETTCLOSE.INDX PP")
#  field(PINI, "YES")
#}

#record(subArray, "BL04I-VA-VALVE-03:GETTCLOSE") {
#  field(DESC, "Time to close")
#  field(DTYP, "Soft Channel")
#  field(FLNK, "BL04I-VA-VALVE-03:TCLOSE")
#  field(FTVL, "USHORT")
#  field(INP, "BL04I-VA-VLVCC-01:BLOCK11 CP MS")
##  field(INDX, "03")
#  field(MALM, "10")
#}

################################################################################
# Individual Gauge Interlocks
#
record(mbbiDirect, "BL04I-VA-VALVE-03:GAUGEILK") {
  field(DESC, "Combined Gauge Interlock")
  field(INP, "BL04I-VA-VALVE-03:CALGILK PP MS")
}

record(calc, "BL04I-VA-VALVE-03:CALGILK") {
  field(CALC, "A&B")
  field(FLNK, "BL04I-VA-VALVE-03:GAUGEILK")
  field(INPA, "BL04I-VA-VALVE-03:IMGILK CP MS")
  field(INPB, "BL04I-VA-VALVE-03:PIRGILK CP MS")
}

record(bi, "BL04I-VA-VALVE-03:GILK0") {
  field(DESC, "Gauge ILK 0")
  field(INP, "BL04I-VA-VALVE-03:GAUGEILK.B0 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-01")
  field(ONAM, "GAUGE-01")
}

record(bi, "BL04I-VA-VALVE-03:GILK1") {
  field(DESC, "Gauge ILK 1")
  field(INP, "BL04I-VA-VALVE-03:GAUGEILK.B1 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-02")
  field(ONAM, "GAUGE-02")
}

record(bi, "BL04I-VA-VALVE-03:GILK2") {
  field(DESC, "Gauge ILK 2")
  field(INP, "BL04I-VA-VALVE-03:GAUGEILK.B2 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-03")
  field(ONAM, "GAUGE-03")
}

record(bi, "BL04I-VA-VALVE-03:GILK3") {
  field(DESC, "Gauge ILK 3")
  field(INP, "BL04I-VA-VALVE-03:GAUGEILK.B3 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-04")
  field(ONAM, "GAUGE-04")
}

record(bi, "BL04I-VA-VALVE-03:GILK4") {
  field(DESC, "Gauge ILK 4")
  field(INP, "BL04I-VA-VALVE-03:GAUGEILK.B4 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-05")
  field(ONAM, "GAUGE-05")
}

record(bi, "BL04I-VA-VALVE-03:GILK5") {
  field(DESC, "Gauge ILK 5")
  field(INP, "BL04I-VA-VALVE-03:GAUGEILK.B5 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-06")
  field(ONAM, "GAUGE-06")
}

record(bi, "BL04I-VA-VALVE-03:GILK6") {
  field(DESC, "Gauge ILK 6")
  field(INP, "BL04I-VA-VALVE-03:GAUGEILK.B6 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-03:GILK7") {
  field(DESC, "Gauge ILK 7")
  field(INP, "BL04I-VA-VALVE-03:GAUGEILK.B7 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-03:GILK8") {
  field(DESC, "Gauge ILK 8")
  field(INP, "BL04I-VA-VALVE-03:GAUGEILK.B8 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-03:GILK9") {
  field(DESC, "Gauge ILK 9")
  field(INP, "BL04I-VA-VALVE-03:GAUGEILK.B9 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-03:GILK10") {
  field(DESC, "Gauge ILK 10")
  field(INP, "BL04I-VA-VALVE-03:GAUGEILK.BA CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-03:GILK11") {
  field(DESC, "Gauge ILK 11")
  field(INP, "BL04I-VA-VALVE-03:GAUGEILK.BB CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-03:GILK12") {
  field(DESC, "Gauge ILK 12")
  field(INP, "BL04I-VA-VALVE-03:GAUGEILK.BC CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-03:GILK13") {
  field(DESC, "Gauge ILK 13")
  field(INP, "BL04I-VA-VALVE-03:GAUGEILK.BD CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-03:GILK14") {
  field(DESC, "Gauge ILK 14")
  field(INP, "BL04I-VA-VALVE-03:GAUGEILK.BE CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-03:GILK15") {
  field(DESC, "Gauge ILK 15")
  field(INP, "BL04I-VA-VALVE-03:GAUGEILK.BF CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

################################################################################
# Air Pressure De-bounce Time
#
#% controldesk Air Pressure De-bounce Time setpoint
#
record(ao, "BL04I-VA-VALVE-03:SETADB") {
  field(DESC, "De-bounce Time")
  field(EGU, "s")
  field(PREC, "1")
  field(DOL, "10.0")
  field(PINI, "YES")
# field(OUT, "BL04I-VA-VLVCC-01:CALADB.A PP")
  field(FLNK, "BL04I-VA-VALVE-03:CALTIMEOUT PP")
}

#
#% archiver 10 Monitor
#% controldesk Air Pressure De-bounce Time readback
#
record(calc, "BL04I-VA-VALVE-03:ADB") {
  field(DESC, "De-bounce Time")
  field(CALC, "A/10.0")
# field(INPA, "BL04I-VA-VLVCC-01:INPADB CP MS")
  field(INPA, "BL04I-VA-VALVE-03:INPTIMEOUT PP MS")
  field(SCAN, "1 second")
  field(EGU, "s")
  field(PREC, "1")
}

##### New for inidividual valve ADB values #####
record(calcout, "BL04I-VA-VALVE-03:CALTIMEOUT") {
  field(OUT, "BL04I-VA-VALVE-03:OUTTIMEOUT PP")
  field(CALC, "A*10.0")
  field(INPA, "BL04I-VA-VALVE-03:SETADB")
}

record(ao, "BL04I-VA-VALVE-03:OUTTIMEOUT") {
  field(DTYP, "stream")
  field(OUT, "@Hostlink.proto write(0303) ty_40_0")
}

record(longin, "BL04I-VA-VALVE-03:INPTIMEOUT") {
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0300) ty_40_0")
}

# Supplemental records to make this into a caput callback device that gda can control

#% macro, desc, Box label for gui
#% macro, gda_name, GDA name to export to gda as if it exists
#% macro, gda_desc, GDA description

# This associates an edm screen with the template
# % gui, VALVE3, edm, vacuumValve.edl, device=BL04I-VA-VALVE-03
# % gui, VALVE3, edmembed, vacuumValve-embed.edl, device=BL04I-VA-VALVE-03,box-label=BL04I-VA-VALVE-03

#% gdatag,template,pneumaticCallback,,
#% gdatag,mbbinary,rw,,CONTROL
record(mbbo, "BL04I-VA-VALVE-03:CON") {
  field(FLNK,"BL04I-VA-VALVE-03:SETBUSY")
}

record(calcout, "BL04I-VA-VALVE-03:SETBUSY")
{
    field(CALC, "1")
    field(OUT, "BL04I-VA-VALVE-03:BUSY PP NMS")
    field(FLNK,"BL04I-VA-VALVE-03:DONECALC")
}

record(busy, "BL04I-VA-VALVE-03:BUSY")
{
}

record(calcout,"BL04I-VA-VALVE-03:DONECALC")
{
	field(INPA,"BL04I-VA-VALVE-03:CON MS")
	field(INPB,"BL04I-VA-VALVE-03:STA CPP MS")
	field(INPC,"BL04I-VA-VALVE-03:ILKSTA CPP MS")
	field(INPD,"BL04I-VA-VALVE-03:LASTCON CPP MS")	
	field(CALC,"((A=D)&(((A*2+1)=B)|A=2|C=0))?0:1")
	field(OOPT, "When Zero")
	field(DOPT, "Use CALC")
	field(OUT,"BL04I-VA-VALVE-03:BUSY CA NMS")
}

# This makes the component icon reflect the status
# % gui, VALVE3, sevr
#% gdatag,mbbinary,ro,,STA
record(mbbi, "BL04I-VA-VALVE-03:STA") {
}

#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBD("../../dbd/vacuumValve.dbd")
#! DBDEND


# vacuumValve.template
#% macro, __doc__, Template database for a vacuum valve
# Pete Owens - 26/4/04
# Ian Gillingham - 2009 on ...
# 
# substitutions:
#% macro, device, device name
#% macro, vlvcc, device name of valve control crate
#% macro, port, seral port number (from device manager table)
#% macro, valve, valve number (1-4 within PLC)
#% macro, allowpv, If specified, then only write an open command when this is non-zero. MUST have CP at the end of it
#% macro, whylocked, String to output to EDM synoptic as to precisely why the device is locked and by whom
#% macro, ilk0, Interlock description 0
#% macro, ilk1, Interlock description 1
#% macro, ilk2, Interlock description 2
#% macro, ilk3, Interlock description 3
#% macro, ilk4, Interlock description 4
#% macro, ilk5, Interlock description 5
#% macro, ilk6, Interlock description 6
#% macro, ilk7, Interlock description 7
#% macro, ilk8, Interlock description 8
#% macro, ilk9, Interlock description 9
#% macro, ilk10, Interlock description 10
#% macro, ilk11, Interlock description 11
#% macro, ilk12, Interlock description 12
#% macro, ilk13, Interlock description 13
#% macro, ilk14, Interlock description 14
#% macro, ilk15, Interlock description 15
#% macro, gilk0, Gauge interlock description 0
#% macro, gilk1, Gauge interlock description 1
#% macro, gilk2, Gauge interlock description 2
#% macro, gilk3, Gauge interlock description 3
#% macro, gilk4, Gauge interlock description 4
#% macro, gilk5, Gauge interlock description 5
#% macro, gilk6, Gauge interlock description 6
#% macro, gilk7, Gauge interlock description 7
#% macro, gilk8, Gauge interlock description 8
#% macro, gilk9, Gauge interlock description 9
#% macro, gilk10, Gauge interlock description 10
#% macro, gilk11, Gauge interlock description 11
#% macro, gilk12, Gauge interlock description 12
#% macro, gilk13, Gauge interlock description 13
#% macro, gilk14, Gauge interlock description 14
#% macro, gilk15, Gauge interlock description 15
#% macro, con_label0, Label string for control value 0 (Optional - defaults to Open)
#% macro, con_label1, Label string for control value 1 (Optional - defaults to Close)
#% macro, con_label2, Label string for control value 2 (Optional - defaults to Reset)
#% macro, sta_label0, Label string for status value 0 (Optional - defaults to Fault)
#% macro, sta_label1, Label string for status value 1 (Optional - defaults to Open)
#% macro, sta_label2, Label string for status value 2 (Optional - defaults to Opening)
#% macro, sta_label3, Label string for status value 3 (Optional - defaults to Closed)
#% macro, sta_label4, Label string for status value 4 (Optional - defaults to Closing)

#% macro, tclose_high, HIGH alarm level for TCLOSE record (Optional - defaults to 0)
#% macro, tclose_hihi, HIHI alarm level for TCLOSE record (Optional - defaults to 0)
#% macro, tclose_hsv,  HSV  HIGH severity level for TCLOSE record (Optional - defaults to NO_ALARM)
#% macro, tclose_hhsv, HHSV HIHI severity level for TCLOSE record (Optional - defaults to NO_ALARM)
#% macro, name, Object name and associated gui name

# ##############################################################################
# Control
# 
# % archiver 10 Monitor
# % controldesk Status scon
# % gda,interface,vacuumValve,vacuum,Valve,Valve and shutter controls
# % gda,subsystem,vacuumValve,valve,Set,Set valve state
## Use this PV to request the valve to open or close
# The request will be checked by BL04I-VA-VALVE-11:CALCCON
record(mbbo, "BL04I-VA-VALVE-11:CON") {
  field(DESC, "Control")
  field(ZRST, "Open")
  field(ONST, "Close")
  field(TWST, "Reset")
  field(VAL, "0")
  field(OUT, "BL04I-VA-VALVE-11:CALCCON.A PP")
}

## If this PV is non-zero then an open request will be allowed by 
# BL04I-VA-VALVE-11:CALCCON
record(bi, "BL04I-VA-VALVE-11:OPENALLOWED") 
{
  field(DESC, "Allow/inhibit valve opening")
  field(INP, "")
  field(VAL, "1")
  field(ONAM, "Yes")
  field(ZNAM, "No")    
}

record(stringout, "BL04I-VA-VALVE-11:WHYLOCKED") 
{
  field(DESC, "Reason why device is locked")
  field(VAL, "Open command not allowed")
}

## Pass all requests through to the PLC unless it is an open request and 
# BL04I-VA-VALVE-11:OPENALLOWED is zero
record(calcout, "BL04I-VA-VALVE-11:CALCCON") {
  field(INPB, "BL04I-VA-VALVE-11:OPENALLOWED")
  field(OUT, "BL04I-VA-VALVE-11:ACTUALCON PP")
  field(CALC, "(B=0&A=0)?0:1")
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "A")
}

## Send the request down to the PLC
record(mbbo, "BL04I-VA-VALVE-11:ACTUALCON") {
  field(DESC, "Control")
  field(DTYP, "stream")
  field(OUT, "@Hostlink.proto write(0050) ty_40_0")
  field(ZRST, "Open")
  field(ONST, "Close")
  field(TWST, "Reset")
  field(PRIO, "HIGH")
}

record(bi, "BL04I-VA-VALVE-11:OPENING") {
  field(DESC, "Opening Valves")
  field(PINI, "YES")
  field(INP, "0")
  field(ONAM, "Opening")
}

# % archiver 10 Monitor
record(mbbi, "BL04I-VA-VALVE-11:LASTCON") {
  field(DESC, "Control Readback")
  field(DTYP, "Soft Channel")
  field(ZRST, "Open")
  field(ONST, "Close")
  field(TWST, "Reset")
  field(INP, "BL04I-VA-VALVE-11:GETLASTCON.VAL MS")
}

# ###################################################################
# Interlock Status
# 
# % archiver 10 Monitor
# % controldesk Interlock Status smon
record(mbbi, "BL04I-VA-VALVE-11:ILKSTA") {
  field(DESC, "Interlock Status")
  field(DTYP, "Soft Channel")
  field(ZRST, "Failed")
  field(ONST, "Run Ilks OK")
  field(TWST, "OK")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
  field(INP, "BL04I-VA-VALVE-11:GETILKSTA.VAL MS")
}

# #########################################################################
# Status
# 
# % archiver 10 Monitor
# % controldesk Status smon
# % gui, VALVE11, sevr
record(mbbi, "BL04I-VA-VALVE-11:STA") {
  field(DESC, "Status")
  field(DTYP, "Soft Channel")
  field(ZRST, "Fault")
  field(ONST, "Open")
  field(TWST, "Opening")
  field(THST, "Closed")
  field(FRST, "Closing")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
  field(THSV, "NO_ALARM")
  field(FRSV, "NO_ALARM")
  field(INP, "BL04I-VA-VALVE-11:GETSTA MS")
}

# this tells the gui that this device is moving if STA is Opening or Closing
# % gui, VALVE11, status
record(calcout, "BL04I-VA-VALVE-11:MOVN") {
  field(DTYP, "Soft Channel")
  field(DESC, "Is valve moving")
  field(INPA, "BL04I-VA-VALVE-11:STA CP")
  field(CALC, "A=2|A=4")
}



# ############################################################################
# Number of Operations
# 
# % archiver 10 Monitor
# % controldesk Number of Operations readback
record(longin, "BL04I-VA-VALVE-11:OPS") {
  field(DESC, "Operations")
  field(DTYP, "Soft Channel")
  field(HOPR, "10000")
  field(LOPR, "0")
  field(HIHI, "10000")
  field(HIGH, "9000")
  field(LOW, "0")
  field(LOLO, "-1")
  field(HHSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
  field(LLSV, "MAJOR")
  field(INP, "BL04I-VA-VALVE-11:GETOPS.VAL MS")
}

# #########################################################################
# Mode
record(mbbiDirect, "BL04I-VA-VALVE-11:MODSTA") {
  field(DESC, "Mode")
  field(DTYP, "Raw Soft Channel")
  field(INP, "BL04I-VA-VALVE-11:GETMODSTA MS")
}

# Operational/Service Mode
#% archiver 10 Monitor
#% controldesk Mode smon
#
record(bi, "BL04I-VA-VALVE-11:MODE") {
  field(DESC, "Mode")
  field(INP, "BL04I-VA-VALVE-11:MODSTA.B0 CP MS")
  field(ZNAM, "Operational")
  field(ONAM, "Service")
}


# Raw Air Pressure Status bit pattern for given valve
#% archiver 10 Monitor
#% controldesk Raw Air Pressure Status smon
#
record(bi, "BL04I-VA-VALVE-11:RAWAIRSTA") 
{
  field(DESC, "Raw Air Pressure Status")
  field(INP, "BL04I-VA-VLVCC-01:RAWAIRV05 CP MS")
  field(ZNAM, "Low")
  field(ONAM, "Good")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
}

# SR Valve Controller
#% archiver 10 Monitor
#% controldesk SR Valve smon
#
record(bi, "BL04I-VA-VALVE-11:SRVC") {
  field(DESC, "SR Valve Controller")
  field(INP, "BL04I-VA-VLVCC-01:SRVC CP MS")
  field(SCAN, "Passive")
  field(ZNAM, "No")
  field(ONAM, "Yes")
}

record(longin, "BL04I-VA-VALVE-11:SOFTWARE") {
  field(DESC, "Software version")
  field(DTYP, "Soft Channel")
  field(INP, "BL04I-VA-VLVCC-01:INPSOFT CP MS")
}

# ######################################################################
# Close time trip
#
#% controldesk Close Timeout setpoint
#
record(longin, "BL04I-VA-VALVE-11:INPMINTCLS") {
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0507) ty_40_0")
}

#
#% archiver 10 Monitor
#% controldesk Minimum Close Time readback
#
record(calc, "BL04I-VA-VALVE-11:MINTCLS") {
  field(DESC, "Min Close Time")
  field(CALC, "A/10.0")
  field(INPA, "BL04I-VA-VALVE-11:INPMINTCLS PP MS")
  field(EGU, "s")
  field(PREC, "1")
  field(SCAN, "1 second")
  field(HOPR, "10")
  field(LOPR, "2")
  field(HIHI, "10")
  field(HHSV, "MAJOR")
}

record(longin, "BL04I-VA-VALVE-11:INPMAXTCLS") {
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0505) ty_40_0")
}

#
#% archiver 10 Monitor
#% controldesk Maximum Close Time readback
#
record(calc, "BL04I-VA-VALVE-11:MAXTCLS") {
  field(DESC, "Max Close Time")
  field(CALC, "A/10.0")
  field(INPA, "BL04I-VA-VALVE-11:INPMAXTCLS PP MS")
  field(EGU, "s")
  field(PREC, "1")
  field(SCAN, "1 second")
  field(HOPR, "10")
  field(LOPR, "2")
  field(HIHI, "10")
  field(HHSV, "MINOR")
}

record(longin, "BL04I-VA-VALVE-11:INPTCLOSE") 
{
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0504) ty_40_0")
}

#
#% archiver 10 Monitor
#% controldesk Current Close Time readback
#
record(calc, "BL04I-VA-VALVE-11:TCLOSE") 
{
  field(DESC, "Close Time")
  field(CALC, "A/10.0")
  field(INPA, "BL04I-VA-VALVE-11:INPTCLOSE PP MS")
  field(EGU, "s")
  field(PREC, "1")
  field(SCAN, "1 second")
  field(HOPR, "10")
  field(LOPR, "2")
  field(HIGH, "0")
  field(HIHI, "0")
  field(HSV,  "NO_ALARM")
  field(HHSV, "NO_ALARM")
}

################################################################################
# Interlocks
# 
# % archiver 10 Monitor
# % controldesk Latched Interlock Status smon
record(mbbiDirect, "BL04I-VA-VALVE-11:ILK") {
  field(DESC, "Latched Interlocks")
  field(DTYP, "Raw Soft Channel")
  field(INP, "BL04I-VA-VALVE-11:GETILK.VAL MS")
}

################################################################################
# Individual Interlocks
#
record(bi, "BL04I-VA-VALVE-11:ILK0") {
  field(DESC, "Interlock 0")
  field(INP, "BL04I-VA-VALVE-11:ILK.B0 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Air Healthy")
  field(ONAM, "Air Healthy")
}

record(bi, "BL04I-VA-VALVE-11:ILK1") {
  field(DESC, "Interlock 1")
  field(INP, "BL04I-VA-VALVE-11:ILK.B1 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "IMG 01/V11 Ope & Run")
  field(ONAM, "IMG 01/V11 Ope & Run")
}

record(bi, "BL04I-VA-VALVE-11:ILK2") {
  field(DESC, "Interlock 2")
  field(INP, "BL04I-VA-VALVE-11:ILK.B2 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "IMG 02/V11 Ope & Run")
  field(ONAM, "IMG 02/V11 Ope & Run")
}

record(bi, "BL04I-VA-VALVE-11:ILK3") {
  field(DESC, "Interlock 3")
  field(INP, "BL04I-VA-VALVE-11:ILK.B3 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "IMG 03/V11 Ope & Run")
  field(ONAM, "IMG 03/V11 Ope & Run")
}

record(bi, "BL04I-VA-VALVE-11:ILK4") {
  field(DESC, "Interlock 4")
  field(INP, "BL04I-VA-VALVE-11:ILK.B4 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "PIRG 01 Healthy")
  field(ONAM, "PIRG 01 Healthy")
}

record(bi, "BL04I-VA-VALVE-11:ILK5") {
  field(DESC, "Interlock 5")
  field(INP, "BL04I-VA-VALVE-11:ILK.B5 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "PIRG 02 Healthy")
  field(ONAM, "PIRG 02 Healthy")
}

record(bi, "BL04I-VA-VALVE-11:ILK6") {
  field(DESC, "Interlock 6")
  field(INP, "BL04I-VA-VALVE-11:ILK.B6 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "PIRG 03 Healthy")
  field(ONAM, "PIRG 03 Healthy")
}

record(bi, "BL04I-VA-VALVE-11:ILK7") {
  field(DESC, "Interlock 7")
  field(INP, "BL04I-VA-VALVE-11:ILK.B7 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Close Rq & ABSB Ope")
  field(ONAM, "Close Rq & ABSB Ope")
}

record(bi, "BL04I-VA-VALVE-11:ILK8") {
  field(DESC, "Interlock 8")
  field(INP, "BL04I-VA-VALVE-11:ILK.B8 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "QBPM1 Out/V11 Open")
  field(ONAM, "QBPM1 Out/V11 Open")
}

record(bi, "BL04I-VA-VALVE-11:ILK9") {
  field(DESC, "Interlock 9")
  field(INP, "BL04I-VA-VALVE-11:ILK.B9 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-11:ILK10") {
  field(DESC, "Interlock 10")
  field(INP, "BL04I-VA-VALVE-11:ILK.BA CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "QBPM3 Out/V11 Open")
  field(ONAM, "QBPM3 Out/V11 Open")
}

record(bi, "BL04I-VA-VALVE-11:ILK11") {
  field(DESC, "Interlock 11")
  field(INP, "BL04I-VA-VALVE-11:ILK.BB CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-11:ILK12") {
  field(DESC, "Interlock 12")
  field(INP, "BL04I-VA-VALVE-11:ILK.BC CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-11:ILK13") {
  field(DESC, "Interlock 13")
  field(INP, "BL04I-VA-VALVE-11:ILK.BD CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-11:ILK14") {
  field(DESC, "Interlock 14")
  field(INP, "BL04I-VA-VALVE-11:ILK.BE CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VALVE-11:ILK15") {
  field(DESC, "Interlock 15")
  field(INP, "BL04I-VA-VALVE-11:ILK.BF CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Valve OK")
  field(ONAM, "Valve OK")
}

# % archiver 10 Monitor
# % controldesk Gauge Interlock Status smon
record(mbbiDirect, "BL04I-VA-VALVE-11:GILK") {
  field(DESC, "Gauge Interlocks")
  field(INP, "BL04I-VA-VALVE-11:GETGILK MS")
}

# % archiver 10 Monitor
# % controldesk Initial Interlock Status smon
record(mbbiDirect, "BL04I-VA-VALVE-11:INIILK") {
  field(DESC, "Initial Interlock")
  field(INP, "BL04I-VA-VALVE-11:GETINIILK MS")
}

# % archiver 10 Monitor
# % controldesk Current Interlock Status smon
record(mbbiDirect, "BL04I-VA-VALVE-11:RAWILK") {
  field(DESC, "Current Interlocks")
  field(INP, "BL04I-VA-VALVE-11:GETRAWILK MS")
}

record(subArray, "BL04I-VA-VALVE-11:GETLASTCON") {
  field(DESC, "Get control readback")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-11:LASTCON")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK05 CP MS")
  field(INDX, "1")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-11:GETILKSTA") {
  field(DESC, "Get interlock status")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-11:ILKSTA")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK05 CP MS")
  field(INDX, "2")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-11:GETSTA") {
  field(DESC, "Get status")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-11:STA")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK05 CP MS")
  field(INDX, "3")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-11:GETOPS") {
  field(DESC, "Get operations")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-11:OPS")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK05 CP MS")
  field(INDX, "4")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-11:GETMODSTA") {
  field(DESC, "Get mode")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-11:MODSTA")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK05 CP MS")
  field(INDX, "5")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-11:GETILK") {
  field(DESC, "Get latched interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-11:ILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK05 CP MS")
  field(INDX, "6")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-11:GETINIILK") {
  field(DESC, "Get initial interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-11:INIILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK05 CP MS")
  field(INDX, "7")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-11:GETRAWILK") {
  field(DESC, "Get current interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-11:RAWILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK05 CP MS")
  field(INDX, "8")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VALVE-11:GETGILK") {
  field(DESC, "Get gauge interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-11:GILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK05 CP MS")
  field(INDX, "9")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk IMG Interlock Status smon
#
record(mbbiDirect, "BL04I-VA-VALVE-11:IMGILK") {
  field(DESC, "IMG Interlocks")
  field(INP, "BL04I-VA-VALVE-11:GETIMGILK MS")
}

record(subArray, "BL04I-VA-VALVE-11:GETIMGILK") {
  field(DESC, "IMG Interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-11:IMGILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK00 CP MS")
  field(INDX, "5")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk Pirani Interlock Status smon
#
record(mbbiDirect, "BL04I-VA-VALVE-11:PIRGILK") {
  field(DESC, "Pirani Interlocks")
  field(INP, "BL04I-VA-VALVE-11:GETPIRGILK PP MS")
}

record(subArray, "BL04I-VA-VALVE-11:GETPIRGILK") {
  field(DESC, "Pirani Interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-11:PIRGILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK00 CP MS")
  field(INDX, "6")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk Initial/Run Vacuum Status smon
#
record(mbbiDirect, "BL04I-VA-VALVE-11:IRVAC") {
  field(DESC, "Initial/Run Vacuum")
  field(INP, "BL04I-VA-VALVE-11:GETIRVAC PP MS")
}

record(subArray, "BL04I-VA-VALVE-11:GETIRVAC") {
  field(DESC, "Initial/Run Vacuum")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VALVE-11:IRVAC")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK00 CP MS")
  field(INDX, "7")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk Close Time smon
#
#record(calc, "BL04I-VA-VALVE-11:TCLOSE") 
#{
#  field(DESC, "Time to close")
#  field(EGU, "s")
#  field(PREC, "1")
#  field(CALC, "A/10.0")
#  field(INPA, "BL04I-VA-VALVE-11:GETTCLOSE PP MS")
#  field(HIGH, "0")
#  field(HIHI, "0")
#  field(HSV,  "NO_ALARM")
#  field(HHSV, "NO_ALARM")
# }

# This is a helper record to ensure the valve macro is
# correctly converted to a decimal integer (instead of octal if leading zero given),
# ready for input to GETTCLOSE.INDX
#record(calcout, "BL04I-VA-VALVE-11:VNUM") 
#{
#  field(DESC, "The valve index number")
#  field(CALC, "A")
#  field(INPA, "05")
#  field(OUT, "BL04I-VA-VALVE-11:GETTCLOSE.INDX PP")
#  field(PINI, "YES")
#}

#record(subArray, "BL04I-VA-VALVE-11:GETTCLOSE") {
#  field(DESC, "Time to close")
#  field(DTYP, "Soft Channel")
#  field(FLNK, "BL04I-VA-VALVE-11:TCLOSE")
#  field(FTVL, "USHORT")
#  field(INP, "BL04I-VA-VLVCC-01:BLOCK11 CP MS")
##  field(INDX, "05")
#  field(MALM, "10")
#}

################################################################################
# Individual Gauge Interlocks
#
record(mbbiDirect, "BL04I-VA-VALVE-11:GAUGEILK") {
  field(DESC, "Combined Gauge Interlock")
  field(INP, "BL04I-VA-VALVE-11:CALGILK PP MS")
}

record(calc, "BL04I-VA-VALVE-11:CALGILK") {
  field(CALC, "A&B")
  field(FLNK, "BL04I-VA-VALVE-11:GAUGEILK")
  field(INPA, "BL04I-VA-VALVE-11:IMGILK CP MS")
  field(INPB, "BL04I-VA-VALVE-11:PIRGILK CP MS")
}

record(bi, "BL04I-VA-VALVE-11:GILK0") {
  field(DESC, "Gauge ILK 0")
  field(INP, "BL04I-VA-VALVE-11:GAUGEILK.B0 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-01")
  field(ONAM, "GAUGE-01")
}

record(bi, "BL04I-VA-VALVE-11:GILK1") {
  field(DESC, "Gauge ILK 1")
  field(INP, "BL04I-VA-VALVE-11:GAUGEILK.B1 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-02")
  field(ONAM, "GAUGE-02")
}

record(bi, "BL04I-VA-VALVE-11:GILK2") {
  field(DESC, "Gauge ILK 2")
  field(INP, "BL04I-VA-VALVE-11:GAUGEILK.B2 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-03")
  field(ONAM, "GAUGE-03")
}

record(bi, "BL04I-VA-VALVE-11:GILK3") {
  field(DESC, "Gauge ILK 3")
  field(INP, "BL04I-VA-VALVE-11:GAUGEILK.B3 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-04")
  field(ONAM, "GAUGE-04")
}

record(bi, "BL04I-VA-VALVE-11:GILK4") {
  field(DESC, "Gauge ILK 4")
  field(INP, "BL04I-VA-VALVE-11:GAUGEILK.B4 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-05")
  field(ONAM, "GAUGE-05")
}

record(bi, "BL04I-VA-VALVE-11:GILK5") {
  field(DESC, "Gauge ILK 5")
  field(INP, "BL04I-VA-VALVE-11:GAUGEILK.B5 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "GAUGE-06")
  field(ONAM, "GAUGE-06")
}

record(bi, "BL04I-VA-VALVE-11:GILK6") {
  field(DESC, "Gauge ILK 6")
  field(INP, "BL04I-VA-VALVE-11:GAUGEILK.B6 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-11:GILK7") {
  field(DESC, "Gauge ILK 7")
  field(INP, "BL04I-VA-VALVE-11:GAUGEILK.B7 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-11:GILK8") {
  field(DESC, "Gauge ILK 8")
  field(INP, "BL04I-VA-VALVE-11:GAUGEILK.B8 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-11:GILK9") {
  field(DESC, "Gauge ILK 9")
  field(INP, "BL04I-VA-VALVE-11:GAUGEILK.B9 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-11:GILK10") {
  field(DESC, "Gauge ILK 10")
  field(INP, "BL04I-VA-VALVE-11:GAUGEILK.BA CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-11:GILK11") {
  field(DESC, "Gauge ILK 11")
  field(INP, "BL04I-VA-VALVE-11:GAUGEILK.BB CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-11:GILK12") {
  field(DESC, "Gauge ILK 12")
  field(INP, "BL04I-VA-VALVE-11:GAUGEILK.BC CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-11:GILK13") {
  field(DESC, "Gauge ILK 13")
  field(INP, "BL04I-VA-VALVE-11:GAUGEILK.BD CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-11:GILK14") {
  field(DESC, "Gauge ILK 14")
  field(INP, "BL04I-VA-VALVE-11:GAUGEILK.BE CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-VA-VALVE-11:GILK15") {
  field(DESC, "Gauge ILK 15")
  field(INP, "BL04I-VA-VALVE-11:GAUGEILK.BF CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

################################################################################
# Air Pressure De-bounce Time
#
#% controldesk Air Pressure De-bounce Time setpoint
#
record(ao, "BL04I-VA-VALVE-11:SETADB") {
  field(DESC, "De-bounce Time")
  field(EGU, "s")
  field(PREC, "1")
  field(DOL, "10.0")
  field(PINI, "YES")
# field(OUT, "BL04I-VA-VLVCC-01:CALADB.A PP")
  field(FLNK, "BL04I-VA-VALVE-11:CALTIMEOUT PP")
}

#
#% archiver 10 Monitor
#% controldesk Air Pressure De-bounce Time readback
#
record(calc, "BL04I-VA-VALVE-11:ADB") {
  field(DESC, "De-bounce Time")
  field(CALC, "A/10.0")
# field(INPA, "BL04I-VA-VLVCC-01:INPADB CP MS")
  field(INPA, "BL04I-VA-VALVE-11:INPTIMEOUT PP MS")
  field(SCAN, "1 second")
  field(EGU, "s")
  field(PREC, "1")
}

##### New for inidividual valve ADB values #####
record(calcout, "BL04I-VA-VALVE-11:CALTIMEOUT") {
  field(OUT, "BL04I-VA-VALVE-11:OUTTIMEOUT PP")
  field(CALC, "A*10.0")
  field(INPA, "BL04I-VA-VALVE-11:SETADB")
}

record(ao, "BL04I-VA-VALVE-11:OUTTIMEOUT") {
  field(DTYP, "stream")
  field(OUT, "@Hostlink.proto write(0503) ty_40_0")
}

record(longin, "BL04I-VA-VALVE-11:INPTIMEOUT") {
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0500) ty_40_0")
}

# Supplemental records to make this into a caput callback device that gda can control

#% macro, desc, Box label for gui
#% macro, gda_name, GDA name to export to gda as if it exists
#% macro, gda_desc, GDA description

# This associates an edm screen with the template
# % gui, VALVE11, edm, vacuumValve.edl, device=BL04I-VA-VALVE-11
# % gui, VALVE11, edmembed, vacuumValve-embed.edl, device=BL04I-VA-VALVE-11,box-label=BL04I-VA-VALVE-11

#% gdatag,template,pneumaticCallback,,
#% gdatag,mbbinary,rw,,CONTROL
record(mbbo, "BL04I-VA-VALVE-11:CON") {
  field(FLNK,"BL04I-VA-VALVE-11:SETBUSY")
}

record(calcout, "BL04I-VA-VALVE-11:SETBUSY")
{
    field(CALC, "1")
    field(OUT, "BL04I-VA-VALVE-11:BUSY PP NMS")
    field(FLNK,"BL04I-VA-VALVE-11:DONECALC")
}

record(busy, "BL04I-VA-VALVE-11:BUSY")
{
}

record(calcout,"BL04I-VA-VALVE-11:DONECALC")
{
	field(INPA,"BL04I-VA-VALVE-11:CON MS")
	field(INPB,"BL04I-VA-VALVE-11:STA CPP MS")
	field(INPC,"BL04I-VA-VALVE-11:ILKSTA CPP MS")
	field(INPD,"BL04I-VA-VALVE-11:LASTCON CPP MS")	
	field(CALC,"((A=D)&(((A*2+1)=B)|A=2|C=0))?0:1")
	field(OOPT, "When Zero")
	field(DOPT, "Use CALC")
	field(OUT,"BL04I-VA-VALVE-11:BUSY CA NMS")
}

# This makes the component icon reflect the status
# % gui, VALVE11, sevr
#% gdatag,mbbinary,ro,,STA
record(mbbi, "BL04I-VA-VALVE-11:STA") {
}

#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBD("../../dbd/vacuumValve.dbd")
#! DBDEND


# vacuumValve.template
#% macro, __doc__, Template database for a vacuum valve
# Pete Owens - 26/4/04
# Ian Gillingham - 2009 on ...
# 
# substitutions:
#% macro, device, device name
#% macro, vlvcc, device name of valve control crate
#% macro, port, seral port number (from device manager table)
#% macro, valve, valve number (1-4 within PLC)
#% macro, allowpv, If specified, then only write an open command when this is non-zero. MUST have CP at the end of it
#% macro, whylocked, String to output to EDM synoptic as to precisely why the device is locked and by whom
#% macro, ilk0, Interlock description 0
#% macro, ilk1, Interlock description 1
#% macro, ilk2, Interlock description 2
#% macro, ilk3, Interlock description 3
#% macro, ilk4, Interlock description 4
#% macro, ilk5, Interlock description 5
#% macro, ilk6, Interlock description 6
#% macro, ilk7, Interlock description 7
#% macro, ilk8, Interlock description 8
#% macro, ilk9, Interlock description 9
#% macro, ilk10, Interlock description 10
#% macro, ilk11, Interlock description 11
#% macro, ilk12, Interlock description 12
#% macro, ilk13, Interlock description 13
#% macro, ilk14, Interlock description 14
#% macro, ilk15, Interlock description 15
#% macro, gilk0, Gauge interlock description 0
#% macro, gilk1, Gauge interlock description 1
#% macro, gilk2, Gauge interlock description 2
#% macro, gilk3, Gauge interlock description 3
#% macro, gilk4, Gauge interlock description 4
#% macro, gilk5, Gauge interlock description 5
#% macro, gilk6, Gauge interlock description 6
#% macro, gilk7, Gauge interlock description 7
#% macro, gilk8, Gauge interlock description 8
#% macro, gilk9, Gauge interlock description 9
#% macro, gilk10, Gauge interlock description 10
#% macro, gilk11, Gauge interlock description 11
#% macro, gilk12, Gauge interlock description 12
#% macro, gilk13, Gauge interlock description 13
#% macro, gilk14, Gauge interlock description 14
#% macro, gilk15, Gauge interlock description 15
#% macro, con_label0, Label string for control value 0 (Optional - defaults to Open)
#% macro, con_label1, Label string for control value 1 (Optional - defaults to Close)
#% macro, con_label2, Label string for control value 2 (Optional - defaults to Reset)
#% macro, sta_label0, Label string for status value 0 (Optional - defaults to Fault)
#% macro, sta_label1, Label string for status value 1 (Optional - defaults to Open)
#% macro, sta_label2, Label string for status value 2 (Optional - defaults to Opening)
#% macro, sta_label3, Label string for status value 3 (Optional - defaults to Closed)
#% macro, sta_label4, Label string for status value 4 (Optional - defaults to Closing)

#% macro, tclose_high, HIGH alarm level for TCLOSE record (Optional - defaults to 0)
#% macro, tclose_hihi, HIHI alarm level for TCLOSE record (Optional - defaults to 0)
#% macro, tclose_hsv,  HSV  HIGH severity level for TCLOSE record (Optional - defaults to NO_ALARM)
#% macro, tclose_hhsv, HHSV HIHI severity level for TCLOSE record (Optional - defaults to NO_ALARM)
#% macro, name, Object name and associated gui name

# ##############################################################################
# Control
# 
# % archiver 10 Monitor
# % controldesk Status scon
# % gda,interface,vacuumValve,vacuum,Valve,Valve and shutter controls
# % gda,subsystem,vacuumValve,valve,Set,Set valve state
## Use this PV to request the valve to open or close
# The request will be checked by BL04I-PS-SHTR-01:CALCCON
record(mbbo, "BL04I-PS-SHTR-01:CON") {
  field(DESC, "Control")
  field(ZRST, "Open")
  field(ONST, "Close")
  field(TWST, "Reset")
  field(VAL, "0")
  field(OUT, "BL04I-PS-SHTR-01:CALCCON.A PP")
}

## If this PV is non-zero then an open request will be allowed by 
# BL04I-PS-SHTR-01:CALCCON
record(bi, "BL04I-PS-SHTR-01:OPENALLOWED") 
{
  field(DESC, "Allow/inhibit valve opening")
  field(INP, "")
  field(VAL, "1")
  field(ONAM, "Yes")
  field(ZNAM, "No")    
}

record(stringout, "BL04I-PS-SHTR-01:WHYLOCKED") 
{
  field(DESC, "Reason why device is locked")
  field(VAL, "Open command not allowed")
}

## Pass all requests through to the PLC unless it is an open request and 
# BL04I-PS-SHTR-01:OPENALLOWED is zero
record(calcout, "BL04I-PS-SHTR-01:CALCCON") {
  field(INPB, "BL04I-PS-SHTR-01:OPENALLOWED")
  field(OUT, "BL04I-PS-SHTR-01:ACTUALCON PP")
  field(CALC, "(B=0&A=0)?0:1")
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "A")
}

## Send the request down to the PLC
record(mbbo, "BL04I-PS-SHTR-01:ACTUALCON") {
  field(DESC, "Control")
  field(DTYP, "stream")
  field(OUT, "@Hostlink.proto write(0040) ty_40_0")
  field(ZRST, "Open")
  field(ONST, "Close")
  field(TWST, "Reset")
  field(PRIO, "HIGH")
}

record(bi, "BL04I-PS-SHTR-01:OPENING") {
  field(DESC, "Opening Valves")
  field(PINI, "YES")
  field(INP, "0")
  field(ONAM, "Opening")
}

# % archiver 10 Monitor
record(mbbi, "BL04I-PS-SHTR-01:LASTCON") {
  field(DESC, "Control Readback")
  field(DTYP, "Soft Channel")
  field(ZRST, "Open")
  field(ONST, "Close")
  field(TWST, "Reset")
  field(INP, "BL04I-PS-SHTR-01:GETLASTCON.VAL MS")
}

# ###################################################################
# Interlock Status
# 
# % archiver 10 Monitor
# % controldesk Interlock Status smon
record(mbbi, "BL04I-PS-SHTR-01:ILKSTA") {
  field(DESC, "Interlock Status")
  field(DTYP, "Soft Channel")
  field(ZRST, "Failed")
  field(ONST, "Run Ilks OK")
  field(TWST, "OK")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
  field(INP, "BL04I-PS-SHTR-01:GETILKSTA.VAL MS")
}

# #########################################################################
# Status
# 
# % archiver 10 Monitor
# % controldesk Status smon
# % gui, SHTR1, sevr
record(mbbi, "BL04I-PS-SHTR-01:STA") {
  field(DESC, "Status")
  field(DTYP, "Soft Channel")
  field(ZRST, "Fault")
  field(ONST, "Open")
  field(TWST, "Opening")
  field(THST, "Closed")
  field(FRST, "Closing")
  field(ZRSV, "MAJOR")
  field(ONSV, "NO_ALARM")
  field(TWSV, "NO_ALARM")
  field(THSV, "NO_ALARM")
  field(FRSV, "NO_ALARM")
  field(INP, "BL04I-PS-SHTR-01:GETSTA MS")
}

# this tells the gui that this device is moving if STA is Opening or Closing
# % gui, SHTR1, status
record(calcout, "BL04I-PS-SHTR-01:MOVN") {
  field(DTYP, "Soft Channel")
  field(DESC, "Is valve moving")
  field(INPA, "BL04I-PS-SHTR-01:STA CP")
  field(CALC, "A=2|A=4")
}



# ############################################################################
# Number of Operations
# 
# % archiver 10 Monitor
# % controldesk Number of Operations readback
record(longin, "BL04I-PS-SHTR-01:OPS") {
  field(DESC, "Operations")
  field(DTYP, "Soft Channel")
  field(HOPR, "10000")
  field(LOPR, "0")
  field(HIHI, "10000")
  field(HIGH, "9000")
  field(LOW, "0")
  field(LOLO, "-1")
  field(HHSV, "MAJOR")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
  field(LLSV, "MAJOR")
  field(INP, "BL04I-PS-SHTR-01:GETOPS.VAL MS")
}

# #########################################################################
# Mode
record(mbbiDirect, "BL04I-PS-SHTR-01:MODSTA") {
  field(DESC, "Mode")
  field(DTYP, "Raw Soft Channel")
  field(INP, "BL04I-PS-SHTR-01:GETMODSTA MS")
}

# Operational/Service Mode
#% archiver 10 Monitor
#% controldesk Mode smon
#
record(bi, "BL04I-PS-SHTR-01:MODE") {
  field(DESC, "Mode")
  field(INP, "BL04I-PS-SHTR-01:MODSTA.B0 CP MS")
  field(ZNAM, "Operational")
  field(ONAM, "Service")
}


# Raw Air Pressure Status bit pattern for given valve
#% archiver 10 Monitor
#% controldesk Raw Air Pressure Status smon
#
record(bi, "BL04I-PS-SHTR-01:RAWAIRSTA") 
{
  field(DESC, "Raw Air Pressure Status")
  field(INP, "BL04I-VA-VLVCC-01:RAWAIRV04 CP MS")
  field(ZNAM, "Low")
  field(ONAM, "Good")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
}

# SR Valve Controller
#% archiver 10 Monitor
#% controldesk SR Valve smon
#
record(bi, "BL04I-PS-SHTR-01:SRVC") {
  field(DESC, "SR Valve Controller")
  field(INP, "BL04I-VA-VLVCC-01:SRVC CP MS")
  field(SCAN, "Passive")
  field(ZNAM, "No")
  field(ONAM, "Yes")
}

record(longin, "BL04I-PS-SHTR-01:SOFTWARE") {
  field(DESC, "Software version")
  field(DTYP, "Soft Channel")
  field(INP, "BL04I-VA-VLVCC-01:INPSOFT CP MS")
}

# ######################################################################
# Close time trip
#
#% controldesk Close Timeout setpoint
#
record(longin, "BL04I-PS-SHTR-01:INPMINTCLS") {
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0407) ty_40_0")
}

#
#% archiver 10 Monitor
#% controldesk Minimum Close Time readback
#
record(calc, "BL04I-PS-SHTR-01:MINTCLS") {
  field(DESC, "Min Close Time")
  field(CALC, "A/10.0")
  field(INPA, "BL04I-PS-SHTR-01:INPMINTCLS PP MS")
  field(EGU, "s")
  field(PREC, "1")
  field(SCAN, "1 second")
  field(HOPR, "10")
  field(LOPR, "2")
  field(HIHI, "10")
  field(HHSV, "MAJOR")
}

record(longin, "BL04I-PS-SHTR-01:INPMAXTCLS") {
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0405) ty_40_0")
}

#
#% archiver 10 Monitor
#% controldesk Maximum Close Time readback
#
record(calc, "BL04I-PS-SHTR-01:MAXTCLS") {
  field(DESC, "Max Close Time")
  field(CALC, "A/10.0")
  field(INPA, "BL04I-PS-SHTR-01:INPMAXTCLS PP MS")
  field(EGU, "s")
  field(PREC, "1")
  field(SCAN, "1 second")
  field(HOPR, "10")
  field(LOPR, "2")
  field(HIHI, "10")
  field(HHSV, "MINOR")
}

record(longin, "BL04I-PS-SHTR-01:INPTCLOSE") 
{
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0404) ty_40_0")
}

#
#% archiver 10 Monitor
#% controldesk Current Close Time readback
#
record(calc, "BL04I-PS-SHTR-01:TCLOSE") 
{
  field(DESC, "Close Time")
  field(CALC, "A/10.0")
  field(INPA, "BL04I-PS-SHTR-01:INPTCLOSE PP MS")
  field(EGU, "s")
  field(PREC, "1")
  field(SCAN, "1 second")
  field(HOPR, "10")
  field(LOPR, "2")
  field(HIGH, "3.0")
  field(HIHI, "5.0")
  field(HSV,  "MINOR")
  field(HHSV, "MAJOR")
}

################################################################################
# Interlocks
# 
# % archiver 10 Monitor
# % controldesk Latched Interlock Status smon
record(mbbiDirect, "BL04I-PS-SHTR-01:ILK") {
  field(DESC, "Latched Interlocks")
  field(DTYP, "Raw Soft Channel")
  field(INP, "BL04I-PS-SHTR-01:GETILK.VAL MS")
}

################################################################################
# Individual Interlocks
#
record(bi, "BL04I-PS-SHTR-01:ILK0") {
  field(DESC, "Interlock 0")
  field(INP, "BL04I-PS-SHTR-01:ILK.B0 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Air Healthy")
  field(ONAM, "Air Healthy")
}

record(bi, "BL04I-PS-SHTR-01:ILK1") {
  field(DESC, "Interlock 1")
  field(INP, "BL04I-PS-SHTR-01:ILK.B1 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Guardline A")
  field(ONAM, "Guardline A")
}

record(bi, "BL04I-PS-SHTR-01:ILK2") {
  field(DESC, "Interlock 2")
  field(INP, "BL04I-PS-SHTR-01:ILK.B2 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Guardline B")
  field(ONAM, "Guardline B")
}

record(bi, "BL04I-PS-SHTR-01:ILK3") {
  field(DESC, "Interlock 3")
  field(INP, "BL04I-PS-SHTR-01:ILK.B3 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gas Flow Present")
  field(ONAM, "Gas Flow Present")
}

record(bi, "BL04I-PS-SHTR-01:ILK4") {
  field(DESC, "Interlock 4")
  field(INP, "BL04I-PS-SHTR-01:ILK.B4 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "CRL Vacuum OK")
  field(ONAM, "CRL Vacuum OK")
}

record(bi, "BL04I-PS-SHTR-01:ILK5") {
  field(DESC, "Interlock 5")
  field(INP, "BL04I-PS-SHTR-01:ILK.B5 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-PS-SHTR-01:ILK6") {
  field(DESC, "Interlock 6")
  field(INP, "BL04I-PS-SHTR-01:ILK.B6 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-PS-SHTR-01:ILK7") {
  field(DESC, "Interlock 7")
  field(INP, "BL04I-PS-SHTR-01:ILK.B7 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-PS-SHTR-01:ILK8") {
  field(DESC, "Interlock 8")
  field(INP, "BL04I-PS-SHTR-01:ILK.B8 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-PS-SHTR-01:ILK9") {
  field(DESC, "Interlock 9")
  field(INP, "BL04I-PS-SHTR-01:ILK.B9 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-PS-SHTR-01:ILK10") {
  field(DESC, "Interlock 10")
  field(INP, "BL04I-PS-SHTR-01:ILK.BA CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-PS-SHTR-01:ILK11") {
  field(DESC, "Interlock 11")
  field(INP, "BL04I-PS-SHTR-01:ILK.BB CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-PS-SHTR-01:ILK12") {
  field(DESC, "Interlock 12")
  field(INP, "BL04I-PS-SHTR-01:ILK.BC CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-PS-SHTR-01:ILK13") {
  field(DESC, "Interlock 13")
  field(INP, "BL04I-PS-SHTR-01:ILK.BD CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-PS-SHTR-01:ILK14") {
  field(DESC, "Interlock 14")
  field(INP, "BL04I-PS-SHTR-01:ILK.BE CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-PS-SHTR-01:ILK15") {
  field(DESC, "Interlock 15")
  field(INP, "BL04I-PS-SHTR-01:ILK.BF CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Valve OK")
  field(ONAM, "Valve OK")
}

# % archiver 10 Monitor
# % controldesk Gauge Interlock Status smon
record(mbbiDirect, "BL04I-PS-SHTR-01:GILK") {
  field(DESC, "Gauge Interlocks")
  field(INP, "BL04I-PS-SHTR-01:GETGILK MS")
}

# % archiver 10 Monitor
# % controldesk Initial Interlock Status smon
record(mbbiDirect, "BL04I-PS-SHTR-01:INIILK") {
  field(DESC, "Initial Interlock")
  field(INP, "BL04I-PS-SHTR-01:GETINIILK MS")
}

# % archiver 10 Monitor
# % controldesk Current Interlock Status smon
record(mbbiDirect, "BL04I-PS-SHTR-01:RAWILK") {
  field(DESC, "Current Interlocks")
  field(INP, "BL04I-PS-SHTR-01:GETRAWILK MS")
}

record(subArray, "BL04I-PS-SHTR-01:GETLASTCON") {
  field(DESC, "Get control readback")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-PS-SHTR-01:LASTCON")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK04 CP MS")
  field(INDX, "1")
  field(MALM, "10")
}

record(subArray, "BL04I-PS-SHTR-01:GETILKSTA") {
  field(DESC, "Get interlock status")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-PS-SHTR-01:ILKSTA")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK04 CP MS")
  field(INDX, "2")
  field(MALM, "10")
}

record(subArray, "BL04I-PS-SHTR-01:GETSTA") {
  field(DESC, "Get status")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-PS-SHTR-01:STA")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK04 CP MS")
  field(INDX, "3")
  field(MALM, "10")
}

record(subArray, "BL04I-PS-SHTR-01:GETOPS") {
  field(DESC, "Get operations")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-PS-SHTR-01:OPS")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK04 CP MS")
  field(INDX, "4")
  field(MALM, "10")
}

record(subArray, "BL04I-PS-SHTR-01:GETMODSTA") {
  field(DESC, "Get mode")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-PS-SHTR-01:MODSTA")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK04 CP MS")
  field(INDX, "5")
  field(MALM, "10")
}

record(subArray, "BL04I-PS-SHTR-01:GETILK") {
  field(DESC, "Get latched interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-PS-SHTR-01:ILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK04 CP MS")
  field(INDX, "6")
  field(MALM, "10")
}

record(subArray, "BL04I-PS-SHTR-01:GETINIILK") {
  field(DESC, "Get initial interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-PS-SHTR-01:INIILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK04 CP MS")
  field(INDX, "7")
  field(MALM, "10")
}

record(subArray, "BL04I-PS-SHTR-01:GETRAWILK") {
  field(DESC, "Get current interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-PS-SHTR-01:RAWILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK04 CP MS")
  field(INDX, "8")
  field(MALM, "10")
}

record(subArray, "BL04I-PS-SHTR-01:GETGILK") {
  field(DESC, "Get gauge interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-PS-SHTR-01:GILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK04 CP MS")
  field(INDX, "9")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk IMG Interlock Status smon
#
record(mbbiDirect, "BL04I-PS-SHTR-01:IMGILK") {
  field(DESC, "IMG Interlocks")
  field(INP, "BL04I-PS-SHTR-01:GETIMGILK MS")
}

record(subArray, "BL04I-PS-SHTR-01:GETIMGILK") {
  field(DESC, "IMG Interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-PS-SHTR-01:IMGILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK00 CP MS")
  field(INDX, "5")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk Pirani Interlock Status smon
#
record(mbbiDirect, "BL04I-PS-SHTR-01:PIRGILK") {
  field(DESC, "Pirani Interlocks")
  field(INP, "BL04I-PS-SHTR-01:GETPIRGILK PP MS")
}

record(subArray, "BL04I-PS-SHTR-01:GETPIRGILK") {
  field(DESC, "Pirani Interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-PS-SHTR-01:PIRGILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK00 CP MS")
  field(INDX, "6")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk Initial/Run Vacuum Status smon
#
record(mbbiDirect, "BL04I-PS-SHTR-01:IRVAC") {
  field(DESC, "Initial/Run Vacuum")
  field(INP, "BL04I-PS-SHTR-01:GETIRVAC PP MS")
}

record(subArray, "BL04I-PS-SHTR-01:GETIRVAC") {
  field(DESC, "Initial/Run Vacuum")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-PS-SHTR-01:IRVAC")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK00 CP MS")
  field(INDX, "7")
  field(MALM, "10")
}

#
#% archiver 10 Monitor
#% controldesk Close Time smon
#
#record(calc, "BL04I-PS-SHTR-01:TCLOSE") 
#{
#  field(DESC, "Time to close")
#  field(EGU, "s")
#  field(PREC, "1")
#  field(CALC, "A/10.0")
#  field(INPA, "BL04I-PS-SHTR-01:GETTCLOSE PP MS")
#  field(HIGH, "3.0")
#  field(HIHI, "5.0")
#  field(HSV,  "MINOR")
#  field(HHSV, "MAJOR")
# }

# This is a helper record to ensure the valve macro is
# correctly converted to a decimal integer (instead of octal if leading zero given),
# ready for input to GETTCLOSE.INDX
#record(calcout, "BL04I-PS-SHTR-01:VNUM") 
#{
#  field(DESC, "The valve index number")
#  field(CALC, "A")
#  field(INPA, "04")
#  field(OUT, "BL04I-PS-SHTR-01:GETTCLOSE.INDX PP")
#  field(PINI, "YES")
#}

#record(subArray, "BL04I-PS-SHTR-01:GETTCLOSE") {
#  field(DESC, "Time to close")
#  field(DTYP, "Soft Channel")
#  field(FLNK, "BL04I-PS-SHTR-01:TCLOSE")
#  field(FTVL, "USHORT")
#  field(INP, "BL04I-VA-VLVCC-01:BLOCK11 CP MS")
##  field(INDX, "04")
#  field(MALM, "10")
#}

################################################################################
# Individual Gauge Interlocks
#
record(mbbiDirect, "BL04I-PS-SHTR-01:GAUGEILK") {
  field(DESC, "Combined Gauge Interlock")
  field(INP, "BL04I-PS-SHTR-01:CALGILK PP MS")
}

record(calc, "BL04I-PS-SHTR-01:CALGILK") {
  field(CALC, "A&B")
  field(FLNK, "BL04I-PS-SHTR-01:GAUGEILK")
  field(INPA, "BL04I-PS-SHTR-01:IMGILK CP MS")
  field(INPB, "BL04I-PS-SHTR-01:PIRGILK CP MS")
}

record(bi, "BL04I-PS-SHTR-01:GILK0") {
  field(DESC, "Gauge ILK 0")
  field(INP, "BL04I-PS-SHTR-01:GAUGEILK.B0 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-PS-SHTR-01:GILK1") {
  field(DESC, "Gauge ILK 1")
  field(INP, "BL04I-PS-SHTR-01:GAUGEILK.B1 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-PS-SHTR-01:GILK2") {
  field(DESC, "Gauge ILK 2")
  field(INP, "BL04I-PS-SHTR-01:GAUGEILK.B2 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-PS-SHTR-01:GILK3") {
  field(DESC, "Gauge ILK 3")
  field(INP, "BL04I-PS-SHTR-01:GAUGEILK.B3 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-PS-SHTR-01:GILK4") {
  field(DESC, "Gauge ILK 4")
  field(INP, "BL04I-PS-SHTR-01:GAUGEILK.B4 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-PS-SHTR-01:GILK5") {
  field(DESC, "Gauge ILK 5")
  field(INP, "BL04I-PS-SHTR-01:GAUGEILK.B5 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-PS-SHTR-01:GILK6") {
  field(DESC, "Gauge ILK 6")
  field(INP, "BL04I-PS-SHTR-01:GAUGEILK.B6 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-PS-SHTR-01:GILK7") {
  field(DESC, "Gauge ILK 7")
  field(INP, "BL04I-PS-SHTR-01:GAUGEILK.B7 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-PS-SHTR-01:GILK8") {
  field(DESC, "Gauge ILK 8")
  field(INP, "BL04I-PS-SHTR-01:GAUGEILK.B8 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-PS-SHTR-01:GILK9") {
  field(DESC, "Gauge ILK 9")
  field(INP, "BL04I-PS-SHTR-01:GAUGEILK.B9 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-PS-SHTR-01:GILK10") {
  field(DESC, "Gauge ILK 10")
  field(INP, "BL04I-PS-SHTR-01:GAUGEILK.BA CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-PS-SHTR-01:GILK11") {
  field(DESC, "Gauge ILK 11")
  field(INP, "BL04I-PS-SHTR-01:GAUGEILK.BB CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-PS-SHTR-01:GILK12") {
  field(DESC, "Gauge ILK 12")
  field(INP, "BL04I-PS-SHTR-01:GAUGEILK.BC CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-PS-SHTR-01:GILK13") {
  field(DESC, "Gauge ILK 13")
  field(INP, "BL04I-PS-SHTR-01:GAUGEILK.BD CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-PS-SHTR-01:GILK14") {
  field(DESC, "Gauge ILK 14")
  field(INP, "BL04I-PS-SHTR-01:GAUGEILK.BE CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

record(bi, "BL04I-PS-SHTR-01:GILK15") {
  field(DESC, "Gauge ILK 15")
  field(INP, "BL04I-PS-SHTR-01:GAUGEILK.BF CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "")
  field(ONAM, "")
}

################################################################################
# Air Pressure De-bounce Time
#
#% controldesk Air Pressure De-bounce Time setpoint
#
record(ao, "BL04I-PS-SHTR-01:SETADB") {
  field(DESC, "De-bounce Time")
  field(EGU, "s")
  field(PREC, "1")
  field(DOL, "10.0")
  field(PINI, "YES")
# field(OUT, "BL04I-VA-VLVCC-01:CALADB.A PP")
  field(FLNK, "BL04I-PS-SHTR-01:CALTIMEOUT PP")
}

#
#% archiver 10 Monitor
#% controldesk Air Pressure De-bounce Time readback
#
record(calc, "BL04I-PS-SHTR-01:ADB") {
  field(DESC, "De-bounce Time")
  field(CALC, "A/10.0")
# field(INPA, "BL04I-VA-VLVCC-01:INPADB CP MS")
  field(INPA, "BL04I-PS-SHTR-01:INPTIMEOUT PP MS")
  field(SCAN, "1 second")
  field(EGU, "s")
  field(PREC, "1")
}

##### New for inidividual valve ADB values #####
record(calcout, "BL04I-PS-SHTR-01:CALTIMEOUT") {
  field(OUT, "BL04I-PS-SHTR-01:OUTTIMEOUT PP")
  field(CALC, "A*10.0")
  field(INPA, "BL04I-PS-SHTR-01:SETADB")
}

record(ao, "BL04I-PS-SHTR-01:OUTTIMEOUT") {
  field(DTYP, "stream")
  field(OUT, "@Hostlink.proto write(0403) ty_40_0")
}

record(longin, "BL04I-PS-SHTR-01:INPTIMEOUT") {
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto read(0400) ty_40_0")
}

# Supplemental records to make this into a caput callback device that gda can control

#% macro, desc, Box label for gui
#% macro, gda_name, GDA name to export to gda as if it exists
#% macro, gda_desc, GDA description

# This associates an edm screen with the template
# % gui, SHTR1, edm, vacuumValve.edl, device=BL04I-PS-SHTR-01
# % gui, SHTR1, edmembed, vacuumValve-embed.edl, device=BL04I-PS-SHTR-01,box-label=BL04I-PS-SHTR-01

#% gdatag,template,pneumaticCallback,,
#% gdatag,mbbinary,rw,,CONTROL
record(mbbo, "BL04I-PS-SHTR-01:CON") {
  field(FLNK,"BL04I-PS-SHTR-01:SETBUSY")
}

record(calcout, "BL04I-PS-SHTR-01:SETBUSY")
{
    field(CALC, "1")
    field(OUT, "BL04I-PS-SHTR-01:BUSY PP NMS")
    field(FLNK,"BL04I-PS-SHTR-01:DONECALC")
}

record(busy, "BL04I-PS-SHTR-01:BUSY")
{
}

record(calcout,"BL04I-PS-SHTR-01:DONECALC")
{
	field(INPA,"BL04I-PS-SHTR-01:CON MS")
	field(INPB,"BL04I-PS-SHTR-01:STA CPP MS")
	field(INPC,"BL04I-PS-SHTR-01:ILKSTA CPP MS")
	field(INPD,"BL04I-PS-SHTR-01:LASTCON CPP MS")	
	field(CALC,"((A=D)&(((A*2+1)=B)|A=2|C=0))?0:1")
	field(OOPT, "When Zero")
	field(DOPT, "Use CALC")
	field(OUT,"BL04I-PS-SHTR-01:BUSY CA NMS")
}

# This makes the component icon reflect the status
# % gui, SHTR1, sevr
#% gdatag,mbbinary,ro,,STA
record(mbbi, "BL04I-PS-SHTR-01:STA") {
}

#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBD("../../dbd/vacuumValve.dbd")
#! DBDEND

#% macro, __doc__, Template that reads extra blocks of memory into records so 
# that it can be used for higher bit interlocks. This will read 30 blocks
#% macro, device, Device prefix
#% macro, port, Asyn port, e.g. ty_40_0
#% macro, N, READBACK suffix. You should set this to 5 for the first instance of vacuumValveReadExtra, and increment for any subsequent instances
#% macro, B1, 1st block to read, e.g. 39 for D390..399
#% macro, B2, 2nd block to read, this must be B1+1
#% macro, B3, 3rd block to read, this must be B1+2

# #########################################################################
# Read 30 words of memory from the valve control crate and store it into 3 10
# word blocks. These can then be read by other templates.
record(waveform, "BL04I-VA-VLVCC-01:READBACK5") {
  field(DESC, "Read memory 0390-0419")
  field(SCAN, "1 second")
  field(DTYP, "stream")
  field(INP, "@Hostlink.proto readDM30(0390) ty_40_0")
  field(NELM, "30")
  field(FTVL, "USHORT")
  field(FLNK, "BL04I-VA-VLVCC-01:BLOCK39")
  field(PRIO, "MEDIUM")
}

# Memory 0390-0399
record(subArray, "BL04I-VA-VLVCC-01:BLOCK39") {
  field(DESC, "Block 39 parameters")
  field(FLNK, "BL04I-VA-VLVCC-01:BLOCK40")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:READBACK5.VAL MS")
  field(MALM, "30")
  field(NELM, "10")
  field(INDX, "0")
}

# Memory 0400-0409
record(subArray, "BL04I-VA-VLVCC-01:BLOCK40") {
  field(DESC, "Block 40 parameters")
  field(FLNK, "BL04I-VA-VLVCC-01:BLOCK41")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:READBACK5.VAL MS")
  field(MALM, "30")
  field(NELM, "10")
  field(INDX, "10")
}

# Memory 0410-0419
record(subArray, "BL04I-VA-VLVCC-01:BLOCK41") {
  field(DESC, "Block 02 parameters")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:READBACK5.VAL MS")
  field(MALM, "30")
  field(NELM, "10")
  field(INDX, "20")
}

#! Further lines contain data used by VisualDCT
#! View(234,90,0.7)
#! Record("BL04I-VA-VLVCC-01:READBACK5",440,448,0,0,"BL04I-VA-VLVCC-01:READBACK5")
#! Field("BL04I-VA-VLVCC-01:READBACK5.FLNK",16777215,1,"BL04I-VA-VLVCC-01:READBACK5.FLNK")
#! Link("BL04I-VA-VLVCC-01:READBACK5.FLNK","BL04I-VA-VLVCC-01:READBACK1/FLNK")
#! Field("BL04I-VA-VLVCC-01:READBACK5.VAL",16777215,1,"BL04I-VA-VLVCC-01:READBACK5.VAL")
#! Connector("BL04I-VA-VLVCC-01:READBACK1/FLNK","BL04I-VA-VLVCC-01:BLOCK39",660,565,16777215,"",0)
#! Record("BL04I-VA-VLVCC-01:BLOCK39",740,423,0,0,"BL04I-VA-VLVCC-01:BLOCK39")
#! Field("BL04I-VA-VLVCC-01:BLOCK39.FLNK",16777215,1,"BL04I-VA-VLVCC-01:BLOCK39.FLNK")
#! Link("BL04I-VA-VLVCC-01:BLOCK39.FLNK","BL04I-VA-VLVCC-01:BLOCK40")
#! Field("BL04I-VA-VLVCC-01:BLOCK39.INP",16777215,0,"BL04I-VA-VLVCC-01:BLOCK39.INP")
#! Link("BL04I-VA-VLVCC-01:BLOCK39.INP","BL04I-VA-VLVCC-01:VALVE1/INP")
#! Connector("BL04I-VA-VLVCC-01:VALVE1/INP","BL04I-VA-VLVCC-01:READBACK5.VAL",680,630,16777215,"",0)
#! Record("BL04I-VA-VLVCC-01:BLOCK40",1000,443,0,0,"BL04I-VA-VLVCC-01:BLOCK40")
#! Field("BL04I-VA-VLVCC-01:BLOCK40.FLNK",16777215,1,"BL04I-VA-VLVCC-01:BLOCK40.FLNK")
#! Link("BL04I-VA-VLVCC-01:BLOCK40.FLNK","BL04I-VA-VLVCC-01:BLOCK41")
#! Field("BL04I-VA-VLVCC-01:BLOCK40.INP",16777215,0,"BL04I-VA-VLVCC-01:BLOCK40.INP")
#! Link("BL04I-VA-VLVCC-01:BLOCK40.INP","BL04I-VA-VLVCC-01:VALVE2/INP")
#! Connector("BL04I-VA-VLVCC-01:VALVE2/INP","BL04I-VA-VLVCC-01:READBACK5.VAL",920,640,16777215,"",0)
#! Record("BL04I-VA-VLVCC-01:BLOCK41",1260,498,0,0,"BL04I-VA-VLVCC-01:BLOCK41")
#! Field("BL04I-VA-VLVCC-01:BLOCK41.INP",16777215,0,"BL04I-VA-VLVCC-01:BLOCK41.INP")
#! Link("BL04I-VA-VLVCC-01:BLOCK41.INP","BL04I-VA-VLVCC-01:READBACK5.VAL")
#! Box(Box0,400,360,640,700,0,16711680,null)
#! Box(Box1,700,360,1460,700,0,16711680,null)
#! TextBox(TB0,420,380,620,420,0,"Dialog",18,1,16777215,"Readback an extra 30 words of DM",null)
#! TextBox(TB1,760,380,1160,400,0,"Dialog",18,1,16777215,"Values for each block of 10 words.",null)
#! Generated by VisualDCT v2.7.1-SNAPSHOT

# % macro, __doc__, Template showing the status of various MPS interlocks in 
# the vacuum valve PLC
# % macro, device, device prefix
# % macro, port, asyn port
# % macro, interlock, Interlock suffix (e.g. :INT1)
# % macro, desc, Permit description (e.g. Front end permit)
# % macro, addr, Address (1 to 10) in PLC
# % macro, name, Object name and gui association name
# % macro, ilk0, Interlock 0 description (e.g. Water OK)
# % macro, ilk1, Interlock 1 description (e.g. Water OK)
# % macro, ilk2, Interlock 2 description (e.g. Water OK)
# % macro, ilk3, Interlock 3 description (e.g. Water OK)
# % macro, ilk4, Interlock 4 description (e.g. Water OK)
# % macro, ilk5, Interlock 5 description (e.g. Water OK)
# % macro, ilk6, Interlock 6 description (e.g. Water OK)
# % macro, ilk7, Interlock 7 description (e.g. Water OK)
# % macro, ilk8, Interlock 8 description (e.g. Water OK)
# % macro, ilk9, Interlock 9 description (e.g. Water OK)
# % macro, ilkA, Interlock 10 description (e.g. Water OK)
# % macro, ilkB, Interlock 11 description (e.g. Water OK)
# % macro, ilkC, Interlock 12 description (e.g. Water OK)
# % macro, ilkD, Interlock 13 description (e.g. Water OK)
# % macro, ilkE, Interlock 14 description (e.g. Water OK)
# % macro, ilkF, Interlock 15 description (e.g. Water OK)
# This associates an edm screen with the template
# % gui, INT1, edm, interlocks.edl, device=BL04I-VA-VLVCC-01:INT1
# % gui, INT1, edmembed, interlock-embed-small.edl, device=BL04I-VA-VLVCC-01:INT1,desc=Water Flow Interlocks
record(bi, "BL04I-VA-VLVCC-01:INT1:ILK0") {
  field(DESC, "I04 Filter")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK.B0 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "I04 Filter")
  field(ONAM, "I04 Filter")
}

record(bi, "BL04I-VA-VLVCC-01:INT1:ILK1") {
  field(DESC, "X+ Slit Water Flow")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK.B1 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "X+ Slit Water Flow")
  field(ONAM, "X+ Slit Water Flow")
}

record(bi, "BL04I-VA-VLVCC-01:INT1:ILK2") {
  field(DESC, "X- Slit Water Flow")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK.B2 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "X- Slit Water Flow")
  field(ONAM, "X- Slit Water Flow")
}

record(bi, "BL04I-VA-VLVCC-01:INT1:ILK3") {
  field(DESC, "Y+ Slit Water Flow")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK.B3 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Y+ Slit Water Flow")
  field(ONAM, "Y+ Slit Water Flow")
}

record(bi, "BL04I-VA-VLVCC-01:INT1:ILK4") {
  field(DESC, "Y- Slit Water Flow")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK.B4 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Y- Slit Water Flow")
  field(ONAM, "Y- Slit Water Flow")
}

record(bi, "BL04I-VA-VLVCC-01:INT1:ILK5") {
  field(DESC, "Screen Water Flow")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK.B5 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Screen Water Flow")
  field(ONAM, "Screen Water Flow")
}

record(bi, "BL04I-VA-VLVCC-01:INT1:ILK6") {
  field(DESC, "I04-1 Filter")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK.B6 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "I04-1 Filter")
  field(ONAM, "I04-1 Filter")
}

record(bi, "BL04I-VA-VLVCC-01:INT1:ILK7") {
  field(DESC, "DCM Water Flow")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK.B7 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "DCM Water Flow")
  field(ONAM, "DCM Water Flow")
}

record(bi, "BL04I-VA-VLVCC-01:INT1:ILK8") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK.B8 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT1:ILK9") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK.B9 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT1:ILKA") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK.BA CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT1:ILKB") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK.BB CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT1:ILKC") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK.BC CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT1:ILKD") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK.BD CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT1:ILKE") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK.BE CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT1:ILKF") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK.BF CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(longout, "BL04I-VA-VLVCC-01:INT1:RESET") {
  field(DESC, "Reset interlocks")
  field(DTYP, "stream")
  field(VAL, "2")
  field(OUT, "@Hostlink.proto write(0070) ty_40_0")
  field(DOL, "2")
  field(OMSL, "closed_loop")
}

record(stringout, "BL04I-VA-VLVCC-01:INT1:NAME") {
  field(DESC, "Name of interlock")
  field(DTYP, "Soft Channel")
  field(VAL, "Water Flow Interlocks")
}

record(subArray, "BL04I-VA-VLVCC-01:INT1:GETILK") {
  field(DESC, "Get latched interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VLVCC-01:INT1:ILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK07 CP")
  field(INDX, "6")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VLVCC-01:INT1:GETINIILK") {
  field(DESC, "Get initial interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VLVCC-01:INT1:INIILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK07 CP")
  field(INDX, "7")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VLVCC-01:INT1:GETRAWILK") {
  field(DESC, "Get current interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VLVCC-01:INT1:RAWILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK07 CP")
  field(INDX, "8")
  field(MALM, "10")
}

#% archiver 10 Monitor
record(mbbiDirect, "BL04I-VA-VLVCC-01:INT1:RAWILK") {
  field(DESC, "Current")
  field(DTYP, "Soft Channel")
  field(INP, "BL04I-VA-VLVCC-01:INT1:GETRAWILK")
}

#% archiver 10 Monitor
record(mbbiDirect, "BL04I-VA-VLVCC-01:INT1:INIILK") {
  field(DESC, "Initial")
  field(DTYP, "Soft Channel")
  field(INP, "BL04I-VA-VLVCC-01:INT1:GETINIILK")
}

#% archiver 10 Monitor
record(mbbiDirect, "BL04I-VA-VLVCC-01:INT1:ILK") {
  field(DESC, "Latched")
  field(DTYP, "Soft Channel")
  field(INP, "BL04I-VA-VLVCC-01:INT1:GETILK")
}
#! Generated by VisualDCT v2.7.1-SNAPSHOT

# % macro, __doc__, Template showing the status of various MPS interlocks in 
# the vacuum valve PLC
# % macro, device, device prefix
# % macro, port, asyn port
# % macro, interlock, Interlock suffix (e.g. :INT1)
# % macro, desc, Permit description (e.g. Front end permit)
# % macro, addr, Address (1 to 10) in PLC
# % macro, name, Object name and gui association name
# % macro, ilk0, Interlock 0 description (e.g. Water OK)
# % macro, ilk1, Interlock 1 description (e.g. Water OK)
# % macro, ilk2, Interlock 2 description (e.g. Water OK)
# % macro, ilk3, Interlock 3 description (e.g. Water OK)
# % macro, ilk4, Interlock 4 description (e.g. Water OK)
# % macro, ilk5, Interlock 5 description (e.g. Water OK)
# % macro, ilk6, Interlock 6 description (e.g. Water OK)
# % macro, ilk7, Interlock 7 description (e.g. Water OK)
# % macro, ilk8, Interlock 8 description (e.g. Water OK)
# % macro, ilk9, Interlock 9 description (e.g. Water OK)
# % macro, ilkA, Interlock 10 description (e.g. Water OK)
# % macro, ilkB, Interlock 11 description (e.g. Water OK)
# % macro, ilkC, Interlock 12 description (e.g. Water OK)
# % macro, ilkD, Interlock 13 description (e.g. Water OK)
# % macro, ilkE, Interlock 14 description (e.g. Water OK)
# % macro, ilkF, Interlock 15 description (e.g. Water OK)
# This associates an edm screen with the template
# % gui, INT2, edm, interlocks.edl, device=BL04I-VA-VLVCC-01:INT2
# % gui, INT2, edmembed, interlock-embed-small.edl, device=BL04I-VA-VLVCC-01:INT2,desc=Front End Permit
record(bi, "BL04I-VA-VLVCC-01:INT2:ILK0") {
  field(DESC, "Waterflows")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT2:ILK.B0 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Waterflows")
  field(ONAM, "Waterflows")
}

record(bi, "BL04I-VA-VLVCC-01:INT2:ILK1") {
  field(DESC, "Cryocooler Running")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT2:ILK.B1 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Cryocooler Running")
  field(ONAM, "Cryocooler Running")
}

record(bi, "BL04I-VA-VLVCC-01:INT2:ILK2") {
  field(DESC, "MPS0 PLC ABS Permit")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT2:ILK.B2 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "MPS0 PLC ABS Permit")
  field(ONAM, "MPS0 PLC ABS Permit")
}

record(bi, "BL04I-VA-VLVCC-01:INT2:ILK3") {
  field(DESC, "IMG-01")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT2:ILK.B3 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "IMG-01")
  field(ONAM, "IMG-01")
}

record(bi, "BL04I-VA-VLVCC-01:INT2:ILK4") {
  field(DESC, "IMG-02")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT2:ILK.B4 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "IMG-02")
  field(ONAM, "IMG-02")
}

record(bi, "BL04I-VA-VLVCC-01:INT2:ILK5") {
  field(DESC, "IMG-02 MPS1")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT2:ILK.B5 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "IMG-02 MPS1")
  field(ONAM, "IMG-02 MPS1")
}

record(bi, "BL04I-VA-VLVCC-01:INT2:ILK6") {
  field(DESC, "IMG-03")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT2:ILK.B6 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "IMG-03")
  field(ONAM, "IMG-03")
}

record(bi, "BL04I-VA-VLVCC-01:INT2:ILK7") {
  field(DESC, "Valve 11 Open")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT2:ILK.B7 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Valve 11 Open")
  field(ONAM, "Valve 11 Open")
}

record(bi, "BL04I-VA-VLVCC-01:INT2:ILK8") {
  field(DESC, "Valve 1 Open")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT2:ILK.B8 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Valve 1 Open")
  field(ONAM, "Valve 1 Open")
}

record(bi, "BL04I-VA-VLVCC-01:INT2:ILK9") {
  field(DESC, "Valve 2 Open")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT2:ILK.B9 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Valve 2 Open")
  field(ONAM, "Valve 2 Open")
}

record(bi, "BL04I-VA-VLVCC-01:INT2:ILKA") {
  field(DESC, "Valve 3 Open")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT2:ILK.BA CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Valve 3 Open")
  field(ONAM, "Valve 3 Open")
}

record(bi, "BL04I-VA-VLVCC-01:INT2:ILKB") {
  field(DESC, "4.1 MPS OK / ID Op")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT2:ILK.BB CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "4.1 MPS OK / ID Op")
  field(ONAM, "4.1 MPS OK / ID Op")
}

record(bi, "BL04I-VA-VLVCC-01:INT2:ILKC") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT2:ILK.BC CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT2:ILKD") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT2:ILK.BD CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT2:ILKE") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT2:ILK.BE CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT2:ILKF") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT2:ILK.BF CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(longout, "BL04I-VA-VLVCC-01:INT2:RESET") {
  field(DESC, "Reset interlocks")
  field(DTYP, "stream")
  field(VAL, "2")
  field(OUT, "@Hostlink.proto write(0090) ty_40_0")
  field(DOL, "2")
  field(OMSL, "closed_loop")
}

record(stringout, "BL04I-VA-VLVCC-01:INT2:NAME") {
  field(DESC, "Name of interlock")
  field(DTYP, "Soft Channel")
  field(VAL, "Front End Permit")
}

record(subArray, "BL04I-VA-VLVCC-01:INT2:GETILK") {
  field(DESC, "Get latched interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VLVCC-01:INT2:ILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK09 CP")
  field(INDX, "6")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VLVCC-01:INT2:GETINIILK") {
  field(DESC, "Get initial interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VLVCC-01:INT2:INIILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK09 CP")
  field(INDX, "7")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VLVCC-01:INT2:GETRAWILK") {
  field(DESC, "Get current interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VLVCC-01:INT2:RAWILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK09 CP")
  field(INDX, "8")
  field(MALM, "10")
}

#% archiver 10 Monitor
record(mbbiDirect, "BL04I-VA-VLVCC-01:INT2:RAWILK") {
  field(DESC, "Current")
  field(DTYP, "Soft Channel")
  field(INP, "BL04I-VA-VLVCC-01:INT2:GETRAWILK")
}

#% archiver 10 Monitor
record(mbbiDirect, "BL04I-VA-VLVCC-01:INT2:INIILK") {
  field(DESC, "Initial")
  field(DTYP, "Soft Channel")
  field(INP, "BL04I-VA-VLVCC-01:INT2:GETINIILK")
}

#% archiver 10 Monitor
record(mbbiDirect, "BL04I-VA-VLVCC-01:INT2:ILK") {
  field(DESC, "Latched")
  field(DTYP, "Soft Channel")
  field(INP, "BL04I-VA-VLVCC-01:INT2:GETILK")
}
#! Generated by VisualDCT v2.7.1-SNAPSHOT

# % macro, __doc__, Template showing the status of various MPS interlocks in 
# the vacuum valve PLC
# % macro, device, device prefix
# % macro, port, asyn port
# % macro, interlock, Interlock suffix (e.g. :INT1)
# % macro, desc, Permit description (e.g. Front end permit)
# % macro, addr, Address (1 to 10) in PLC
# % macro, name, Object name and gui association name
# % macro, ilk0, Interlock 0 description (e.g. Water OK)
# % macro, ilk1, Interlock 1 description (e.g. Water OK)
# % macro, ilk2, Interlock 2 description (e.g. Water OK)
# % macro, ilk3, Interlock 3 description (e.g. Water OK)
# % macro, ilk4, Interlock 4 description (e.g. Water OK)
# % macro, ilk5, Interlock 5 description (e.g. Water OK)
# % macro, ilk6, Interlock 6 description (e.g. Water OK)
# % macro, ilk7, Interlock 7 description (e.g. Water OK)
# % macro, ilk8, Interlock 8 description (e.g. Water OK)
# % macro, ilk9, Interlock 9 description (e.g. Water OK)
# % macro, ilkA, Interlock 10 description (e.g. Water OK)
# % macro, ilkB, Interlock 11 description (e.g. Water OK)
# % macro, ilkC, Interlock 12 description (e.g. Water OK)
# % macro, ilkD, Interlock 13 description (e.g. Water OK)
# % macro, ilkE, Interlock 14 description (e.g. Water OK)
# % macro, ilkF, Interlock 15 description (e.g. Water OK)
# This associates an edm screen with the template
# % gui, INT4, edm, interlocks.edl, device=BL04I-VA-VLVCC-01:INT4
# % gui, INT4, edmembed, interlock-embed-small.edl, device=BL04I-VA-VLVCC-01:INT4,desc=Machine Beam Critical
record(bi, "BL04I-VA-VLVCC-01:INT4:ILK0") {
  field(DESC, "V11 Open")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT4:ILK.B0 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "V11 Open")
  field(ONAM, "V11 Open")
}

record(bi, "BL04I-VA-VLVCC-01:INT4:ILK1") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT4:ILK.B1 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT4:ILK2") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT4:ILK.B2 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT4:ILK3") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT4:ILK.B3 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT4:ILK4") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT4:ILK.B4 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT4:ILK5") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT4:ILK.B5 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT4:ILK6") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT4:ILK.B6 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT4:ILK7") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT4:ILK.B7 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT4:ILK8") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT4:ILK.B8 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT4:ILK9") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT4:ILK.B9 CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT4:ILKA") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT4:ILK.BA CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT4:ILKB") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT4:ILK.BB CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT4:ILKC") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT4:ILK.BC CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT4:ILKD") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT4:ILK.BD CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT4:ILKE") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT4:ILK.BE CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(bi, "BL04I-VA-VLVCC-01:INT4:ILKF") {
  field(DESC, "Unused")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT4:ILK.BF CP")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Unused")
  field(ONAM, "Unused")
}

record(longout, "BL04I-VA-VLVCC-01:INT4:RESET") {
  field(DESC, "Reset interlocks")
  field(DTYP, "stream")
  field(VAL, "2")
  field(OUT, "@Hostlink.proto write(0390) ty_40_0")
  field(DOL, "2")
  field(OMSL, "closed_loop")
}

record(stringout, "BL04I-VA-VLVCC-01:INT4:NAME") {
  field(DESC, "Name of interlock")
  field(DTYP, "Soft Channel")
  field(VAL, "Machine Beam Critical")
}

record(subArray, "BL04I-VA-VLVCC-01:INT4:GETILK") {
  field(DESC, "Get latched interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VLVCC-01:INT4:ILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK39 CP")
  field(INDX, "6")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VLVCC-01:INT4:GETINIILK") {
  field(DESC, "Get initial interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VLVCC-01:INT4:INIILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK39 CP")
  field(INDX, "7")
  field(MALM, "10")
}

record(subArray, "BL04I-VA-VLVCC-01:INT4:GETRAWILK") {
  field(DESC, "Get current interlocks")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VLVCC-01:INT4:RAWILK")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK39 CP")
  field(INDX, "8")
  field(MALM, "10")
}

#% archiver 10 Monitor
record(mbbiDirect, "BL04I-VA-VLVCC-01:INT4:RAWILK") {
  field(DESC, "Current")
  field(DTYP, "Soft Channel")
  field(INP, "BL04I-VA-VLVCC-01:INT4:GETRAWILK")
}

#% archiver 10 Monitor
record(mbbiDirect, "BL04I-VA-VLVCC-01:INT4:INIILK") {
  field(DESC, "Initial")
  field(DTYP, "Soft Channel")
  field(INP, "BL04I-VA-VLVCC-01:INT4:GETINIILK")
}

#% archiver 10 Monitor
record(mbbiDirect, "BL04I-VA-VLVCC-01:INT4:ILK") {
  field(DESC, "Latched")
  field(DTYP, "Soft Channel")
  field(INP, "BL04I-VA-VLVCC-01:INT4:GETILK")
}
# rga.db
# Template database for an RGA
# Pete Owens - 24-6-04
#
# It appears that any mass to be displayed on the summary rga.edl
# has its SDIS field set to DIS20
# IJG 11-5-11
#
# Macros:
#% macro, device, Device Prefix
#% macro, port, Asyn Serial Port e.g. ty_40_0
#% macro, channel, RGA channel number (port number of PC comm port 1-4)
#% macro, name, Object and gui association name
#% macro, mm00_label, Optional
#% macro, mm01_label, Optional
#% macro, mm02_label, Optional
#% macro, mm03_label, Optional
#% macro, mm04_label, Optional
#% macro, mm05_label, Optional
#% macro, mm06_label, Optional
#% macro, mm07_label, Optional
#% macro, mm08_label, Optional
#% macro, mm09_label, Optional
#% macro, mm10_label, Optional
#% macro, mm11_label, Optional
#% macro, mm12_label, Optional
#% macro, mm13_label, Optional
#% macro, mm14_label, Optional
#% macro, mm015_label, Optional
#% macro, mm00_mass, Optional
#% macro, mm01_mass, Optional
#% macro, mm02_mass, Optional
#% macro, mm03_mass, Optional
#% macro, mm04_mass, Optional
#% macro, mm05_mass, Optional
#% macro, mm06_mass, Optional
#% macro, mm07_mass, Optional
#% macro, mm08_mass, Optional
#% macro, mm09_mass, Optional
#% macro, mm10_mass, Optional
#% macro, mm11_mass, Optional
#% macro, mm12_mass, Optional
#% macro, mm13_mass, Optional
#% macro, mm14_mass, Optional
#% macro, mm15_mass, Optional
#% macro, pjmm00_label, Optional
#% macro, pjmm01_label, Optional
#% macro, pjmm02_label, Optional
#% macro, pjmm03_label, Optional
#% macro, pjmm04_label, Optional
#% macro, pjmm05_label, Optional
#% macro, pjmm06_label, Optional
#% macro, pjmm07_label, Optional
#% macro, pjmm08_label, Optional
#% macro, pjmm09_label, Optional
#% macro, pjmm10_label, Optional
#% macro, pjmm11_label, Optional
#% macro, pjmm12_label, Optional
#% macro, pjmm13_label, Optional
#% macro, pjmm14_label, Optional
#% macro, pjmm015_label, Optional
#% macro, pjmm00_mass, Optional
#% macro, pjmm01_mass, Optional
#% macro, pjmm02_mass, Optional
#% macro, pjmm03_mass, Optional
#% macro, pjmm04_mass, Optional
#% macro, pjmm05_mass, Optional
#% macro, pjmm06_mass, Optional
#% macro, pjmm07_mass, Optional
#% macro, pjmm08_mass, Optional
#% macro, pjmm09_mass, Optional
#% macro, pjmm10_mass, Optional
#% macro, pjmm11_mass, Optional
#% macro, pjmm12_mass, Optional
#% macro, pjmm13_mass, Optional
#% macro, pjmm14_mass, Optional
#% macro, pjmm15_mass, Optional

################################################################################

# This associates an edm screen with the template
# % gui, RGA1, edm, rga.edl, device=BL04J-VA-RGA-01
# This associates a BOY screen with the template
# % gui, RGA1, boycomponent, rgaApp_opi/rga.opi, device=BL04J-VA-RGA-01, desc=BL04J-VA-RGA-01, name=RGA1
# % gui, RGA1, boyembed, rgaApp_opi/rga_embed.opi, device=BL04J-VA-RGA-01, desc=BL04J-VA-RGA-01, name=RGA1
# % gui, RGA1, readback, Status,                BL04J-VA-RGA-01:STA

# Head Connected
#
#
#% archiver 10 Monitor
#
record(stringin, "BL04J-VA-RGA-01:HEAD")
{
    field(DESC, "Head")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol head(4) ty_40_1 0")
    field(SCAN, "10 second")
}
################################################################################
# Head Status
#
record(calc, "BL04J-VA-RGA-01:STA")
{
    field(DESC, "Overall status")
    field(CALC, "((A>4)&&(A<=7)&&(B#1))?0:A")
    field(SCAN, "1 second")
    field(INPA, "BL04J-VA-RGA-01:HEADSTA PP")
    field(INPB, "BL04J-VA-RGA-01:FILSTA PP")
    field(INPC, "BL04J-VA-RGA-01:SEV MS")
}
record(calc, "BL04J-VA-RGA-01:SEV")
{
    field(DESC, "Persistent Severity")
    field(CALC, "(B=3)?((A>999)?1000:(A+1)):0")
    field(SCAN, "1 second")
    field(INPA, "BL04J-VA-RGA-01:SEV.VAL")
    field(INPB, "BL04J-VA-RGA-01:HEADSTA.SEVR")
    field(HIGH, "30")
    field(HIHI, "120")
    field(HSV,  "MAJOR")
    field(HHSV, "INVALID")
}
#
#% archiver 10 Monitor
#% controldesk Head Status smon
#
record(mbbi, "BL04J-VA-RGA-01:HEADSTA")
{
    field(DESC, "Head Status")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol sta(4) ty_40_1 0")
#    field(SCAN, "1 second")
    field(FLNK, "BL04J-VA-RGA-01:DIS200")
    field(ZRST, "Idle")
    field(ONST, "Local Control")
    field(TWST, "Degas Filament")
    field(THST, "Cal Faraday")
    field(FRST, "Cal Multiplier")
    field(FVST, "Barchart 1-50")
    field(SXST, "Barchart 1-100")
    field(SVST, "Barchart 1-200")
    field(EIST, "Analog 1-200")
    field(NIST, "No RGA")
    field(TEST, "Peak Jump")
    field(UNSV, "MAJOR")
    field(ZRSV, "MINOR")
    field(ONSV, "MINOR")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MINOR")
    field(FVSV, "NO_ALARM")
    field(SXSV, "NO_ALARM")
    field(SVSV, "NO_ALARM")
    field(EISV, "NO_ALARM")
    field(NISV, "INVALID")
    field(TESV, "NO_ALARM")
}
#
#% archiver 10 Monitor
#% controldesk Head Status scon
#
record(mbbo, "BL04J-VA-RGA-01:CON")
{
    field(DESC, "Head Status")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol con(4) ty_40_1 0")
    field(NOBT, "4")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(TWVL, "2")
    field(THVL, "3")
    field(FRVL, "4")
    field(FVVL, "5")
    field(SXVL, "6")
    field(SVVL, "7")
    field(EIVL, "8")
    field(TEVL, "10")
    field(ZRST, "Stop")
    field(ONST, "Local Control")
    field(TWST, "Degas Filament")
    field(THST, "Cal Faraday")
    field(FRST, "Cal Multiplier")
    field(FVST, "Barchart 1-50")
    field(SXST, "Barchart 1-100")
    field(SVST, "Barchart 1-200")
#    field(EIST, "Analog 1-200")
    field(TEST, "Peak Jump")
}
################################################################################
# Disable Barcharts
#
#% archiver 10 Monitor
#
record(bo, "BL04J-VA-RGA-01:SEL")
{
    field(DESC, "Select Bars")
    field(FLNK, "BL04J-VA-RGA-01:DIS200")
    field(VAL,  "0")
    field(ZNAM, "Selected")
    field(ONAM, "All")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:DIS200")
{
    field(DESC, "Disable 200")
    field(CALC, "(A=7)&&(B=1)?0:1")
    field(INPA, "BL04J-VA-RGA-01:STA")
    field(INPB, "BL04J-VA-RGA-01:SEL")
    field(FLNK, "BL04J-VA-RGA-01:DIS100")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:DIS100")
{
    field(DESC, "Disable 100")
    field(CALC, "((A=6)||(A=7))&&(B=1)?0:1")
    field(INPA, "BL04J-VA-RGA-01:STA")
    field(INPB, "BL04J-VA-RGA-01:SEL")
    field(FLNK, "BL04J-VA-RGA-01:DIS50")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:DIS50")
{
    field(DESC, "Disable 50")
    field(CALC, "(A>=5)&&(A<=7)&&(B=1)?0:1")
    field(INPA, "BL04J-VA-RGA-01:STA")
    field(INPB, "BL04J-VA-RGA-01:SEL")
    field(FLNK, "BL04J-VA-RGA-01:DIS20")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:DIS20")
{
    field(DESC, "Disable Select")
    field(CALC, "(A>=5)&&(A<=7)?0:1")
    field(INPA, "BL04J-VA-RGA-01:STA")
    field(FLNK, "BL04J-VA-RGA-01:DISPJ")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:DISPJ")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)?0:1")
    field(INPA, "BL04J-VA-RGA-01:STA")
    field(INPB, "BL04J-VA-RGA-01:SEL")
    field(FLNK, "BL04J-VA-RGA-01:DISPJ1")
}
record(calc, "BL04J-VA-RGA-01:DISPJ1")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04J-VA-RGA-01:STA")
    field(INPB, "BL04J-VA-RGA-01:PJ:BIN1.DESC")
    field(FLNK, "BL04J-VA-RGA-01:DISPJ2")
}
record(calc, "BL04J-VA-RGA-01:DISPJ2")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04J-VA-RGA-01:STA")
    field(INPB, "BL04J-VA-RGA-01:PJ:BIN2.DESC")
    field(FLNK, "BL04J-VA-RGA-01:DISPJ3")
}
record(calc, "BL04J-VA-RGA-01:DISPJ3")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04J-VA-RGA-01:STA")
    field(INPB, "BL04J-VA-RGA-01:PJ:BIN3.DESC")
    field(FLNK, "BL04J-VA-RGA-01:DISPJ4")
}
record(calc, "BL04J-VA-RGA-01:DISPJ4")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04J-VA-RGA-01:STA")
    field(INPB, "BL04J-VA-RGA-01:PJ:BIN4.DESC")
    field(FLNK, "BL04J-VA-RGA-01:DISPJ5")
}
record(calc, "BL04J-VA-RGA-01:DISPJ5")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04J-VA-RGA-01:STA")
    field(INPB, "BL04J-VA-RGA-01:PJ:BIN5.DESC")
    field(FLNK, "BL04J-VA-RGA-01:DISPJ6")
}
record(calc, "BL04J-VA-RGA-01:DISPJ6")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04J-VA-RGA-01:STA")
    field(INPB, "BL04J-VA-RGA-01:PJ:BIN6.DESC")
    field(FLNK, "BL04J-VA-RGA-01:DISPJ7")
}
record(calc, "BL04J-VA-RGA-01:DISPJ7")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04J-VA-RGA-01:STA")
    field(INPB, "BL04J-VA-RGA-01:PJ:BIN7.DESC")
    field(FLNK, "BL04J-VA-RGA-01:DISPJ8")
}
record(calc, "BL04J-VA-RGA-01:DISPJ8")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04J-VA-RGA-01:STA")
    field(INPB, "BL04J-VA-RGA-01:PJ:BIN8.DESC")
    field(FLNK, "BL04J-VA-RGA-01:DISPJ9")
}
record(calc, "BL04J-VA-RGA-01:DISPJ9")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04J-VA-RGA-01:STA")
    field(INPB, "BL04J-VA-RGA-01:PJ:BIN9.DESC")
    field(FLNK, "BL04J-VA-RGA-01:DISPJ10")
}
record(calc, "BL04J-VA-RGA-01:DISPJ10")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04J-VA-RGA-01:STA")
    field(INPB, "BL04J-VA-RGA-01:PJ:BIN10.DESC")
    field(FLNK, "BL04J-VA-RGA-01:DISPJ11")
}
record(calc, "BL04J-VA-RGA-01:DISPJ11")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04J-VA-RGA-01:STA")
    field(INPB, "BL04J-VA-RGA-01:PJ:BIN11.DESC")
    field(FLNK, "BL04J-VA-RGA-01:DISPJ12")
}
record(calc, "BL04J-VA-RGA-01:DISPJ12")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04J-VA-RGA-01:STA")
    field(INPB, "BL04J-VA-RGA-01:PJ:BIN12.DESC")
}
################################################################################
# Current Selected Filament
#
#
#% archiver 10 Monitor
#% controldesk Filament smon
#
record(bi,"BL04J-VA-RGA-01:FIL") 
{
    field(DESC, "Filament")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol fil(4) ty_40_1 0")
    field(SCAN, "1 second")
    field(SDIS, "BL04J-VA-RGA-01:MODE")
    field(ZNAM, "Filament 1")
    field(ONAM, "Filament 2")
}
#
#% archiver 10 Monitor
#% controldesk Filament scon
#
record(bo, "BL04J-VA-RGA-01:SETFIL")
{
    field(DESC, "Filament")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol setfil(4) ty_40_1 0")
    field(ZNAM, "Filament 1")
    field(ONAM, "Filament 2")
}
################################################################################
# Filament Status
#
#
#% archiver 10 Monitor
#% controldesk Filament Status smon
#
record(mbbi, "BL04J-VA-RGA-01:FILSTA")
{
    field(DESC, "Filament Status")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol filsta(4) ty_40_1 0")
#    field(SCAN, "1 second")
    field(SDIS, "BL04J-VA-RGA-01:MODE")
    field(ZRST, "Off")
    field(ONST, "On")
    field(TWST, "Warming up")
    field(THST, "Cooling Down")
    field(FRST, "Failed")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "MAJOR")
}
#
#% archiver 10 Monitor
#% controldesk Filament Status scon
#
record(bo, "BL04J-VA-RGA-01:FILCON")
{
    field(DESC, "Filament Control")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol filcon(4) ty_40_1 0")
    field(ZNAM, "Off")
    field(ONAM, "On")
}
################################################################################
# IMG Interlock Status
#
#% archiver 10 Monitor
#% controldesk IMG Interlock smon
#
record(bi, "BL04J-VA-RGA-01:ILK") 
{
    field(DESC, "IMG Interlock")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol ilk(4) ty_40_1 0")
    field(SCAN, "1 second")
    field(SDIS, "BL04J-VA-RGA-01:MODE")
    field(ZNAM, "OK")
    field(ONAM, "Tripped")
    field(ZSV,  "NO_ALARM")
    field(OSV,  "MAJOR")
}
################################################################################
# Multiplier Status
#
#% archiver 10 Monitor
#% controldesk Multiplier smon
#
record(bi,"BL04J-VA-RGA-01:MLTSTA") 
{
    field(DESC, "Multiplier")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol mltsta(4) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZNAM, "Disabled")
    field(ONAM, "Enabled")
}
#
#% archiver 10 Monitor
#% controldesk Multiplier scon
#
record(bo, "BL04J-VA-RGA-01:MLTCON")
{
    field(DESC, "Multiplier")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol mltcon(4) ty_40_1 0")
    field(ZNAM, "Disable")
    field(ONAM, "Enable")
}
################################################################################
# Scan Mode Status
#
#% archiver 10 Monitor
#% controldesk Scan Mode smon
#
record(bi,"BL04J-VA-RGA-01:SCAN") 
{
    field(DESC, "Scan Mode")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol scan(4) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZNAM, "Single")
    field(ONAM, "Continuous")
}
#
#% archiver 10 Monitor
#% controldesk Scan Mode scon
#
record(bo, "BL04J-VA-RGA-01:SETSCAN")
{
    field(DESC, "Scan Mode")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol setscan(4) ty_40_1 0")
    field(ZNAM, "Single")
    field(ONAM, "Continuous")
}
################################################################################
# Control Mode Status
#
#% archiver 10 Monitor
#
record(bi,"BL04J-VA-RGA-01:MODE") 
{
    field(DESC, "Scan Mode")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol mode(4) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZNAM, "Remote")
    field(ONAM, "Local")
}
#
#% archiver 10 Monitor
#
record(bo, "BL04J-VA-RGA-01:SETMODE")
{
    field(DESC, "Scan Mode")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol setmode(4) ty_40_1 0")
    field(ZNAM, "Remote")
    field(ONAM, "Local")
}
################################################################################
# Are there data to read
#
#% archiver 10 Monitor
#% controldesk Data to read smon
#
record(mbbi, "BL04J-VA-RGA-01:DATA")
{
    field(DESC, "Data to read")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol data(4) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZRST, "No Data")
    field(ONST, "Barchart 1-50")
    field(TWST, "Barchart 1-100")
    field(THST, "Barchart 1-200")
    field(FRST, "Analog 1-200")
    field(FVST, "Peak Jump")
    field(UNSV, "NO_ALARM")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "NO_ALARM")
    field(FVSV, "NO_ALARM")
}
################################################################################
# Date of current scan
#
#% archiver 10 Monitor
#% controldesk Date readback
#
record(stringin, "BL04J-VA-RGA-01:DATE")
{
    field(DESC, "Date")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol date(4) ty_40_1 0")
    field(SCAN, "1 second")
}
###
### THESE RECORDS REMOVED TO SAVE RS232 BANDWIDTH
### When we move to 3.14 we can use sCalcout
###
#record(stringin, "BL04J-VA-RGA-01:YEAR")
#{
#    field(DESC, "Year")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol year(4) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04J-VA-RGA-01:DIS50")
#}
#record(longin, "BL04J-VA-RGA-01:MON")
#{
#    field(DESC, "Month")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol mon(4) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04J-VA-RGA-01:DIS50")
#    field(HOPR, "12")
#    field(LOPR, "1")
#    field(HIGH, "12")
#    field(LOW,  "1")
#    field(HSV,  "MINOR")
#    field(LSV,  "MINOR")
#}
#record(longin, "BL04J-VA-RGA-01:DAY")
#{
#    field(DESC, "Day")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol day(4) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04J-VA-RGA-01:DIS50")
#    field(HOPR, "31")
#    field(LOPR, "1")
#    field(HIGH, "31")
#    field(LOW,  "1")
#    field(HSV,  "MINOR")
#    field(LSV,  "MINOR")
#}
#record(stringin, "BL04J-VA-RGA-01:HOUR")
#{
#    field(DESC, "Hour")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol hour(4) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04J-VA-RGA-01:DIS50")
#}
#record(stringin, "BL04J-VA-RGA-01:MIN")
#{
#    field(DESC, "Minute")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol min(4) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04J-VA-RGA-01:DIS50")
#}
#record(stringin, "BL04J-VA-RGA-01:SEC")
#{
#    field(DESC, "Second")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol sec(4) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04J-VA-RGA-01:DIS50")
#}
################################################################################
# Detector Setting
#
#% archiver 10 Monitor
#% controldesk Detector Setting smon
#
record(mbbi, "BL04J-VA-RGA-01:DET")
{
    field(DESC, "Detector Setting")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol det(4) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZRST, "No Data")
    field(ONST, "Faraday")
    field(TWST, "Multiplier")
}
################################################################################
# Total Pressure
#
#% archiver 10 Monitor
#% controldesk Total Pressure readback
#
record(ai, "BL04J-VA-RGA-01:TOTP")
{
    field(DESC, "Total Pressure")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol total(4) ty_40_1 0")
    field(SCAN, "10 second")
    field(FLNK, "BL04J-VA-RGA-01:TOTPLOG")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(calcout, "BL04J-VA-RGA-01:TOTPADEL")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04J-VA-RGA-01:TOTP.ADEL")
    field(INPA, "BL04J-VA-RGA-01:TOTP")
    field(INPB, "20")
    field(SCAN, "10 second")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:TOTPLOG")
{
    field(DESC, "Total Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:TOTP MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
################################################################################
# Sum Partial
#
#% archiver 10 Monitor
#% controldesk Sum of Peaks readback
#
record(ai, "BL04J-VA-RGA-01:SUMP")
{
    field(DESC, "Sum of Peaks")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol sum(4) ty_40_1 0")
    field(SCAN, "10 second")
    field(FLNK, "BL04J-VA-RGA-01:SUMPLOG")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(calcout, "BL04J-VA-RGA-01:SUMPADEL")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04J-VA-RGA-01:SUMP.ADEL")
    field(INPA, "BL04J-VA-RGA-01:SUMP")
    field(INPB, "20")
    field(SCAN, "10 second")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:SUMPLOG")
{
    field(DESC, "Sum of Peaks")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:SUMP MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
################################################################################
# Bar Chart Deadband
#
record(calcout, "BL04J-VA-RGA-01:ADEL:M2")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04J-VA-RGA-01:BAR:M2.ADEL")
    field(INPA, "BL04J-VA-RGA-01:BAR:M2")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04J-VA-RGA-01:ADEL:M4")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04J-VA-RGA-01:BAR:M4.ADEL")
    field(INPA, "BL04J-VA-RGA-01:BAR:M4")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04J-VA-RGA-01:ADEL:M14")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04J-VA-RGA-01:BAR:M14.ADEL")
    field(INPA, "BL04J-VA-RGA-01:BAR:M14")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04J-VA-RGA-01:ADEL:M15")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04J-VA-RGA-01:BAR:M15.ADEL")
    field(INPA, "BL04J-VA-RGA-01:BAR:M15")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04J-VA-RGA-01:ADEL:M16")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04J-VA-RGA-01:BAR:M16.ADEL")
    field(INPA, "BL04J-VA-RGA-01:BAR:M16")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04J-VA-RGA-01:ADEL:M18")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04J-VA-RGA-01:BAR:M18.ADEL")
    field(INPA, "BL04J-VA-RGA-01:BAR:M18")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04J-VA-RGA-01:ADEL:M28")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04J-VA-RGA-01:BAR:M28.ADEL")
    field(INPA, "BL04J-VA-RGA-01:BAR:M28")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04J-VA-RGA-01:ADEL:M32")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04J-VA-RGA-01:BAR:M32.ADEL")
    field(INPA, "BL04J-VA-RGA-01:BAR:M32")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04J-VA-RGA-01:ADEL:M40")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04J-VA-RGA-01:BAR:M40.ADEL")
    field(INPA, "BL04J-VA-RGA-01:BAR:M40")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04J-VA-RGA-01:ADEL:M44")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04J-VA-RGA-01:BAR:M44.ADEL")
    field(INPA, "BL04J-VA-RGA-01:BAR:M44")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04J-VA-RGA-01:ADEL:M69")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04J-VA-RGA-01:BAR:M69.ADEL")
    field(INPA, "BL04J-VA-RGA-01:BAR:M69")
    field(INPB, "20")
    field(SCAN, "10 second")
}
################################################################################
# Bar Chart
#
record(ai, "BL04J-VA-RGA-01:BAR:M1")
{
    field(DESC, "Mass 1")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,1) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M1")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk H2 readback
#
record(ai, "BL04J-VA-RGA-01:BAR:M2")
{
    field(DESC, "H2")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,2) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS20")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M2")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M3")
{
    field(DESC, "Mass 3")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,3) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M3")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk He readback
#
record(ai, "BL04J-VA-RGA-01:BAR:M4")
{
    field(DESC, "He")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,4) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS20")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M4")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M5")
{
    field(DESC, "Mass 5")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,5) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M5")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M6")
{
    field(DESC, "Mass 6")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,6) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M6")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M7")
{
    field(DESC, "Mass 7")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,7) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M7")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M8")
{
    field(DESC, "Mass 8")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,8) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M8")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M9")
{
    field(DESC, "Mass 9")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,9) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M9")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M10")
{
    field(DESC, "Mass 10")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,10) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M10")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M11")
{
    field(DESC, "Mass 11")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,11) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M11")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M12")
{
    field(DESC, "Mass 12")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,12) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M12")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M13")
{
    field(DESC, "Mass 13")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,13) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M13")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk CH2/N2++ readback
#
record(ai, "BL04J-VA-RGA-01:BAR:M14")
{
    field(DESC, "CH2/N2++")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,14) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS20")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M14")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk CH3 readback
#
record(ai, "BL04J-VA-RGA-01:BAR:M15")
{
    field(DESC, "CH3")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,15) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS20")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M15")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk CH4 readback
#
record(ai, "BL04J-VA-RGA-01:BAR:M16")
{
    field(DESC, "CH4")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,16) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS20")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M16")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk OH readback
#
record(ai, "BL04J-VA-RGA-01:BAR:M17")
{
    field(DESC, "OH")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,17) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M17")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk H20 readback
#
record(ai, "BL04J-VA-RGA-01:BAR:M18")
{
    field(DESC, "H20")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,18) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS20")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M18")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M19")
{
    field(DESC, "Mass 19")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,19) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M19")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M20")
{
    field(DESC, "Neon")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,20) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M20")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M21")
{
    field(DESC, "Mass 21")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,21) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M21")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M22")
{
    field(DESC, "Mass 22")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,22) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M22")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M23")
{
    field(DESC, "Mass 23")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,23) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M23")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M24")
{
    field(DESC, "Mass 24")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,24) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M24")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M25")
{
    field(DESC, "Mass 25")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,25) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M25")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M26")
{
    field(DESC, "Mass 26")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,26) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M26")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M27")
{
    field(DESC, "Mass 27")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,27) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M27")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk N2/CO readback
#
record(ai, "BL04J-VA-RGA-01:BAR:M28")
{
    field(DESC, "N2/CO")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,28) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS20")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M28")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M29")
{
    field(DESC, "Mass 29")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,29) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M29")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M30")
{
    field(DESC, "NO")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,30) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M30")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M31")
{
    field(DESC, "Mass 31")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,31) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M31")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk O2 readback
#
record(ai, "BL04J-VA-RGA-01:BAR:M32")
{
    field(DESC, "O2")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,32) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS20")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M32")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M33")
{
    field(DESC, "Mass 33")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,33) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M33")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M34")
{
    field(DESC, "Mass 34")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,34) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M34")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M35")
{
    field(DESC, "Mass 35")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,35) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M35")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M36")
{
    field(DESC, "Mass 36")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,36) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M36")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M37")
{
    field(DESC, "Mass 37")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,37) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M37")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M38")
{
    field(DESC, "Fluorine")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,38) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M38")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M39")
{
    field(DESC, "Mass 39")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,39) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M39")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk Ar readback
#
record(ai, "BL04J-VA-RGA-01:BAR:M40")
{
    field(DESC, "Ar")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,40) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS20")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M40")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M41")
{
    field(DESC, "Mass 41")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,41) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M41")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M42")
{
    field(DESC, "Mass 42")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,42) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M42")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M43")
{
    field(DESC, "Mass 43")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,43) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M43")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk CO2 readback
#
record(ai, "BL04J-VA-RGA-01:BAR:M44")
{
    field(DESC, "CO2")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,44) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS20")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M44")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M45")
{
    field(DESC, "Mass 45")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,45) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M45")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M46")
{
    field(DESC, "NO2")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,46) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M46")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M47")
{
    field(DESC, "Mass 47")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,47) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M47")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M48")
{
    field(DESC, "Ozone")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,48) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M48")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M49")
{
    field(DESC, "Mass 49")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,49) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M49")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M50")
{
    field(DESC, "Mass 50")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,50) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS50")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M50")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M51")
{
    field(DESC, "Mass 51")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,51) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M51")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M52")
{
    field(DESC, "Mass 52")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,52) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M52")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M53")
{
    field(DESC, "Mass 53")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,53) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M53")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M54")
{
    field(DESC, "Mass 54")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,54) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M54")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M55")
{
    field(DESC, "Mass 55")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,55) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M55")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M56")
{
    field(DESC, "Mass 56")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,56) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M56")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M57")
{
    field(DESC, "Mass 57")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,57) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M57")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M58")
{
    field(DESC, "Mass 58")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,58) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M58")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M59")
{
    field(DESC, "Mass 59")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,59) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M59")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M60")
{
    field(DESC, "Buckyball")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,60) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M60")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M61")
{
    field(DESC, "Mass 61")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,61) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M61")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M62")
{
    field(DESC, "Mass 62")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,62) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M62")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M63")
{
    field(DESC, "Mass 63")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,63) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M63")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M64")
{
    field(DESC, "Mass 64")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,64) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M64")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M65")
{
    field(DESC, "Mass 65")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,65) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M65")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M66")
{
    field(DESC, "Mass 66")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,66) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M66")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M67")
{
    field(DESC, "Mass 67")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,67) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M67")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M68")
{
    field(DESC, "Mass 68")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,68) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M68")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk Ar readback
#
record(ai, "BL04J-VA-RGA-01:BAR:M69")
{
    field(DESC, "CF3/C5H9")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,69) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS20")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M69")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M70")
{
    field(DESC, "Chlorine")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,70) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M70")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M71")
{
    field(DESC, "Mass 71")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,71) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M71")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M72")
{
    field(DESC, "Mass 72")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,72) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M72")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M73")
{
    field(DESC, "Mass 73")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,73) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M73")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M74")
{
    field(DESC, "Mass 74")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,74) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M74")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M75")
{
    field(DESC, "Mass 75")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,75) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M75")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M76")
{
    field(DESC, "Mass 76")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,76) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M76")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M77")
{
    field(DESC, "Mass 77")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,77) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M77")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M78")
{
    field(DESC, "Mass 78")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,78) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M78")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M79")
{
    field(DESC, "Mass 79")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,79) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M79")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M80")
{
    field(DESC, "Mass 80")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,80) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M80")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M81")
{
    field(DESC, "Mass 81")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,81) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M81")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M82")
{
    field(DESC, "Mass 82")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,82) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M82")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M83")
{
    field(DESC, "Mass 83")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,83) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M83")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M84")
{
    field(DESC, "Krypton")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,84) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M84")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M85")
{
    field(DESC, "Mass 85")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,85) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M85")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M86")
{
    field(DESC, "Mass 86")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,86) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M86")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M87")
{
    field(DESC, "Mass 87")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,87) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M87")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M88")
{
    field(DESC, "Mass 88")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,88) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M88")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M89")
{
    field(DESC, "Mass 89")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,89) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M89")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M90")
{
    field(DESC, "Mass 90")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,90) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M90")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M91")
{
    field(DESC, "Mass 91")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,91) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M91")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M92")
{
    field(DESC, "Mass 92")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,92) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M92")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M93")
{
    field(DESC, "Mass 93")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,93) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M93")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M94")
{
    field(DESC, "Mass 94")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,94) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M94")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M95")
{
    field(DESC, "Mass 95")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,95) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M95")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M96")
{
    field(DESC, "Mass 96")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,96) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M96")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M97")
{
    field(DESC, "Mass 97")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,97) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M97")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M98")
{
    field(DESC, "Mass 98")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,98) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M98")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M99")
{
    field(DESC, "Mass 99")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,99) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M99")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M100")
{
    field(DESC, "Mass 100")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,100) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS100")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M100")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M101")
{
    field(DESC, "Mass 101")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,101) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M101")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M102")
{
    field(DESC, "Mass 102")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,102) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M102")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M103")
{
    field(DESC, "Mass 103")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,103) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M103")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M104")
{
    field(DESC, "Mass 104")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,104) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M104")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M105")
{
    field(DESC, "Mass 105")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,105) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M105")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M106")
{
    field(DESC, "Mass 106")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,106) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M106")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M107")
{
    field(DESC, "Mass 107")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,107) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M107")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M108")
{
    field(DESC, "Mass 108")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,108) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M108")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M109")
{
    field(DESC, "Mass 109")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,109) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M109")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M110")
{
    field(DESC, "Mass 110")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,110) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M110")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M111")
{
    field(DESC, "Mass 111")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,111) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M111")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M112")
{
    field(DESC, "Mass 112")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,112) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M112")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M113")
{
    field(DESC, "Mass 113")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,113) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M113")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M114")
{
    field(DESC, "Mass 114")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,114) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M114")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M115")
{
    field(DESC, "Mass 115")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,115) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M115")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M116")
{
    field(DESC, "Mass 116")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,116) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M116")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M117")
{
    field(DESC, "Mass 117")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,117) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M117")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M118")
{
    field(DESC, "Mass 118")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,118) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M118")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M119")
{
    field(DESC, "Mass 119")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,119) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M119")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M120")
{
    field(DESC, "Mass 120")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,120) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M120")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M121")
{
    field(DESC, "Mass 121")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,121) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M121")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M122")
{
    field(DESC, "Mass 122")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,122) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M122")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M123")
{
    field(DESC, "Mass 123")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,123) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M123")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M124")
{
    field(DESC, "Mass 124")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,124) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M124")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M125")
{
    field(DESC, "Mass 125")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,125) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M125")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M126")
{
    field(DESC, "Mass 126")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,126) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M126")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M127")
{
    field(DESC, "Mass 127")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,127) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M127")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M128")
{
    field(DESC, "Mass 128")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,128) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M128")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M129")
{
    field(DESC, "Mass 129")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,129) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M129")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M130")
{
    field(DESC, "Mass 130")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,130) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M130")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M131")
{
    field(DESC, "Xenon")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,131) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M131")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M132")
{
    field(DESC, "Mass 132")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,132) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M132")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M133")
{
    field(DESC, "Mass 133")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,133) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M133")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M134")
{
    field(DESC, "Mass 134")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,134) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M134")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M135")
{
    field(DESC, "Mass 135")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,135) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M135")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M136")
{
    field(DESC, "Mass 136")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,136) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M136")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M137")
{
    field(DESC, "Mass 137")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,137) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M137")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M138")
{
    field(DESC, "Mass 138")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,138) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M138")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M139")
{
    field(DESC, "Mass 139")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,139) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M139")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M140")
{
    field(DESC, "Mass 140")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,140) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M140")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M141")
{
    field(DESC, "Mass 141")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,141) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M141")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M142")
{
    field(DESC, "Mass 142")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,142) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M142")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M143")
{
    field(DESC, "Mass 143")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,143) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M143")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M144")
{
    field(DESC, "Mass 144")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,144) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M144")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M145")
{
    field(DESC, "Mass 145")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,145) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M145")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M146")
{
    field(DESC, "Mass 146")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,146) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M146")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M147")
{
    field(DESC, "Mass 147")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,147) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M147")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M148")
{
    field(DESC, "Mass 148")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,148) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M148")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M149")
{
    field(DESC, "Mass 149")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,149) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M149")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M150")
{
    field(DESC, "Mass 150")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,150) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M150")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M151")
{
    field(DESC, "Mass 151")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,151) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M151")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M152")
{
    field(DESC, "Mass 152")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,152) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M152")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M153")
{
    field(DESC, "Mass 153")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,153) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M153")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M154")
{
    field(DESC, "Mass 154")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,154) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M154")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M155")
{
    field(DESC, "Mass 155")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,155) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M155")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M156")
{
    field(DESC, "Mass 156")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,156) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M156")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M157")
{
    field(DESC, "Mass 157")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,157) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M157")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M158")
{
    field(DESC, "Mass 158")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,158) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M158")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M159")
{
    field(DESC, "Mass 159")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,159) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M159")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M160")
{
    field(DESC, "Bromine")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,160) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M160")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M161")
{
    field(DESC, "Mass 161")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,161) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M161")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M162")
{
    field(DESC, "Mass 162")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,162) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M162")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M163")
{
    field(DESC, "Mass 163")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,163) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M163")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M164")
{
    field(DESC, "Mass 164")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,164) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M164")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M165")
{
    field(DESC, "Mass 165")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,165) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M165")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M166")
{
    field(DESC, "Mass 166")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,166) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M166")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M167")
{
    field(DESC, "Mass 167")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,167) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M167")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M168")
{
    field(DESC, "Mass 168")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,168) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M168")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M169")
{
    field(DESC, "Mass 169")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,169) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M169")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M170")
{
    field(DESC, "Mass 170")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,170) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M170")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M171")
{
    field(DESC, "Mass 171")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,171) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M171")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M172")
{
    field(DESC, "Mass 172")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,172) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M172")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M173")
{
    field(DESC, "Mass 173")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,173) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M173")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M174")
{
    field(DESC, "Mass 174")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,174) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M174")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M175")
{
    field(DESC, "Mass 175")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,175) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M175")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M176")
{
    field(DESC, "Mass 176")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,176) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M176")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M177")
{
    field(DESC, "Mass 177")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,177) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M177")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M178")
{
    field(DESC, "Mass 178")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,178) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M178")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M179")
{
    field(DESC, "Mass 179")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,179) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M179")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M180")
{
    field(DESC, "Mass 180")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,180) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M180")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M181")
{
    field(DESC, "Mass 181")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,181) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M181")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M182")
{
    field(DESC, "Mass 182")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,182) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M182")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M183")
{
    field(DESC, "Mass 183")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,183) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M183")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M184")
{
    field(DESC, "Mass 184")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,184) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M184")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M185")
{
    field(DESC, "Mass 185")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,185) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M185")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M186")
{
    field(DESC, "Mass 186")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,186) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M186")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M187")
{
    field(DESC, "Mass 187")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,187) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M187")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M188")
{
    field(DESC, "Mass 188")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,188) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M188")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M189")
{
    field(DESC, "Mass 189")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,189) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M189")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M190")
{
    field(DESC, "Mass 190")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,190) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M190")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M191")
{
    field(DESC, "Mass 191")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,191) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M191")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M192")
{
    field(DESC, "Mass 192")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,192) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M192")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M193")
{
    field(DESC, "Mass 193")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,193) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M193")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M194")
{
    field(DESC, "Mass 194")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,194) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M194")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M195")
{
    field(DESC, "Mass 195")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,195) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M195")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M196")
{
    field(DESC, "Mass 196")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,196) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M196")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M197")
{
    field(DESC, "Mass 197")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,197) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M197")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M198")
{
    field(DESC, "Mass 198")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,198) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M198")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M199")
{
    field(DESC, "Mass 199")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,199) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M199")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04J-VA-RGA-01:BAR:M200")
{
    field(DESC, "Mass 200")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(4,200) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04J-VA-RGA-01:DIS200")
    field(FLNK, "BL04J-VA-RGA-01:LOG:M200")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
################################################################################
# Log of Bar Chart
#
record(calc, "BL04J-VA-RGA-01:LOG:M1")
{
    field(DESC, "Mass 1")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M1 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:LOG:M2")
{
    field(DESC, "H2")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M2 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04J-VA-RGA-01:LOG:M3")
{
    field(DESC, "Mass 3")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M3 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:LOG:M4")
{
    field(DESC, "He")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M4 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04J-VA-RGA-01:LOG:M5")
{
    field(DESC, "Mass 5")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M5 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M6")
{
    field(DESC, "Mass 6")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M6 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M7")
{
    field(DESC, "Mass 7")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M7 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M8")
{
    field(DESC, "Mass 8")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M8 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M9")
{
    field(DESC, "Mass 9")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M9 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M10")
{
    field(DESC, "Mass 10")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M10 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M11")
{
    field(DESC, "Mass 11")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M11 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M12")
{
    field(DESC, "Mass 12")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M12 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M13")
{
    field(DESC, "Mass 13")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M13 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:LOG:M14")
{
    field(DESC, "CH2/N2++")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M14 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:LOG:M15")
{
    field(DESC, "CH3")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M15 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:LOG:M16")
{
    field(DESC, "CH4")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M16 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:LOG:M17")
{
    field(DESC, "OH")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M17 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:LOG:M18")
{
    field(DESC, "H20")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M18 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04J-VA-RGA-01:LOG:M19")
{
    field(DESC, "Mass 19")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M19 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M20")
{
    field(DESC, "Neon")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M20 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M21")
{
    field(DESC, "Mass 21")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M21 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M22")
{
    field(DESC, "Mass 22")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M22 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M23")
{
    field(DESC, "Mass 23")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M23 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M24")
{
    field(DESC, "Mass 24")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M24 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M25")
{
    field(DESC, "Mass 25")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M25 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M26")
{
    field(DESC, "Mass 26")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M26 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M27")
{
    field(DESC, "Mass 27")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M27 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:LOG:M28")
{
    field(DESC, "N2/CO")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M28 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04J-VA-RGA-01:LOG:M29")
{
    field(DESC, "Mass 29")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M29 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M30")
{
    field(DESC, "NO")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M30 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M31")
{
    field(DESC, "Mass 31")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M31 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:LOG:M32")
{
    field(DESC, "O2")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M32 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04J-VA-RGA-01:LOG:M33")
{
    field(DESC, "Mass 33")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M33 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M34")
{
    field(DESC, "Mass 34")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M34 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M35")
{
    field(DESC, "Mass 35")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M35 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M36")
{
    field(DESC, "Mass 36")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M36 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M37")
{
    field(DESC, "Mass 37")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M37 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M38")
{
    field(DESC, "Fluorine")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M38 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M39")
{
    field(DESC, "Mass 39")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M39 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:LOG:M40")
{
    field(DESC, "Ar")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M40 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04J-VA-RGA-01:LOG:M41")
{
    field(DESC, "Mass 41")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M41 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M42")
{
    field(DESC, "Mass 42")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M42 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M43")
{
    field(DESC, "Mass 43")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M43 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:LOG:M44")
{
    field(DESC, "CO2")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M44 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04J-VA-RGA-01:LOG:M45")
{
    field(DESC, "Mass 45")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M45 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M46")
{
    field(DESC, "NO2")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M46 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M47")
{
    field(DESC, "Mass 47")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M47 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M48")
{
    field(DESC, "Ozone")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M48 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M49")
{
    field(DESC, "Mass 49")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M49 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M50")
{
    field(DESC, "Mass 50")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M50 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M51")
{
    field(DESC, "Mass 51")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M51 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M52")
{
    field(DESC, "Mass 52")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M52 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M53")
{
    field(DESC, "Mass 53")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M53 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M54")
{
    field(DESC, "Mass 54")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M54 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M55")
{
    field(DESC, "Mass 55")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M55 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M56")
{
    field(DESC, "Mass 56")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M56 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M57")
{
    field(DESC, "Mass 57")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M57 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M58")
{
    field(DESC, "Mass 58")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M58 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M59")
{
    field(DESC, "Mass 59")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M59 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M60")
{
    field(DESC, "Buckyball")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M60 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M61")
{
    field(DESC, "Mass 61")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M61 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M62")
{
    field(DESC, "Mass 62")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M62 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M63")
{
    field(DESC, "Mass 63")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M63 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M64")
{
    field(DESC, "Mass 64")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M64 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M65")
{
    field(DESC, "Mass 65")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M65 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M66")
{
    field(DESC, "Mass 66")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M66 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M67")
{
    field(DESC, "Mass 67")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M67 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M68")
{
    field(DESC, "Mass 68")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M68 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04J-VA-RGA-01:LOG:M69")
{
    field(DESC, "CF3/C5H9")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M69 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04J-VA-RGA-01:LOG:M70")
{
    field(DESC, "Mass 70")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M70 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M71")
{
    field(DESC, "Mass 71")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M71 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M72")
{
    field(DESC, "Mass 72")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M72 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M73")
{
    field(DESC, "Mass 73")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M73 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M74")
{
    field(DESC, "Mass 74")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M74 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M75")
{
    field(DESC, "Mass 75")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M75 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M76")
{
    field(DESC, "Mass 76")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M76 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M77")
{
    field(DESC, "Mass 77")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M77 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M78")
{
    field(DESC, "Mass 78")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M78 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M79")
{
    field(DESC, "Mass 79")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M79 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M80")
{
    field(DESC, "Mass 80")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M80 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M81")
{
    field(DESC, "Mass 81")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M81 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M82")
{
    field(DESC, "Mass 82")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M82 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M83")
{
    field(DESC, "Mass 83")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M83 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M84")
{
    field(DESC, "Mass 84")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M84 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M85")
{
    field(DESC, "Mass 85")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M85 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M86")
{
    field(DESC, "Mass 86")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M86 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M87")
{
    field(DESC, "Mass 87")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M87 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M88")
{
    field(DESC, "Mass 88")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M88 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M89")
{
    field(DESC, "Mass 89")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M89 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M90")
{
    field(DESC, "Mass 90")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M90 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M91")
{
    field(DESC, "Mass 91")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M91 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M92")
{
    field(DESC, "Mass 92")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M92 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M93")
{
    field(DESC, "Mass 93")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M93 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M94")
{
    field(DESC, "Mass 94")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M94 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M95")
{
    field(DESC, "Mass 95")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M95 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M96")
{
    field(DESC, "Mass 96")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M96 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M97")
{
    field(DESC, "Mass 97")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M97 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M98")
{
    field(DESC, "Mass 98")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M98 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M99")
{
    field(DESC, "Mass 99")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M99 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M100")
{
    field(DESC, "Mass 100")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M100 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M101")
{
    field(DESC, "Mass 101")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M101 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M102")
{
    field(DESC, "Mass 102")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M102 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M103")
{
    field(DESC, "Mass 103")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M103 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M104")
{
    field(DESC, "Mass 104")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M104 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M105")
{
    field(DESC, "Mass 105")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M105 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M106")
{
    field(DESC, "Mass 106")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M106 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M107")
{
    field(DESC, "Mass 107")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M107 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M108")
{
    field(DESC, "Mass 108")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M108 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M109")
{
    field(DESC, "Mass 109")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M109 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M110")
{
    field(DESC, "Mass 110")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M110 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M111")
{
    field(DESC, "Mass 111")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M111 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M112")
{
    field(DESC, "Mass 112")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M112 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M113")
{
    field(DESC, "Mass 113")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M113 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M114")
{
    field(DESC, "Mass 114")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M114 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M115")
{
    field(DESC, "Mass 115")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M115 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M116")
{
    field(DESC, "Mass 116")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M116 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M117")
{
    field(DESC, "Mass 117")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M117 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M118")
{
    field(DESC, "Mass 118")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M118 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M119")
{
    field(DESC, "Mass 119")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M119 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M120")
{
    field(DESC, "Mass 120")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M120 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M121")
{
    field(DESC, "Mass 121")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M121 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M122")
{
    field(DESC, "Mass 122")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M122 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M123")
{
    field(DESC, "Mass 123")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M123 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M124")
{
    field(DESC, "Mass 124")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M124 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M125")
{
    field(DESC, "Mass 125")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M125 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M126")
{
    field(DESC, "Mass 126")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M126 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M127")
{
    field(DESC, "Mass 127")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M127 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M128")
{
    field(DESC, "Mass 128")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M128 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M129")
{
    field(DESC, "Mass 129")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M129 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M130")
{
    field(DESC, "Mass 130")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M130 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M131")
{
    field(DESC, "Mass 131")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M131 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M132")
{
    field(DESC, "Mass 132")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M132 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M133")
{
    field(DESC, "Mass 133")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M133 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M134")
{
    field(DESC, "Mass 134")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M134 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M135")
{
    field(DESC, "Mass 135")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M135 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M136")
{
    field(DESC, "Mass 136")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M136 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M137")
{
    field(DESC, "Mass 137")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M137 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M138")
{
    field(DESC, "Mass 138")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M138 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M139")
{
    field(DESC, "Mass 139")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M139 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M140")
{
    field(DESC, "Mass 140")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M140 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M141")
{
    field(DESC, "Mass 141")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M141 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M142")
{
    field(DESC, "Mass 142")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M142 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M143")
{
    field(DESC, "Mass 143")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M143 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M144")
{
    field(DESC, "Mass 144")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M144 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M145")
{
    field(DESC, "Mass 145")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M145 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M146")
{
    field(DESC, "Mass 146")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M146 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M147")
{
    field(DESC, "Mass 147")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M147 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M148")
{
    field(DESC, "Mass 148")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M148 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M149")
{
    field(DESC, "Mass 149")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M149 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M150")
{
    field(DESC, "Mass 150")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M150 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M151")
{
    field(DESC, "Mass 151")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M151 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M152")
{
    field(DESC, "Mass 152")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M152 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M153")
{
    field(DESC, "Mass 153")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M153 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M154")
{
    field(DESC, "Mass 154")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M154 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M155")
{
    field(DESC, "Mass 155")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M155 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M156")
{
    field(DESC, "Mass 156")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M156 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M157")
{
    field(DESC, "Mass 157")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M157 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M158")
{
    field(DESC, "Mass 158")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M158 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M159")
{
    field(DESC, "Mass 159")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M159 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M160")
{
    field(DESC, "Mass 160")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M160 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M161")
{
    field(DESC, "Mass 161")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M161 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M162")
{
    field(DESC, "Mass 162")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M162 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M163")
{
    field(DESC, "Mass 163")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M163 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M164")
{
    field(DESC, "Mass 164")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M164 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M165")
{
    field(DESC, "Mass 165")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M165 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M166")
{
    field(DESC, "Mass 166")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M166 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M167")
{
    field(DESC, "Mass 167")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M167 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M168")
{
    field(DESC, "Mass 168")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M168 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M169")
{
    field(DESC, "Mass 169")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M169 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M170")
{
    field(DESC, "Mass 170")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M170 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M171")
{
    field(DESC, "Mass 171")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M171 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M172")
{
    field(DESC, "Mass 172")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M172 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M173")
{
    field(DESC, "Mass 173")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M173 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M174")
{
    field(DESC, "Mass 174")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M174 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M175")
{
    field(DESC, "Mass 175")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M175 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M176")
{
    field(DESC, "Mass 176")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M176 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M177")
{
    field(DESC, "Mass 177")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M177 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M178")
{
    field(DESC, "Mass 178")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M178 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M179")
{
    field(DESC, "Mass 179")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M179 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M180")
{
    field(DESC, "Mass 180")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M180 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M181")
{
    field(DESC, "Mass 181")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M181 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M182")
{
    field(DESC, "Mass 182")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M182 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M183")
{
    field(DESC, "Mass 183")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M183 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M184")
{
    field(DESC, "Mass 184")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M184 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M185")
{
    field(DESC, "Mass 185")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M185 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M186")
{
    field(DESC, "Mass 186")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M186 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M187")
{
    field(DESC, "Mass 187")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M187 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M188")
{
    field(DESC, "Mass 188")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M188 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M189")
{
    field(DESC, "Mass 189")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M189 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M190")
{
    field(DESC, "Mass 190")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M190 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M191")
{
    field(DESC, "Mass 191")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M191 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M192")
{
    field(DESC, "Mass 192")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M192 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M193")
{
    field(DESC, "Mass 193")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M193 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M194")
{
    field(DESC, "Mass 194")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M194 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M195")
{
    field(DESC, "Mass 195")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M195 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M196")
{
    field(DESC, "Mass 196")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M196 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M197")
{
    field(DESC, "Mass 197")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M197 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M198")
{
    field(DESC, "Mass 198")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M198 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M199")
{
    field(DESC, "Mass 199")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M199 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04J-VA-RGA-01:LOG:M200")
{
    field(DESC, "Mass 200")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04J-VA-RGA-01:BAR:M200 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
################################################################################

#
# Standard bar chart masses (nominally up to 11)
record(mbbi, "BL04J-VA-RGA-01:MASSMAP") 
{
  field(DTYP, "Soft Channel")
  field(DESC, "Chart mass allocation")
  field(PINI, "YES")
  field(ZRST, "H2")
  field(ONST, "He")
  field(TWST, "CH2/N2++")
  field(THST, "CH3")
  field(FRST, "CH4")
  field(FVST, "H2O")
  field(SXST, "N2/CO")
  field(SVST, "O2")
  field(EIST, "Ar")
  field(NIST, "CO2")
  field(TEST, "CF3/C5H9")
  field(ELST, "unused")
  field(TVST, "unused")
  field(TTST, "unused")
  field(FTST, "unused")
  field(FFST, "unused")
  field(ZRVL, "2")
  field(ONVL, "4")
  field(TWVL, "14")
  field(THVL, "15")
  field(FRVL, "16")
  field(FVVL, "18")
  field(SXVL, "28")
  field(SVVL, "32")
  field(EIVL, "40")
  field(NIVL, "44")
  field(TEVL, "69")
  field(ELVL, "0")
  field(TVVL, "0")
  field(TTVL, "0")
  field(FTVL, "0")
  field(FFVL, "0")
}

# Peak Jump Masses (nominally up to 12)
#
record(mbbi, "BL04J-VA-RGA-01:PJMASSMAP") 
{
  field(DTYP, "Soft Channel")
  field(DESC, "Peak Jump masses")
  field(PINI, "YES")
  field(ZRST, "H2")
  field(ONST, "unused")
  field(TWST, "unused")
  field(THST, "unused")
  field(FRST, "unused")
  field(FVST, "unused")
  field(SXST, "unused")
  field(SVST, "unused")
  field(EIST, "unused")
  field(NIST, "unused")
  field(TEST, "unused")
  field(ELST, "unused")
  field(TVST, "unused")
  field(TTST, "unused")
  field(FTST, "unused")
  field(FFST, "unused")
  field(ZRVL, "2")
  field(ONVL, "0")
  field(TWVL, "0")
  field(THVL, "0")
  field(FRVL, "0")
  field(FVVL, "0")
  field(SXVL, "0")
  field(SVVL, "0")
  field(EIVL, "0")
  field(NIVL, "0")
  field(TEVL, "0")
  field(ELVL, "0")
  field(TVVL, "0")
  field(TTVL, "0")
  field(FTVL, "0")
  field(FFVL, "0")
}

## The INP field to this PV has been "2;4" for
## over two years and just picked up on caSnooper.
## Making it 24 for now until the correct value is determined.
## IJG: 19 Dec 14
##
record(stringin, "BL04J-VA-RGA-01:PJMASSSTR") 
{
  field(DESC, "Peak Jump masses")
  field(PINI, "YES")
  field(INP, "24")
}

record(waveform, "BL04J-VA-RGA-01:SPECTRUM")
{
    #field(DTYP, "Waveform")
    field(FTVL, "DOUBLE")
    field(NELM, "6400")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04J-VA-RGA-01:PJ:BIN1")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(4) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04J-VA-RGA-01:DISPJ1")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04J-VA-RGA-01:PJ:BIN2")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(4) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04J-VA-RGA-01:DISPJ2")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04J-VA-RGA-01:PJ:BIN3")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(4) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04J-VA-RGA-01:DISPJ3")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04J-VA-RGA-01:PJ:BIN4")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(4) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04J-VA-RGA-01:DISPJ4")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04J-VA-RGA-01:PJ:BIN5")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(4) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04J-VA-RGA-01:DISPJ5")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04J-VA-RGA-01:PJ:BIN6")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(4) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04J-VA-RGA-01:DISPJ6")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04J-VA-RGA-01:PJ:BIN7")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(4) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04J-VA-RGA-01:DISPJ7")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04J-VA-RGA-01:PJ:BIN8")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(4) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04J-VA-RGA-01:DISPJ8")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04J-VA-RGA-01:PJ:BIN9")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(4) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04J-VA-RGA-01:DISPJ9")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04J-VA-RGA-01:PJ:BIN10")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(4) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04J-VA-RGA-01:DISPJ10")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04J-VA-RGA-01:PJ:BIN11")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(4) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04J-VA-RGA-01:DISPJ11")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04J-VA-RGA-01:PJ:BIN12")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(4) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04J-VA-RGA-01:DISPJ12")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

# rga.db
# Template database for an RGA
# Pete Owens - 24-6-04
#
# It appears that any mass to be displayed on the summary rga.edl
# has its SDIS field set to DIS20
# IJG 11-5-11
#
# Macros:
#% macro, device, Device Prefix
#% macro, port, Asyn Serial Port e.g. ty_40_0
#% macro, channel, RGA channel number (port number of PC comm port 1-4)
#% macro, name, Object and gui association name
#% macro, mm00_label, Optional
#% macro, mm01_label, Optional
#% macro, mm02_label, Optional
#% macro, mm03_label, Optional
#% macro, mm04_label, Optional
#% macro, mm05_label, Optional
#% macro, mm06_label, Optional
#% macro, mm07_label, Optional
#% macro, mm08_label, Optional
#% macro, mm09_label, Optional
#% macro, mm10_label, Optional
#% macro, mm11_label, Optional
#% macro, mm12_label, Optional
#% macro, mm13_label, Optional
#% macro, mm14_label, Optional
#% macro, mm015_label, Optional
#% macro, mm00_mass, Optional
#% macro, mm01_mass, Optional
#% macro, mm02_mass, Optional
#% macro, mm03_mass, Optional
#% macro, mm04_mass, Optional
#% macro, mm05_mass, Optional
#% macro, mm06_mass, Optional
#% macro, mm07_mass, Optional
#% macro, mm08_mass, Optional
#% macro, mm09_mass, Optional
#% macro, mm10_mass, Optional
#% macro, mm11_mass, Optional
#% macro, mm12_mass, Optional
#% macro, mm13_mass, Optional
#% macro, mm14_mass, Optional
#% macro, mm15_mass, Optional
#% macro, pjmm00_label, Optional
#% macro, pjmm01_label, Optional
#% macro, pjmm02_label, Optional
#% macro, pjmm03_label, Optional
#% macro, pjmm04_label, Optional
#% macro, pjmm05_label, Optional
#% macro, pjmm06_label, Optional
#% macro, pjmm07_label, Optional
#% macro, pjmm08_label, Optional
#% macro, pjmm09_label, Optional
#% macro, pjmm10_label, Optional
#% macro, pjmm11_label, Optional
#% macro, pjmm12_label, Optional
#% macro, pjmm13_label, Optional
#% macro, pjmm14_label, Optional
#% macro, pjmm015_label, Optional
#% macro, pjmm00_mass, Optional
#% macro, pjmm01_mass, Optional
#% macro, pjmm02_mass, Optional
#% macro, pjmm03_mass, Optional
#% macro, pjmm04_mass, Optional
#% macro, pjmm05_mass, Optional
#% macro, pjmm06_mass, Optional
#% macro, pjmm07_mass, Optional
#% macro, pjmm08_mass, Optional
#% macro, pjmm09_mass, Optional
#% macro, pjmm10_mass, Optional
#% macro, pjmm11_mass, Optional
#% macro, pjmm12_mass, Optional
#% macro, pjmm13_mass, Optional
#% macro, pjmm14_mass, Optional
#% macro, pjmm15_mass, Optional

################################################################################

# This associates an edm screen with the template
# % gui, RGA11, edm, rga.edl, device=BL04I-VA-RGA-11
# This associates a BOY screen with the template
# % gui, RGA11, boycomponent, rgaApp_opi/rga.opi, device=BL04I-VA-RGA-11, desc=BL04I-VA-RGA-11, name=RGA11
# % gui, RGA11, boyembed, rgaApp_opi/rga_embed.opi, device=BL04I-VA-RGA-11, desc=BL04I-VA-RGA-11, name=RGA11
# % gui, RGA11, readback, Status,                BL04I-VA-RGA-11:STA

# Head Connected
#
#
#% archiver 10 Monitor
#
record(stringin, "BL04I-VA-RGA-11:HEAD")
{
    field(DESC, "Head")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol head(3) ty_40_1 0")
    field(SCAN, "10 second")
}
################################################################################
# Head Status
#
record(calc, "BL04I-VA-RGA-11:STA")
{
    field(DESC, "Overall status")
    field(CALC, "((A>4)&&(A<=7)&&(B#1))?0:A")
    field(SCAN, "1 second")
    field(INPA, "BL04I-VA-RGA-11:HEADSTA PP")
    field(INPB, "BL04I-VA-RGA-11:FILSTA PP")
    field(INPC, "BL04I-VA-RGA-11:SEV MS")
}
record(calc, "BL04I-VA-RGA-11:SEV")
{
    field(DESC, "Persistent Severity")
    field(CALC, "(B=3)?((A>999)?1000:(A+1)):0")
    field(SCAN, "1 second")
    field(INPA, "BL04I-VA-RGA-11:SEV.VAL")
    field(INPB, "BL04I-VA-RGA-11:HEADSTA.SEVR")
    field(HIGH, "30")
    field(HIHI, "120")
    field(HSV,  "MAJOR")
    field(HHSV, "INVALID")
}
#
#% archiver 10 Monitor
#% controldesk Head Status smon
#
record(mbbi, "BL04I-VA-RGA-11:HEADSTA")
{
    field(DESC, "Head Status")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol sta(3) ty_40_1 0")
#    field(SCAN, "1 second")
    field(FLNK, "BL04I-VA-RGA-11:DIS200")
    field(ZRST, "Idle")
    field(ONST, "Local Control")
    field(TWST, "Degas Filament")
    field(THST, "Cal Faraday")
    field(FRST, "Cal Multiplier")
    field(FVST, "Barchart 1-50")
    field(SXST, "Barchart 1-100")
    field(SVST, "Barchart 1-200")
    field(EIST, "Analog 1-200")
    field(NIST, "No RGA")
    field(TEST, "Peak Jump")
    field(UNSV, "MAJOR")
    field(ZRSV, "MINOR")
    field(ONSV, "MINOR")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MINOR")
    field(FVSV, "NO_ALARM")
    field(SXSV, "NO_ALARM")
    field(SVSV, "NO_ALARM")
    field(EISV, "NO_ALARM")
    field(NISV, "INVALID")
    field(TESV, "NO_ALARM")
}
#
#% archiver 10 Monitor
#% controldesk Head Status scon
#
record(mbbo, "BL04I-VA-RGA-11:CON")
{
    field(DESC, "Head Status")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol con(3) ty_40_1 0")
    field(NOBT, "4")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(TWVL, "2")
    field(THVL, "3")
    field(FRVL, "4")
    field(FVVL, "5")
    field(SXVL, "6")
    field(SVVL, "7")
    field(EIVL, "8")
    field(TEVL, "10")
    field(ZRST, "Stop")
    field(ONST, "Local Control")
    field(TWST, "Degas Filament")
    field(THST, "Cal Faraday")
    field(FRST, "Cal Multiplier")
    field(FVST, "Barchart 1-50")
    field(SXST, "Barchart 1-100")
    field(SVST, "Barchart 1-200")
#    field(EIST, "Analog 1-200")
    field(TEST, "Peak Jump")
}
################################################################################
# Disable Barcharts
#
#% archiver 10 Monitor
#
record(bo, "BL04I-VA-RGA-11:SEL")
{
    field(DESC, "Select Bars")
    field(FLNK, "BL04I-VA-RGA-11:DIS200")
    field(VAL,  "0")
    field(ZNAM, "Selected")
    field(ONAM, "All")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:DIS200")
{
    field(DESC, "Disable 200")
    field(CALC, "(A=7)&&(B=1)?0:1")
    field(INPA, "BL04I-VA-RGA-11:STA")
    field(INPB, "BL04I-VA-RGA-11:SEL")
    field(FLNK, "BL04I-VA-RGA-11:DIS100")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:DIS100")
{
    field(DESC, "Disable 100")
    field(CALC, "((A=6)||(A=7))&&(B=1)?0:1")
    field(INPA, "BL04I-VA-RGA-11:STA")
    field(INPB, "BL04I-VA-RGA-11:SEL")
    field(FLNK, "BL04I-VA-RGA-11:DIS50")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:DIS50")
{
    field(DESC, "Disable 50")
    field(CALC, "(A>=5)&&(A<=7)&&(B=1)?0:1")
    field(INPA, "BL04I-VA-RGA-11:STA")
    field(INPB, "BL04I-VA-RGA-11:SEL")
    field(FLNK, "BL04I-VA-RGA-11:DIS20")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:DIS20")
{
    field(DESC, "Disable Select")
    field(CALC, "(A>=5)&&(A<=7)?0:1")
    field(INPA, "BL04I-VA-RGA-11:STA")
    field(FLNK, "BL04I-VA-RGA-11:DISPJ")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:DISPJ")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)?0:1")
    field(INPA, "BL04I-VA-RGA-11:STA")
    field(INPB, "BL04I-VA-RGA-11:SEL")
    field(FLNK, "BL04I-VA-RGA-11:DISPJ1")
}
record(calc, "BL04I-VA-RGA-11:DISPJ1")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-11:STA")
    field(INPB, "BL04I-VA-RGA-11:PJ:BIN1.DESC")
    field(FLNK, "BL04I-VA-RGA-11:DISPJ2")
}
record(calc, "BL04I-VA-RGA-11:DISPJ2")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-11:STA")
    field(INPB, "BL04I-VA-RGA-11:PJ:BIN2.DESC")
    field(FLNK, "BL04I-VA-RGA-11:DISPJ3")
}
record(calc, "BL04I-VA-RGA-11:DISPJ3")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-11:STA")
    field(INPB, "BL04I-VA-RGA-11:PJ:BIN3.DESC")
    field(FLNK, "BL04I-VA-RGA-11:DISPJ4")
}
record(calc, "BL04I-VA-RGA-11:DISPJ4")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-11:STA")
    field(INPB, "BL04I-VA-RGA-11:PJ:BIN4.DESC")
    field(FLNK, "BL04I-VA-RGA-11:DISPJ5")
}
record(calc, "BL04I-VA-RGA-11:DISPJ5")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-11:STA")
    field(INPB, "BL04I-VA-RGA-11:PJ:BIN5.DESC")
    field(FLNK, "BL04I-VA-RGA-11:DISPJ6")
}
record(calc, "BL04I-VA-RGA-11:DISPJ6")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-11:STA")
    field(INPB, "BL04I-VA-RGA-11:PJ:BIN6.DESC")
    field(FLNK, "BL04I-VA-RGA-11:DISPJ7")
}
record(calc, "BL04I-VA-RGA-11:DISPJ7")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-11:STA")
    field(INPB, "BL04I-VA-RGA-11:PJ:BIN7.DESC")
    field(FLNK, "BL04I-VA-RGA-11:DISPJ8")
}
record(calc, "BL04I-VA-RGA-11:DISPJ8")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-11:STA")
    field(INPB, "BL04I-VA-RGA-11:PJ:BIN8.DESC")
    field(FLNK, "BL04I-VA-RGA-11:DISPJ9")
}
record(calc, "BL04I-VA-RGA-11:DISPJ9")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-11:STA")
    field(INPB, "BL04I-VA-RGA-11:PJ:BIN9.DESC")
    field(FLNK, "BL04I-VA-RGA-11:DISPJ10")
}
record(calc, "BL04I-VA-RGA-11:DISPJ10")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-11:STA")
    field(INPB, "BL04I-VA-RGA-11:PJ:BIN10.DESC")
    field(FLNK, "BL04I-VA-RGA-11:DISPJ11")
}
record(calc, "BL04I-VA-RGA-11:DISPJ11")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-11:STA")
    field(INPB, "BL04I-VA-RGA-11:PJ:BIN11.DESC")
    field(FLNK, "BL04I-VA-RGA-11:DISPJ12")
}
record(calc, "BL04I-VA-RGA-11:DISPJ12")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-11:STA")
    field(INPB, "BL04I-VA-RGA-11:PJ:BIN12.DESC")
}
################################################################################
# Current Selected Filament
#
#
#% archiver 10 Monitor
#% controldesk Filament smon
#
record(bi,"BL04I-VA-RGA-11:FIL") 
{
    field(DESC, "Filament")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol fil(3) ty_40_1 0")
    field(SCAN, "1 second")
    field(SDIS, "BL04I-VA-RGA-11:MODE")
    field(ZNAM, "Filament 1")
    field(ONAM, "Filament 2")
}
#
#% archiver 10 Monitor
#% controldesk Filament scon
#
record(bo, "BL04I-VA-RGA-11:SETFIL")
{
    field(DESC, "Filament")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol setfil(3) ty_40_1 0")
    field(ZNAM, "Filament 1")
    field(ONAM, "Filament 2")
}
################################################################################
# Filament Status
#
#
#% archiver 10 Monitor
#% controldesk Filament Status smon
#
record(mbbi, "BL04I-VA-RGA-11:FILSTA")
{
    field(DESC, "Filament Status")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol filsta(3) ty_40_1 0")
#    field(SCAN, "1 second")
    field(SDIS, "BL04I-VA-RGA-11:MODE")
    field(ZRST, "Off")
    field(ONST, "On")
    field(TWST, "Warming up")
    field(THST, "Cooling Down")
    field(FRST, "Failed")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "MAJOR")
}
#
#% archiver 10 Monitor
#% controldesk Filament Status scon
#
record(bo, "BL04I-VA-RGA-11:FILCON")
{
    field(DESC, "Filament Control")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol filcon(3) ty_40_1 0")
    field(ZNAM, "Off")
    field(ONAM, "On")
}
################################################################################
# IMG Interlock Status
#
#% archiver 10 Monitor
#% controldesk IMG Interlock smon
#
record(bi, "BL04I-VA-RGA-11:ILK") 
{
    field(DESC, "IMG Interlock")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol ilk(3) ty_40_1 0")
    field(SCAN, "1 second")
    field(SDIS, "BL04I-VA-RGA-11:MODE")
    field(ZNAM, "OK")
    field(ONAM, "Tripped")
    field(ZSV,  "NO_ALARM")
    field(OSV,  "MAJOR")
}
################################################################################
# Multiplier Status
#
#% archiver 10 Monitor
#% controldesk Multiplier smon
#
record(bi,"BL04I-VA-RGA-11:MLTSTA") 
{
    field(DESC, "Multiplier")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol mltsta(3) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZNAM, "Disabled")
    field(ONAM, "Enabled")
}
#
#% archiver 10 Monitor
#% controldesk Multiplier scon
#
record(bo, "BL04I-VA-RGA-11:MLTCON")
{
    field(DESC, "Multiplier")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol mltcon(3) ty_40_1 0")
    field(ZNAM, "Disable")
    field(ONAM, "Enable")
}
################################################################################
# Scan Mode Status
#
#% archiver 10 Monitor
#% controldesk Scan Mode smon
#
record(bi,"BL04I-VA-RGA-11:SCAN") 
{
    field(DESC, "Scan Mode")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol scan(3) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZNAM, "Single")
    field(ONAM, "Continuous")
}
#
#% archiver 10 Monitor
#% controldesk Scan Mode scon
#
record(bo, "BL04I-VA-RGA-11:SETSCAN")
{
    field(DESC, "Scan Mode")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol setscan(3) ty_40_1 0")
    field(ZNAM, "Single")
    field(ONAM, "Continuous")
}
################################################################################
# Control Mode Status
#
#% archiver 10 Monitor
#
record(bi,"BL04I-VA-RGA-11:MODE") 
{
    field(DESC, "Scan Mode")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol mode(3) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZNAM, "Remote")
    field(ONAM, "Local")
}
#
#% archiver 10 Monitor
#
record(bo, "BL04I-VA-RGA-11:SETMODE")
{
    field(DESC, "Scan Mode")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol setmode(3) ty_40_1 0")
    field(ZNAM, "Remote")
    field(ONAM, "Local")
}
################################################################################
# Are there data to read
#
#% archiver 10 Monitor
#% controldesk Data to read smon
#
record(mbbi, "BL04I-VA-RGA-11:DATA")
{
    field(DESC, "Data to read")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol data(3) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZRST, "No Data")
    field(ONST, "Barchart 1-50")
    field(TWST, "Barchart 1-100")
    field(THST, "Barchart 1-200")
    field(FRST, "Analog 1-200")
    field(FVST, "Peak Jump")
    field(UNSV, "NO_ALARM")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "NO_ALARM")
    field(FVSV, "NO_ALARM")
}
################################################################################
# Date of current scan
#
#% archiver 10 Monitor
#% controldesk Date readback
#
record(stringin, "BL04I-VA-RGA-11:DATE")
{
    field(DESC, "Date")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol date(3) ty_40_1 0")
    field(SCAN, "1 second")
}
###
### THESE RECORDS REMOVED TO SAVE RS232 BANDWIDTH
### When we move to 3.14 we can use sCalcout
###
#record(stringin, "BL04I-VA-RGA-11:YEAR")
#{
#    field(DESC, "Year")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol year(3) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04I-VA-RGA-11:DIS50")
#}
#record(longin, "BL04I-VA-RGA-11:MON")
#{
#    field(DESC, "Month")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol mon(3) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04I-VA-RGA-11:DIS50")
#    field(HOPR, "12")
#    field(LOPR, "1")
#    field(HIGH, "12")
#    field(LOW,  "1")
#    field(HSV,  "MINOR")
#    field(LSV,  "MINOR")
#}
#record(longin, "BL04I-VA-RGA-11:DAY")
#{
#    field(DESC, "Day")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol day(3) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04I-VA-RGA-11:DIS50")
#    field(HOPR, "31")
#    field(LOPR, "1")
#    field(HIGH, "31")
#    field(LOW,  "1")
#    field(HSV,  "MINOR")
#    field(LSV,  "MINOR")
#}
#record(stringin, "BL04I-VA-RGA-11:HOUR")
#{
#    field(DESC, "Hour")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol hour(3) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04I-VA-RGA-11:DIS50")
#}
#record(stringin, "BL04I-VA-RGA-11:MIN")
#{
#    field(DESC, "Minute")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol min(3) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04I-VA-RGA-11:DIS50")
#}
#record(stringin, "BL04I-VA-RGA-11:SEC")
#{
#    field(DESC, "Second")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol sec(3) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04I-VA-RGA-11:DIS50")
#}
################################################################################
# Detector Setting
#
#% archiver 10 Monitor
#% controldesk Detector Setting smon
#
record(mbbi, "BL04I-VA-RGA-11:DET")
{
    field(DESC, "Detector Setting")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol det(3) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZRST, "No Data")
    field(ONST, "Faraday")
    field(TWST, "Multiplier")
}
################################################################################
# Total Pressure
#
#% archiver 10 Monitor
#% controldesk Total Pressure readback
#
record(ai, "BL04I-VA-RGA-11:TOTP")
{
    field(DESC, "Total Pressure")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol total(3) ty_40_1 0")
    field(SCAN, "10 second")
    field(FLNK, "BL04I-VA-RGA-11:TOTPLOG")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(calcout, "BL04I-VA-RGA-11:TOTPADEL")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-11:TOTP.ADEL")
    field(INPA, "BL04I-VA-RGA-11:TOTP")
    field(INPB, "20")
    field(SCAN, "10 second")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:TOTPLOG")
{
    field(DESC, "Total Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:TOTP MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
################################################################################
# Sum Partial
#
#% archiver 10 Monitor
#% controldesk Sum of Peaks readback
#
record(ai, "BL04I-VA-RGA-11:SUMP")
{
    field(DESC, "Sum of Peaks")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol sum(3) ty_40_1 0")
    field(SCAN, "10 second")
    field(FLNK, "BL04I-VA-RGA-11:SUMPLOG")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(calcout, "BL04I-VA-RGA-11:SUMPADEL")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-11:SUMP.ADEL")
    field(INPA, "BL04I-VA-RGA-11:SUMP")
    field(INPB, "20")
    field(SCAN, "10 second")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:SUMPLOG")
{
    field(DESC, "Sum of Peaks")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:SUMP MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
################################################################################
# Bar Chart Deadband
#
record(calcout, "BL04I-VA-RGA-11:ADEL:M2")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-11:BAR:M2.ADEL")
    field(INPA, "BL04I-VA-RGA-11:BAR:M2")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-11:ADEL:M4")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-11:BAR:M4.ADEL")
    field(INPA, "BL04I-VA-RGA-11:BAR:M4")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-11:ADEL:M14")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-11:BAR:M14.ADEL")
    field(INPA, "BL04I-VA-RGA-11:BAR:M14")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-11:ADEL:M15")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-11:BAR:M15.ADEL")
    field(INPA, "BL04I-VA-RGA-11:BAR:M15")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-11:ADEL:M16")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-11:BAR:M16.ADEL")
    field(INPA, "BL04I-VA-RGA-11:BAR:M16")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-11:ADEL:M18")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-11:BAR:M18.ADEL")
    field(INPA, "BL04I-VA-RGA-11:BAR:M18")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-11:ADEL:M28")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-11:BAR:M28.ADEL")
    field(INPA, "BL04I-VA-RGA-11:BAR:M28")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-11:ADEL:M32")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-11:BAR:M32.ADEL")
    field(INPA, "BL04I-VA-RGA-11:BAR:M32")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-11:ADEL:M40")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-11:BAR:M40.ADEL")
    field(INPA, "BL04I-VA-RGA-11:BAR:M40")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-11:ADEL:M44")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-11:BAR:M44.ADEL")
    field(INPA, "BL04I-VA-RGA-11:BAR:M44")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-11:ADEL:M69")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-11:BAR:M69.ADEL")
    field(INPA, "BL04I-VA-RGA-11:BAR:M69")
    field(INPB, "20")
    field(SCAN, "10 second")
}
################################################################################
# Bar Chart
#
record(ai, "BL04I-VA-RGA-11:BAR:M1")
{
    field(DESC, "Mass 1")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,1) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M1")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk H2 readback
#
record(ai, "BL04I-VA-RGA-11:BAR:M2")
{
    field(DESC, "H2")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,2) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS20")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M2")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M3")
{
    field(DESC, "Mass 3")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,3) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M3")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk He readback
#
record(ai, "BL04I-VA-RGA-11:BAR:M4")
{
    field(DESC, "He")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,4) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS20")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M4")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M5")
{
    field(DESC, "Mass 5")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,5) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M5")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M6")
{
    field(DESC, "Mass 6")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,6) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M6")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M7")
{
    field(DESC, "Mass 7")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,7) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M7")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M8")
{
    field(DESC, "Mass 8")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,8) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M8")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M9")
{
    field(DESC, "Mass 9")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,9) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M9")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M10")
{
    field(DESC, "Mass 10")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,10) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M10")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M11")
{
    field(DESC, "Mass 11")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,11) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M11")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M12")
{
    field(DESC, "Mass 12")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,12) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M12")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M13")
{
    field(DESC, "Mass 13")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,13) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M13")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk CH2/N2++ readback
#
record(ai, "BL04I-VA-RGA-11:BAR:M14")
{
    field(DESC, "CH2/N2++")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,14) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS20")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M14")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk CH3 readback
#
record(ai, "BL04I-VA-RGA-11:BAR:M15")
{
    field(DESC, "CH3")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,15) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS20")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M15")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk CH4 readback
#
record(ai, "BL04I-VA-RGA-11:BAR:M16")
{
    field(DESC, "CH4")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,16) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS20")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M16")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk OH readback
#
record(ai, "BL04I-VA-RGA-11:BAR:M17")
{
    field(DESC, "OH")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,17) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M17")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk H20 readback
#
record(ai, "BL04I-VA-RGA-11:BAR:M18")
{
    field(DESC, "H20")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,18) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS20")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M18")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M19")
{
    field(DESC, "Mass 19")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,19) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M19")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M20")
{
    field(DESC, "Neon")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,20) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M20")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M21")
{
    field(DESC, "Mass 21")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,21) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M21")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M22")
{
    field(DESC, "Mass 22")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,22) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M22")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M23")
{
    field(DESC, "Mass 23")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,23) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M23")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M24")
{
    field(DESC, "Mass 24")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,24) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M24")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M25")
{
    field(DESC, "Mass 25")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,25) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M25")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M26")
{
    field(DESC, "Mass 26")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,26) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M26")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M27")
{
    field(DESC, "Mass 27")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,27) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M27")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk N2/CO readback
#
record(ai, "BL04I-VA-RGA-11:BAR:M28")
{
    field(DESC, "N2/CO")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,28) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS20")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M28")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M29")
{
    field(DESC, "Mass 29")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,29) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M29")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M30")
{
    field(DESC, "NO")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,30) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M30")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M31")
{
    field(DESC, "Mass 31")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,31) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M31")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk O2 readback
#
record(ai, "BL04I-VA-RGA-11:BAR:M32")
{
    field(DESC, "O2")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,32) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS20")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M32")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M33")
{
    field(DESC, "Mass 33")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,33) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M33")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M34")
{
    field(DESC, "Mass 34")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,34) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M34")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M35")
{
    field(DESC, "Mass 35")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,35) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M35")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M36")
{
    field(DESC, "Mass 36")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,36) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M36")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M37")
{
    field(DESC, "Mass 37")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,37) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M37")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M38")
{
    field(DESC, "Fluorine")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,38) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M38")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M39")
{
    field(DESC, "Mass 39")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,39) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M39")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk Ar readback
#
record(ai, "BL04I-VA-RGA-11:BAR:M40")
{
    field(DESC, "Ar")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,40) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS20")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M40")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M41")
{
    field(DESC, "Mass 41")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,41) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M41")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M42")
{
    field(DESC, "Mass 42")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,42) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M42")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M43")
{
    field(DESC, "Mass 43")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,43) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M43")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk CO2 readback
#
record(ai, "BL04I-VA-RGA-11:BAR:M44")
{
    field(DESC, "CO2")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,44) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS20")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M44")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M45")
{
    field(DESC, "Mass 45")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,45) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M45")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M46")
{
    field(DESC, "NO2")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,46) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M46")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M47")
{
    field(DESC, "Mass 47")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,47) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M47")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M48")
{
    field(DESC, "Ozone")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,48) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M48")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M49")
{
    field(DESC, "Mass 49")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,49) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M49")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M50")
{
    field(DESC, "Mass 50")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,50) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS50")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M50")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M51")
{
    field(DESC, "Mass 51")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,51) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M51")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M52")
{
    field(DESC, "Mass 52")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,52) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M52")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M53")
{
    field(DESC, "Mass 53")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,53) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M53")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M54")
{
    field(DESC, "Mass 54")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,54) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M54")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M55")
{
    field(DESC, "Mass 55")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,55) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M55")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M56")
{
    field(DESC, "Mass 56")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,56) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M56")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M57")
{
    field(DESC, "Mass 57")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,57) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M57")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M58")
{
    field(DESC, "Mass 58")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,58) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M58")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M59")
{
    field(DESC, "Mass 59")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,59) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M59")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M60")
{
    field(DESC, "Buckyball")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,60) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M60")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M61")
{
    field(DESC, "Mass 61")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,61) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M61")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M62")
{
    field(DESC, "Mass 62")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,62) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M62")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M63")
{
    field(DESC, "Mass 63")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,63) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M63")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M64")
{
    field(DESC, "Mass 64")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,64) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M64")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M65")
{
    field(DESC, "Mass 65")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,65) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M65")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M66")
{
    field(DESC, "Mass 66")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,66) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M66")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M67")
{
    field(DESC, "Mass 67")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,67) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M67")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M68")
{
    field(DESC, "Mass 68")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,68) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M68")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk Ar readback
#
record(ai, "BL04I-VA-RGA-11:BAR:M69")
{
    field(DESC, "CF3/C5H9")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,69) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS20")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M69")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M70")
{
    field(DESC, "Chlorine")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,70) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M70")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M71")
{
    field(DESC, "Mass 71")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,71) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M71")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M72")
{
    field(DESC, "Mass 72")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,72) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M72")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M73")
{
    field(DESC, "Mass 73")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,73) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M73")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M74")
{
    field(DESC, "Mass 74")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,74) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M74")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M75")
{
    field(DESC, "Mass 75")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,75) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M75")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M76")
{
    field(DESC, "Mass 76")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,76) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M76")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M77")
{
    field(DESC, "Mass 77")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,77) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M77")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M78")
{
    field(DESC, "Mass 78")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,78) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M78")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M79")
{
    field(DESC, "Mass 79")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,79) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M79")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M80")
{
    field(DESC, "Mass 80")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,80) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M80")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M81")
{
    field(DESC, "Mass 81")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,81) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M81")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M82")
{
    field(DESC, "Mass 82")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,82) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M82")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M83")
{
    field(DESC, "Mass 83")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,83) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M83")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M84")
{
    field(DESC, "Krypton")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,84) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M84")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M85")
{
    field(DESC, "Mass 85")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,85) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M85")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M86")
{
    field(DESC, "Mass 86")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,86) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M86")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M87")
{
    field(DESC, "Mass 87")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,87) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M87")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M88")
{
    field(DESC, "Mass 88")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,88) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M88")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M89")
{
    field(DESC, "Mass 89")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,89) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M89")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M90")
{
    field(DESC, "Mass 90")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,90) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M90")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M91")
{
    field(DESC, "Mass 91")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,91) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M91")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M92")
{
    field(DESC, "Mass 92")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,92) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M92")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M93")
{
    field(DESC, "Mass 93")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,93) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M93")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M94")
{
    field(DESC, "Mass 94")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,94) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M94")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M95")
{
    field(DESC, "Mass 95")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,95) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M95")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M96")
{
    field(DESC, "Mass 96")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,96) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M96")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M97")
{
    field(DESC, "Mass 97")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,97) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M97")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M98")
{
    field(DESC, "Mass 98")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,98) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M98")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M99")
{
    field(DESC, "Mass 99")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,99) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M99")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M100")
{
    field(DESC, "Mass 100")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,100) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS100")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M100")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M101")
{
    field(DESC, "Mass 101")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,101) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M101")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M102")
{
    field(DESC, "Mass 102")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,102) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M102")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M103")
{
    field(DESC, "Mass 103")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,103) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M103")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M104")
{
    field(DESC, "Mass 104")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,104) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M104")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M105")
{
    field(DESC, "Mass 105")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,105) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M105")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M106")
{
    field(DESC, "Mass 106")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,106) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M106")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M107")
{
    field(DESC, "Mass 107")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,107) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M107")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M108")
{
    field(DESC, "Mass 108")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,108) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M108")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M109")
{
    field(DESC, "Mass 109")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,109) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M109")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M110")
{
    field(DESC, "Mass 110")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,110) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M110")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M111")
{
    field(DESC, "Mass 111")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,111) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M111")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M112")
{
    field(DESC, "Mass 112")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,112) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M112")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M113")
{
    field(DESC, "Mass 113")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,113) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M113")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M114")
{
    field(DESC, "Mass 114")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,114) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M114")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M115")
{
    field(DESC, "Mass 115")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,115) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M115")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M116")
{
    field(DESC, "Mass 116")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,116) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M116")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M117")
{
    field(DESC, "Mass 117")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,117) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M117")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M118")
{
    field(DESC, "Mass 118")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,118) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M118")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M119")
{
    field(DESC, "Mass 119")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,119) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M119")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M120")
{
    field(DESC, "Mass 120")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,120) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M120")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M121")
{
    field(DESC, "Mass 121")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,121) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M121")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M122")
{
    field(DESC, "Mass 122")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,122) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M122")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M123")
{
    field(DESC, "Mass 123")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,123) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M123")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M124")
{
    field(DESC, "Mass 124")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,124) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M124")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M125")
{
    field(DESC, "Mass 125")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,125) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M125")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M126")
{
    field(DESC, "Mass 126")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,126) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M126")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M127")
{
    field(DESC, "Mass 127")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,127) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M127")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M128")
{
    field(DESC, "Mass 128")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,128) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M128")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M129")
{
    field(DESC, "Mass 129")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,129) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M129")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M130")
{
    field(DESC, "Mass 130")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,130) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M130")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M131")
{
    field(DESC, "Xenon")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,131) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M131")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M132")
{
    field(DESC, "Mass 132")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,132) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M132")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M133")
{
    field(DESC, "Mass 133")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,133) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M133")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M134")
{
    field(DESC, "Mass 134")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,134) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M134")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M135")
{
    field(DESC, "Mass 135")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,135) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M135")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M136")
{
    field(DESC, "Mass 136")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,136) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M136")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M137")
{
    field(DESC, "Mass 137")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,137) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M137")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M138")
{
    field(DESC, "Mass 138")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,138) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M138")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M139")
{
    field(DESC, "Mass 139")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,139) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M139")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M140")
{
    field(DESC, "Mass 140")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,140) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M140")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M141")
{
    field(DESC, "Mass 141")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,141) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M141")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M142")
{
    field(DESC, "Mass 142")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,142) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M142")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M143")
{
    field(DESC, "Mass 143")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,143) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M143")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M144")
{
    field(DESC, "Mass 144")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,144) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M144")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M145")
{
    field(DESC, "Mass 145")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,145) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M145")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M146")
{
    field(DESC, "Mass 146")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,146) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M146")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M147")
{
    field(DESC, "Mass 147")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,147) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M147")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M148")
{
    field(DESC, "Mass 148")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,148) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M148")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M149")
{
    field(DESC, "Mass 149")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,149) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M149")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M150")
{
    field(DESC, "Mass 150")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,150) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M150")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M151")
{
    field(DESC, "Mass 151")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,151) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M151")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M152")
{
    field(DESC, "Mass 152")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,152) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M152")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M153")
{
    field(DESC, "Mass 153")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,153) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M153")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M154")
{
    field(DESC, "Mass 154")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,154) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M154")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M155")
{
    field(DESC, "Mass 155")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,155) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M155")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M156")
{
    field(DESC, "Mass 156")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,156) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M156")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M157")
{
    field(DESC, "Mass 157")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,157) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M157")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M158")
{
    field(DESC, "Mass 158")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,158) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M158")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M159")
{
    field(DESC, "Mass 159")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,159) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M159")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M160")
{
    field(DESC, "Bromine")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,160) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M160")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M161")
{
    field(DESC, "Mass 161")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,161) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M161")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M162")
{
    field(DESC, "Mass 162")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,162) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M162")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M163")
{
    field(DESC, "Mass 163")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,163) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M163")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M164")
{
    field(DESC, "Mass 164")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,164) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M164")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M165")
{
    field(DESC, "Mass 165")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,165) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M165")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M166")
{
    field(DESC, "Mass 166")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,166) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M166")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M167")
{
    field(DESC, "Mass 167")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,167) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M167")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M168")
{
    field(DESC, "Mass 168")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,168) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M168")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M169")
{
    field(DESC, "Mass 169")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,169) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M169")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M170")
{
    field(DESC, "Mass 170")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,170) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M170")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M171")
{
    field(DESC, "Mass 171")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,171) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M171")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M172")
{
    field(DESC, "Mass 172")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,172) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M172")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M173")
{
    field(DESC, "Mass 173")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,173) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M173")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M174")
{
    field(DESC, "Mass 174")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,174) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M174")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M175")
{
    field(DESC, "Mass 175")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,175) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M175")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M176")
{
    field(DESC, "Mass 176")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,176) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M176")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M177")
{
    field(DESC, "Mass 177")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,177) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M177")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M178")
{
    field(DESC, "Mass 178")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,178) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M178")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M179")
{
    field(DESC, "Mass 179")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,179) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M179")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M180")
{
    field(DESC, "Mass 180")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,180) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M180")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M181")
{
    field(DESC, "Mass 181")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,181) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M181")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M182")
{
    field(DESC, "Mass 182")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,182) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M182")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M183")
{
    field(DESC, "Mass 183")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,183) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M183")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M184")
{
    field(DESC, "Mass 184")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,184) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M184")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M185")
{
    field(DESC, "Mass 185")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,185) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M185")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M186")
{
    field(DESC, "Mass 186")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,186) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M186")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M187")
{
    field(DESC, "Mass 187")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,187) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M187")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M188")
{
    field(DESC, "Mass 188")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,188) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M188")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M189")
{
    field(DESC, "Mass 189")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,189) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M189")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M190")
{
    field(DESC, "Mass 190")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,190) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M190")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M191")
{
    field(DESC, "Mass 191")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,191) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M191")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M192")
{
    field(DESC, "Mass 192")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,192) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M192")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M193")
{
    field(DESC, "Mass 193")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,193) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M193")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M194")
{
    field(DESC, "Mass 194")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,194) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M194")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M195")
{
    field(DESC, "Mass 195")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,195) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M195")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M196")
{
    field(DESC, "Mass 196")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,196) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M196")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M197")
{
    field(DESC, "Mass 197")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,197) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M197")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M198")
{
    field(DESC, "Mass 198")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,198) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M198")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M199")
{
    field(DESC, "Mass 199")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,199) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M199")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-11:BAR:M200")
{
    field(DESC, "Mass 200")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(3,200) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-11:DIS200")
    field(FLNK, "BL04I-VA-RGA-11:LOG:M200")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
################################################################################
# Log of Bar Chart
#
record(calc, "BL04I-VA-RGA-11:LOG:M1")
{
    field(DESC, "Mass 1")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M1 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:LOG:M2")
{
    field(DESC, "H2")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M2 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-11:LOG:M3")
{
    field(DESC, "Mass 3")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M3 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:LOG:M4")
{
    field(DESC, "He")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M4 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-11:LOG:M5")
{
    field(DESC, "Mass 5")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M5 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M6")
{
    field(DESC, "Mass 6")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M6 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M7")
{
    field(DESC, "Mass 7")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M7 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M8")
{
    field(DESC, "Mass 8")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M8 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M9")
{
    field(DESC, "Mass 9")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M9 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M10")
{
    field(DESC, "Mass 10")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M10 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M11")
{
    field(DESC, "Mass 11")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M11 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M12")
{
    field(DESC, "Mass 12")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M12 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M13")
{
    field(DESC, "Mass 13")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M13 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:LOG:M14")
{
    field(DESC, "CH2/N2++")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M14 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:LOG:M15")
{
    field(DESC, "CH3")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M15 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:LOG:M16")
{
    field(DESC, "CH4")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M16 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:LOG:M17")
{
    field(DESC, "OH")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M17 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:LOG:M18")
{
    field(DESC, "H20")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M18 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-11:LOG:M19")
{
    field(DESC, "Mass 19")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M19 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M20")
{
    field(DESC, "Neon")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M20 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M21")
{
    field(DESC, "Mass 21")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M21 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M22")
{
    field(DESC, "Mass 22")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M22 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M23")
{
    field(DESC, "Mass 23")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M23 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M24")
{
    field(DESC, "Mass 24")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M24 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M25")
{
    field(DESC, "Mass 25")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M25 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M26")
{
    field(DESC, "Mass 26")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M26 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M27")
{
    field(DESC, "Mass 27")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M27 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:LOG:M28")
{
    field(DESC, "N2/CO")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M28 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-11:LOG:M29")
{
    field(DESC, "Mass 29")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M29 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M30")
{
    field(DESC, "NO")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M30 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M31")
{
    field(DESC, "Mass 31")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M31 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:LOG:M32")
{
    field(DESC, "O2")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M32 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-11:LOG:M33")
{
    field(DESC, "Mass 33")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M33 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M34")
{
    field(DESC, "Mass 34")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M34 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M35")
{
    field(DESC, "Mass 35")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M35 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M36")
{
    field(DESC, "Mass 36")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M36 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M37")
{
    field(DESC, "Mass 37")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M37 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M38")
{
    field(DESC, "Fluorine")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M38 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M39")
{
    field(DESC, "Mass 39")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M39 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:LOG:M40")
{
    field(DESC, "Ar")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M40 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-11:LOG:M41")
{
    field(DESC, "Mass 41")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M41 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M42")
{
    field(DESC, "Mass 42")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M42 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M43")
{
    field(DESC, "Mass 43")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M43 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:LOG:M44")
{
    field(DESC, "CO2")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M44 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-11:LOG:M45")
{
    field(DESC, "Mass 45")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M45 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M46")
{
    field(DESC, "NO2")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M46 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M47")
{
    field(DESC, "Mass 47")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M47 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M48")
{
    field(DESC, "Ozone")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M48 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M49")
{
    field(DESC, "Mass 49")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M49 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M50")
{
    field(DESC, "Mass 50")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M50 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M51")
{
    field(DESC, "Mass 51")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M51 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M52")
{
    field(DESC, "Mass 52")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M52 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M53")
{
    field(DESC, "Mass 53")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M53 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M54")
{
    field(DESC, "Mass 54")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M54 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M55")
{
    field(DESC, "Mass 55")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M55 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M56")
{
    field(DESC, "Mass 56")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M56 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M57")
{
    field(DESC, "Mass 57")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M57 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M58")
{
    field(DESC, "Mass 58")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M58 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M59")
{
    field(DESC, "Mass 59")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M59 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M60")
{
    field(DESC, "Buckyball")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M60 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M61")
{
    field(DESC, "Mass 61")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M61 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M62")
{
    field(DESC, "Mass 62")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M62 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M63")
{
    field(DESC, "Mass 63")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M63 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M64")
{
    field(DESC, "Mass 64")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M64 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M65")
{
    field(DESC, "Mass 65")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M65 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M66")
{
    field(DESC, "Mass 66")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M66 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M67")
{
    field(DESC, "Mass 67")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M67 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M68")
{
    field(DESC, "Mass 68")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M68 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-11:LOG:M69")
{
    field(DESC, "CF3/C5H9")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M69 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-11:LOG:M70")
{
    field(DESC, "Mass 70")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M70 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M71")
{
    field(DESC, "Mass 71")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M71 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M72")
{
    field(DESC, "Mass 72")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M72 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M73")
{
    field(DESC, "Mass 73")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M73 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M74")
{
    field(DESC, "Mass 74")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M74 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M75")
{
    field(DESC, "Mass 75")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M75 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M76")
{
    field(DESC, "Mass 76")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M76 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M77")
{
    field(DESC, "Mass 77")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M77 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M78")
{
    field(DESC, "Mass 78")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M78 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M79")
{
    field(DESC, "Mass 79")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M79 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M80")
{
    field(DESC, "Mass 80")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M80 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M81")
{
    field(DESC, "Mass 81")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M81 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M82")
{
    field(DESC, "Mass 82")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M82 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M83")
{
    field(DESC, "Mass 83")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M83 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M84")
{
    field(DESC, "Mass 84")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M84 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M85")
{
    field(DESC, "Mass 85")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M85 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M86")
{
    field(DESC, "Mass 86")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M86 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M87")
{
    field(DESC, "Mass 87")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M87 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M88")
{
    field(DESC, "Mass 88")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M88 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M89")
{
    field(DESC, "Mass 89")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M89 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M90")
{
    field(DESC, "Mass 90")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M90 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M91")
{
    field(DESC, "Mass 91")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M91 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M92")
{
    field(DESC, "Mass 92")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M92 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M93")
{
    field(DESC, "Mass 93")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M93 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M94")
{
    field(DESC, "Mass 94")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M94 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M95")
{
    field(DESC, "Mass 95")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M95 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M96")
{
    field(DESC, "Mass 96")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M96 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M97")
{
    field(DESC, "Mass 97")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M97 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M98")
{
    field(DESC, "Mass 98")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M98 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M99")
{
    field(DESC, "Mass 99")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M99 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M100")
{
    field(DESC, "Mass 100")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M100 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M101")
{
    field(DESC, "Mass 101")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M101 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M102")
{
    field(DESC, "Mass 102")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M102 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M103")
{
    field(DESC, "Mass 103")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M103 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M104")
{
    field(DESC, "Mass 104")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M104 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M105")
{
    field(DESC, "Mass 105")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M105 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M106")
{
    field(DESC, "Mass 106")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M106 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M107")
{
    field(DESC, "Mass 107")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M107 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M108")
{
    field(DESC, "Mass 108")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M108 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M109")
{
    field(DESC, "Mass 109")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M109 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M110")
{
    field(DESC, "Mass 110")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M110 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M111")
{
    field(DESC, "Mass 111")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M111 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M112")
{
    field(DESC, "Mass 112")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M112 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M113")
{
    field(DESC, "Mass 113")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M113 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M114")
{
    field(DESC, "Mass 114")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M114 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M115")
{
    field(DESC, "Mass 115")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M115 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M116")
{
    field(DESC, "Mass 116")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M116 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M117")
{
    field(DESC, "Mass 117")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M117 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M118")
{
    field(DESC, "Mass 118")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M118 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M119")
{
    field(DESC, "Mass 119")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M119 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M120")
{
    field(DESC, "Mass 120")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M120 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M121")
{
    field(DESC, "Mass 121")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M121 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M122")
{
    field(DESC, "Mass 122")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M122 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M123")
{
    field(DESC, "Mass 123")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M123 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M124")
{
    field(DESC, "Mass 124")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M124 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M125")
{
    field(DESC, "Mass 125")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M125 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M126")
{
    field(DESC, "Mass 126")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M126 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M127")
{
    field(DESC, "Mass 127")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M127 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M128")
{
    field(DESC, "Mass 128")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M128 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M129")
{
    field(DESC, "Mass 129")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M129 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M130")
{
    field(DESC, "Mass 130")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M130 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M131")
{
    field(DESC, "Mass 131")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M131 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M132")
{
    field(DESC, "Mass 132")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M132 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M133")
{
    field(DESC, "Mass 133")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M133 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M134")
{
    field(DESC, "Mass 134")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M134 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M135")
{
    field(DESC, "Mass 135")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M135 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M136")
{
    field(DESC, "Mass 136")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M136 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M137")
{
    field(DESC, "Mass 137")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M137 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M138")
{
    field(DESC, "Mass 138")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M138 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M139")
{
    field(DESC, "Mass 139")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M139 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M140")
{
    field(DESC, "Mass 140")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M140 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M141")
{
    field(DESC, "Mass 141")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M141 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M142")
{
    field(DESC, "Mass 142")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M142 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M143")
{
    field(DESC, "Mass 143")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M143 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M144")
{
    field(DESC, "Mass 144")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M144 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M145")
{
    field(DESC, "Mass 145")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M145 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M146")
{
    field(DESC, "Mass 146")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M146 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M147")
{
    field(DESC, "Mass 147")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M147 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M148")
{
    field(DESC, "Mass 148")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M148 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M149")
{
    field(DESC, "Mass 149")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M149 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M150")
{
    field(DESC, "Mass 150")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M150 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M151")
{
    field(DESC, "Mass 151")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M151 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M152")
{
    field(DESC, "Mass 152")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M152 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M153")
{
    field(DESC, "Mass 153")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M153 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M154")
{
    field(DESC, "Mass 154")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M154 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M155")
{
    field(DESC, "Mass 155")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M155 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M156")
{
    field(DESC, "Mass 156")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M156 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M157")
{
    field(DESC, "Mass 157")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M157 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M158")
{
    field(DESC, "Mass 158")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M158 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M159")
{
    field(DESC, "Mass 159")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M159 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M160")
{
    field(DESC, "Mass 160")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M160 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M161")
{
    field(DESC, "Mass 161")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M161 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M162")
{
    field(DESC, "Mass 162")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M162 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M163")
{
    field(DESC, "Mass 163")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M163 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M164")
{
    field(DESC, "Mass 164")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M164 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M165")
{
    field(DESC, "Mass 165")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M165 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M166")
{
    field(DESC, "Mass 166")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M166 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M167")
{
    field(DESC, "Mass 167")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M167 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M168")
{
    field(DESC, "Mass 168")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M168 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M169")
{
    field(DESC, "Mass 169")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M169 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M170")
{
    field(DESC, "Mass 170")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M170 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M171")
{
    field(DESC, "Mass 171")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M171 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M172")
{
    field(DESC, "Mass 172")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M172 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M173")
{
    field(DESC, "Mass 173")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M173 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M174")
{
    field(DESC, "Mass 174")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M174 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M175")
{
    field(DESC, "Mass 175")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M175 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M176")
{
    field(DESC, "Mass 176")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M176 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M177")
{
    field(DESC, "Mass 177")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M177 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M178")
{
    field(DESC, "Mass 178")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M178 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M179")
{
    field(DESC, "Mass 179")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M179 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M180")
{
    field(DESC, "Mass 180")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M180 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M181")
{
    field(DESC, "Mass 181")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M181 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M182")
{
    field(DESC, "Mass 182")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M182 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M183")
{
    field(DESC, "Mass 183")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M183 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M184")
{
    field(DESC, "Mass 184")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M184 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M185")
{
    field(DESC, "Mass 185")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M185 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M186")
{
    field(DESC, "Mass 186")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M186 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M187")
{
    field(DESC, "Mass 187")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M187 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M188")
{
    field(DESC, "Mass 188")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M188 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M189")
{
    field(DESC, "Mass 189")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M189 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M190")
{
    field(DESC, "Mass 190")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M190 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M191")
{
    field(DESC, "Mass 191")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M191 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M192")
{
    field(DESC, "Mass 192")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M192 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M193")
{
    field(DESC, "Mass 193")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M193 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M194")
{
    field(DESC, "Mass 194")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M194 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M195")
{
    field(DESC, "Mass 195")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M195 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M196")
{
    field(DESC, "Mass 196")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M196 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M197")
{
    field(DESC, "Mass 197")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M197 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M198")
{
    field(DESC, "Mass 198")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M198 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M199")
{
    field(DESC, "Mass 199")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M199 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-11:LOG:M200")
{
    field(DESC, "Mass 200")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-11:BAR:M200 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
################################################################################

#
# Standard bar chart masses (nominally up to 11)
record(mbbi, "BL04I-VA-RGA-11:MASSMAP") 
{
  field(DTYP, "Soft Channel")
  field(DESC, "Chart mass allocation")
  field(PINI, "YES")
  field(ZRST, "H2")
  field(ONST, "He")
  field(TWST, "CH2/N2++")
  field(THST, "CH3")
  field(FRST, "CH4")
  field(FVST, "H2O")
  field(SXST, "N2/CO")
  field(SVST, "O2")
  field(EIST, "Ar")
  field(NIST, "CO2")
  field(TEST, "CF3/C5H9")
  field(ELST, "unused")
  field(TVST, "unused")
  field(TTST, "unused")
  field(FTST, "unused")
  field(FFST, "unused")
  field(ZRVL, "2")
  field(ONVL, "4")
  field(TWVL, "14")
  field(THVL, "15")
  field(FRVL, "16")
  field(FVVL, "18")
  field(SXVL, "28")
  field(SVVL, "32")
  field(EIVL, "40")
  field(NIVL, "44")
  field(TEVL, "69")
  field(ELVL, "0")
  field(TVVL, "0")
  field(TTVL, "0")
  field(FTVL, "0")
  field(FFVL, "0")
}

# Peak Jump Masses (nominally up to 12)
#
record(mbbi, "BL04I-VA-RGA-11:PJMASSMAP") 
{
  field(DTYP, "Soft Channel")
  field(DESC, "Peak Jump masses")
  field(PINI, "YES")
  field(ZRST, "H2")
  field(ONST, "unused")
  field(TWST, "unused")
  field(THST, "unused")
  field(FRST, "unused")
  field(FVST, "unused")
  field(SXST, "unused")
  field(SVST, "unused")
  field(EIST, "unused")
  field(NIST, "unused")
  field(TEST, "unused")
  field(ELST, "unused")
  field(TVST, "unused")
  field(TTST, "unused")
  field(FTST, "unused")
  field(FFST, "unused")
  field(ZRVL, "2")
  field(ONVL, "0")
  field(TWVL, "0")
  field(THVL, "0")
  field(FRVL, "0")
  field(FVVL, "0")
  field(SXVL, "0")
  field(SVVL, "0")
  field(EIVL, "0")
  field(NIVL, "0")
  field(TEVL, "0")
  field(ELVL, "0")
  field(TVVL, "0")
  field(TTVL, "0")
  field(FTVL, "0")
  field(FFVL, "0")
}

## The INP field to this PV has been "2;4" for
## over two years and just picked up on caSnooper.
## Making it 24 for now until the correct value is determined.
## IJG: 19 Dec 14
##
record(stringin, "BL04I-VA-RGA-11:PJMASSSTR") 
{
  field(DESC, "Peak Jump masses")
  field(PINI, "YES")
  field(INP, "24")
}

record(waveform, "BL04I-VA-RGA-11:SPECTRUM")
{
    #field(DTYP, "Waveform")
    field(FTVL, "DOUBLE")
    field(NELM, "6400")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-11:PJ:BIN1")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(3) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-11:DISPJ1")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-11:PJ:BIN2")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(3) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-11:DISPJ2")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-11:PJ:BIN3")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(3) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-11:DISPJ3")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-11:PJ:BIN4")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(3) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-11:DISPJ4")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-11:PJ:BIN5")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(3) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-11:DISPJ5")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-11:PJ:BIN6")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(3) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-11:DISPJ6")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-11:PJ:BIN7")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(3) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-11:DISPJ7")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-11:PJ:BIN8")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(3) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-11:DISPJ8")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-11:PJ:BIN9")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(3) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-11:DISPJ9")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-11:PJ:BIN10")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(3) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-11:DISPJ10")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-11:PJ:BIN11")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(3) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-11:DISPJ11")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-11:PJ:BIN12")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(3) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-11:DISPJ12")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

# rga.db
# Template database for an RGA
# Pete Owens - 24-6-04
#
# It appears that any mass to be displayed on the summary rga.edl
# has its SDIS field set to DIS20
# IJG 11-5-11
#
# Macros:
#% macro, device, Device Prefix
#% macro, port, Asyn Serial Port e.g. ty_40_0
#% macro, channel, RGA channel number (port number of PC comm port 1-4)
#% macro, name, Object and gui association name
#% macro, mm00_label, Optional
#% macro, mm01_label, Optional
#% macro, mm02_label, Optional
#% macro, mm03_label, Optional
#% macro, mm04_label, Optional
#% macro, mm05_label, Optional
#% macro, mm06_label, Optional
#% macro, mm07_label, Optional
#% macro, mm08_label, Optional
#% macro, mm09_label, Optional
#% macro, mm10_label, Optional
#% macro, mm11_label, Optional
#% macro, mm12_label, Optional
#% macro, mm13_label, Optional
#% macro, mm14_label, Optional
#% macro, mm015_label, Optional
#% macro, mm00_mass, Optional
#% macro, mm01_mass, Optional
#% macro, mm02_mass, Optional
#% macro, mm03_mass, Optional
#% macro, mm04_mass, Optional
#% macro, mm05_mass, Optional
#% macro, mm06_mass, Optional
#% macro, mm07_mass, Optional
#% macro, mm08_mass, Optional
#% macro, mm09_mass, Optional
#% macro, mm10_mass, Optional
#% macro, mm11_mass, Optional
#% macro, mm12_mass, Optional
#% macro, mm13_mass, Optional
#% macro, mm14_mass, Optional
#% macro, mm15_mass, Optional
#% macro, pjmm00_label, Optional
#% macro, pjmm01_label, Optional
#% macro, pjmm02_label, Optional
#% macro, pjmm03_label, Optional
#% macro, pjmm04_label, Optional
#% macro, pjmm05_label, Optional
#% macro, pjmm06_label, Optional
#% macro, pjmm07_label, Optional
#% macro, pjmm08_label, Optional
#% macro, pjmm09_label, Optional
#% macro, pjmm10_label, Optional
#% macro, pjmm11_label, Optional
#% macro, pjmm12_label, Optional
#% macro, pjmm13_label, Optional
#% macro, pjmm14_label, Optional
#% macro, pjmm015_label, Optional
#% macro, pjmm00_mass, Optional
#% macro, pjmm01_mass, Optional
#% macro, pjmm02_mass, Optional
#% macro, pjmm03_mass, Optional
#% macro, pjmm04_mass, Optional
#% macro, pjmm05_mass, Optional
#% macro, pjmm06_mass, Optional
#% macro, pjmm07_mass, Optional
#% macro, pjmm08_mass, Optional
#% macro, pjmm09_mass, Optional
#% macro, pjmm10_mass, Optional
#% macro, pjmm11_mass, Optional
#% macro, pjmm12_mass, Optional
#% macro, pjmm13_mass, Optional
#% macro, pjmm14_mass, Optional
#% macro, pjmm15_mass, Optional

################################################################################

# This associates an edm screen with the template
# % gui, RGA2, edm, rga.edl, device=BL04I-VA-RGA-02
# This associates a BOY screen with the template
# % gui, RGA2, boycomponent, rgaApp_opi/rga.opi, device=BL04I-VA-RGA-02, desc=BL04I-VA-RGA-02, name=RGA2
# % gui, RGA2, boyembed, rgaApp_opi/rga_embed.opi, device=BL04I-VA-RGA-02, desc=BL04I-VA-RGA-02, name=RGA2
# % gui, RGA2, readback, Status,                BL04I-VA-RGA-02:STA

# Head Connected
#
#
#% archiver 10 Monitor
#
record(stringin, "BL04I-VA-RGA-02:HEAD")
{
    field(DESC, "Head")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol head(1) ty_40_1 0")
    field(SCAN, "10 second")
}
################################################################################
# Head Status
#
record(calc, "BL04I-VA-RGA-02:STA")
{
    field(DESC, "Overall status")
    field(CALC, "((A>4)&&(A<=7)&&(B#1))?0:A")
    field(SCAN, "1 second")
    field(INPA, "BL04I-VA-RGA-02:HEADSTA PP")
    field(INPB, "BL04I-VA-RGA-02:FILSTA PP")
    field(INPC, "BL04I-VA-RGA-02:SEV MS")
}
record(calc, "BL04I-VA-RGA-02:SEV")
{
    field(DESC, "Persistent Severity")
    field(CALC, "(B=3)?((A>999)?1000:(A+1)):0")
    field(SCAN, "1 second")
    field(INPA, "BL04I-VA-RGA-02:SEV.VAL")
    field(INPB, "BL04I-VA-RGA-02:HEADSTA.SEVR")
    field(HIGH, "30")
    field(HIHI, "120")
    field(HSV,  "MAJOR")
    field(HHSV, "INVALID")
}
#
#% archiver 10 Monitor
#% controldesk Head Status smon
#
record(mbbi, "BL04I-VA-RGA-02:HEADSTA")
{
    field(DESC, "Head Status")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol sta(1) ty_40_1 0")
#    field(SCAN, "1 second")
    field(FLNK, "BL04I-VA-RGA-02:DIS200")
    field(ZRST, "Idle")
    field(ONST, "Local Control")
    field(TWST, "Degas Filament")
    field(THST, "Cal Faraday")
    field(FRST, "Cal Multiplier")
    field(FVST, "Barchart 1-50")
    field(SXST, "Barchart 1-100")
    field(SVST, "Barchart 1-200")
    field(EIST, "Analog 1-200")
    field(NIST, "No RGA")
    field(TEST, "Peak Jump")
    field(UNSV, "MAJOR")
    field(ZRSV, "MINOR")
    field(ONSV, "MINOR")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MINOR")
    field(FVSV, "NO_ALARM")
    field(SXSV, "NO_ALARM")
    field(SVSV, "NO_ALARM")
    field(EISV, "NO_ALARM")
    field(NISV, "INVALID")
    field(TESV, "NO_ALARM")
}
#
#% archiver 10 Monitor
#% controldesk Head Status scon
#
record(mbbo, "BL04I-VA-RGA-02:CON")
{
    field(DESC, "Head Status")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol con(1) ty_40_1 0")
    field(NOBT, "4")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(TWVL, "2")
    field(THVL, "3")
    field(FRVL, "4")
    field(FVVL, "5")
    field(SXVL, "6")
    field(SVVL, "7")
    field(EIVL, "8")
    field(TEVL, "10")
    field(ZRST, "Stop")
    field(ONST, "Local Control")
    field(TWST, "Degas Filament")
    field(THST, "Cal Faraday")
    field(FRST, "Cal Multiplier")
    field(FVST, "Barchart 1-50")
    field(SXST, "Barchart 1-100")
    field(SVST, "Barchart 1-200")
#    field(EIST, "Analog 1-200")
    field(TEST, "Peak Jump")
}
################################################################################
# Disable Barcharts
#
#% archiver 10 Monitor
#
record(bo, "BL04I-VA-RGA-02:SEL")
{
    field(DESC, "Select Bars")
    field(FLNK, "BL04I-VA-RGA-02:DIS200")
    field(VAL,  "0")
    field(ZNAM, "Selected")
    field(ONAM, "All")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:DIS200")
{
    field(DESC, "Disable 200")
    field(CALC, "(A=7)&&(B=1)?0:1")
    field(INPA, "BL04I-VA-RGA-02:STA")
    field(INPB, "BL04I-VA-RGA-02:SEL")
    field(FLNK, "BL04I-VA-RGA-02:DIS100")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:DIS100")
{
    field(DESC, "Disable 100")
    field(CALC, "((A=6)||(A=7))&&(B=1)?0:1")
    field(INPA, "BL04I-VA-RGA-02:STA")
    field(INPB, "BL04I-VA-RGA-02:SEL")
    field(FLNK, "BL04I-VA-RGA-02:DIS50")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:DIS50")
{
    field(DESC, "Disable 50")
    field(CALC, "(A>=5)&&(A<=7)&&(B=1)?0:1")
    field(INPA, "BL04I-VA-RGA-02:STA")
    field(INPB, "BL04I-VA-RGA-02:SEL")
    field(FLNK, "BL04I-VA-RGA-02:DIS20")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:DIS20")
{
    field(DESC, "Disable Select")
    field(CALC, "(A>=5)&&(A<=7)?0:1")
    field(INPA, "BL04I-VA-RGA-02:STA")
    field(FLNK, "BL04I-VA-RGA-02:DISPJ")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:DISPJ")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)?0:1")
    field(INPA, "BL04I-VA-RGA-02:STA")
    field(INPB, "BL04I-VA-RGA-02:SEL")
    field(FLNK, "BL04I-VA-RGA-02:DISPJ1")
}
record(calc, "BL04I-VA-RGA-02:DISPJ1")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-02:STA")
    field(INPB, "BL04I-VA-RGA-02:PJ:BIN1.DESC")
    field(FLNK, "BL04I-VA-RGA-02:DISPJ2")
}
record(calc, "BL04I-VA-RGA-02:DISPJ2")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-02:STA")
    field(INPB, "BL04I-VA-RGA-02:PJ:BIN2.DESC")
    field(FLNK, "BL04I-VA-RGA-02:DISPJ3")
}
record(calc, "BL04I-VA-RGA-02:DISPJ3")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-02:STA")
    field(INPB, "BL04I-VA-RGA-02:PJ:BIN3.DESC")
    field(FLNK, "BL04I-VA-RGA-02:DISPJ4")
}
record(calc, "BL04I-VA-RGA-02:DISPJ4")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-02:STA")
    field(INPB, "BL04I-VA-RGA-02:PJ:BIN4.DESC")
    field(FLNK, "BL04I-VA-RGA-02:DISPJ5")
}
record(calc, "BL04I-VA-RGA-02:DISPJ5")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-02:STA")
    field(INPB, "BL04I-VA-RGA-02:PJ:BIN5.DESC")
    field(FLNK, "BL04I-VA-RGA-02:DISPJ6")
}
record(calc, "BL04I-VA-RGA-02:DISPJ6")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-02:STA")
    field(INPB, "BL04I-VA-RGA-02:PJ:BIN6.DESC")
    field(FLNK, "BL04I-VA-RGA-02:DISPJ7")
}
record(calc, "BL04I-VA-RGA-02:DISPJ7")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-02:STA")
    field(INPB, "BL04I-VA-RGA-02:PJ:BIN7.DESC")
    field(FLNK, "BL04I-VA-RGA-02:DISPJ8")
}
record(calc, "BL04I-VA-RGA-02:DISPJ8")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-02:STA")
    field(INPB, "BL04I-VA-RGA-02:PJ:BIN8.DESC")
    field(FLNK, "BL04I-VA-RGA-02:DISPJ9")
}
record(calc, "BL04I-VA-RGA-02:DISPJ9")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-02:STA")
    field(INPB, "BL04I-VA-RGA-02:PJ:BIN9.DESC")
    field(FLNK, "BL04I-VA-RGA-02:DISPJ10")
}
record(calc, "BL04I-VA-RGA-02:DISPJ10")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-02:STA")
    field(INPB, "BL04I-VA-RGA-02:PJ:BIN10.DESC")
    field(FLNK, "BL04I-VA-RGA-02:DISPJ11")
}
record(calc, "BL04I-VA-RGA-02:DISPJ11")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-02:STA")
    field(INPB, "BL04I-VA-RGA-02:PJ:BIN11.DESC")
    field(FLNK, "BL04I-VA-RGA-02:DISPJ12")
}
record(calc, "BL04I-VA-RGA-02:DISPJ12")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-02:STA")
    field(INPB, "BL04I-VA-RGA-02:PJ:BIN12.DESC")
}
################################################################################
# Current Selected Filament
#
#
#% archiver 10 Monitor
#% controldesk Filament smon
#
record(bi,"BL04I-VA-RGA-02:FIL") 
{
    field(DESC, "Filament")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol fil(1) ty_40_1 0")
    field(SCAN, "1 second")
    field(SDIS, "BL04I-VA-RGA-02:MODE")
    field(ZNAM, "Filament 1")
    field(ONAM, "Filament 2")
}
#
#% archiver 10 Monitor
#% controldesk Filament scon
#
record(bo, "BL04I-VA-RGA-02:SETFIL")
{
    field(DESC, "Filament")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol setfil(1) ty_40_1 0")
    field(ZNAM, "Filament 1")
    field(ONAM, "Filament 2")
}
################################################################################
# Filament Status
#
#
#% archiver 10 Monitor
#% controldesk Filament Status smon
#
record(mbbi, "BL04I-VA-RGA-02:FILSTA")
{
    field(DESC, "Filament Status")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol filsta(1) ty_40_1 0")
#    field(SCAN, "1 second")
    field(SDIS, "BL04I-VA-RGA-02:MODE")
    field(ZRST, "Off")
    field(ONST, "On")
    field(TWST, "Warming up")
    field(THST, "Cooling Down")
    field(FRST, "Failed")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "MAJOR")
}
#
#% archiver 10 Monitor
#% controldesk Filament Status scon
#
record(bo, "BL04I-VA-RGA-02:FILCON")
{
    field(DESC, "Filament Control")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol filcon(1) ty_40_1 0")
    field(ZNAM, "Off")
    field(ONAM, "On")
}
################################################################################
# IMG Interlock Status
#
#% archiver 10 Monitor
#% controldesk IMG Interlock smon
#
record(bi, "BL04I-VA-RGA-02:ILK") 
{
    field(DESC, "IMG Interlock")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol ilk(1) ty_40_1 0")
    field(SCAN, "1 second")
    field(SDIS, "BL04I-VA-RGA-02:MODE")
    field(ZNAM, "OK")
    field(ONAM, "Tripped")
    field(ZSV,  "NO_ALARM")
    field(OSV,  "MAJOR")
}
################################################################################
# Multiplier Status
#
#% archiver 10 Monitor
#% controldesk Multiplier smon
#
record(bi,"BL04I-VA-RGA-02:MLTSTA") 
{
    field(DESC, "Multiplier")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol mltsta(1) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZNAM, "Disabled")
    field(ONAM, "Enabled")
}
#
#% archiver 10 Monitor
#% controldesk Multiplier scon
#
record(bo, "BL04I-VA-RGA-02:MLTCON")
{
    field(DESC, "Multiplier")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol mltcon(1) ty_40_1 0")
    field(ZNAM, "Disable")
    field(ONAM, "Enable")
}
################################################################################
# Scan Mode Status
#
#% archiver 10 Monitor
#% controldesk Scan Mode smon
#
record(bi,"BL04I-VA-RGA-02:SCAN") 
{
    field(DESC, "Scan Mode")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol scan(1) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZNAM, "Single")
    field(ONAM, "Continuous")
}
#
#% archiver 10 Monitor
#% controldesk Scan Mode scon
#
record(bo, "BL04I-VA-RGA-02:SETSCAN")
{
    field(DESC, "Scan Mode")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol setscan(1) ty_40_1 0")
    field(ZNAM, "Single")
    field(ONAM, "Continuous")
}
################################################################################
# Control Mode Status
#
#% archiver 10 Monitor
#
record(bi,"BL04I-VA-RGA-02:MODE") 
{
    field(DESC, "Scan Mode")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol mode(1) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZNAM, "Remote")
    field(ONAM, "Local")
}
#
#% archiver 10 Monitor
#
record(bo, "BL04I-VA-RGA-02:SETMODE")
{
    field(DESC, "Scan Mode")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol setmode(1) ty_40_1 0")
    field(ZNAM, "Remote")
    field(ONAM, "Local")
}
################################################################################
# Are there data to read
#
#% archiver 10 Monitor
#% controldesk Data to read smon
#
record(mbbi, "BL04I-VA-RGA-02:DATA")
{
    field(DESC, "Data to read")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol data(1) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZRST, "No Data")
    field(ONST, "Barchart 1-50")
    field(TWST, "Barchart 1-100")
    field(THST, "Barchart 1-200")
    field(FRST, "Analog 1-200")
    field(FVST, "Peak Jump")
    field(UNSV, "NO_ALARM")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "NO_ALARM")
    field(FVSV, "NO_ALARM")
}
################################################################################
# Date of current scan
#
#% archiver 10 Monitor
#% controldesk Date readback
#
record(stringin, "BL04I-VA-RGA-02:DATE")
{
    field(DESC, "Date")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol date(1) ty_40_1 0")
    field(SCAN, "1 second")
}
###
### THESE RECORDS REMOVED TO SAVE RS232 BANDWIDTH
### When we move to 3.14 we can use sCalcout
###
#record(stringin, "BL04I-VA-RGA-02:YEAR")
#{
#    field(DESC, "Year")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol year(1) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04I-VA-RGA-02:DIS50")
#}
#record(longin, "BL04I-VA-RGA-02:MON")
#{
#    field(DESC, "Month")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol mon(1) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04I-VA-RGA-02:DIS50")
#    field(HOPR, "12")
#    field(LOPR, "1")
#    field(HIGH, "12")
#    field(LOW,  "1")
#    field(HSV,  "MINOR")
#    field(LSV,  "MINOR")
#}
#record(longin, "BL04I-VA-RGA-02:DAY")
#{
#    field(DESC, "Day")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol day(1) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04I-VA-RGA-02:DIS50")
#    field(HOPR, "31")
#    field(LOPR, "1")
#    field(HIGH, "31")
#    field(LOW,  "1")
#    field(HSV,  "MINOR")
#    field(LSV,  "MINOR")
#}
#record(stringin, "BL04I-VA-RGA-02:HOUR")
#{
#    field(DESC, "Hour")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol hour(1) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04I-VA-RGA-02:DIS50")
#}
#record(stringin, "BL04I-VA-RGA-02:MIN")
#{
#    field(DESC, "Minute")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol min(1) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04I-VA-RGA-02:DIS50")
#}
#record(stringin, "BL04I-VA-RGA-02:SEC")
#{
#    field(DESC, "Second")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol sec(1) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04I-VA-RGA-02:DIS50")
#}
################################################################################
# Detector Setting
#
#% archiver 10 Monitor
#% controldesk Detector Setting smon
#
record(mbbi, "BL04I-VA-RGA-02:DET")
{
    field(DESC, "Detector Setting")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol det(1) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZRST, "No Data")
    field(ONST, "Faraday")
    field(TWST, "Multiplier")
}
################################################################################
# Total Pressure
#
#% archiver 10 Monitor
#% controldesk Total Pressure readback
#
record(ai, "BL04I-VA-RGA-02:TOTP")
{
    field(DESC, "Total Pressure")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol total(1) ty_40_1 0")
    field(SCAN, "10 second")
    field(FLNK, "BL04I-VA-RGA-02:TOTPLOG")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(calcout, "BL04I-VA-RGA-02:TOTPADEL")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-02:TOTP.ADEL")
    field(INPA, "BL04I-VA-RGA-02:TOTP")
    field(INPB, "20")
    field(SCAN, "10 second")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:TOTPLOG")
{
    field(DESC, "Total Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:TOTP MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
################################################################################
# Sum Partial
#
#% archiver 10 Monitor
#% controldesk Sum of Peaks readback
#
record(ai, "BL04I-VA-RGA-02:SUMP")
{
    field(DESC, "Sum of Peaks")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol sum(1) ty_40_1 0")
    field(SCAN, "10 second")
    field(FLNK, "BL04I-VA-RGA-02:SUMPLOG")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(calcout, "BL04I-VA-RGA-02:SUMPADEL")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-02:SUMP.ADEL")
    field(INPA, "BL04I-VA-RGA-02:SUMP")
    field(INPB, "20")
    field(SCAN, "10 second")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:SUMPLOG")
{
    field(DESC, "Sum of Peaks")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:SUMP MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
################################################################################
# Bar Chart Deadband
#
record(calcout, "BL04I-VA-RGA-02:ADEL:M2")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-02:BAR:M2.ADEL")
    field(INPA, "BL04I-VA-RGA-02:BAR:M2")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-02:ADEL:M4")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-02:BAR:M4.ADEL")
    field(INPA, "BL04I-VA-RGA-02:BAR:M4")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-02:ADEL:M14")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-02:BAR:M14.ADEL")
    field(INPA, "BL04I-VA-RGA-02:BAR:M14")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-02:ADEL:M15")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-02:BAR:M15.ADEL")
    field(INPA, "BL04I-VA-RGA-02:BAR:M15")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-02:ADEL:M16")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-02:BAR:M16.ADEL")
    field(INPA, "BL04I-VA-RGA-02:BAR:M16")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-02:ADEL:M18")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-02:BAR:M18.ADEL")
    field(INPA, "BL04I-VA-RGA-02:BAR:M18")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-02:ADEL:M28")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-02:BAR:M28.ADEL")
    field(INPA, "BL04I-VA-RGA-02:BAR:M28")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-02:ADEL:M32")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-02:BAR:M32.ADEL")
    field(INPA, "BL04I-VA-RGA-02:BAR:M32")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-02:ADEL:M40")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-02:BAR:M40.ADEL")
    field(INPA, "BL04I-VA-RGA-02:BAR:M40")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-02:ADEL:M44")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-02:BAR:M44.ADEL")
    field(INPA, "BL04I-VA-RGA-02:BAR:M44")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-02:ADEL:M69")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-02:BAR:M69.ADEL")
    field(INPA, "BL04I-VA-RGA-02:BAR:M69")
    field(INPB, "20")
    field(SCAN, "10 second")
}
################################################################################
# Bar Chart
#
record(ai, "BL04I-VA-RGA-02:BAR:M1")
{
    field(DESC, "Mass 1")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,1) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M1")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk H2 readback
#
record(ai, "BL04I-VA-RGA-02:BAR:M2")
{
    field(DESC, "H2")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,2) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS20")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M2")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M3")
{
    field(DESC, "Mass 3")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,3) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M3")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk He readback
#
record(ai, "BL04I-VA-RGA-02:BAR:M4")
{
    field(DESC, "He")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,4) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS20")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M4")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M5")
{
    field(DESC, "Mass 5")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,5) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M5")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M6")
{
    field(DESC, "Mass 6")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,6) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M6")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M7")
{
    field(DESC, "Mass 7")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,7) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M7")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M8")
{
    field(DESC, "Mass 8")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,8) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M8")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M9")
{
    field(DESC, "Mass 9")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,9) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M9")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M10")
{
    field(DESC, "Mass 10")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,10) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M10")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M11")
{
    field(DESC, "Mass 11")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,11) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M11")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M12")
{
    field(DESC, "Mass 12")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,12) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M12")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M13")
{
    field(DESC, "Mass 13")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,13) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M13")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk CH2/N2++ readback
#
record(ai, "BL04I-VA-RGA-02:BAR:M14")
{
    field(DESC, "CH2/N2++")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,14) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS20")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M14")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk CH3 readback
#
record(ai, "BL04I-VA-RGA-02:BAR:M15")
{
    field(DESC, "CH3")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,15) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS20")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M15")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk CH4 readback
#
record(ai, "BL04I-VA-RGA-02:BAR:M16")
{
    field(DESC, "CH4")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,16) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS20")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M16")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk OH readback
#
record(ai, "BL04I-VA-RGA-02:BAR:M17")
{
    field(DESC, "OH")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,17) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M17")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk H20 readback
#
record(ai, "BL04I-VA-RGA-02:BAR:M18")
{
    field(DESC, "H20")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,18) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS20")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M18")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M19")
{
    field(DESC, "Mass 19")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,19) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M19")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M20")
{
    field(DESC, "Neon")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,20) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M20")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M21")
{
    field(DESC, "Mass 21")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,21) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M21")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M22")
{
    field(DESC, "Mass 22")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,22) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M22")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M23")
{
    field(DESC, "Mass 23")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,23) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M23")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M24")
{
    field(DESC, "Mass 24")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,24) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M24")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M25")
{
    field(DESC, "Mass 25")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,25) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M25")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M26")
{
    field(DESC, "Mass 26")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,26) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M26")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M27")
{
    field(DESC, "Mass 27")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,27) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M27")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk N2/CO readback
#
record(ai, "BL04I-VA-RGA-02:BAR:M28")
{
    field(DESC, "N2/CO")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,28) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS20")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M28")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M29")
{
    field(DESC, "Mass 29")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,29) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M29")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M30")
{
    field(DESC, "NO")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,30) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M30")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M31")
{
    field(DESC, "Mass 31")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,31) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M31")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk O2 readback
#
record(ai, "BL04I-VA-RGA-02:BAR:M32")
{
    field(DESC, "O2")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,32) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS20")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M32")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M33")
{
    field(DESC, "Mass 33")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,33) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M33")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M34")
{
    field(DESC, "Mass 34")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,34) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M34")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M35")
{
    field(DESC, "Mass 35")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,35) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M35")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M36")
{
    field(DESC, "Mass 36")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,36) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M36")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M37")
{
    field(DESC, "Mass 37")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,37) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M37")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M38")
{
    field(DESC, "Fluorine")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,38) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M38")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M39")
{
    field(DESC, "Mass 39")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,39) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M39")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk Ar readback
#
record(ai, "BL04I-VA-RGA-02:BAR:M40")
{
    field(DESC, "Ar")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,40) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS20")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M40")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M41")
{
    field(DESC, "Mass 41")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,41) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M41")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M42")
{
    field(DESC, "Mass 42")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,42) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M42")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M43")
{
    field(DESC, "Mass 43")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,43) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M43")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk CO2 readback
#
record(ai, "BL04I-VA-RGA-02:BAR:M44")
{
    field(DESC, "CO2")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,44) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS20")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M44")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M45")
{
    field(DESC, "Mass 45")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,45) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M45")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M46")
{
    field(DESC, "NO2")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,46) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M46")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M47")
{
    field(DESC, "Mass 47")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,47) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M47")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M48")
{
    field(DESC, "Ozone")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,48) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M48")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M49")
{
    field(DESC, "Mass 49")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,49) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M49")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M50")
{
    field(DESC, "Mass 50")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,50) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS50")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M50")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M51")
{
    field(DESC, "Mass 51")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,51) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M51")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M52")
{
    field(DESC, "Mass 52")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,52) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M52")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M53")
{
    field(DESC, "Mass 53")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,53) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M53")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M54")
{
    field(DESC, "Mass 54")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,54) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M54")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M55")
{
    field(DESC, "Mass 55")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,55) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M55")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M56")
{
    field(DESC, "Mass 56")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,56) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M56")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M57")
{
    field(DESC, "Mass 57")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,57) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M57")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M58")
{
    field(DESC, "Mass 58")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,58) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M58")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M59")
{
    field(DESC, "Mass 59")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,59) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M59")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M60")
{
    field(DESC, "Buckyball")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,60) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M60")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M61")
{
    field(DESC, "Mass 61")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,61) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M61")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M62")
{
    field(DESC, "Mass 62")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,62) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M62")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M63")
{
    field(DESC, "Mass 63")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,63) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M63")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M64")
{
    field(DESC, "Mass 64")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,64) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M64")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M65")
{
    field(DESC, "Mass 65")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,65) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M65")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M66")
{
    field(DESC, "Mass 66")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,66) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M66")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M67")
{
    field(DESC, "Mass 67")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,67) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M67")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M68")
{
    field(DESC, "Mass 68")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,68) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M68")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk Ar readback
#
record(ai, "BL04I-VA-RGA-02:BAR:M69")
{
    field(DESC, "CF3/C5H9")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,69) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS20")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M69")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M70")
{
    field(DESC, "Chlorine")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,70) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M70")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M71")
{
    field(DESC, "Mass 71")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,71) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M71")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M72")
{
    field(DESC, "Mass 72")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,72) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M72")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M73")
{
    field(DESC, "Mass 73")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,73) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M73")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M74")
{
    field(DESC, "Mass 74")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,74) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M74")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M75")
{
    field(DESC, "Mass 75")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,75) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M75")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M76")
{
    field(DESC, "Mass 76")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,76) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M76")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M77")
{
    field(DESC, "Mass 77")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,77) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M77")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M78")
{
    field(DESC, "Mass 78")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,78) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M78")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M79")
{
    field(DESC, "Mass 79")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,79) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M79")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M80")
{
    field(DESC, "Mass 80")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,80) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M80")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M81")
{
    field(DESC, "Mass 81")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,81) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M81")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M82")
{
    field(DESC, "Mass 82")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,82) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M82")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M83")
{
    field(DESC, "Mass 83")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,83) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M83")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M84")
{
    field(DESC, "Krypton")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,84) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M84")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M85")
{
    field(DESC, "Mass 85")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,85) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M85")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M86")
{
    field(DESC, "Mass 86")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,86) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M86")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M87")
{
    field(DESC, "Mass 87")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,87) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M87")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M88")
{
    field(DESC, "Mass 88")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,88) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M88")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M89")
{
    field(DESC, "Mass 89")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,89) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M89")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M90")
{
    field(DESC, "Mass 90")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,90) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M90")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M91")
{
    field(DESC, "Mass 91")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,91) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M91")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M92")
{
    field(DESC, "Mass 92")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,92) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M92")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M93")
{
    field(DESC, "Mass 93")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,93) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M93")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M94")
{
    field(DESC, "Mass 94")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,94) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M94")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M95")
{
    field(DESC, "Mass 95")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,95) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M95")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M96")
{
    field(DESC, "Mass 96")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,96) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M96")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M97")
{
    field(DESC, "Mass 97")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,97) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M97")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M98")
{
    field(DESC, "Mass 98")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,98) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M98")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M99")
{
    field(DESC, "Mass 99")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,99) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M99")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M100")
{
    field(DESC, "Mass 100")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,100) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS100")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M100")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M101")
{
    field(DESC, "Mass 101")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,101) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M101")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M102")
{
    field(DESC, "Mass 102")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,102) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M102")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M103")
{
    field(DESC, "Mass 103")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,103) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M103")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M104")
{
    field(DESC, "Mass 104")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,104) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M104")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M105")
{
    field(DESC, "Mass 105")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,105) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M105")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M106")
{
    field(DESC, "Mass 106")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,106) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M106")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M107")
{
    field(DESC, "Mass 107")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,107) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M107")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M108")
{
    field(DESC, "Mass 108")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,108) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M108")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M109")
{
    field(DESC, "Mass 109")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,109) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M109")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M110")
{
    field(DESC, "Mass 110")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,110) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M110")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M111")
{
    field(DESC, "Mass 111")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,111) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M111")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M112")
{
    field(DESC, "Mass 112")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,112) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M112")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M113")
{
    field(DESC, "Mass 113")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,113) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M113")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M114")
{
    field(DESC, "Mass 114")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,114) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M114")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M115")
{
    field(DESC, "Mass 115")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,115) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M115")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M116")
{
    field(DESC, "Mass 116")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,116) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M116")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M117")
{
    field(DESC, "Mass 117")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,117) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M117")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M118")
{
    field(DESC, "Mass 118")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,118) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M118")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M119")
{
    field(DESC, "Mass 119")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,119) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M119")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M120")
{
    field(DESC, "Mass 120")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,120) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M120")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M121")
{
    field(DESC, "Mass 121")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,121) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M121")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M122")
{
    field(DESC, "Mass 122")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,122) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M122")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M123")
{
    field(DESC, "Mass 123")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,123) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M123")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M124")
{
    field(DESC, "Mass 124")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,124) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M124")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M125")
{
    field(DESC, "Mass 125")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,125) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M125")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M126")
{
    field(DESC, "Mass 126")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,126) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M126")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M127")
{
    field(DESC, "Mass 127")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,127) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M127")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M128")
{
    field(DESC, "Mass 128")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,128) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M128")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M129")
{
    field(DESC, "Mass 129")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,129) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M129")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M130")
{
    field(DESC, "Mass 130")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,130) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M130")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M131")
{
    field(DESC, "Xenon")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,131) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M131")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M132")
{
    field(DESC, "Mass 132")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,132) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M132")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M133")
{
    field(DESC, "Mass 133")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,133) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M133")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M134")
{
    field(DESC, "Mass 134")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,134) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M134")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M135")
{
    field(DESC, "Mass 135")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,135) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M135")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M136")
{
    field(DESC, "Mass 136")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,136) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M136")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M137")
{
    field(DESC, "Mass 137")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,137) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M137")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M138")
{
    field(DESC, "Mass 138")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,138) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M138")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M139")
{
    field(DESC, "Mass 139")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,139) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M139")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M140")
{
    field(DESC, "Mass 140")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,140) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M140")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M141")
{
    field(DESC, "Mass 141")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,141) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M141")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M142")
{
    field(DESC, "Mass 142")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,142) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M142")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M143")
{
    field(DESC, "Mass 143")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,143) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M143")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M144")
{
    field(DESC, "Mass 144")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,144) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M144")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M145")
{
    field(DESC, "Mass 145")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,145) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M145")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M146")
{
    field(DESC, "Mass 146")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,146) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M146")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M147")
{
    field(DESC, "Mass 147")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,147) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M147")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M148")
{
    field(DESC, "Mass 148")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,148) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M148")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M149")
{
    field(DESC, "Mass 149")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,149) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M149")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M150")
{
    field(DESC, "Mass 150")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,150) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M150")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M151")
{
    field(DESC, "Mass 151")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,151) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M151")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M152")
{
    field(DESC, "Mass 152")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,152) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M152")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M153")
{
    field(DESC, "Mass 153")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,153) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M153")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M154")
{
    field(DESC, "Mass 154")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,154) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M154")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M155")
{
    field(DESC, "Mass 155")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,155) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M155")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M156")
{
    field(DESC, "Mass 156")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,156) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M156")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M157")
{
    field(DESC, "Mass 157")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,157) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M157")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M158")
{
    field(DESC, "Mass 158")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,158) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M158")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M159")
{
    field(DESC, "Mass 159")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,159) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M159")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M160")
{
    field(DESC, "Bromine")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,160) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M160")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M161")
{
    field(DESC, "Mass 161")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,161) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M161")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M162")
{
    field(DESC, "Mass 162")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,162) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M162")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M163")
{
    field(DESC, "Mass 163")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,163) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M163")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M164")
{
    field(DESC, "Mass 164")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,164) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M164")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M165")
{
    field(DESC, "Mass 165")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,165) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M165")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M166")
{
    field(DESC, "Mass 166")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,166) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M166")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M167")
{
    field(DESC, "Mass 167")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,167) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M167")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M168")
{
    field(DESC, "Mass 168")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,168) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M168")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M169")
{
    field(DESC, "Mass 169")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,169) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M169")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M170")
{
    field(DESC, "Mass 170")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,170) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M170")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M171")
{
    field(DESC, "Mass 171")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,171) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M171")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M172")
{
    field(DESC, "Mass 172")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,172) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M172")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M173")
{
    field(DESC, "Mass 173")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,173) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M173")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M174")
{
    field(DESC, "Mass 174")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,174) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M174")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M175")
{
    field(DESC, "Mass 175")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,175) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M175")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M176")
{
    field(DESC, "Mass 176")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,176) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M176")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M177")
{
    field(DESC, "Mass 177")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,177) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M177")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M178")
{
    field(DESC, "Mass 178")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,178) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M178")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M179")
{
    field(DESC, "Mass 179")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,179) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M179")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M180")
{
    field(DESC, "Mass 180")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,180) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M180")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M181")
{
    field(DESC, "Mass 181")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,181) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M181")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M182")
{
    field(DESC, "Mass 182")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,182) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M182")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M183")
{
    field(DESC, "Mass 183")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,183) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M183")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M184")
{
    field(DESC, "Mass 184")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,184) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M184")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M185")
{
    field(DESC, "Mass 185")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,185) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M185")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M186")
{
    field(DESC, "Mass 186")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,186) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M186")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M187")
{
    field(DESC, "Mass 187")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,187) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M187")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M188")
{
    field(DESC, "Mass 188")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,188) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M188")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M189")
{
    field(DESC, "Mass 189")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,189) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M189")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M190")
{
    field(DESC, "Mass 190")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,190) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M190")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M191")
{
    field(DESC, "Mass 191")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,191) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M191")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M192")
{
    field(DESC, "Mass 192")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,192) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M192")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M193")
{
    field(DESC, "Mass 193")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,193) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M193")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M194")
{
    field(DESC, "Mass 194")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,194) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M194")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M195")
{
    field(DESC, "Mass 195")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,195) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M195")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M196")
{
    field(DESC, "Mass 196")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,196) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M196")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M197")
{
    field(DESC, "Mass 197")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,197) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M197")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M198")
{
    field(DESC, "Mass 198")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,198) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M198")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M199")
{
    field(DESC, "Mass 199")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,199) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M199")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-02:BAR:M200")
{
    field(DESC, "Mass 200")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(1,200) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-02:DIS200")
    field(FLNK, "BL04I-VA-RGA-02:LOG:M200")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
################################################################################
# Log of Bar Chart
#
record(calc, "BL04I-VA-RGA-02:LOG:M1")
{
    field(DESC, "Mass 1")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M1 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:LOG:M2")
{
    field(DESC, "H2")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M2 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-02:LOG:M3")
{
    field(DESC, "Mass 3")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M3 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:LOG:M4")
{
    field(DESC, "He")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M4 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-02:LOG:M5")
{
    field(DESC, "Mass 5")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M5 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M6")
{
    field(DESC, "Mass 6")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M6 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M7")
{
    field(DESC, "Mass 7")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M7 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M8")
{
    field(DESC, "Mass 8")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M8 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M9")
{
    field(DESC, "Mass 9")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M9 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M10")
{
    field(DESC, "Mass 10")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M10 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M11")
{
    field(DESC, "Mass 11")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M11 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M12")
{
    field(DESC, "Mass 12")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M12 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M13")
{
    field(DESC, "Mass 13")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M13 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:LOG:M14")
{
    field(DESC, "CH2/N2++")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M14 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:LOG:M15")
{
    field(DESC, "CH3")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M15 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:LOG:M16")
{
    field(DESC, "CH4")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M16 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:LOG:M17")
{
    field(DESC, "OH")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M17 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:LOG:M18")
{
    field(DESC, "H20")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M18 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-02:LOG:M19")
{
    field(DESC, "Mass 19")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M19 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M20")
{
    field(DESC, "Neon")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M20 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M21")
{
    field(DESC, "Mass 21")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M21 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M22")
{
    field(DESC, "Mass 22")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M22 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M23")
{
    field(DESC, "Mass 23")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M23 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M24")
{
    field(DESC, "Mass 24")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M24 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M25")
{
    field(DESC, "Mass 25")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M25 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M26")
{
    field(DESC, "Mass 26")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M26 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M27")
{
    field(DESC, "Mass 27")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M27 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:LOG:M28")
{
    field(DESC, "N2/CO")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M28 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-02:LOG:M29")
{
    field(DESC, "Mass 29")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M29 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M30")
{
    field(DESC, "NO")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M30 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M31")
{
    field(DESC, "Mass 31")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M31 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:LOG:M32")
{
    field(DESC, "O2")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M32 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-02:LOG:M33")
{
    field(DESC, "Mass 33")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M33 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M34")
{
    field(DESC, "Mass 34")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M34 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M35")
{
    field(DESC, "Mass 35")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M35 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M36")
{
    field(DESC, "Mass 36")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M36 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M37")
{
    field(DESC, "Mass 37")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M37 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M38")
{
    field(DESC, "Fluorine")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M38 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M39")
{
    field(DESC, "Mass 39")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M39 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:LOG:M40")
{
    field(DESC, "Ar")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M40 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-02:LOG:M41")
{
    field(DESC, "Mass 41")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M41 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M42")
{
    field(DESC, "Mass 42")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M42 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M43")
{
    field(DESC, "Mass 43")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M43 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:LOG:M44")
{
    field(DESC, "CO2")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M44 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-02:LOG:M45")
{
    field(DESC, "Mass 45")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M45 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M46")
{
    field(DESC, "NO2")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M46 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M47")
{
    field(DESC, "Mass 47")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M47 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M48")
{
    field(DESC, "Ozone")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M48 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M49")
{
    field(DESC, "Mass 49")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M49 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M50")
{
    field(DESC, "Mass 50")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M50 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M51")
{
    field(DESC, "Mass 51")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M51 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M52")
{
    field(DESC, "Mass 52")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M52 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M53")
{
    field(DESC, "Mass 53")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M53 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M54")
{
    field(DESC, "Mass 54")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M54 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M55")
{
    field(DESC, "Mass 55")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M55 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M56")
{
    field(DESC, "Mass 56")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M56 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M57")
{
    field(DESC, "Mass 57")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M57 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M58")
{
    field(DESC, "Mass 58")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M58 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M59")
{
    field(DESC, "Mass 59")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M59 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M60")
{
    field(DESC, "Buckyball")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M60 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M61")
{
    field(DESC, "Mass 61")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M61 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M62")
{
    field(DESC, "Mass 62")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M62 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M63")
{
    field(DESC, "Mass 63")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M63 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M64")
{
    field(DESC, "Mass 64")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M64 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M65")
{
    field(DESC, "Mass 65")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M65 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M66")
{
    field(DESC, "Mass 66")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M66 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M67")
{
    field(DESC, "Mass 67")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M67 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M68")
{
    field(DESC, "Mass 68")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M68 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-02:LOG:M69")
{
    field(DESC, "CF3/C5H9")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M69 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-02:LOG:M70")
{
    field(DESC, "Mass 70")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M70 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M71")
{
    field(DESC, "Mass 71")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M71 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M72")
{
    field(DESC, "Mass 72")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M72 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M73")
{
    field(DESC, "Mass 73")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M73 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M74")
{
    field(DESC, "Mass 74")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M74 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M75")
{
    field(DESC, "Mass 75")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M75 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M76")
{
    field(DESC, "Mass 76")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M76 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M77")
{
    field(DESC, "Mass 77")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M77 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M78")
{
    field(DESC, "Mass 78")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M78 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M79")
{
    field(DESC, "Mass 79")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M79 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M80")
{
    field(DESC, "Mass 80")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M80 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M81")
{
    field(DESC, "Mass 81")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M81 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M82")
{
    field(DESC, "Mass 82")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M82 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M83")
{
    field(DESC, "Mass 83")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M83 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M84")
{
    field(DESC, "Mass 84")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M84 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M85")
{
    field(DESC, "Mass 85")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M85 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M86")
{
    field(DESC, "Mass 86")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M86 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M87")
{
    field(DESC, "Mass 87")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M87 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M88")
{
    field(DESC, "Mass 88")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M88 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M89")
{
    field(DESC, "Mass 89")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M89 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M90")
{
    field(DESC, "Mass 90")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M90 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M91")
{
    field(DESC, "Mass 91")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M91 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M92")
{
    field(DESC, "Mass 92")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M92 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M93")
{
    field(DESC, "Mass 93")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M93 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M94")
{
    field(DESC, "Mass 94")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M94 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M95")
{
    field(DESC, "Mass 95")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M95 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M96")
{
    field(DESC, "Mass 96")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M96 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M97")
{
    field(DESC, "Mass 97")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M97 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M98")
{
    field(DESC, "Mass 98")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M98 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M99")
{
    field(DESC, "Mass 99")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M99 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M100")
{
    field(DESC, "Mass 100")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M100 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M101")
{
    field(DESC, "Mass 101")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M101 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M102")
{
    field(DESC, "Mass 102")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M102 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M103")
{
    field(DESC, "Mass 103")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M103 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M104")
{
    field(DESC, "Mass 104")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M104 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M105")
{
    field(DESC, "Mass 105")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M105 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M106")
{
    field(DESC, "Mass 106")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M106 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M107")
{
    field(DESC, "Mass 107")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M107 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M108")
{
    field(DESC, "Mass 108")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M108 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M109")
{
    field(DESC, "Mass 109")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M109 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M110")
{
    field(DESC, "Mass 110")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M110 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M111")
{
    field(DESC, "Mass 111")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M111 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M112")
{
    field(DESC, "Mass 112")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M112 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M113")
{
    field(DESC, "Mass 113")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M113 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M114")
{
    field(DESC, "Mass 114")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M114 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M115")
{
    field(DESC, "Mass 115")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M115 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M116")
{
    field(DESC, "Mass 116")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M116 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M117")
{
    field(DESC, "Mass 117")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M117 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M118")
{
    field(DESC, "Mass 118")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M118 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M119")
{
    field(DESC, "Mass 119")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M119 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M120")
{
    field(DESC, "Mass 120")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M120 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M121")
{
    field(DESC, "Mass 121")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M121 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M122")
{
    field(DESC, "Mass 122")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M122 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M123")
{
    field(DESC, "Mass 123")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M123 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M124")
{
    field(DESC, "Mass 124")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M124 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M125")
{
    field(DESC, "Mass 125")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M125 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M126")
{
    field(DESC, "Mass 126")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M126 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M127")
{
    field(DESC, "Mass 127")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M127 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M128")
{
    field(DESC, "Mass 128")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M128 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M129")
{
    field(DESC, "Mass 129")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M129 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M130")
{
    field(DESC, "Mass 130")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M130 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M131")
{
    field(DESC, "Mass 131")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M131 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M132")
{
    field(DESC, "Mass 132")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M132 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M133")
{
    field(DESC, "Mass 133")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M133 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M134")
{
    field(DESC, "Mass 134")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M134 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M135")
{
    field(DESC, "Mass 135")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M135 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M136")
{
    field(DESC, "Mass 136")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M136 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M137")
{
    field(DESC, "Mass 137")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M137 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M138")
{
    field(DESC, "Mass 138")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M138 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M139")
{
    field(DESC, "Mass 139")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M139 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M140")
{
    field(DESC, "Mass 140")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M140 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M141")
{
    field(DESC, "Mass 141")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M141 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M142")
{
    field(DESC, "Mass 142")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M142 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M143")
{
    field(DESC, "Mass 143")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M143 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M144")
{
    field(DESC, "Mass 144")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M144 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M145")
{
    field(DESC, "Mass 145")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M145 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M146")
{
    field(DESC, "Mass 146")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M146 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M147")
{
    field(DESC, "Mass 147")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M147 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M148")
{
    field(DESC, "Mass 148")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M148 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M149")
{
    field(DESC, "Mass 149")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M149 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M150")
{
    field(DESC, "Mass 150")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M150 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M151")
{
    field(DESC, "Mass 151")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M151 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M152")
{
    field(DESC, "Mass 152")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M152 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M153")
{
    field(DESC, "Mass 153")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M153 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M154")
{
    field(DESC, "Mass 154")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M154 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M155")
{
    field(DESC, "Mass 155")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M155 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M156")
{
    field(DESC, "Mass 156")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M156 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M157")
{
    field(DESC, "Mass 157")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M157 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M158")
{
    field(DESC, "Mass 158")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M158 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M159")
{
    field(DESC, "Mass 159")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M159 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M160")
{
    field(DESC, "Mass 160")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M160 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M161")
{
    field(DESC, "Mass 161")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M161 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M162")
{
    field(DESC, "Mass 162")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M162 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M163")
{
    field(DESC, "Mass 163")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M163 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M164")
{
    field(DESC, "Mass 164")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M164 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M165")
{
    field(DESC, "Mass 165")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M165 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M166")
{
    field(DESC, "Mass 166")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M166 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M167")
{
    field(DESC, "Mass 167")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M167 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M168")
{
    field(DESC, "Mass 168")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M168 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M169")
{
    field(DESC, "Mass 169")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M169 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M170")
{
    field(DESC, "Mass 170")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M170 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M171")
{
    field(DESC, "Mass 171")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M171 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M172")
{
    field(DESC, "Mass 172")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M172 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M173")
{
    field(DESC, "Mass 173")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M173 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M174")
{
    field(DESC, "Mass 174")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M174 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M175")
{
    field(DESC, "Mass 175")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M175 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M176")
{
    field(DESC, "Mass 176")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M176 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M177")
{
    field(DESC, "Mass 177")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M177 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M178")
{
    field(DESC, "Mass 178")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M178 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M179")
{
    field(DESC, "Mass 179")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M179 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M180")
{
    field(DESC, "Mass 180")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M180 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M181")
{
    field(DESC, "Mass 181")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M181 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M182")
{
    field(DESC, "Mass 182")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M182 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M183")
{
    field(DESC, "Mass 183")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M183 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M184")
{
    field(DESC, "Mass 184")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M184 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M185")
{
    field(DESC, "Mass 185")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M185 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M186")
{
    field(DESC, "Mass 186")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M186 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M187")
{
    field(DESC, "Mass 187")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M187 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M188")
{
    field(DESC, "Mass 188")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M188 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M189")
{
    field(DESC, "Mass 189")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M189 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M190")
{
    field(DESC, "Mass 190")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M190 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M191")
{
    field(DESC, "Mass 191")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M191 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M192")
{
    field(DESC, "Mass 192")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M192 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M193")
{
    field(DESC, "Mass 193")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M193 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M194")
{
    field(DESC, "Mass 194")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M194 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M195")
{
    field(DESC, "Mass 195")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M195 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M196")
{
    field(DESC, "Mass 196")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M196 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M197")
{
    field(DESC, "Mass 197")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M197 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M198")
{
    field(DESC, "Mass 198")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M198 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M199")
{
    field(DESC, "Mass 199")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M199 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-02:LOG:M200")
{
    field(DESC, "Mass 200")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-02:BAR:M200 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
################################################################################

#
# Standard bar chart masses (nominally up to 11)
record(mbbi, "BL04I-VA-RGA-02:MASSMAP") 
{
  field(DTYP, "Soft Channel")
  field(DESC, "Chart mass allocation")
  field(PINI, "YES")
  field(ZRST, "H2")
  field(ONST, "He")
  field(TWST, "CH2/N2++")
  field(THST, "CH3")
  field(FRST, "CH4")
  field(FVST, "H2O")
  field(SXST, "N2/CO")
  field(SVST, "O2")
  field(EIST, "Ar")
  field(NIST, "CO2")
  field(TEST, "CF3/C5H9")
  field(ELST, "unused")
  field(TVST, "unused")
  field(TTST, "unused")
  field(FTST, "unused")
  field(FFST, "unused")
  field(ZRVL, "2")
  field(ONVL, "4")
  field(TWVL, "14")
  field(THVL, "15")
  field(FRVL, "16")
  field(FVVL, "18")
  field(SXVL, "28")
  field(SVVL, "32")
  field(EIVL, "40")
  field(NIVL, "44")
  field(TEVL, "69")
  field(ELVL, "0")
  field(TVVL, "0")
  field(TTVL, "0")
  field(FTVL, "0")
  field(FFVL, "0")
}

# Peak Jump Masses (nominally up to 12)
#
record(mbbi, "BL04I-VA-RGA-02:PJMASSMAP") 
{
  field(DTYP, "Soft Channel")
  field(DESC, "Peak Jump masses")
  field(PINI, "YES")
  field(ZRST, "H2")
  field(ONST, "unused")
  field(TWST, "unused")
  field(THST, "unused")
  field(FRST, "unused")
  field(FVST, "unused")
  field(SXST, "unused")
  field(SVST, "unused")
  field(EIST, "unused")
  field(NIST, "unused")
  field(TEST, "unused")
  field(ELST, "unused")
  field(TVST, "unused")
  field(TTST, "unused")
  field(FTST, "unused")
  field(FFST, "unused")
  field(ZRVL, "2")
  field(ONVL, "0")
  field(TWVL, "0")
  field(THVL, "0")
  field(FRVL, "0")
  field(FVVL, "0")
  field(SXVL, "0")
  field(SVVL, "0")
  field(EIVL, "0")
  field(NIVL, "0")
  field(TEVL, "0")
  field(ELVL, "0")
  field(TVVL, "0")
  field(TTVL, "0")
  field(FTVL, "0")
  field(FFVL, "0")
}

## The INP field to this PV has been "2;4" for
## over two years and just picked up on caSnooper.
## Making it 24 for now until the correct value is determined.
## IJG: 19 Dec 14
##
record(stringin, "BL04I-VA-RGA-02:PJMASSSTR") 
{
  field(DESC, "Peak Jump masses")
  field(PINI, "YES")
  field(INP, "24")
}

record(waveform, "BL04I-VA-RGA-02:SPECTRUM")
{
    #field(DTYP, "Waveform")
    field(FTVL, "DOUBLE")
    field(NELM, "6400")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-02:PJ:BIN1")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(1) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-02:DISPJ1")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-02:PJ:BIN2")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(1) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-02:DISPJ2")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-02:PJ:BIN3")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(1) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-02:DISPJ3")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-02:PJ:BIN4")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(1) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-02:DISPJ4")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-02:PJ:BIN5")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(1) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-02:DISPJ5")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-02:PJ:BIN6")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(1) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-02:DISPJ6")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-02:PJ:BIN7")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(1) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-02:DISPJ7")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-02:PJ:BIN8")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(1) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-02:DISPJ8")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-02:PJ:BIN9")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(1) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-02:DISPJ9")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-02:PJ:BIN10")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(1) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-02:DISPJ10")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-02:PJ:BIN11")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(1) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-02:DISPJ11")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-02:PJ:BIN12")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(1) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-02:DISPJ12")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

# rga.db
# Template database for an RGA
# Pete Owens - 24-6-04
#
# It appears that any mass to be displayed on the summary rga.edl
# has its SDIS field set to DIS20
# IJG 11-5-11
#
# Macros:
#% macro, device, Device Prefix
#% macro, port, Asyn Serial Port e.g. ty_40_0
#% macro, channel, RGA channel number (port number of PC comm port 1-4)
#% macro, name, Object and gui association name
#% macro, mm00_label, Optional
#% macro, mm01_label, Optional
#% macro, mm02_label, Optional
#% macro, mm03_label, Optional
#% macro, mm04_label, Optional
#% macro, mm05_label, Optional
#% macro, mm06_label, Optional
#% macro, mm07_label, Optional
#% macro, mm08_label, Optional
#% macro, mm09_label, Optional
#% macro, mm10_label, Optional
#% macro, mm11_label, Optional
#% macro, mm12_label, Optional
#% macro, mm13_label, Optional
#% macro, mm14_label, Optional
#% macro, mm015_label, Optional
#% macro, mm00_mass, Optional
#% macro, mm01_mass, Optional
#% macro, mm02_mass, Optional
#% macro, mm03_mass, Optional
#% macro, mm04_mass, Optional
#% macro, mm05_mass, Optional
#% macro, mm06_mass, Optional
#% macro, mm07_mass, Optional
#% macro, mm08_mass, Optional
#% macro, mm09_mass, Optional
#% macro, mm10_mass, Optional
#% macro, mm11_mass, Optional
#% macro, mm12_mass, Optional
#% macro, mm13_mass, Optional
#% macro, mm14_mass, Optional
#% macro, mm15_mass, Optional
#% macro, pjmm00_label, Optional
#% macro, pjmm01_label, Optional
#% macro, pjmm02_label, Optional
#% macro, pjmm03_label, Optional
#% macro, pjmm04_label, Optional
#% macro, pjmm05_label, Optional
#% macro, pjmm06_label, Optional
#% macro, pjmm07_label, Optional
#% macro, pjmm08_label, Optional
#% macro, pjmm09_label, Optional
#% macro, pjmm10_label, Optional
#% macro, pjmm11_label, Optional
#% macro, pjmm12_label, Optional
#% macro, pjmm13_label, Optional
#% macro, pjmm14_label, Optional
#% macro, pjmm015_label, Optional
#% macro, pjmm00_mass, Optional
#% macro, pjmm01_mass, Optional
#% macro, pjmm02_mass, Optional
#% macro, pjmm03_mass, Optional
#% macro, pjmm04_mass, Optional
#% macro, pjmm05_mass, Optional
#% macro, pjmm06_mass, Optional
#% macro, pjmm07_mass, Optional
#% macro, pjmm08_mass, Optional
#% macro, pjmm09_mass, Optional
#% macro, pjmm10_mass, Optional
#% macro, pjmm11_mass, Optional
#% macro, pjmm12_mass, Optional
#% macro, pjmm13_mass, Optional
#% macro, pjmm14_mass, Optional
#% macro, pjmm15_mass, Optional

################################################################################

# This associates an edm screen with the template
# % gui, RGA3, edm, rga.edl, device=BL04I-VA-RGA-03
# This associates a BOY screen with the template
# % gui, RGA3, boycomponent, rgaApp_opi/rga.opi, device=BL04I-VA-RGA-03, desc=BL04I-VA-RGA-03, name=RGA3
# % gui, RGA3, boyembed, rgaApp_opi/rga_embed.opi, device=BL04I-VA-RGA-03, desc=BL04I-VA-RGA-03, name=RGA3
# % gui, RGA3, readback, Status,                BL04I-VA-RGA-03:STA

# Head Connected
#
#
#% archiver 10 Monitor
#
record(stringin, "BL04I-VA-RGA-03:HEAD")
{
    field(DESC, "Head")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol head(2) ty_40_1 0")
    field(SCAN, "10 second")
}
################################################################################
# Head Status
#
record(calc, "BL04I-VA-RGA-03:STA")
{
    field(DESC, "Overall status")
    field(CALC, "((A>4)&&(A<=7)&&(B#1))?0:A")
    field(SCAN, "1 second")
    field(INPA, "BL04I-VA-RGA-03:HEADSTA PP")
    field(INPB, "BL04I-VA-RGA-03:FILSTA PP")
    field(INPC, "BL04I-VA-RGA-03:SEV MS")
}
record(calc, "BL04I-VA-RGA-03:SEV")
{
    field(DESC, "Persistent Severity")
    field(CALC, "(B=3)?((A>999)?1000:(A+1)):0")
    field(SCAN, "1 second")
    field(INPA, "BL04I-VA-RGA-03:SEV.VAL")
    field(INPB, "BL04I-VA-RGA-03:HEADSTA.SEVR")
    field(HIGH, "30")
    field(HIHI, "120")
    field(HSV,  "MAJOR")
    field(HHSV, "INVALID")
}
#
#% archiver 10 Monitor
#% controldesk Head Status smon
#
record(mbbi, "BL04I-VA-RGA-03:HEADSTA")
{
    field(DESC, "Head Status")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol sta(2) ty_40_1 0")
#    field(SCAN, "1 second")
    field(FLNK, "BL04I-VA-RGA-03:DIS200")
    field(ZRST, "Idle")
    field(ONST, "Local Control")
    field(TWST, "Degas Filament")
    field(THST, "Cal Faraday")
    field(FRST, "Cal Multiplier")
    field(FVST, "Barchart 1-50")
    field(SXST, "Barchart 1-100")
    field(SVST, "Barchart 1-200")
    field(EIST, "Analog 1-200")
    field(NIST, "No RGA")
    field(TEST, "Peak Jump")
    field(UNSV, "MAJOR")
    field(ZRSV, "MINOR")
    field(ONSV, "MINOR")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MINOR")
    field(FVSV, "NO_ALARM")
    field(SXSV, "NO_ALARM")
    field(SVSV, "NO_ALARM")
    field(EISV, "NO_ALARM")
    field(NISV, "INVALID")
    field(TESV, "NO_ALARM")
}
#
#% archiver 10 Monitor
#% controldesk Head Status scon
#
record(mbbo, "BL04I-VA-RGA-03:CON")
{
    field(DESC, "Head Status")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol con(2) ty_40_1 0")
    field(NOBT, "4")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(TWVL, "2")
    field(THVL, "3")
    field(FRVL, "4")
    field(FVVL, "5")
    field(SXVL, "6")
    field(SVVL, "7")
    field(EIVL, "8")
    field(TEVL, "10")
    field(ZRST, "Stop")
    field(ONST, "Local Control")
    field(TWST, "Degas Filament")
    field(THST, "Cal Faraday")
    field(FRST, "Cal Multiplier")
    field(FVST, "Barchart 1-50")
    field(SXST, "Barchart 1-100")
    field(SVST, "Barchart 1-200")
#    field(EIST, "Analog 1-200")
    field(TEST, "Peak Jump")
}
################################################################################
# Disable Barcharts
#
#% archiver 10 Monitor
#
record(bo, "BL04I-VA-RGA-03:SEL")
{
    field(DESC, "Select Bars")
    field(FLNK, "BL04I-VA-RGA-03:DIS200")
    field(VAL,  "0")
    field(ZNAM, "Selected")
    field(ONAM, "All")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:DIS200")
{
    field(DESC, "Disable 200")
    field(CALC, "(A=7)&&(B=1)?0:1")
    field(INPA, "BL04I-VA-RGA-03:STA")
    field(INPB, "BL04I-VA-RGA-03:SEL")
    field(FLNK, "BL04I-VA-RGA-03:DIS100")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:DIS100")
{
    field(DESC, "Disable 100")
    field(CALC, "((A=6)||(A=7))&&(B=1)?0:1")
    field(INPA, "BL04I-VA-RGA-03:STA")
    field(INPB, "BL04I-VA-RGA-03:SEL")
    field(FLNK, "BL04I-VA-RGA-03:DIS50")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:DIS50")
{
    field(DESC, "Disable 50")
    field(CALC, "(A>=5)&&(A<=7)&&(B=1)?0:1")
    field(INPA, "BL04I-VA-RGA-03:STA")
    field(INPB, "BL04I-VA-RGA-03:SEL")
    field(FLNK, "BL04I-VA-RGA-03:DIS20")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:DIS20")
{
    field(DESC, "Disable Select")
    field(CALC, "(A>=5)&&(A<=7)?0:1")
    field(INPA, "BL04I-VA-RGA-03:STA")
    field(FLNK, "BL04I-VA-RGA-03:DISPJ")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:DISPJ")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)?0:1")
    field(INPA, "BL04I-VA-RGA-03:STA")
    field(INPB, "BL04I-VA-RGA-03:SEL")
    field(FLNK, "BL04I-VA-RGA-03:DISPJ1")
}
record(calc, "BL04I-VA-RGA-03:DISPJ1")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-03:STA")
    field(INPB, "BL04I-VA-RGA-03:PJ:BIN1.DESC")
    field(FLNK, "BL04I-VA-RGA-03:DISPJ2")
}
record(calc, "BL04I-VA-RGA-03:DISPJ2")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-03:STA")
    field(INPB, "BL04I-VA-RGA-03:PJ:BIN2.DESC")
    field(FLNK, "BL04I-VA-RGA-03:DISPJ3")
}
record(calc, "BL04I-VA-RGA-03:DISPJ3")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-03:STA")
    field(INPB, "BL04I-VA-RGA-03:PJ:BIN3.DESC")
    field(FLNK, "BL04I-VA-RGA-03:DISPJ4")
}
record(calc, "BL04I-VA-RGA-03:DISPJ4")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-03:STA")
    field(INPB, "BL04I-VA-RGA-03:PJ:BIN4.DESC")
    field(FLNK, "BL04I-VA-RGA-03:DISPJ5")
}
record(calc, "BL04I-VA-RGA-03:DISPJ5")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-03:STA")
    field(INPB, "BL04I-VA-RGA-03:PJ:BIN5.DESC")
    field(FLNK, "BL04I-VA-RGA-03:DISPJ6")
}
record(calc, "BL04I-VA-RGA-03:DISPJ6")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-03:STA")
    field(INPB, "BL04I-VA-RGA-03:PJ:BIN6.DESC")
    field(FLNK, "BL04I-VA-RGA-03:DISPJ7")
}
record(calc, "BL04I-VA-RGA-03:DISPJ7")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-03:STA")
    field(INPB, "BL04I-VA-RGA-03:PJ:BIN7.DESC")
    field(FLNK, "BL04I-VA-RGA-03:DISPJ8")
}
record(calc, "BL04I-VA-RGA-03:DISPJ8")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-03:STA")
    field(INPB, "BL04I-VA-RGA-03:PJ:BIN8.DESC")
    field(FLNK, "BL04I-VA-RGA-03:DISPJ9")
}
record(calc, "BL04I-VA-RGA-03:DISPJ9")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-03:STA")
    field(INPB, "BL04I-VA-RGA-03:PJ:BIN9.DESC")
    field(FLNK, "BL04I-VA-RGA-03:DISPJ10")
}
record(calc, "BL04I-VA-RGA-03:DISPJ10")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-03:STA")
    field(INPB, "BL04I-VA-RGA-03:PJ:BIN10.DESC")
    field(FLNK, "BL04I-VA-RGA-03:DISPJ11")
}
record(calc, "BL04I-VA-RGA-03:DISPJ11")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-03:STA")
    field(INPB, "BL04I-VA-RGA-03:PJ:BIN11.DESC")
    field(FLNK, "BL04I-VA-RGA-03:DISPJ12")
}
record(calc, "BL04I-VA-RGA-03:DISPJ12")
{
    field(DESC, "Disable Peak Jump")
    field(CALC, "(A=10)&&(B>0)?0:1")
    field(INPA, "BL04I-VA-RGA-03:STA")
    field(INPB, "BL04I-VA-RGA-03:PJ:BIN12.DESC")
}
################################################################################
# Current Selected Filament
#
#
#% archiver 10 Monitor
#% controldesk Filament smon
#
record(bi,"BL04I-VA-RGA-03:FIL") 
{
    field(DESC, "Filament")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol fil(2) ty_40_1 0")
    field(SCAN, "1 second")
    field(SDIS, "BL04I-VA-RGA-03:MODE")
    field(ZNAM, "Filament 1")
    field(ONAM, "Filament 2")
}
#
#% archiver 10 Monitor
#% controldesk Filament scon
#
record(bo, "BL04I-VA-RGA-03:SETFIL")
{
    field(DESC, "Filament")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol setfil(2) ty_40_1 0")
    field(ZNAM, "Filament 1")
    field(ONAM, "Filament 2")
}
################################################################################
# Filament Status
#
#
#% archiver 10 Monitor
#% controldesk Filament Status smon
#
record(mbbi, "BL04I-VA-RGA-03:FILSTA")
{
    field(DESC, "Filament Status")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol filsta(2) ty_40_1 0")
#    field(SCAN, "1 second")
    field(SDIS, "BL04I-VA-RGA-03:MODE")
    field(ZRST, "Off")
    field(ONST, "On")
    field(TWST, "Warming up")
    field(THST, "Cooling Down")
    field(FRST, "Failed")
    field(UNSV, "MAJOR")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "MAJOR")
}
#
#% archiver 10 Monitor
#% controldesk Filament Status scon
#
record(bo, "BL04I-VA-RGA-03:FILCON")
{
    field(DESC, "Filament Control")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol filcon(2) ty_40_1 0")
    field(ZNAM, "Off")
    field(ONAM, "On")
}
################################################################################
# IMG Interlock Status
#
#% archiver 10 Monitor
#% controldesk IMG Interlock smon
#
record(bi, "BL04I-VA-RGA-03:ILK") 
{
    field(DESC, "IMG Interlock")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol ilk(2) ty_40_1 0")
    field(SCAN, "1 second")
    field(SDIS, "BL04I-VA-RGA-03:MODE")
    field(ZNAM, "OK")
    field(ONAM, "Tripped")
    field(ZSV,  "NO_ALARM")
    field(OSV,  "MAJOR")
}
################################################################################
# Multiplier Status
#
#% archiver 10 Monitor
#% controldesk Multiplier smon
#
record(bi,"BL04I-VA-RGA-03:MLTSTA") 
{
    field(DESC, "Multiplier")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol mltsta(2) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZNAM, "Disabled")
    field(ONAM, "Enabled")
}
#
#% archiver 10 Monitor
#% controldesk Multiplier scon
#
record(bo, "BL04I-VA-RGA-03:MLTCON")
{
    field(DESC, "Multiplier")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol mltcon(2) ty_40_1 0")
    field(ZNAM, "Disable")
    field(ONAM, "Enable")
}
################################################################################
# Scan Mode Status
#
#% archiver 10 Monitor
#% controldesk Scan Mode smon
#
record(bi,"BL04I-VA-RGA-03:SCAN") 
{
    field(DESC, "Scan Mode")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol scan(2) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZNAM, "Single")
    field(ONAM, "Continuous")
}
#
#% archiver 10 Monitor
#% controldesk Scan Mode scon
#
record(bo, "BL04I-VA-RGA-03:SETSCAN")
{
    field(DESC, "Scan Mode")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol setscan(2) ty_40_1 0")
    field(ZNAM, "Single")
    field(ONAM, "Continuous")
}
################################################################################
# Control Mode Status
#
#% archiver 10 Monitor
#
record(bi,"BL04I-VA-RGA-03:MODE") 
{
    field(DESC, "Scan Mode")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol mode(2) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZNAM, "Remote")
    field(ONAM, "Local")
}
#
#% archiver 10 Monitor
#
record(bo, "BL04I-VA-RGA-03:SETMODE")
{
    field(DESC, "Scan Mode")
    field(DTYP, "stream")
    field(OUT,  "@rga.protocol setmode(2) ty_40_1 0")
    field(ZNAM, "Remote")
    field(ONAM, "Local")
}
################################################################################
# Are there data to read
#
#% archiver 10 Monitor
#% controldesk Data to read smon
#
record(mbbi, "BL04I-VA-RGA-03:DATA")
{
    field(DESC, "Data to read")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol data(2) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZRST, "No Data")
    field(ONST, "Barchart 1-50")
    field(TWST, "Barchart 1-100")
    field(THST, "Barchart 1-200")
    field(FRST, "Analog 1-200")
    field(FVST, "Peak Jump")
    field(UNSV, "NO_ALARM")
    field(ZRSV, "NO_ALARM")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "NO_ALARM")
    field(FVSV, "NO_ALARM")
}
################################################################################
# Date of current scan
#
#% archiver 10 Monitor
#% controldesk Date readback
#
record(stringin, "BL04I-VA-RGA-03:DATE")
{
    field(DESC, "Date")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol date(2) ty_40_1 0")
    field(SCAN, "1 second")
}
###
### THESE RECORDS REMOVED TO SAVE RS232 BANDWIDTH
### When we move to 3.14 we can use sCalcout
###
#record(stringin, "BL04I-VA-RGA-03:YEAR")
#{
#    field(DESC, "Year")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol year(2) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04I-VA-RGA-03:DIS50")
#}
#record(longin, "BL04I-VA-RGA-03:MON")
#{
#    field(DESC, "Month")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol mon(2) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04I-VA-RGA-03:DIS50")
#    field(HOPR, "12")
#    field(LOPR, "1")
#    field(HIGH, "12")
#    field(LOW,  "1")
#    field(HSV,  "MINOR")
#    field(LSV,  "MINOR")
#}
#record(longin, "BL04I-VA-RGA-03:DAY")
#{
#    field(DESC, "Day")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol day(2) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04I-VA-RGA-03:DIS50")
#    field(HOPR, "31")
#    field(LOPR, "1")
#    field(HIGH, "31")
#    field(LOW,  "1")
#    field(HSV,  "MINOR")
#    field(LSV,  "MINOR")
#}
#record(stringin, "BL04I-VA-RGA-03:HOUR")
#{
#    field(DESC, "Hour")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol hour(2) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04I-VA-RGA-03:DIS50")
#}
#record(stringin, "BL04I-VA-RGA-03:MIN")
#{
#    field(DESC, "Minute")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol min(2) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04I-VA-RGA-03:DIS50")
#}
#record(stringin, "BL04I-VA-RGA-03:SEC")
#{
#    field(DESC, "Second")
#    field(DTYP, "stream")
#    field(INP,  "@rga.protocol sec(2) ty_40_1 0")
#    field(SCAN, "10 second")
#    field(SDIS, "BL04I-VA-RGA-03:DIS50")
#}
################################################################################
# Detector Setting
#
#% archiver 10 Monitor
#% controldesk Detector Setting smon
#
record(mbbi, "BL04I-VA-RGA-03:DET")
{
    field(DESC, "Detector Setting")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol det(2) ty_40_1 0")
    field(SCAN, "1 second")
    field(ZRST, "No Data")
    field(ONST, "Faraday")
    field(TWST, "Multiplier")
}
################################################################################
# Total Pressure
#
#% archiver 10 Monitor
#% controldesk Total Pressure readback
#
record(ai, "BL04I-VA-RGA-03:TOTP")
{
    field(DESC, "Total Pressure")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol total(2) ty_40_1 0")
    field(SCAN, "10 second")
    field(FLNK, "BL04I-VA-RGA-03:TOTPLOG")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(calcout, "BL04I-VA-RGA-03:TOTPADEL")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-03:TOTP.ADEL")
    field(INPA, "BL04I-VA-RGA-03:TOTP")
    field(INPB, "20")
    field(SCAN, "10 second")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:TOTPLOG")
{
    field(DESC, "Total Pressure")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:TOTP MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
################################################################################
# Sum Partial
#
#% archiver 10 Monitor
#% controldesk Sum of Peaks readback
#
record(ai, "BL04I-VA-RGA-03:SUMP")
{
    field(DESC, "Sum of Peaks")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol sum(2) ty_40_1 0")
    field(SCAN, "10 second")
    field(FLNK, "BL04I-VA-RGA-03:SUMPLOG")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(calcout, "BL04I-VA-RGA-03:SUMPADEL")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-03:SUMP.ADEL")
    field(INPA, "BL04I-VA-RGA-03:SUMP")
    field(INPB, "20")
    field(SCAN, "10 second")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:SUMPLOG")
{
    field(DESC, "Sum of Peaks")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:SUMP MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
################################################################################
# Bar Chart Deadband
#
record(calcout, "BL04I-VA-RGA-03:ADEL:M2")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-03:BAR:M2.ADEL")
    field(INPA, "BL04I-VA-RGA-03:BAR:M2")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-03:ADEL:M4")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-03:BAR:M4.ADEL")
    field(INPA, "BL04I-VA-RGA-03:BAR:M4")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-03:ADEL:M14")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-03:BAR:M14.ADEL")
    field(INPA, "BL04I-VA-RGA-03:BAR:M14")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-03:ADEL:M15")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-03:BAR:M15.ADEL")
    field(INPA, "BL04I-VA-RGA-03:BAR:M15")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-03:ADEL:M16")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-03:BAR:M16.ADEL")
    field(INPA, "BL04I-VA-RGA-03:BAR:M16")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-03:ADEL:M18")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-03:BAR:M18.ADEL")
    field(INPA, "BL04I-VA-RGA-03:BAR:M18")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-03:ADEL:M28")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-03:BAR:M28.ADEL")
    field(INPA, "BL04I-VA-RGA-03:BAR:M28")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-03:ADEL:M32")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-03:BAR:M32.ADEL")
    field(INPA, "BL04I-VA-RGA-03:BAR:M32")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-03:ADEL:M40")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-03:BAR:M40.ADEL")
    field(INPA, "BL04I-VA-RGA-03:BAR:M40")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-03:ADEL:M44")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-03:BAR:M44.ADEL")
    field(INPA, "BL04I-VA-RGA-03:BAR:M44")
    field(INPB, "20")
    field(SCAN, "10 second")
}
record(calcout, "BL04I-VA-RGA-03:ADEL:M69")
{
    field(DESC, "deadband")
    field(CALC, "A/B")
    field(OUT,  "BL04I-VA-RGA-03:BAR:M69.ADEL")
    field(INPA, "BL04I-VA-RGA-03:BAR:M69")
    field(INPB, "20")
    field(SCAN, "10 second")
}
################################################################################
# Bar Chart
#
record(ai, "BL04I-VA-RGA-03:BAR:M1")
{
    field(DESC, "Mass 1")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,1) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M1")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk H2 readback
#
record(ai, "BL04I-VA-RGA-03:BAR:M2")
{
    field(DESC, "H2")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,2) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS20")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M2")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M3")
{
    field(DESC, "Mass 3")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,3) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M3")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk He readback
#
record(ai, "BL04I-VA-RGA-03:BAR:M4")
{
    field(DESC, "He")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,4) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS20")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M4")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M5")
{
    field(DESC, "Mass 5")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,5) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M5")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M6")
{
    field(DESC, "Mass 6")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,6) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M6")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M7")
{
    field(DESC, "Mass 7")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,7) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M7")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M8")
{
    field(DESC, "Mass 8")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,8) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M8")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M9")
{
    field(DESC, "Mass 9")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,9) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M9")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M10")
{
    field(DESC, "Mass 10")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,10) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M10")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M11")
{
    field(DESC, "Mass 11")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,11) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M11")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M12")
{
    field(DESC, "Mass 12")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,12) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M12")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M13")
{
    field(DESC, "Mass 13")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,13) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M13")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk CH2/N2++ readback
#
record(ai, "BL04I-VA-RGA-03:BAR:M14")
{
    field(DESC, "CH2/N2++")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,14) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS20")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M14")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk CH3 readback
#
record(ai, "BL04I-VA-RGA-03:BAR:M15")
{
    field(DESC, "CH3")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,15) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS20")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M15")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk CH4 readback
#
record(ai, "BL04I-VA-RGA-03:BAR:M16")
{
    field(DESC, "CH4")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,16) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS20")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M16")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk OH readback
#
record(ai, "BL04I-VA-RGA-03:BAR:M17")
{
    field(DESC, "OH")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,17) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M17")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk H20 readback
#
record(ai, "BL04I-VA-RGA-03:BAR:M18")
{
    field(DESC, "H20")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,18) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS20")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M18")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M19")
{
    field(DESC, "Mass 19")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,19) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M19")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M20")
{
    field(DESC, "Neon")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,20) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M20")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M21")
{
    field(DESC, "Mass 21")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,21) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M21")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M22")
{
    field(DESC, "Mass 22")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,22) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M22")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M23")
{
    field(DESC, "Mass 23")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,23) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M23")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M24")
{
    field(DESC, "Mass 24")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,24) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M24")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M25")
{
    field(DESC, "Mass 25")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,25) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M25")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M26")
{
    field(DESC, "Mass 26")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,26) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M26")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M27")
{
    field(DESC, "Mass 27")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,27) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M27")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk N2/CO readback
#
record(ai, "BL04I-VA-RGA-03:BAR:M28")
{
    field(DESC, "N2/CO")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,28) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS20")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M28")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M29")
{
    field(DESC, "Mass 29")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,29) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M29")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M30")
{
    field(DESC, "NO")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,30) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M30")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M31")
{
    field(DESC, "Mass 31")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,31) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M31")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk O2 readback
#
record(ai, "BL04I-VA-RGA-03:BAR:M32")
{
    field(DESC, "O2")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,32) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS20")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M32")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M33")
{
    field(DESC, "Mass 33")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,33) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M33")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M34")
{
    field(DESC, "Mass 34")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,34) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M34")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M35")
{
    field(DESC, "Mass 35")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,35) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M35")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M36")
{
    field(DESC, "Mass 36")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,36) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M36")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M37")
{
    field(DESC, "Mass 37")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,37) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M37")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M38")
{
    field(DESC, "Fluorine")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,38) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M38")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M39")
{
    field(DESC, "Mass 39")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,39) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M39")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk Ar readback
#
record(ai, "BL04I-VA-RGA-03:BAR:M40")
{
    field(DESC, "Ar")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,40) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS20")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M40")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M41")
{
    field(DESC, "Mass 41")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,41) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M41")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M42")
{
    field(DESC, "Mass 42")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,42) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M42")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M43")
{
    field(DESC, "Mass 43")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,43) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M43")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk CO2 readback
#
record(ai, "BL04I-VA-RGA-03:BAR:M44")
{
    field(DESC, "CO2")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,44) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS20")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M44")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M45")
{
    field(DESC, "Mass 45")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,45) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M45")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M46")
{
    field(DESC, "NO2")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,46) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M46")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M47")
{
    field(DESC, "Mass 47")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,47) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M47")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M48")
{
    field(DESC, "Ozone")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,48) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M48")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M49")
{
    field(DESC, "Mass 49")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,49) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M49")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M50")
{
    field(DESC, "Mass 50")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,50) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS50")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M50")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M51")
{
    field(DESC, "Mass 51")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,51) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M51")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M52")
{
    field(DESC, "Mass 52")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,52) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M52")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M53")
{
    field(DESC, "Mass 53")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,53) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M53")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M54")
{
    field(DESC, "Mass 54")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,54) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M54")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M55")
{
    field(DESC, "Mass 55")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,55) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M55")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M56")
{
    field(DESC, "Mass 56")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,56) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M56")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M57")
{
    field(DESC, "Mass 57")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,57) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M57")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M58")
{
    field(DESC, "Mass 58")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,58) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M58")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M59")
{
    field(DESC, "Mass 59")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,59) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M59")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M60")
{
    field(DESC, "Buckyball")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,60) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M60")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M61")
{
    field(DESC, "Mass 61")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,61) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M61")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M62")
{
    field(DESC, "Mass 62")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,62) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M62")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M63")
{
    field(DESC, "Mass 63")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,63) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M63")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M64")
{
    field(DESC, "Mass 64")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,64) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M64")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M65")
{
    field(DESC, "Mass 65")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,65) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M65")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M66")
{
    field(DESC, "Mass 66")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,66) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M66")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M67")
{
    field(DESC, "Mass 67")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,67) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M67")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M68")
{
    field(DESC, "Mass 68")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,68) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M68")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
#
#% archiver 10 Monitor
#% controldesk Ar readback
#
record(ai, "BL04I-VA-RGA-03:BAR:M69")
{
    field(DESC, "CF3/C5H9")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,69) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS20")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M69")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M70")
{
    field(DESC, "Chlorine")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,70) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M70")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M71")
{
    field(DESC, "Mass 71")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,71) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M71")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M72")
{
    field(DESC, "Mass 72")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,72) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M72")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M73")
{
    field(DESC, "Mass 73")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,73) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M73")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M74")
{
    field(DESC, "Mass 74")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,74) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M74")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M75")
{
    field(DESC, "Mass 75")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,75) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M75")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M76")
{
    field(DESC, "Mass 76")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,76) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M76")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M77")
{
    field(DESC, "Mass 77")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,77) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M77")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M78")
{
    field(DESC, "Mass 78")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,78) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M78")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M79")
{
    field(DESC, "Mass 79")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,79) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M79")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M80")
{
    field(DESC, "Mass 80")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,80) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M80")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M81")
{
    field(DESC, "Mass 81")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,81) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M81")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M82")
{
    field(DESC, "Mass 82")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,82) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M82")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M83")
{
    field(DESC, "Mass 83")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,83) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M83")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M84")
{
    field(DESC, "Krypton")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,84) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M84")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M85")
{
    field(DESC, "Mass 85")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,85) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M85")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M86")
{
    field(DESC, "Mass 86")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,86) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M86")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M87")
{
    field(DESC, "Mass 87")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,87) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M87")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M88")
{
    field(DESC, "Mass 88")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,88) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M88")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M89")
{
    field(DESC, "Mass 89")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,89) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M89")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M90")
{
    field(DESC, "Mass 90")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,90) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M90")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M91")
{
    field(DESC, "Mass 91")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,91) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M91")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M92")
{
    field(DESC, "Mass 92")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,92) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M92")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M93")
{
    field(DESC, "Mass 93")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,93) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M93")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M94")
{
    field(DESC, "Mass 94")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,94) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M94")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M95")
{
    field(DESC, "Mass 95")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,95) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M95")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M96")
{
    field(DESC, "Mass 96")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,96) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M96")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M97")
{
    field(DESC, "Mass 97")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,97) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M97")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M98")
{
    field(DESC, "Mass 98")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,98) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M98")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M99")
{
    field(DESC, "Mass 99")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,99) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M99")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M100")
{
    field(DESC, "Mass 100")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,100) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS100")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M100")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M101")
{
    field(DESC, "Mass 101")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,101) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M101")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M102")
{
    field(DESC, "Mass 102")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,102) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M102")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M103")
{
    field(DESC, "Mass 103")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,103) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M103")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M104")
{
    field(DESC, "Mass 104")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,104) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M104")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M105")
{
    field(DESC, "Mass 105")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,105) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M105")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M106")
{
    field(DESC, "Mass 106")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,106) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M106")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M107")
{
    field(DESC, "Mass 107")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,107) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M107")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M108")
{
    field(DESC, "Mass 108")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,108) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M108")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M109")
{
    field(DESC, "Mass 109")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,109) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M109")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M110")
{
    field(DESC, "Mass 110")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,110) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M110")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M111")
{
    field(DESC, "Mass 111")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,111) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M111")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M112")
{
    field(DESC, "Mass 112")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,112) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M112")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M113")
{
    field(DESC, "Mass 113")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,113) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M113")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M114")
{
    field(DESC, "Mass 114")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,114) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M114")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M115")
{
    field(DESC, "Mass 115")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,115) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M115")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M116")
{
    field(DESC, "Mass 116")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,116) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M116")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M117")
{
    field(DESC, "Mass 117")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,117) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M117")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M118")
{
    field(DESC, "Mass 118")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,118) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M118")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M119")
{
    field(DESC, "Mass 119")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,119) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M119")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M120")
{
    field(DESC, "Mass 120")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,120) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M120")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M121")
{
    field(DESC, "Mass 121")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,121) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M121")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M122")
{
    field(DESC, "Mass 122")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,122) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M122")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M123")
{
    field(DESC, "Mass 123")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,123) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M123")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M124")
{
    field(DESC, "Mass 124")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,124) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M124")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M125")
{
    field(DESC, "Mass 125")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,125) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M125")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M126")
{
    field(DESC, "Mass 126")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,126) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M126")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M127")
{
    field(DESC, "Mass 127")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,127) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M127")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M128")
{
    field(DESC, "Mass 128")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,128) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M128")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M129")
{
    field(DESC, "Mass 129")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,129) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M129")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M130")
{
    field(DESC, "Mass 130")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,130) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M130")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M131")
{
    field(DESC, "Xenon")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,131) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M131")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M132")
{
    field(DESC, "Mass 132")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,132) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M132")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M133")
{
    field(DESC, "Mass 133")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,133) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M133")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M134")
{
    field(DESC, "Mass 134")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,134) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M134")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M135")
{
    field(DESC, "Mass 135")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,135) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M135")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M136")
{
    field(DESC, "Mass 136")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,136) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M136")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M137")
{
    field(DESC, "Mass 137")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,137) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M137")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M138")
{
    field(DESC, "Mass 138")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,138) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M138")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M139")
{
    field(DESC, "Mass 139")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,139) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M139")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M140")
{
    field(DESC, "Mass 140")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,140) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M140")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M141")
{
    field(DESC, "Mass 141")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,141) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M141")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M142")
{
    field(DESC, "Mass 142")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,142) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M142")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M143")
{
    field(DESC, "Mass 143")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,143) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M143")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M144")
{
    field(DESC, "Mass 144")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,144) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M144")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M145")
{
    field(DESC, "Mass 145")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,145) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M145")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M146")
{
    field(DESC, "Mass 146")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,146) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M146")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M147")
{
    field(DESC, "Mass 147")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,147) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M147")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M148")
{
    field(DESC, "Mass 148")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,148) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M148")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M149")
{
    field(DESC, "Mass 149")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,149) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M149")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M150")
{
    field(DESC, "Mass 150")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,150) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M150")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M151")
{
    field(DESC, "Mass 151")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,151) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M151")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M152")
{
    field(DESC, "Mass 152")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,152) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M152")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M153")
{
    field(DESC, "Mass 153")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,153) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M153")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M154")
{
    field(DESC, "Mass 154")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,154) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M154")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M155")
{
    field(DESC, "Mass 155")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,155) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M155")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M156")
{
    field(DESC, "Mass 156")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,156) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M156")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M157")
{
    field(DESC, "Mass 157")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,157) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M157")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M158")
{
    field(DESC, "Mass 158")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,158) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M158")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M159")
{
    field(DESC, "Mass 159")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,159) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M159")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M160")
{
    field(DESC, "Bromine")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,160) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M160")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M161")
{
    field(DESC, "Mass 161")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,161) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M161")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M162")
{
    field(DESC, "Mass 162")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,162) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M162")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M163")
{
    field(DESC, "Mass 163")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,163) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M163")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M164")
{
    field(DESC, "Mass 164")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,164) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M164")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M165")
{
    field(DESC, "Mass 165")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,165) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M165")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M166")
{
    field(DESC, "Mass 166")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,166) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M166")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M167")
{
    field(DESC, "Mass 167")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,167) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M167")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M168")
{
    field(DESC, "Mass 168")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,168) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M168")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M169")
{
    field(DESC, "Mass 169")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,169) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M169")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M170")
{
    field(DESC, "Mass 170")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,170) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M170")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M171")
{
    field(DESC, "Mass 171")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,171) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M171")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M172")
{
    field(DESC, "Mass 172")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,172) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M172")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M173")
{
    field(DESC, "Mass 173")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,173) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M173")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M174")
{
    field(DESC, "Mass 174")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,174) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M174")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M175")
{
    field(DESC, "Mass 175")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,175) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M175")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M176")
{
    field(DESC, "Mass 176")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,176) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M176")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M177")
{
    field(DESC, "Mass 177")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,177) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M177")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M178")
{
    field(DESC, "Mass 178")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,178) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M178")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M179")
{
    field(DESC, "Mass 179")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,179) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M179")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M180")
{
    field(DESC, "Mass 180")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,180) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M180")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M181")
{
    field(DESC, "Mass 181")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,181) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M181")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M182")
{
    field(DESC, "Mass 182")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,182) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M182")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M183")
{
    field(DESC, "Mass 183")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,183) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M183")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M184")
{
    field(DESC, "Mass 184")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,184) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M184")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M185")
{
    field(DESC, "Mass 185")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,185) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M185")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M186")
{
    field(DESC, "Mass 186")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,186) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M186")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M187")
{
    field(DESC, "Mass 187")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,187) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M187")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M188")
{
    field(DESC, "Mass 188")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,188) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M188")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M189")
{
    field(DESC, "Mass 189")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,189) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M189")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M190")
{
    field(DESC, "Mass 190")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,190) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M190")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M191")
{
    field(DESC, "Mass 191")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,191) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M191")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M192")
{
    field(DESC, "Mass 192")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,192) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M192")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M193")
{
    field(DESC, "Mass 193")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,193) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M193")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M194")
{
    field(DESC, "Mass 194")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,194) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M194")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M195")
{
    field(DESC, "Mass 195")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,195) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M195")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M196")
{
    field(DESC, "Mass 196")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,196) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M196")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M197")
{
    field(DESC, "Mass 197")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,197) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M197")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M198")
{
    field(DESC, "Mass 198")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,198) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M198")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M199")
{
    field(DESC, "Mass 199")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,199) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M199")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
record(ai, "BL04I-VA-RGA-03:BAR:M200")
{
    field(DESC, "Mass 200")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol bar(2,200) ty_40_1 0")
    field(SCAN, "10 second")
    field(SDIS, "BL04I-VA-RGA-03:DIS200")
    field(FLNK, "BL04I-VA-RGA-03:LOG:M200")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}
################################################################################
# Log of Bar Chart
#
record(calc, "BL04I-VA-RGA-03:LOG:M1")
{
    field(DESC, "Mass 1")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M1 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:LOG:M2")
{
    field(DESC, "H2")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M2 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-03:LOG:M3")
{
    field(DESC, "Mass 3")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M3 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:LOG:M4")
{
    field(DESC, "He")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M4 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-03:LOG:M5")
{
    field(DESC, "Mass 5")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M5 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M6")
{
    field(DESC, "Mass 6")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M6 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M7")
{
    field(DESC, "Mass 7")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M7 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M8")
{
    field(DESC, "Mass 8")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M8 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M9")
{
    field(DESC, "Mass 9")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M9 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M10")
{
    field(DESC, "Mass 10")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M10 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M11")
{
    field(DESC, "Mass 11")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M11 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M12")
{
    field(DESC, "Mass 12")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M12 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M13")
{
    field(DESC, "Mass 13")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M13 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:LOG:M14")
{
    field(DESC, "CH2/N2++")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M14 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:LOG:M15")
{
    field(DESC, "CH3")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M15 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:LOG:M16")
{
    field(DESC, "CH4")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M16 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:LOG:M17")
{
    field(DESC, "OH")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M17 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:LOG:M18")
{
    field(DESC, "H20")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M18 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-03:LOG:M19")
{
    field(DESC, "Mass 19")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M19 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M20")
{
    field(DESC, "Neon")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M20 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M21")
{
    field(DESC, "Mass 21")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M21 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M22")
{
    field(DESC, "Mass 22")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M22 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M23")
{
    field(DESC, "Mass 23")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M23 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M24")
{
    field(DESC, "Mass 24")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M24 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M25")
{
    field(DESC, "Mass 25")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M25 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M26")
{
    field(DESC, "Mass 26")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M26 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M27")
{
    field(DESC, "Mass 27")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M27 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:LOG:M28")
{
    field(DESC, "N2/CO")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M28 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-03:LOG:M29")
{
    field(DESC, "Mass 29")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M29 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M30")
{
    field(DESC, "NO")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M30 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M31")
{
    field(DESC, "Mass 31")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M31 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:LOG:M32")
{
    field(DESC, "O2")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M32 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-03:LOG:M33")
{
    field(DESC, "Mass 33")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M33 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M34")
{
    field(DESC, "Mass 34")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M34 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M35")
{
    field(DESC, "Mass 35")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M35 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M36")
{
    field(DESC, "Mass 36")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M36 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M37")
{
    field(DESC, "Mass 37")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M37 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M38")
{
    field(DESC, "Fluorine")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M38 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M39")
{
    field(DESC, "Mass 39")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M39 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:LOG:M40")
{
    field(DESC, "Ar")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M40 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-03:LOG:M41")
{
    field(DESC, "Mass 41")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M41 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M42")
{
    field(DESC, "Mass 42")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M42 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M43")
{
    field(DESC, "Mass 43")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M43 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:LOG:M44")
{
    field(DESC, "CO2")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M44 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-03:LOG:M45")
{
    field(DESC, "Mass 45")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M45 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M46")
{
    field(DESC, "NO2")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M46 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M47")
{
    field(DESC, "Mass 47")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M47 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M48")
{
    field(DESC, "Ozone")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M48 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M49")
{
    field(DESC, "Mass 49")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M49 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M50")
{
    field(DESC, "Mass 50")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M50 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M51")
{
    field(DESC, "Mass 51")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M51 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M52")
{
    field(DESC, "Mass 52")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M52 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M53")
{
    field(DESC, "Mass 53")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M53 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M54")
{
    field(DESC, "Mass 54")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M54 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M55")
{
    field(DESC, "Mass 55")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M55 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M56")
{
    field(DESC, "Mass 56")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M56 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M57")
{
    field(DESC, "Mass 57")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M57 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M58")
{
    field(DESC, "Mass 58")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M58 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M59")
{
    field(DESC, "Mass 59")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M59 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M60")
{
    field(DESC, "Buckyball")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M60 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M61")
{
    field(DESC, "Mass 61")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M61 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M62")
{
    field(DESC, "Mass 62")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M62 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M63")
{
    field(DESC, "Mass 63")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M63 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M64")
{
    field(DESC, "Mass 64")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M64 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M65")
{
    field(DESC, "Mass 65")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M65 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M66")
{
    field(DESC, "Mass 66")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M66 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M67")
{
    field(DESC, "Mass 67")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M67 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M68")
{
    field(DESC, "Mass 68")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M68 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
#
#% archiver 10 Monitor
#
record(calc, "BL04I-VA-RGA-03:LOG:M69")
{
    field(DESC, "CF3/C5H9")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M69 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
    field(ADEL, "0.025")
}
record(calc, "BL04I-VA-RGA-03:LOG:M70")
{
    field(DESC, "Mass 70")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M70 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M71")
{
    field(DESC, "Mass 71")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M71 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M72")
{
    field(DESC, "Mass 72")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M72 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M73")
{
    field(DESC, "Mass 73")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M73 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M74")
{
    field(DESC, "Mass 74")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M74 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M75")
{
    field(DESC, "Mass 75")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M75 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M76")
{
    field(DESC, "Mass 76")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M76 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M77")
{
    field(DESC, "Mass 77")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M77 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M78")
{
    field(DESC, "Mass 78")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M78 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M79")
{
    field(DESC, "Mass 79")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M79 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M80")
{
    field(DESC, "Mass 80")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M80 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M81")
{
    field(DESC, "Mass 81")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M81 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M82")
{
    field(DESC, "Mass 82")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M82 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M83")
{
    field(DESC, "Mass 83")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M83 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M84")
{
    field(DESC, "Mass 84")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M84 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M85")
{
    field(DESC, "Mass 85")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M85 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M86")
{
    field(DESC, "Mass 86")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M86 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M87")
{
    field(DESC, "Mass 87")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M87 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M88")
{
    field(DESC, "Mass 88")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M88 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M89")
{
    field(DESC, "Mass 89")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M89 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M90")
{
    field(DESC, "Mass 90")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M90 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M91")
{
    field(DESC, "Mass 91")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M91 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M92")
{
    field(DESC, "Mass 92")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M92 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M93")
{
    field(DESC, "Mass 93")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M93 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M94")
{
    field(DESC, "Mass 94")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M94 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M95")
{
    field(DESC, "Mass 95")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M95 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M96")
{
    field(DESC, "Mass 96")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M96 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M97")
{
    field(DESC, "Mass 97")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M97 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M98")
{
    field(DESC, "Mass 98")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M98 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M99")
{
    field(DESC, "Mass 99")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M99 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M100")
{
    field(DESC, "Mass 100")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M100 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M101")
{
    field(DESC, "Mass 101")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M101 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M102")
{
    field(DESC, "Mass 102")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M102 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M103")
{
    field(DESC, "Mass 103")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M103 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M104")
{
    field(DESC, "Mass 104")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M104 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M105")
{
    field(DESC, "Mass 105")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M105 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M106")
{
    field(DESC, "Mass 106")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M106 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M107")
{
    field(DESC, "Mass 107")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M107 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M108")
{
    field(DESC, "Mass 108")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M108 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M109")
{
    field(DESC, "Mass 109")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M109 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M110")
{
    field(DESC, "Mass 110")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M110 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M111")
{
    field(DESC, "Mass 111")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M111 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M112")
{
    field(DESC, "Mass 112")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M112 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M113")
{
    field(DESC, "Mass 113")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M113 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M114")
{
    field(DESC, "Mass 114")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M114 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M115")
{
    field(DESC, "Mass 115")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M115 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M116")
{
    field(DESC, "Mass 116")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M116 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M117")
{
    field(DESC, "Mass 117")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M117 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M118")
{
    field(DESC, "Mass 118")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M118 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M119")
{
    field(DESC, "Mass 119")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M119 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M120")
{
    field(DESC, "Mass 120")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M120 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M121")
{
    field(DESC, "Mass 121")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M121 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M122")
{
    field(DESC, "Mass 122")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M122 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M123")
{
    field(DESC, "Mass 123")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M123 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M124")
{
    field(DESC, "Mass 124")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M124 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M125")
{
    field(DESC, "Mass 125")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M125 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M126")
{
    field(DESC, "Mass 126")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M126 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M127")
{
    field(DESC, "Mass 127")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M127 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M128")
{
    field(DESC, "Mass 128")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M128 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M129")
{
    field(DESC, "Mass 129")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M129 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M130")
{
    field(DESC, "Mass 130")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M130 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M131")
{
    field(DESC, "Mass 131")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M131 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M132")
{
    field(DESC, "Mass 132")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M132 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M133")
{
    field(DESC, "Mass 133")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M133 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M134")
{
    field(DESC, "Mass 134")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M134 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M135")
{
    field(DESC, "Mass 135")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M135 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M136")
{
    field(DESC, "Mass 136")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M136 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M137")
{
    field(DESC, "Mass 137")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M137 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M138")
{
    field(DESC, "Mass 138")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M138 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M139")
{
    field(DESC, "Mass 139")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M139 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M140")
{
    field(DESC, "Mass 140")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M140 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M141")
{
    field(DESC, "Mass 141")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M141 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M142")
{
    field(DESC, "Mass 142")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M142 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M143")
{
    field(DESC, "Mass 143")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M143 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M144")
{
    field(DESC, "Mass 144")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M144 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M145")
{
    field(DESC, "Mass 145")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M145 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M146")
{
    field(DESC, "Mass 146")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M146 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M147")
{
    field(DESC, "Mass 147")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M147 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M148")
{
    field(DESC, "Mass 148")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M148 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M149")
{
    field(DESC, "Mass 149")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M149 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M150")
{
    field(DESC, "Mass 150")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M150 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M151")
{
    field(DESC, "Mass 151")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M151 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M152")
{
    field(DESC, "Mass 152")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M152 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M153")
{
    field(DESC, "Mass 153")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M153 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M154")
{
    field(DESC, "Mass 154")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M154 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M155")
{
    field(DESC, "Mass 155")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M155 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M156")
{
    field(DESC, "Mass 156")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M156 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M157")
{
    field(DESC, "Mass 157")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M157 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M158")
{
    field(DESC, "Mass 158")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M158 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M159")
{
    field(DESC, "Mass 159")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M159 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M160")
{
    field(DESC, "Mass 160")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M160 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M161")
{
    field(DESC, "Mass 161")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M161 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M162")
{
    field(DESC, "Mass 162")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M162 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M163")
{
    field(DESC, "Mass 163")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M163 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M164")
{
    field(DESC, "Mass 164")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M164 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M165")
{
    field(DESC, "Mass 165")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M165 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M166")
{
    field(DESC, "Mass 166")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M166 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M167")
{
    field(DESC, "Mass 167")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M167 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M168")
{
    field(DESC, "Mass 168")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M168 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M169")
{
    field(DESC, "Mass 169")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M169 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M170")
{
    field(DESC, "Mass 170")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M170 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M171")
{
    field(DESC, "Mass 171")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M171 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M172")
{
    field(DESC, "Mass 172")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M172 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M173")
{
    field(DESC, "Mass 173")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M173 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M174")
{
    field(DESC, "Mass 174")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M174 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M175")
{
    field(DESC, "Mass 175")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M175 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M176")
{
    field(DESC, "Mass 176")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M176 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M177")
{
    field(DESC, "Mass 177")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M177 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M178")
{
    field(DESC, "Mass 178")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M178 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M179")
{
    field(DESC, "Mass 179")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M179 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M180")
{
    field(DESC, "Mass 180")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M180 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M181")
{
    field(DESC, "Mass 181")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M181 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M182")
{
    field(DESC, "Mass 182")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M182 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M183")
{
    field(DESC, "Mass 183")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M183 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M184")
{
    field(DESC, "Mass 184")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M184 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M185")
{
    field(DESC, "Mass 185")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M185 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M186")
{
    field(DESC, "Mass 186")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M186 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M187")
{
    field(DESC, "Mass 187")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M187 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M188")
{
    field(DESC, "Mass 188")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M188 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M189")
{
    field(DESC, "Mass 189")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M189 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M190")
{
    field(DESC, "Mass 190")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M190 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M191")
{
    field(DESC, "Mass 191")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M191 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M192")
{
    field(DESC, "Mass 192")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M192 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M193")
{
    field(DESC, "Mass 193")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M193 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M194")
{
    field(DESC, "Mass 194")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M194 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M195")
{
    field(DESC, "Mass 195")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M195 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M196")
{
    field(DESC, "Mass 196")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M196 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M197")
{
    field(DESC, "Mass 197")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M197 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M198")
{
    field(DESC, "Mass 198")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M198 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M199")
{
    field(DESC, "Mass 199")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M199 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
record(calc, "BL04I-VA-RGA-03:LOG:M200")
{
    field(DESC, "Mass 200")
    field(EGU,  "log")
    field(CALC, "LOG(A)")
    field(INPA, "BL04I-VA-RGA-03:BAR:M200 MS")
    field(HOPR, "-2")
    field(LOPR, "-11")
}
################################################################################

#
# Standard bar chart masses (nominally up to 11)
record(mbbi, "BL04I-VA-RGA-03:MASSMAP") 
{
  field(DTYP, "Soft Channel")
  field(DESC, "Chart mass allocation")
  field(PINI, "YES")
  field(ZRST, "H2")
  field(ONST, "He")
  field(TWST, "CH2/N2++")
  field(THST, "CH3")
  field(FRST, "CH4")
  field(FVST, "H2O")
  field(SXST, "N2/CO")
  field(SVST, "O2")
  field(EIST, "Ar")
  field(NIST, "CO2")
  field(TEST, "CF3/C5H9")
  field(ELST, "unused")
  field(TVST, "unused")
  field(TTST, "unused")
  field(FTST, "unused")
  field(FFST, "unused")
  field(ZRVL, "2")
  field(ONVL, "4")
  field(TWVL, "14")
  field(THVL, "15")
  field(FRVL, "16")
  field(FVVL, "18")
  field(SXVL, "28")
  field(SVVL, "32")
  field(EIVL, "40")
  field(NIVL, "44")
  field(TEVL, "69")
  field(ELVL, "0")
  field(TVVL, "0")
  field(TTVL, "0")
  field(FTVL, "0")
  field(FFVL, "0")
}

# Peak Jump Masses (nominally up to 12)
#
record(mbbi, "BL04I-VA-RGA-03:PJMASSMAP") 
{
  field(DTYP, "Soft Channel")
  field(DESC, "Peak Jump masses")
  field(PINI, "YES")
  field(ZRST, "H2")
  field(ONST, "unused")
  field(TWST, "unused")
  field(THST, "unused")
  field(FRST, "unused")
  field(FVST, "unused")
  field(SXST, "unused")
  field(SVST, "unused")
  field(EIST, "unused")
  field(NIST, "unused")
  field(TEST, "unused")
  field(ELST, "unused")
  field(TVST, "unused")
  field(TTST, "unused")
  field(FTST, "unused")
  field(FFST, "unused")
  field(ZRVL, "2")
  field(ONVL, "0")
  field(TWVL, "0")
  field(THVL, "0")
  field(FRVL, "0")
  field(FVVL, "0")
  field(SXVL, "0")
  field(SVVL, "0")
  field(EIVL, "0")
  field(NIVL, "0")
  field(TEVL, "0")
  field(ELVL, "0")
  field(TVVL, "0")
  field(TTVL, "0")
  field(FTVL, "0")
  field(FFVL, "0")
}

## The INP field to this PV has been "2;4" for
## over two years and just picked up on caSnooper.
## Making it 24 for now until the correct value is determined.
## IJG: 19 Dec 14
##
record(stringin, "BL04I-VA-RGA-03:PJMASSSTR") 
{
  field(DESC, "Peak Jump masses")
  field(PINI, "YES")
  field(INP, "24")
}

record(waveform, "BL04I-VA-RGA-03:SPECTRUM")
{
    #field(DTYP, "Waveform")
    field(FTVL, "DOUBLE")
    field(NELM, "6400")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-03:PJ:BIN1")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(2) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-03:DISPJ1")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-03:PJ:BIN2")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(2) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-03:DISPJ2")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-03:PJ:BIN3")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(2) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-03:DISPJ3")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-03:PJ:BIN4")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(2) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-03:DISPJ4")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-03:PJ:BIN5")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(2) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-03:DISPJ5")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-03:PJ:BIN6")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(2) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-03:DISPJ6")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-03:PJ:BIN7")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(2) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-03:DISPJ7")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-03:PJ:BIN8")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(2) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-03:DISPJ8")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-03:PJ:BIN9")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(2) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-03:DISPJ9")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-03:PJ:BIN10")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(2) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-03:DISPJ10")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-03:PJ:BIN11")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(2) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-03:DISPJ11")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

#
#% archiver 10 Monitor
#
record(ai, "BL04I-VA-RGA-03:PJ:BIN12")
{
    field(DESC, "0")
    field(DTYP, "stream")
    field(INP,  "@rga.protocol pjpress_indirect(2) ty_40_1 0")
    field(SCAN, "5 second")
    field(SDIS, "BL04I-VA-RGA-03:DISPJ12")
    field(EGU,  "mbar")
    field(PREC, "3")
    field(HOPR, "0.01")
    field(LOPR, "0")
}

# rackFan.template
#
# % macro, __doc__, Template for rack fan digital input indication via VME card also used for rack DUPLEX power supply status.
#
# Provide a value for the optional DESC macro if using for power supply or other purpose.
#
# Andy Duggan - 14/12/04 
#
# % macro, device,  Mandatory.  Device name prefix - rack and parameter monitored.
# % macro, c,       Mandatory.  Hy8001 (or other) digital input card number.
# % macro, s,       Mandatory.  Hy8001 (or other) digital input signal number.
# 
# % macro, DTYP,    Optional.  The device type for the rack fan signal, i.e. which digital card is in use.  Defaults to Hy8001.
# % macro, DESC,    Optional.  the PV DESC field description.  Defaults to "Status of rack fan".
#
################################################################################

#
#% archiver 10 Monitor
#% controldesk Status smon
#% alh
record(bi, "BL04I-PS-FANC-01:STA") 
{ 
  field(DESC, "Status of rack fan")
  field(DTYP, "Hy8001")
  field(INP,  "#C60 S11")
  field(ZNAM, "Fail")
  field(ONAM, "OK")
  field(SCAN, "1 second")
  field(ZSV,  "MAJOR")
  field(OSV,  "NO_ALARM")
}
# rackFan.template
#
# % macro, __doc__, Template for rack fan digital input indication via VME card also used for rack DUPLEX power supply status.
#
# Provide a value for the optional DESC macro if using for power supply or other purpose.
#
# Andy Duggan - 14/12/04 
#
# % macro, device,  Mandatory.  Device name prefix - rack and parameter monitored.
# % macro, c,       Mandatory.  Hy8001 (or other) digital input card number.
# % macro, s,       Mandatory.  Hy8001 (or other) digital input signal number.
# 
# % macro, DTYP,    Optional.  The device type for the rack fan signal, i.e. which digital card is in use.  Defaults to Hy8001.
# % macro, DESC,    Optional.  the PV DESC field description.  Defaults to "Status of rack fan".
#
################################################################################

#
#% archiver 10 Monitor
#% controldesk Status smon
#% alh
record(bi, "BL04I-PS-PSU-01:STA") 
{ 
  field(DESC, "Status of rack fan")
  field(DTYP, "Hy8001")
  field(INP,  "#C60 S12")
  field(ZNAM, "Fail")
  field(ONAM, "OK")
  field(SCAN, "1 second")
  field(ZSV,  "MAJOR")
  field(OSV,  "NO_ALARM")
}
# rackFan.template
#
# % macro, __doc__, Template for rack fan digital input indication via VME card also used for rack DUPLEX power supply status.
#
# Provide a value for the optional DESC macro if using for power supply or other purpose.
#
# Andy Duggan - 14/12/04 
#
# % macro, device,  Mandatory.  Device name prefix - rack and parameter monitored.
# % macro, c,       Mandatory.  Hy8001 (or other) digital input card number.
# % macro, s,       Mandatory.  Hy8001 (or other) digital input signal number.
# 
# % macro, DTYP,    Optional.  The device type for the rack fan signal, i.e. which digital card is in use.  Defaults to Hy8001.
# % macro, DESC,    Optional.  the PV DESC field description.  Defaults to "Status of rack fan".
#
################################################################################

#
#% archiver 10 Monitor
#% controldesk Status smon
#% alh
record(bi, "BL04I-VA-RACK-01:PSU-01:STA") 
{ 
  field(DESC, "Status of rack fan")
  field(DTYP, "Hy8001")
  field(INP,  "#C60 S13")
  field(ZNAM, "Fail")
  field(ONAM, "OK")
  field(SCAN, "1 second")
  field(ZSV,  "MAJOR")
  field(OSV,  "NO_ALARM")
}
#! Generated by VisualDCT v2.7.1-SNAPSHOT

# % macro, __doc__, This template defines a bi record for representing a low water flow
# switch attached to a Hytec 8001, and a calc record combining this
# with a LOLO signal which normally comes from an interlock (via a bi).
#
# Substitutions
# % macro, P,     device name
# % macro, Q,     switch name (full names are BL04I-MP-FLTR-01:WFS1:LO/:LOLO/:STATUS)
# % macro, DESC,  Description of switch
# % macro, C,     Card number
# % macro, S,     Signal number (INP = "#C60 S1 @")
# % macro, LOLO,  Signal for lolo (Interlock)
# % macro, gda_name, GDA Name
# % macro, gda_desc, GDA Description
# % macro, name, Object and gui association name
# This associates an edm screen with the template
# % gui, F1, edm, flow-config.edl, flow=BL04I-MP-FLTR-01:WFS1
# % gui, F1, edmembed, flow-embed.edl, flow=BL04I-MP-FLTR-01:WFS1,label=I04 Filter
# This associates a BOY screen with the template
# % gui, F1, boydetail, flowApp_opi/flow_detail.opi, P=BL04I-MP-FLTR-01,Q=:WFS1,DESC=I04 Filter
# % gui, F1, boyembed, flowApp_opi/flow_embed_box.opi, P=BL04I-MP-FLTR-01,Q=:WFS1,DESC=I04 Filter
# % gui, F1, boyembed, flowApp_opi/flow_embed.opi, P=BL04I-MP-FLTR-01,Q=:WFS1,DESC=I04 Filter
# These define what PVs a flow detail screen should contain
# % gui, F1, statusbits, Low Flow,   BL04I-MP-FLTR-01:WFS1:LO, Low
# % gui, F1, statusbits, Low Low Flow,   BL04I-MP-FLTR-01:WFS1:LOLO, LowLow
#% gdatag,template,simplePv,,
#% gdatag,pv,ro,,RECORD,Waterflow Status Record
#% alh
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-MP-FLTR-01:WFS1:STATUS
# % gui, F1, sevr
record(calc, "BL04I-MP-FLTR-01:WFS1:STATUS") {
  field(DESC, "I04 Filter")
  field(SCAN, "1 second")
  field(CALC, "A+B*2")
  field(INPA, "BL04I-MP-FLTR-01:WFS1:LO PP NMS")
  field(INPB, "BL04I-MP-FLTR-01:WFS1:LOLO PP NMS")
  field(LOLO, "1")
  field(LOW, "2")
  field(LLSV, "MAJOR")
  field(LSV, "MINOR")
}

record(bi, "BL04I-MP-FLTR-01:WFS1:LOLO") {
  field(DESC, "Low Low flow value")
  field(DTYP, "Soft Channel")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(COSV, "NO_ALARM")
  field(ZNAM, "LOLO_FLOW")
  field(ONAM, "NORMAL")
  field(VAL, "1")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK0")
}

record(bi, "BL04I-MP-FLTR-01:WFS1:LO") {
  field(DESC, "Low flow value")
  field(DTYP, "Hy8001")
  field(ZSV, "MINOR")
  field(OSV, "NO_ALARM")
  field(COSV, "NO_ALARM")
  field(ZNAM, "LOW_FLOW")
  field(ONAM, "NORMAL")
  field(VAL, "1")
  field(PINI, "YES")
  field(INP, "#C60 S1 @")
}
#! Generated by VisualDCT v2.7.1-SNAPSHOT

# % macro, __doc__, This template defines a bi record for representing a low water flow
# switch attached to a Hytec 8001, and a calc record combining this
# with a LOLO signal which normally comes from an interlock (via a bi).
#
# Substitutions
# % macro, P,     device name
# % macro, Q,     switch name (full names are BL04I-AL-SLITS-01:WFS1:LO/:LOLO/:STATUS)
# % macro, DESC,  Description of switch
# % macro, C,     Card number
# % macro, S,     Signal number (INP = "#C60 S2 @")
# % macro, LOLO,  Signal for lolo (Interlock)
# % macro, gda_name, GDA Name
# % macro, gda_desc, GDA Description
# % macro, name, Object and gui association name
# This associates an edm screen with the template
# % gui, S1, edm, flow-config.edl, flow=BL04I-AL-SLITS-01:WFS1
# % gui, S1, edmembed, flow-embed.edl, flow=BL04I-AL-SLITS-01:WFS1,label=Horz. Slit Waterflow 1
# This associates a BOY screen with the template
# % gui, S1, boydetail, flowApp_opi/flow_detail.opi, P=BL04I-AL-SLITS-01,Q=:WFS1,DESC=Horz. Slit Waterflow 1
# % gui, S1, boyembed, flowApp_opi/flow_embed_box.opi, P=BL04I-AL-SLITS-01,Q=:WFS1,DESC=Horz. Slit Waterflow 1
# % gui, S1, boyembed, flowApp_opi/flow_embed.opi, P=BL04I-AL-SLITS-01,Q=:WFS1,DESC=Horz. Slit Waterflow 1
# These define what PVs a flow detail screen should contain
# % gui, S1, statusbits, Low Flow,   BL04I-AL-SLITS-01:WFS1:LO, Low
# % gui, S1, statusbits, Low Low Flow,   BL04I-AL-SLITS-01:WFS1:LOLO, LowLow
#% gdatag,template,simplePv,,
#% gdatag,pv,ro,,RECORD,Waterflow Status Record
#% alh
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-AL-SLITS-01:WFS1:STATUS
# % gui, S1, sevr
record(calc, "BL04I-AL-SLITS-01:WFS1:STATUS") {
  field(DESC, "Horz. Slit Waterflow 1")
  field(SCAN, "1 second")
  field(CALC, "A+B*2")
  field(INPA, "BL04I-AL-SLITS-01:WFS1:LO PP NMS")
  field(INPB, "BL04I-AL-SLITS-01:WFS1:LOLO PP NMS")
  field(LOLO, "1")
  field(LOW, "2")
  field(LLSV, "MAJOR")
  field(LSV, "MINOR")
}

record(bi, "BL04I-AL-SLITS-01:WFS1:LOLO") {
  field(DESC, "Low Low flow value")
  field(DTYP, "Soft Channel")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(COSV, "NO_ALARM")
  field(ZNAM, "LOLO_FLOW")
  field(ONAM, "NORMAL")
  field(VAL, "1")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK1")
}

record(bi, "BL04I-AL-SLITS-01:WFS1:LO") {
  field(DESC, "Low flow value")
  field(DTYP, "Hy8001")
  field(ZSV, "MINOR")
  field(OSV, "NO_ALARM")
  field(COSV, "NO_ALARM")
  field(ZNAM, "LOW_FLOW")
  field(ONAM, "NORMAL")
  field(VAL, "1")
  field(PINI, "YES")
  field(INP, "#C60 S2 @")
}
#! Generated by VisualDCT v2.7.1-SNAPSHOT

# % macro, __doc__, This template defines a bi record for representing a low water flow
# switch attached to a Hytec 8001, and a calc record combining this
# with a LOLO signal which normally comes from an interlock (via a bi).
#
# Substitutions
# % macro, P,     device name
# % macro, Q,     switch name (full names are BL04I-AL-SLITS-01:WFS2:LO/:LOLO/:STATUS)
# % macro, DESC,  Description of switch
# % macro, C,     Card number
# % macro, S,     Signal number (INP = "#C60 S3 @")
# % macro, LOLO,  Signal for lolo (Interlock)
# % macro, gda_name, GDA Name
# % macro, gda_desc, GDA Description
# % macro, name, Object and gui association name
# This associates an edm screen with the template
# % gui, S1.OB1, edm, flow-config.edl, flow=BL04I-AL-SLITS-01:WFS2
# % gui, S1.OB1, edmembed, flow-embed.edl, flow=BL04I-AL-SLITS-01:WFS2,label=Horz. Slit Waterflow 2
# This associates a BOY screen with the template
# % gui, S1.OB1, boydetail, flowApp_opi/flow_detail.opi, P=BL04I-AL-SLITS-01,Q=:WFS2,DESC=Horz. Slit Waterflow 2
# % gui, S1.OB1, boyembed, flowApp_opi/flow_embed_box.opi, P=BL04I-AL-SLITS-01,Q=:WFS2,DESC=Horz. Slit Waterflow 2
# % gui, S1.OB1, boyembed, flowApp_opi/flow_embed.opi, P=BL04I-AL-SLITS-01,Q=:WFS2,DESC=Horz. Slit Waterflow 2
# These define what PVs a flow detail screen should contain
# % gui, S1.OB1, statusbits, Low Flow,   BL04I-AL-SLITS-01:WFS2:LO, Low
# % gui, S1.OB1, statusbits, Low Low Flow,   BL04I-AL-SLITS-01:WFS2:LOLO, LowLow
#% gdatag,template,simplePv,,
#% gdatag,pv,ro,,RECORD,Waterflow Status Record
#% alh
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-AL-SLITS-01:WFS2:STATUS
# % gui, S1.OB1, sevr
record(calc, "BL04I-AL-SLITS-01:WFS2:STATUS") {
  field(DESC, "Horz. Slit Waterflow 2")
  field(SCAN, "1 second")
  field(CALC, "A+B*2")
  field(INPA, "BL04I-AL-SLITS-01:WFS2:LO PP NMS")
  field(INPB, "BL04I-AL-SLITS-01:WFS2:LOLO PP NMS")
  field(LOLO, "1")
  field(LOW, "2")
  field(LLSV, "MAJOR")
  field(LSV, "MINOR")
}

record(bi, "BL04I-AL-SLITS-01:WFS2:LOLO") {
  field(DESC, "Low Low flow value")
  field(DTYP, "Soft Channel")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(COSV, "NO_ALARM")
  field(ZNAM, "LOLO_FLOW")
  field(ONAM, "NORMAL")
  field(VAL, "1")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK2")
}

record(bi, "BL04I-AL-SLITS-01:WFS2:LO") {
  field(DESC, "Low flow value")
  field(DTYP, "Hy8001")
  field(ZSV, "MINOR")
  field(OSV, "NO_ALARM")
  field(COSV, "NO_ALARM")
  field(ZNAM, "LOW_FLOW")
  field(ONAM, "NORMAL")
  field(VAL, "1")
  field(PINI, "YES")
  field(INP, "#C60 S3 @")
}
#! Generated by VisualDCT v2.7.1-SNAPSHOT

# % macro, __doc__, This template defines a bi record for representing a low water flow
# switch attached to a Hytec 8001, and a calc record combining this
# with a LOLO signal which normally comes from an interlock (via a bi).
#
# Substitutions
# % macro, P,     device name
# % macro, Q,     switch name (full names are BL04I-AL-SLITS-01:WFS3:LO/:LOLO/:STATUS)
# % macro, DESC,  Description of switch
# % macro, C,     Card number
# % macro, S,     Signal number (INP = "#C60 S4 @")
# % macro, LOLO,  Signal for lolo (Interlock)
# % macro, gda_name, GDA Name
# % macro, gda_desc, GDA Description
# % macro, name, Object and gui association name
# This associates an edm screen with the template
# % gui, S1.OB2, edm, flow-config.edl, flow=BL04I-AL-SLITS-01:WFS3
# % gui, S1.OB2, edmembed, flow-embed.edl, flow=BL04I-AL-SLITS-01:WFS3,label=Vert. Slit Waterflow 1
# This associates a BOY screen with the template
# % gui, S1.OB2, boydetail, flowApp_opi/flow_detail.opi, P=BL04I-AL-SLITS-01,Q=:WFS3,DESC=Vert. Slit Waterflow 1
# % gui, S1.OB2, boyembed, flowApp_opi/flow_embed_box.opi, P=BL04I-AL-SLITS-01,Q=:WFS3,DESC=Vert. Slit Waterflow 1
# % gui, S1.OB2, boyembed, flowApp_opi/flow_embed.opi, P=BL04I-AL-SLITS-01,Q=:WFS3,DESC=Vert. Slit Waterflow 1
# These define what PVs a flow detail screen should contain
# % gui, S1.OB2, statusbits, Low Flow,   BL04I-AL-SLITS-01:WFS3:LO, Low
# % gui, S1.OB2, statusbits, Low Low Flow,   BL04I-AL-SLITS-01:WFS3:LOLO, LowLow
#% gdatag,template,simplePv,,
#% gdatag,pv,ro,,RECORD,Waterflow Status Record
#% alh
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-AL-SLITS-01:WFS3:STATUS
# % gui, S1.OB2, sevr
record(calc, "BL04I-AL-SLITS-01:WFS3:STATUS") {
  field(DESC, "Vert. Slit Waterflow 1")
  field(SCAN, "1 second")
  field(CALC, "A+B*2")
  field(INPA, "BL04I-AL-SLITS-01:WFS3:LO PP NMS")
  field(INPB, "BL04I-AL-SLITS-01:WFS3:LOLO PP NMS")
  field(LOLO, "1")
  field(LOW, "2")
  field(LLSV, "MAJOR")
  field(LSV, "MINOR")
}

record(bi, "BL04I-AL-SLITS-01:WFS3:LOLO") {
  field(DESC, "Low Low flow value")
  field(DTYP, "Soft Channel")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(COSV, "NO_ALARM")
  field(ZNAM, "LOLO_FLOW")
  field(ONAM, "NORMAL")
  field(VAL, "1")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK3")
}

record(bi, "BL04I-AL-SLITS-01:WFS3:LO") {
  field(DESC, "Low flow value")
  field(DTYP, "Hy8001")
  field(ZSV, "MINOR")
  field(OSV, "NO_ALARM")
  field(COSV, "NO_ALARM")
  field(ZNAM, "LOW_FLOW")
  field(ONAM, "NORMAL")
  field(VAL, "1")
  field(PINI, "YES")
  field(INP, "#C60 S4 @")
}
#! Generated by VisualDCT v2.7.1-SNAPSHOT

# % macro, __doc__, This template defines a bi record for representing a low water flow
# switch attached to a Hytec 8001, and a calc record combining this
# with a LOLO signal which normally comes from an interlock (via a bi).
#
# Substitutions
# % macro, P,     device name
# % macro, Q,     switch name (full names are BL04I-AL-SLITS-01:WFS4:LO/:LOLO/:STATUS)
# % macro, DESC,  Description of switch
# % macro, C,     Card number
# % macro, S,     Signal number (INP = "#C60 S5 @")
# % macro, LOLO,  Signal for lolo (Interlock)
# % macro, gda_name, GDA Name
# % macro, gda_desc, GDA Description
# % macro, name, Object and gui association name
# This associates an edm screen with the template
# % gui, S1.OB3, edm, flow-config.edl, flow=BL04I-AL-SLITS-01:WFS4
# % gui, S1.OB3, edmembed, flow-embed.edl, flow=BL04I-AL-SLITS-01:WFS4,label=Vert. Slit Waterflow 2
# This associates a BOY screen with the template
# % gui, S1.OB3, boydetail, flowApp_opi/flow_detail.opi, P=BL04I-AL-SLITS-01,Q=:WFS4,DESC=Vert. Slit Waterflow 2
# % gui, S1.OB3, boyembed, flowApp_opi/flow_embed_box.opi, P=BL04I-AL-SLITS-01,Q=:WFS4,DESC=Vert. Slit Waterflow 2
# % gui, S1.OB3, boyembed, flowApp_opi/flow_embed.opi, P=BL04I-AL-SLITS-01,Q=:WFS4,DESC=Vert. Slit Waterflow 2
# These define what PVs a flow detail screen should contain
# % gui, S1.OB3, statusbits, Low Flow,   BL04I-AL-SLITS-01:WFS4:LO, Low
# % gui, S1.OB3, statusbits, Low Low Flow,   BL04I-AL-SLITS-01:WFS4:LOLO, LowLow
#% gdatag,template,simplePv,,
#% gdatag,pv,ro,,RECORD,Waterflow Status Record
#% alh
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-AL-SLITS-01:WFS4:STATUS
# % gui, S1.OB3, sevr
record(calc, "BL04I-AL-SLITS-01:WFS4:STATUS") {
  field(DESC, "Vert. Slit Waterflow 2")
  field(SCAN, "1 second")
  field(CALC, "A+B*2")
  field(INPA, "BL04I-AL-SLITS-01:WFS4:LO PP NMS")
  field(INPB, "BL04I-AL-SLITS-01:WFS4:LOLO PP NMS")
  field(LOLO, "1")
  field(LOW, "2")
  field(LLSV, "MAJOR")
  field(LSV, "MINOR")
}

record(bi, "BL04I-AL-SLITS-01:WFS4:LOLO") {
  field(DESC, "Low Low flow value")
  field(DTYP, "Soft Channel")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(COSV, "NO_ALARM")
  field(ZNAM, "LOLO_FLOW")
  field(ONAM, "NORMAL")
  field(VAL, "1")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK4")
}

record(bi, "BL04I-AL-SLITS-01:WFS4:LO") {
  field(DESC, "Low flow value")
  field(DTYP, "Hy8001")
  field(ZSV, "MINOR")
  field(OSV, "NO_ALARM")
  field(COSV, "NO_ALARM")
  field(ZNAM, "LOW_FLOW")
  field(ONAM, "NORMAL")
  field(VAL, "1")
  field(PINI, "YES")
  field(INP, "#C60 S5 @")
}
#! Generated by VisualDCT v2.7.1-SNAPSHOT

# % macro, __doc__, This template defines a bi record for representing a low water flow
# switch attached to a Hytec 8001, and a calc record combining this
# with a LOLO signal which normally comes from an interlock (via a bi).
#
# Substitutions
# % macro, P,     device name
# % macro, Q,     switch name (full names are BL04I-MP-FLSCN-01:WFS:LO/:LOLO/:STATUS)
# % macro, DESC,  Description of switch
# % macro, C,     Card number
# % macro, S,     Signal number (INP = "#C60 S6 @")
# % macro, LOLO,  Signal for lolo (Interlock)
# % macro, gda_name, GDA Name
# % macro, gda_desc, GDA Description
# % macro, name, Object and gui association name
# This associates an edm screen with the template
# % gui, D1, edm, flow-config.edl, flow=BL04I-MP-FLSCN-01:WFS
# % gui, D1, edmembed, flow-embed.edl, flow=BL04I-MP-FLSCN-01:WFS,label=Fluorescent Screen Water
# This associates a BOY screen with the template
# % gui, D1, boydetail, flowApp_opi/flow_detail.opi, P=BL04I-MP-FLSCN-01,Q=:WFS,DESC=Fluorescent Screen Water
# % gui, D1, boyembed, flowApp_opi/flow_embed_box.opi, P=BL04I-MP-FLSCN-01,Q=:WFS,DESC=Fluorescent Screen Water
# % gui, D1, boyembed, flowApp_opi/flow_embed.opi, P=BL04I-MP-FLSCN-01,Q=:WFS,DESC=Fluorescent Screen Water
# These define what PVs a flow detail screen should contain
# % gui, D1, statusbits, Low Flow,   BL04I-MP-FLSCN-01:WFS:LO, Low
# % gui, D1, statusbits, Low Low Flow,   BL04I-MP-FLSCN-01:WFS:LOLO, LowLow
#% gdatag,template,simplePv,,
#% gdatag,pv,ro,,RECORD,Waterflow Status Record
#% alh
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-MP-FLSCN-01:WFS:STATUS
# % gui, D1, sevr
record(calc, "BL04I-MP-FLSCN-01:WFS:STATUS") {
  field(DESC, "Fluorescent Screen Water")
  field(SCAN, "1 second")
  field(CALC, "A+B*2")
  field(INPA, "BL04I-MP-FLSCN-01:WFS:LO PP NMS")
  field(INPB, "BL04I-MP-FLSCN-01:WFS:LOLO PP NMS")
  field(LOLO, "1")
  field(LOW, "2")
  field(LLSV, "MAJOR")
  field(LSV, "MINOR")
}

record(bi, "BL04I-MP-FLSCN-01:WFS:LOLO") {
  field(DESC, "Low Low flow value")
  field(DTYP, "Soft Channel")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(COSV, "NO_ALARM")
  field(ZNAM, "LOLO_FLOW")
  field(ONAM, "NORMAL")
  field(VAL, "1")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK5")
}

record(bi, "BL04I-MP-FLSCN-01:WFS:LO") {
  field(DESC, "Low flow value")
  field(DTYP, "Hy8001")
  field(ZSV, "MINOR")
  field(OSV, "NO_ALARM")
  field(COSV, "NO_ALARM")
  field(ZNAM, "LOW_FLOW")
  field(ONAM, "NORMAL")
  field(VAL, "1")
  field(PINI, "YES")
  field(INP, "#C60 S6 @")
}
#! Generated by VisualDCT v2.7.1-SNAPSHOT

# % macro, __doc__, This template defines a bi record for representing a low water flow
# switch attached to a Hytec 8001, and a calc record combining this
# with a LOLO signal which normally comes from an interlock (via a bi).
#
# Substitutions
# % macro, P,     device name
# % macro, Q,     switch name (full names are BL04I-MP-FLTR-02:WFS1:LO/:LOLO/:STATUS)
# % macro, DESC,  Description of switch
# % macro, C,     Card number
# % macro, S,     Signal number (INP = "#C60 S7 @")
# % macro, LOLO,  Signal for lolo (Interlock)
# % macro, gda_name, GDA Name
# % macro, gda_desc, GDA Description
# % macro, name, Object and gui association name
# This associates an edm screen with the template
# % gui, I04_1_F1, edm, flow-config.edl, flow=BL04I-MP-FLTR-02:WFS1
# % gui, I04_1_F1, edmembed, flow-embed.edl, flow=BL04I-MP-FLTR-02:WFS1,label=I04-1 Filter
# This associates a BOY screen with the template
# % gui, I04_1_F1, boydetail, flowApp_opi/flow_detail.opi, P=BL04I-MP-FLTR-02,Q=:WFS1,DESC=I04-1 Filter
# % gui, I04_1_F1, boyembed, flowApp_opi/flow_embed_box.opi, P=BL04I-MP-FLTR-02,Q=:WFS1,DESC=I04-1 Filter
# % gui, I04_1_F1, boyembed, flowApp_opi/flow_embed.opi, P=BL04I-MP-FLTR-02,Q=:WFS1,DESC=I04-1 Filter
# These define what PVs a flow detail screen should contain
# % gui, I04_1_F1, statusbits, Low Flow,   BL04I-MP-FLTR-02:WFS1:LO, Low
# % gui, I04_1_F1, statusbits, Low Low Flow,   BL04I-MP-FLTR-02:WFS1:LOLO, LowLow
#% gdatag,template,simplePv,,
#% gdatag,pv,ro,,RECORD,Waterflow Status Record
#% alh
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-MP-FLTR-02:WFS1:STATUS
# % gui, I04_1_F1, sevr
record(calc, "BL04I-MP-FLTR-02:WFS1:STATUS") {
  field(DESC, "I04-1 Filter")
  field(SCAN, "1 second")
  field(CALC, "A+B*2")
  field(INPA, "BL04I-MP-FLTR-02:WFS1:LO PP NMS")
  field(INPB, "BL04I-MP-FLTR-02:WFS1:LOLO PP NMS")
  field(LOLO, "1")
  field(LOW, "2")
  field(LLSV, "MAJOR")
  field(LSV, "MINOR")
}

record(bi, "BL04I-MP-FLTR-02:WFS1:LOLO") {
  field(DESC, "Low Low flow value")
  field(DTYP, "Soft Channel")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(COSV, "NO_ALARM")
  field(ZNAM, "LOLO_FLOW")
  field(ONAM, "NORMAL")
  field(VAL, "1")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK6")
}

record(bi, "BL04I-MP-FLTR-02:WFS1:LO") {
  field(DESC, "Low flow value")
  field(DTYP, "Hy8001")
  field(ZSV, "MINOR")
  field(OSV, "NO_ALARM")
  field(COSV, "NO_ALARM")
  field(ZNAM, "LOW_FLOW")
  field(ONAM, "NORMAL")
  field(VAL, "1")
  field(PINI, "YES")
  field(INP, "#C60 S7 @")
}
#! Generated by VisualDCT v2.7.1-SNAPSHOT

# % macro, __doc__, This template defines a bi record for representing a low water flow
# switch attached to a Hytec 8001, and a calc record combining this
# with a LOLO signal which normally comes from an interlock (via a bi).
#
# Substitutions
# % macro, P,     device name
# % macro, Q,     switch name (full names are BL04I-MP-DCM-01:WFS1:LO/:LOLO/:STATUS)
# % macro, DESC,  Description of switch
# % macro, C,     Card number
# % macro, S,     Signal number (INP = "#C60 S8 @")
# % macro, LOLO,  Signal for lolo (Interlock)
# % macro, gda_name, GDA Name
# % macro, gda_desc, GDA Description
# % macro, name, Object and gui association name
# This associates an edm screen with the template
# % gui, DCM, edm, flow-config.edl, flow=BL04I-MP-DCM-01:WFS1
# % gui, DCM, edmembed, flow-embed.edl, flow=BL04I-MP-DCM-01:WFS1,label=DCM Cooling
# This associates a BOY screen with the template
# % gui, DCM, boydetail, flowApp_opi/flow_detail.opi, P=BL04I-MP-DCM-01,Q=:WFS1,DESC=DCM Cooling
# % gui, DCM, boyembed, flowApp_opi/flow_embed_box.opi, P=BL04I-MP-DCM-01,Q=:WFS1,DESC=DCM Cooling
# % gui, DCM, boyembed, flowApp_opi/flow_embed.opi, P=BL04I-MP-DCM-01,Q=:WFS1,DESC=DCM Cooling
# These define what PVs a flow detail screen should contain
# % gui, DCM, statusbits, Low Flow,   BL04I-MP-DCM-01:WFS1:LO, Low
# % gui, DCM, statusbits, Low Low Flow,   BL04I-MP-DCM-01:WFS1:LOLO, LowLow
#% gdatag,template,simplePv,,
#% gdatag,pv,ro,,RECORD,Waterflow Status Record
#% alh
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-MP-DCM-01:WFS1:STATUS
# % gui, DCM, sevr
record(calc, "BL04I-MP-DCM-01:WFS1:STATUS") {
  field(DESC, "DCM Cooling")
  field(SCAN, "1 second")
  field(CALC, "A+B*2")
  field(INPA, "BL04I-MP-DCM-01:WFS1:LO PP NMS")
  field(INPB, "BL04I-MP-DCM-01:WFS1:LOLO PP NMS")
  field(LOLO, "1")
  field(LOW, "2")
  field(LLSV, "MAJOR")
  field(LSV, "MINOR")
}

record(bi, "BL04I-MP-DCM-01:WFS1:LOLO") {
  field(DESC, "Low Low flow value")
  field(DTYP, "Soft Channel")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(COSV, "NO_ALARM")
  field(ZNAM, "LOLO_FLOW")
  field(ONAM, "NORMAL")
  field(VAL, "1")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK7")
}

record(bi, "BL04I-MP-DCM-01:WFS1:LO") {
  field(DESC, "Low flow value")
  field(DTYP, "Hy8001")
  field(ZSV, "MINOR")
  field(OSV, "NO_ALARM")
  field(COSV, "NO_ALARM")
  field(ZNAM, "LOW_FLOW")
  field(ONAM, "NORMAL")
  field(VAL, "1")
  field(PINI, "YES")
  field(INP, "#C60 S8 @")
}
#! Generated by VisualDCT v2.7.1-SNAPSHOT

# % macro, __doc__, This template defines a bi record for representing a low water flow
# switch attached to a Hytec 8001, and a calc record combining this
# with a LOLO signal which normally comes from an interlock (via a bi).
#
# Substitutions
# % macro, P,     device name
# % macro, Q,     switch name (full names are BL04I-MP-DCM-01:WFS2:LO/:LOLO/:STATUS)
# % macro, DESC,  Description of switch
# % macro, C,     Card number
# % macro, S,     Signal number (INP = "#C60 S9 @")
# % macro, LOLO,  Signal for lolo (Interlock)
# % macro, gda_name, GDA Name
# % macro, gda_desc, GDA Description
# % macro, name, Object and gui association name
# This associates an edm screen with the template
# % gui, DCM.OB1, edm, flow-config.edl, flow=BL04I-MP-DCM-01:WFS2
# % gui, DCM.OB1, edmembed, flow-embed.edl, flow=BL04I-MP-DCM-01:WFS2,label=DCM Stabilisation
# This associates a BOY screen with the template
# % gui, DCM.OB1, boydetail, flowApp_opi/flow_detail.opi, P=BL04I-MP-DCM-01,Q=:WFS2,DESC=DCM Stabilisation
# % gui, DCM.OB1, boyembed, flowApp_opi/flow_embed_box.opi, P=BL04I-MP-DCM-01,Q=:WFS2,DESC=DCM Stabilisation
# % gui, DCM.OB1, boyembed, flowApp_opi/flow_embed.opi, P=BL04I-MP-DCM-01,Q=:WFS2,DESC=DCM Stabilisation
# These define what PVs a flow detail screen should contain
# % gui, DCM.OB1, statusbits, Low Flow,   BL04I-MP-DCM-01:WFS2:LO, Low
# % gui, DCM.OB1, statusbits, Low Low Flow,   BL04I-MP-DCM-01:WFS2:LOLO, LowLow
#% gdatag,template,simplePv,,
#% gdatag,pv,ro,,RECORD,Waterflow Status Record
#% alh
#% None $SEVRCOMMAND UP_ANY dls-alh-handler.py BL04I-MP-DCM-01:WFS2:STATUS
# % gui, DCM.OB1, sevr
record(calc, "BL04I-MP-DCM-01:WFS2:STATUS") {
  field(DESC, "DCM Stabilisation")
  field(SCAN, "1 second")
  field(CALC, "A+B*2")
  field(INPA, "BL04I-MP-DCM-01:WFS2:LO PP NMS")
  field(INPB, "BL04I-MP-DCM-01:WFS2:LOLO PP NMS")
  field(LOLO, "1")
  field(LOW, "2")
  field(LLSV, "MAJOR")
  field(LSV, "MINOR")
}

record(bi, "BL04I-MP-DCM-01:WFS2:LOLO") {
  field(DESC, "Low Low flow value")
  field(DTYP, "Soft Channel")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(COSV, "NO_ALARM")
  field(ZNAM, "LOLO_FLOW")
  field(ONAM, "NORMAL")
  field(VAL, "1")
  field(PINI, "YES")
  field(INP, "BL04I-VA-VLVCC-01:INT1:ILK8")
}

record(bi, "BL04I-MP-DCM-01:WFS2:LO") {
  field(DESC, "Low flow value")
  field(DTYP, "Hy8001")
  field(ZSV, "MINOR")
  field(OSV, "NO_ALARM")
  field(COSV, "NO_ALARM")
  field(ZNAM, "LOW_FLOW")
  field(ONAM, "NORMAL")
  field(VAL, "1")
  field(PINI, "YES")
  field(INP, "#C60 S9 @")
}
#! Generated by VisualDCT v2.7.1-SNAPSHOT

# % macro, __doc__, Template allowing overrideRequestIndividual instances to be created
# % macro, P, device prefix
# % macro, Q, device suffix
# % macro, addr, block number in PLC (decade). Reads DM081
# % macro, in, index into block. Reads DM081
# % macro, out, output offset. Writes DM080
# % macro, port, Asyn port for doing serial comms
record(bo, "BL04I-VA-VLVCC-01:OVERRIDE:TIMER") {
  field(DESC, "Timer for override message")
  field(SCAN, "5 second")
  field(DTYP, "Soft Channel")
  field(FLNK, "BL04I-VA-VLVCC-01:OVERRIDE:OUTPUT")
  field(VAL, "1")
}

# Get value from readback
record(subArray, "BL04I-VA-VLVCC-01:OVERRIDE:SUBARR") {
  field(DTYP, "Soft Channel")
  field(FTVL, "USHORT")
  field(INP, "BL04I-VA-VLVCC-01:BLOCK08 CP")
  field(MALM, "10")
  field(INDX, "1")
  field(FLNK, "BL04I-VA-VLVCC-01:OVERRIDE:INTERLOCKS")
}

record(mbbiDirect, "BL04I-VA-VLVCC-01:OVERRIDE:INTERLOCKS") {
  field(DTYP, "Raw Soft Channel")
  field(INP, "BL04I-VA-VLVCC-01:OVERRIDE:SUBARR.VAL")
}

# Takes 8 inputs (all already turned into bits)
# and adds them to create overall output.
# All unused values are 0 by default.
# +0.5 used to stop rounding problem.
record(calcout, "BL04I-VA-VLVCC-01:OVERRIDE:OUTPUT") {
  field(DESC, "Calc output bits required")
  field(DTYP, "stream")
  field(PRIO, "HIGH")
  field(CALC, "A+B+C+D+E+F+G+H+0.5")
  field(OUT, "@Hostlink.proto write(0080) ty_40_0")
}
#! Generated by VisualDCT v2.7.1-SNAPSHOT

# % macro, __doc__, Template allowing override of individual interlock bits
# % macro, P, device prefix
# % macro, DESC, Description (e.g. DCM piezo override)
# % macro, PRESSURE1, Pressure in mbar that needs to be over setpoint to allow override
# % macro, PRESSURE2, Pressure in mbar that needs to be over setpoint to allow override
# % macro, OVERRIDE, P of overrideRequestMain instance
# % macro, FIELD, Bit of overrideRequestMain instance to use (A-H)
# % macro, BIT, Bit of overrideRequestMain instance to use (0-8)
# % macro, SETPOINT, Setpoint in mbar that both pressures need to be higher than to allow override
# % macro, name, Object name and gui association name
# This associates an edm screen with the template
# % gui, HFMOR, edm, override.edl, P=BL04I-OP-HFM-01:ILK
# % gui, HFMOR, edmembed, override-embed.edl, P=BL04I-OP-HFM-01:ILK
record(bo, "BL04I-OP-HFM-01:ILK:REQUEST") {
  field(DESC, "HFM Piezo Overrride")
  field(DTYP, "Soft Channel")
  field(ZNAM, "Off")
  field(ONAM, "On")
}

# Output is correct number for calc.
# e.g. 1 or 2 for bit 0
# 4 or 8 for bit 1
record(calcout, "BL04I-OP-HFM-01:ILK:OVERRIDE") {
  field(DESC, "Override-request state")
  field(DTYP, "Soft Channel")
  field(CALC, "((A=1)&(B>D)&(C>D))")
  field(INPA, "BL04I-OP-HFM-01:ILK:REQUEST CP")
  field(INPB, "BL04I-VA-GAUGE-04:P CP")
  field(OOPT, "On Change")
  field(OUT, "BL04I-VA-VLVCC-01:OVERRIDE:OUTPUT.B PP")
  field(INPC, "BL04I-VA-GAUGE-04:P CP")
  field(INPD, "BL04I-OP-HFM-01:ILK:SETPOINT CP")
  field(DOPT, "Use OCAL")
  field(OCAL, "((A=1)&(B>D)&(C>D))?4^1:2*4^1")
}

record(calcout, "BL04I-OP-HFM-01:ILK:REMOVEREQUEST") {
  field(DESC, "Remove request on low P")
  field(DTYP, "Soft Channel")
  field(CALC, "(B>D)&&(C>D)")
  field(INPA, "BL04I-VA-VLVCC-01:OVERRIDE:INTERLOCKS.B1 CP")
  field(OUT, "BL04I-OP-HFM-01:ILK:REQUEST.VAL PP")
  field(OOPT, "When Zero")
  field(INPB, "BL04I-VA-GAUGE-04:P CP")
  field(INPC, "BL04I-VA-GAUGE-04:P CP")
  field(INPD, "BL04I-OP-HFM-01:ILK:SETPOINT CP")
}

record(ao, "BL04I-OP-HFM-01:ILK:SETPOINT") {
  field(DESC, "Cutoff press. for override")
  field(DTYP, "Soft Channel")
  field(VAL, "500")
}
#! Generated by VisualDCT v2.7.1-SNAPSHOT

# % macro, __doc__, Template allowing override of individual interlock bits
# % macro, P, device prefix
# % macro, DESC, Description (e.g. DCM piezo override)
# % macro, PRESSURE1, Pressure in mbar that needs to be over setpoint to allow override
# % macro, PRESSURE2, Pressure in mbar that needs to be over setpoint to allow override
# % macro, OVERRIDE, P of overrideRequestMain instance
# % macro, FIELD, Bit of overrideRequestMain instance to use (A-H)
# % macro, BIT, Bit of overrideRequestMain instance to use (0-8)
# % macro, SETPOINT, Setpoint in mbar that both pressures need to be higher than to allow override
# % macro, name, Object name and gui association name
# This associates an edm screen with the template
# % gui, VFMOR, edm, override.edl, P=BL04I-OP-VFM-01:ILK
# % gui, VFMOR, edmembed, override-embed.edl, P=BL04I-OP-VFM-01:ILK
record(bo, "BL04I-OP-VFM-01:ILK:REQUEST") {
  field(DESC, "VFM Piezo Override")
  field(DTYP, "Soft Channel")
  field(ZNAM, "Off")
  field(ONAM, "On")
}

# Output is correct number for calc.
# e.g. 1 or 2 for bit 0
# 4 or 8 for bit 1
record(calcout, "BL04I-OP-VFM-01:ILK:OVERRIDE") {
  field(DESC, "Override-request state")
  field(DTYP, "Soft Channel")
  field(CALC, "((A=1)&(B>D)&(C>D))")
  field(INPA, "BL04I-OP-VFM-01:ILK:REQUEST CP")
  field(INPB, "BL04I-VA-GAUGE-05:P CP")
  field(OOPT, "On Change")
  field(OUT, "BL04I-VA-VLVCC-01:OVERRIDE:OUTPUT.C PP")
  field(INPC, "BL04I-VA-GAUGE-05:P CP")
  field(INPD, "BL04I-OP-VFM-01:ILK:SETPOINT CP")
  field(DOPT, "Use OCAL")
  field(OCAL, "((A=1)&(B>D)&(C>D))?4^2:2*4^2")
}

record(calcout, "BL04I-OP-VFM-01:ILK:REMOVEREQUEST") {
  field(DESC, "Remove request on low P")
  field(DTYP, "Soft Channel")
  field(CALC, "(B>D)&&(C>D)")
  field(INPA, "BL04I-VA-VLVCC-01:OVERRIDE:INTERLOCKS.B2 CP")
  field(OUT, "BL04I-OP-VFM-01:ILK:REQUEST.VAL PP")
  field(OOPT, "When Zero")
  field(INPB, "BL04I-VA-GAUGE-05:P CP")
  field(INPC, "BL04I-VA-GAUGE-05:P CP")
  field(INPD, "BL04I-OP-VFM-01:ILK:SETPOINT CP")
}

record(ao, "BL04I-OP-VFM-01:ILK:SETPOINT") {
  field(DESC, "Cutoff press. for override")
  field(DTYP, "Soft Channel")
  field(VAL, "500")
}
#! Generated by VisualDCT v2.7.1-SNAPSHOT

# % macro, __doc__, Template allowing override of individual interlock bits
# % macro, P, device prefix
# % macro, DESC, Description (e.g. DCM piezo override)
# % macro, PRESSURE1, Pressure in mbar that needs to be over setpoint to allow override
# % macro, PRESSURE2, Pressure in mbar that needs to be over setpoint to allow override
# % macro, OVERRIDE, P of overrideRequestMain instance
# % macro, FIELD, Bit of overrideRequestMain instance to use (A-H)
# % macro, BIT, Bit of overrideRequestMain instance to use (0-8)
# % macro, SETPOINT, Setpoint in mbar that both pressures need to be higher than to allow override
# % macro, name, Object name and gui association name
# This associates an edm screen with the template
# % gui, BIOR, edm, override.edl, P=BL04I-OP-BIM-01:ILK
# % gui, BIOR, edmembed, override-embed.edl, P=BL04I-OP-BIM-01:ILK
record(bo, "BL04I-OP-BIM-01:ILK:REQUEST") {
  field(DESC, "Bimorph Override")
  field(DTYP, "Soft Channel")
  field(ZNAM, "Off")
  field(ONAM, "On")
}

# Output is correct number for calc.
# e.g. 1 or 2 for bit 0
# 4 or 8 for bit 1
record(calcout, "BL04I-OP-BIM-01:ILK:OVERRIDE") {
  field(DESC, "Override-request state")
  field(DTYP, "Soft Channel")
  field(CALC, "((A=1)&(B>D)&(C>D))")
  field(INPA, "BL04I-OP-BIM-01:ILK:REQUEST CP")
  field(INPB, "BL04I-VA-GAUGE-04:P CP")
  field(OOPT, "On Change")
  field(OUT, "BL04I-VA-VLVCC-01:OVERRIDE:OUTPUT.D PP")
  field(INPC, "BL04I-VA-GAUGE-05:P CP")
  field(INPD, "BL04I-OP-BIM-01:ILK:SETPOINT CP")
  field(DOPT, "Use OCAL")
  field(OCAL, "((A=1)&(B>D)&(C>D))?4^3:2*4^3")
}

record(calcout, "BL04I-OP-BIM-01:ILK:REMOVEREQUEST") {
  field(DESC, "Remove request on low P")
  field(DTYP, "Soft Channel")
  field(CALC, "(B>D)&&(C>D)")
  field(INPA, "BL04I-VA-VLVCC-01:OVERRIDE:INTERLOCKS.B3 CP")
  field(OUT, "BL04I-OP-BIM-01:ILK:REQUEST.VAL PP")
  field(OOPT, "When Zero")
  field(INPB, "BL04I-VA-GAUGE-04:P CP")
  field(INPC, "BL04I-VA-GAUGE-05:P CP")
  field(INPD, "BL04I-OP-BIM-01:ILK:SETPOINT CP")
}

record(ao, "BL04I-OP-BIM-01:ILK:SETPOINT") {
  field(DESC, "Cutoff press. for override")
  field(DTYP, "Soft Channel")
  field(VAL, "500")
}
#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBD("/dls_sw/epics/R3.14.12.7/base/dbd/aSubRecord.dbd")
#! DBD("/dls_sw/epics/R3.14.12.7/base/dbd/base.dbd")
#! DBD("/dls_sw/prod/R3.14.12.7/support/streamDevice/2-5dls2/dbd/stream.dbd")
#! DBDEND


# cmsIon.template
# Template database for an LIS CMS-ION radiation monitor
# Pete Owens - 2-9-04
#
# substitutions:
#% macro, device, Device Prefix
#% macro, port, Asyn port
#% macro, high, Integrated dose (since reset) HIGH value
#% macro, hihi, Integrated dose (since reset) HIHI value
#% macro, target, Indicates if soft IOC protocol file to be used, default=''
#% macro, name, Object name and associated gui name
#% macro, DESC, Description

# % gui, CMS, boydetail,cmsIonApp_opi/cmsIon_detail.opi, device=BL04I-RS-RDMON-01, DESC=
# % gui, CMS, boyembed, cmsIonApp_opi/cmsIon_embed_box.opi, device=BL04I-RS-RDMON-01, DESC=
# % gui, CMS, boyembed, cmsIonApp_opi/cmsIon_embed.opi, device=BL04I-RS-RDMON-01, DESC=

# % gui, CMS, readback, Log Rate,   BL04I-RS-RDMON-01:RATELOG
# % gui, CMS, readback, Status,   BL04I-RS-RDMON-01:STA
# Data from monitor
# % gui, CMS, readback, Date,   BL04I-RS-RDMON-01:DATE
# % gui, CMS, readback, Time,   BL04I-RS-RDMON-01:TIM
# % gui, CMS, readback, Last Reset,   BL04I-RS-RDMON-01:RESETTIM
# % gui, CMS, readback, Dose Rate,   BL04I-RS-RDMON-01:RATE
# % gui, CMS, readback, Integrated Dose,   BL04I-RS-RDMON-01:DOSE
# % gui, CMS, readback, Present Hour,   BL04I-RS-RDMON-01:PRSHRDOSE
# % gui, CMS, readback, Present Day,   BL04I-RS-RDMON-01:PRSDAYDOSE
# % gui, CMS, readback, Present Month,   BL04I-RS-RDMON-01:PRSMONDOSE
# % gui, CMS, readback, Previous Hour,   BL04I-RS-RDMON-01:PRVHRDOSE
# % gui, CMS, readback, Previous Day,   BL04I-RS-RDMON-01:PRVDAYDOSE
# % gui, CMS, readback, Previous Month,   BL04I-RS-RDMON-01:PRVMONDOSE
# Alarm status
# % gui, CMS, statusbits, Dose rate alarm,   BL04I-RS-RDMON-01:RATEALM
# % gui, CMS, statusbits, Dose rate alert,   BL04I-RS-RDMON-01:RATEALT
# % gui, CMS, statusbits, Dose alarm,   BL04I-RS-RDMON-01:DOSEALM
# Equipment status
# % gui, CMS, statusbits, Detector fail,   BL04I-RS-RDMON-01:DETFAIL
# % gui, CMS, statusbits, Overrange,   BL04I-RS-RDMON-01:OVRRNG
# % gui, CMS, statusbits, EHT out of spec,   BL04I-RS-RDMON-01:EHTOUT
# % gui, CMS, statusbits, Temperature error,   BL04I-RS-RDMON-01:TERR
# Other conditions
# % gui, CMS, statusbits, Alarms inhibited,   BL04I-RS-RDMON-01:ALMINH
# % gui, CMS, statusbits, EHT disabled,   BL04I-RS-RDMON-01:EHTDIS
# % gui, CMS, statusbits, Recovery mode enabled,   BL04I-RS-RDMON-01:RECENA
# % gui, CMS, statusbits, Recovery in operation,   BL04I-RS-RDMON-01:REC
# % gui, CMS, statusbits, Serial comms status,   BL04I-RS-RDMON-01:COMSTA
# % gui, CMS, statusbits, Reset within past 4hrs,   BL04I-RS-RDMON-01:RESET:OK


################################################################################
# Inject Recovery current
#
#% controldesk Recovery Mode scon
#
record(seq, "BL04I-RS-RDMON-01:SETREC") {
  field(DESC, "Sequence Recovery")
  field(SELM, "All")
  field(DOL1, "1")
  field(DOL2, "0")
  field(DLY1, "0")
  field(DLY2, "2")
  field(LNK1, "BL04I-RS-RDMON-01:OUTREC PP")
  field(LNK2, "BL04I-RS-RDMON-01:OUTREC PP")
}

#
#% archiver 10 Monitor
#
record(bo, "BL04I-RS-RDMON-01:OUTREC") {
  field(DESC, "Recovery On/Off")
  field(DTYP, "stream")
  field(OUT, "@cmsIon.protocol recov ty_41_0 0")
  field(ZNAM, "Off")
  field(ONAM, "On")
}

################################################################################
# Reset
#
#% archiver 10 Monitor
#% controldesk Reset scon
#
record(seq, "BL04I-RS-RDMON-01:RESET") {
  field(DESC, "Sequence Reset")
  field(SELM, "All")
  field(DOL1, "1")
  field(DOL2, "0")
  field(DLY1, "0")
  field(DLY2, "1")
  field(LNK1, "BL04I-RS-RDMON-01:OUTRESET PP")
  field(LNK2, "BL04I-RS-RDMON-01:OUTRESET PP")
}

#
#% alh
#% archiver 10 Monitor
#% controldesk Reset smon
#
record(bo, "BL04I-RS-RDMON-01:OUTRESET") {
  field(DESC, "Reset")
  field(DTYP, "stream")
  field(OUT, "@cmsIon.protocol reset ty_41_0 0")
  field(ZNAM, "Off")
  field(ONAM, "Reset")
  field(OSV, "MINOR")
}

# Date / Time
#
#% controldesk Date readback
record(stringin, "BL04I-RS-RDMON-01:DATE") {
  field(DESC, "Date")
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
}

# % controldesk Time readback
record(stringin, "BL04I-RS-RDMON-01:TIM") {
  field(DESC, "Time")
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
}

# % archiver 10 Monitor
# % controldesk Time of Last Reset readback
record(stringin, "BL04I-RS-RDMON-01:RESETTIM") {
  field(DESC, "Time of Last Reset")
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
}

# #######################################################################
# Dose rate
#
#% alh
#% archiver 1 Monitor
#% controldesk Dose Rate readback
record(ai, "BL04I-RS-RDMON-01:RATE") {
  field(DESC, "Dose Rate")
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(FLNK, "BL04I-RS-RDMON-01:RATELOG")
  field(EGU, "uSv/h")
  field(PREC, "3")
  field(HOPR, "100")
  field(LOPR, "0")
  field(HIGH, "7.5")
  field(HIHI, "25")
  field(LOLO, "0.05")
  field(HSV, "MINOR")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
  field(ADEL, "0.005")
}

#
# Alternative rate value
#
record(calc, "BL04I-RS-RDMON-01:RATELOG") {
  field(DESC, "log RATE")
  field(EGU, "log")
  field(CALC, "LOG(A)")
  field(INPA, "BL04I-RS-RDMON-01:RATE")
  field(HOPR, "2")
  field(LOPR, "-2")
  field(HIGH, "0.87506")
  field(HIHI, "1.39794")
  field(LOLO, "-1.30103")
  field(HSV, "MINOR")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
}

# ###################################################################
# Integrated dose since last reset
#
#% alh
#% archiver 1 Monitor
#% controldesk Dose Since Reset readback
record(ai, "BL04I-RS-RDMON-01:DOSE") {
  field(DESC, "Integrated Dose")
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(EGU, "uSv")
  field(PREC, "3")
  field(HOPR, "10000")
  field(LOPR, "0")
  field(HIHI, "20")
  field(HIGH, "10")
  field(HHSV, "MAJOR")
  field(HSV, "MINOR")
  field(ADEL, "0.0005")
}

# #########################################################################
# Present/Previous Dose - hour,day,month
# 
#% controldesk Present Hour Dose readback
record(ai, "BL04I-RS-RDMON-01:PRSHRDOSE") {
  field(DESC, "Present Hour Dose")
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(EGU, "uSv")
  field(PREC, "3")
  field(HOPR, "10000")
  field(LOPR, "0")
}

#% controldesk Present Day Dose readback
record(ai, "BL04I-RS-RDMON-01:PRSDAYDOSE") {
  field(DESC, "Present Day Dose")
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(EGU, "uSv")
  field(PREC, "3")
  field(HOPR, "10000")
  field(LOPR, "0")
}

#% controldesk Present Month Dose readback
record(ai, "BL04I-RS-RDMON-01:PRSMONDOSE") {
  field(DESC, "Present Month Dose")
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(EGU, "uSv")
  field(PREC, "3")
  field(HOPR, "10000")
  field(LOPR, "0")
}

#% controldesk Previous Hour Dose readback
record(ai, "BL04I-RS-RDMON-01:PRVHRDOSE") {
  field(DESC, "Previous Hour Dose")
  field(SCAN, "Passive")
  field(EGU, "uSv")
  field(PREC, "3")
  field(HOPR, "10000")
  field(LOPR, "0")
}

#% controldesk Previous Day Dose readback
record(ai, "BL04I-RS-RDMON-01:PRVDAYDOSE") {
  field(DESC, "Previous Day Dose")
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(EGU, "uSv")
  field(PREC, "3")
  field(HOPR, "10000")
  field(LOPR, "0")
}

#% controldesk Previous Month Dose readback
record(ai, "BL04I-RS-RDMON-01:PRVMONDOSE") {
  field(DESC, "Previous Month Dose")
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(EGU, "uSv")
  field(PREC, "3")
  field(HOPR, "10000")
  field(LOPR, "0")
}

# #########################################################################
# Alarm Status
record(mbbiDirect, "BL04I-RS-RDMON-01:ALMSTA") {
  field(DESC, "Alarm Status")
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(FLNK, "BL04I-RS-RDMON-01:RATEALM")
}

#
#% archiver 10 Monitor
#% controldesk Dose Rate Alarm smon
#
record(bi, "BL04I-RS-RDMON-01:RATEALM") {
  field(DESC, "Dose Rate Alarm")
  field(INP, "BL04I-RS-RDMON-01:ALMSTA.B0")
  field(FLNK, "BL04I-RS-RDMON-01:RATEALT")
  field(ZNAM, "OK")
  field(ONAM, "Doserate Alarm")
}

#
#% archiver 10 Monitor
#% controldesk Dose Rate Alert smon
#
record(bi, "BL04I-RS-RDMON-01:RATEALT") {
  field(DESC, "Dose Rate Alert")
  field(INP, "BL04I-RS-RDMON-01:ALMSTA.B1")
  field(FLNK, "BL04I-RS-RDMON-01:DOSEALM")
  field(ZNAM, "OK")
  field(ONAM, "Doserate Alert")
}

#
#% archiver 10 Monitor
#% controldesk Dose Alarm smon
#
record(bi, "BL04I-RS-RDMON-01:DOSEALM") {
  field(DESC, "Dose Alarm")
  field(INP, "BL04I-RS-RDMON-01:ALMSTA.B4")
  field(ZNAM, "OK")
  field(ONAM, "Dose Alert")
}

# #########################################################################
# Equipment Status
record(mbbiDirect, "BL04I-RS-RDMON-01:EQPSTA") {
  field(DESC, "Equipment Status")
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(FLNK, "BL04I-RS-RDMON-01:DETFAIL")
}

#
#% archiver 10 Monitor
#% controldesk Detector smon
#
record(bi, "BL04I-RS-RDMON-01:DETFAIL") {
  field(DESC, "Detector")
  field(INP, "BL04I-RS-RDMON-01:EQPSTA.B0")
  field(FLNK, "BL04I-RS-RDMON-01:OVRRNG")
  field(ZNAM, "OK")
  field(ONAM, "Fail")
}

#
#% archiver 10 Monitor
#% controldesk Overrange smon
#
record(bi, "BL04I-RS-RDMON-01:OVRRNG") {
  field(DESC, "Overrange")
  field(INP, "BL04I-RS-RDMON-01:EQPSTA.B1")
  field(FLNK, "BL04I-RS-RDMON-01:EHTOUT")
  field(ZNAM, "Normal")
  field(ONAM, "Overrange")
}

#
#% archiver 10 Monitor
#% controldesk EHT at Detector Out of Spec smon
#
record(bi, "BL04I-RS-RDMON-01:EHTOUT") {
  field(DESC, "EHT at Detector")
  field(INP, "BL04I-RS-RDMON-01:EQPSTA.B4")
  field(FLNK, "BL04I-RS-RDMON-01:TERR")
  field(ZNAM, "OK")
  field(ONAM, "Out of Spec")
}

#
#% archiver 10 Monitor
#% controldesk Temperature Error smon
#
record(bi, "BL04I-RS-RDMON-01:TERR") {
  field(DESC, "Temperature Error")
  field(INP, "BL04I-RS-RDMON-01:EQPSTA.B5")
  field(ZNAM, "OK")
  field(ONAM, "Error")
}

# #########################################################################
# Other Conditions
record(mbbiDirect, "BL04I-RS-RDMON-01:MODE") {
  field(DESC, "Mode")
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(FLNK, "BL04I-RS-RDMON-01:ALMINH")
}

#
#% archiver 10 Monitor
#% controldesk Alarms Inhibited smon
#
record(bi, "BL04I-RS-RDMON-01:ALMINH") {
  field(DESC, "Alarms Inhibited")
  field(INP, "BL04I-RS-RDMON-01:MODE.B0")
  field(FLNK, "BL04I-RS-RDMON-01:EHTDIS")
  field(ZNAM, "Enabled")
  field(ONAM, "Inhibited")
}

#
#% archiver 10 Monitor
#% controldesk EHT Disabled smon
#
record(bi, "BL04I-RS-RDMON-01:EHTDIS") {
  field(DESC, "EHT Disabled")
  field(INP, "BL04I-RS-RDMON-01:MODE.B4")
  field(FLNK, "BL04I-RS-RDMON-01:RECENA")
  field(ZNAM, "Enabled")
  field(ONAM, "Disabled")
}

#
#% archiver 10 Monitor
#% controldesk Recovery Enabled smon
#
record(bi, "BL04I-RS-RDMON-01:RECENA") {
  field(DESC, "Recovery Enabled")
  field(INP, "BL04I-RS-RDMON-01:MODE.B5")
  field(FLNK, "BL04I-RS-RDMON-01:REC")
  field(ZNAM, "Recovery Disabled")
  field(ONAM, "Recovery Enabled")
}

#
#% archiver 10 Monitor
#% controldesk Recovery Mode smon
#
record(bi, "BL04I-RS-RDMON-01:REC") {
  field(DESC, "Recovery Mode")
  field(INP, "BL04I-RS-RDMON-01:MODE.B6")
  field(ZNAM, "Normal")
  field(ONAM, "Recovery")
}

################################################################################
# Overall Status
#
record(calc, "BL04I-RS-RDMON-01:STACALC") {
  field(DESC, "Calculate Status")
  field(CALC, "F=0|E>150|D?3:A|C?2:E>5|B?1:0")
  field(INPA, "BL04I-RS-RDMON-01:RATEALM MS")
  field(INPB, "BL04I-RS-RDMON-01:RATEALT MS")
  field(INPC, "BL04I-RS-RDMON-01:DOSEALM MS")
  field(INPD, "BL04I-RS-RDMON-01:EQPSTA MS")
  field(INPE, "BL04I-RS-RDMON-01:COMSTA")
  field(INPF, "BL04I-RS-RDMON-01:RESET:OK MS")
}

#
#% alh
#% archiver 10 Monitor
#% controldesk Status smon
#
record(mbbi, "BL04I-RS-RDMON-01:STA") {
  field(DESC, "Status")
  field(INP, "BL04I-RS-RDMON-01:STACALC PP MS")
  field(SCAN, ".1 second")
  field(ZRST, "OK")
  field(ONST, "Alert")
  field(TWST, "Alarm")
  field(THST, "Fault")
  field(ZRSV, "NO_ALARM")
  field(ONSV, "MINOR")
  field(TWSV, "MAJOR")
  field(THSV, "MAJOR")
}

# Retrieves the new message and fans out
# processing to all records
record(stringin, "BL04I-RS-RDMON-01:MESSAGE") {
  field(DESC, "Retrieves message")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@cmsIon.protocol message(BL04I-RS-RDMON-01) ty_41_0 0")
  field(FLNK, "BL04I-RS-RDMON-01:FANPROC")
}

record(fanout, "BL04I-RS-RDMON-01:FANPROC") {
  field(FLNK, "BL04I-RS-RDMON-01:FANPROC2")
  field(LNK1, "BL04I-RS-RDMON-01:DATE")
  field(LNK2, "BL04I-RS-RDMON-01:TIM")
  field(LNK3, "BL04I-RS-RDMON-01:RESETTIM")
  field(LNK4, "BL04I-RS-RDMON-01:DOSE")
  field(LNK5, "BL04I-RS-RDMON-01:PRSHRDOSE")
  field(LNK6, "BL04I-RS-RDMON-01:PRSDAYDOSE")
}

record(fanout, "BL04I-RS-RDMON-01:FANPROC2") {
  field(FLNK, "BL04I-RS-RDMON-01:FANPROC3")
  field(LNK1, "BL04I-RS-RDMON-01:PRVHRDOSE")
  field(LNK2, "BL04I-RS-RDMON-01:PRVDAYDOSE")
  field(LNK3, "BL04I-RS-RDMON-01:PRSMONDOSE")
  field(LNK4, "BL04I-RS-RDMON-01:PRVMONDOSE")
  field(LNK5, "BL04I-RS-RDMON-01:RATE")
}

record(fanout, "BL04I-RS-RDMON-01:FANPROC3") {
  field(LNK1, "BL04I-RS-RDMON-01:MODE")
  field(LNK2, "BL04I-RS-RDMON-01:ALMSTA")
  field(LNK3, "BL04I-RS-RDMON-01:EQPSTA")
  field(LNK4, "BL04I-RS-RDMON-01:COMSTA:RESET")
  field(LNK5, "BL04I-RS-RDMON-01:PRSMANDOSE")
}

record(calcout, "BL04I-RS-RDMON-01:COMSTA:RESET") {
#  field(FLNK, "BL04I-RS-RDMON-01:COMSTA")
  field(CALC, "0")
  field(OUT, "BL04I-RS-RDMON-01:COM:COUNT")
}

record(calc, "BL04I-RS-RDMON-01:COM:COUNT") {
  field(SCAN, "2 second")
  field(FLNK, "BL04I-RS-RDMON-01:COMSTA")
  field(CALC, "A+1")
  field(INPA, "BL04I-RS-RDMON-01:COM:COUNT")
}

#% alh
#% archiver 1000 Monitor
#% controldesk ComStatus smon
record(calc, "BL04I-RS-RDMON-01:COMSTA") {
  field(CALC, "A>=150?2:A>=5?1:0")
  field(INPA, "BL04I-RS-RDMON-01:COM:COUNT")
  field(HIHI, "2")
  field(HIGH, "1")
  field(HHSV, "MAJOR")
  field(HSV, "MINOR")
  field(FLNK, "BL04I-RS-RDMON-01:CHECK:DIS")
}

record(calc, "BL04I-RS-RDMON-01:CHECK:DIS") {
  field(DESC, "Disable reset check")
  field(CALC, "A=0?0:1")
  field(INPA, "BL04I-RS-RDMON-01:COMSTA")
}

#% autosave 0 VAL
#% archiver 1 Monitor
#% controldesk ManDose smon
record(calc, "BL04I-RS-RDMON-01:PRSMANDOSE") {
  field(DESC, "Long term dose")
  field(EGU, "uSv")
  field(CALC, "A+(B/3600.0)")
  field(INPA, "BL04I-RS-RDMON-01:PRSMANDOSE")
  field(INPB, "BL04I-RS-RDMON-01:RATE")
  field(PREC, "3")
  field(FLNK, "BL04I-RS-RDMON-01:PRSWEEKDOSE")
}

record(aSub, "BL04I-RS-RDMON-01:MANDOSERESET") {
  field(DESC, "Reset the long term dose")
  field(SNAM, "ResetManualDose")
  field(OUTA, "BL04I-RS-RDMON-01:PRSMANDOSE PP")
  field(OUTT, "BL04I-RS-RDMON-01:MANRESETTIME PP")
  field(FTVT, "STRING")
}

#% autosave 0 VAL
#% archiver 1000 Monitor
#% controldesk Time of last manual reset smon
record(stringin, "BL04I-RS-RDMON-01:MANRESETTIME") {
  field(DESC, "Reset time of manual dose.")
  field(PINI, "YES")
}

#% autosave 0 VAL
#% archiver 1000 Monitor
record(ai, "BL04I-RS-RDMON-01:PRVWEEKDOSE") {
  field(DESC, "Previous Week Dose")
  field(EGU, "uSv")
  field(PREC, "3")
}

#% autosave 0 VAL
record(calc, "BL04I-RS-RDMON-01:PRSWEEKDOSE") {
  field(DESC, "Dose for current week")
  field(EGU, "uSv")
  field(CALC, "A+(B/3600.0)")
  field(INPA, "BL04I-RS-RDMON-01:PRSWEEKDOSE")
  field(INPB, "BL04I-RS-RDMON-01:RATE")
  field(PREC, "3")
  field(FLNK, "BL04I-RS-RDMON-01:CHECKWEEKEND")
}

record(aSub, "BL04I-RS-RDMON-01:CHECKWEEKEND") {
  field(DESC, "Check if weekly dose needs reset.")
  field(INAM, "UpdateWeekEndTime")
  field(SNAM, "WeekEndCheck")
  field(EFLG, "ALWAYS")
  field(INPA, "BL04I-RS-RDMON-01:PRSWEEKDOSE")
  field(OUTA, "BL04I-RS-RDMON-01:PRSWEEKDOSE PP")
  field(INPB, "BL04I-RS-RDMON-01:PRVWEEKDOSE")
  field(OUTB, "BL04I-RS-RDMON-01:PRVWEEKDOSE PP")
  field(OUTT, "BL04I-RS-RDMON-01:NEXTWEEKENDTIME PP")
  field(FTVT, "STRING")
  field(FLNK, "BL04I-RS-RDMON-01:RUNMODE")
}

record(stringin, "BL04I-RS-RDMON-01:NEXTWEEKENDTIME") {
  field(DESC, "Time that this week will end.")
}

record(calcout, "BL04I-RS-RDMON-01:RUNMODE") {
  field(DESC, "Detect change of machine mode.")
  field(CALC, "A=0?0:1")
  field(INPA, "CS-CS-MSTAT-01:MODE CA")
  field(OOPT, "On Change")
  field(OUT, "BL04I-RS-RDMON-01:RUNENDRESET.PROC")
  field(FLNK, "BL04I-RS-RDMON-01:PRSRUNDOSE")
  field(IVOA, "Don't drive outputs")
}

#% autosave 0 VAL
#% archiver 1000 Monitor
record(ai, "BL04I-RS-RDMON-01:PRVRUNDOSE") {
  field(DESC, "Previous Run Dose")
  field(EGU, "uSv")
  field(PREC, "3")
  field(PINI, "YES")
}

#% autosave 0 VAL
record(calc, "BL04I-RS-RDMON-01:PRSRUNDOSE") {
  field(DESC, "Dose for current run")
  field(EGU, "uSv")
  field(CALC, "A+(B/3600.0)")
  field(INPA, "BL04I-RS-RDMON-01:PRSRUNDOSE")
  field(INPB, "BL04I-RS-RDMON-01:RATE")
  field(PREC, "3")
}

record(aSub, "BL04I-RS-RDMON-01:RUNENDRESET") {
  field(DESC, "Reset run dose.")
  field(SNAM, "RunEndReset")
  field(EFLG, "ALWAYS")
  field(INPA, "BL04I-RS-RDMON-01:PRSRUNDOSE")
  field(OUTA, "BL04I-RS-RDMON-01:PRSRUNDOSE PP")
  field(INPB, "BL04I-RS-RDMON-01:PRVRUNDOSE")
  field(OUTB, "BL04I-RS-RDMON-01:PRVRUNDOSE PP")
  field(OUTT, "BL04I-RS-RDMON-01:LASTRUNENDTIME PP")
  field(FTVT, "STRING")
}

#% autosave 0 VAL
record(stringin, "BL04I-RS-RDMON-01:LASTRUNENDTIME") {
  field(DESC, "Time that this run or SD ended.")
  field(PINI, "YES")
}

#! Further lines contain data used by VisualDCT
#! View(546,1046,0.7)
#! Record("BL04I-RS-RDMON-01:SETREC",460,1928,0,0,"BL04I-RS-RDMON-01:SETREC")
#! Field("BL04I-RS-RDMON-01:SETREC.LNK1",16777215,1,"BL04I-RS-RDMON-01:SETREC.LNK1")
#! Link("BL04I-RS-RDMON-01:SETREC.LNK1","BL04I-RS-RDMON-01:OUTREC.VAL")
#! Field("BL04I-RS-RDMON-01:SETREC.LNK2",16777215,1,"BL04I-RS-RDMON-01:SETREC.LNK2")
#! Link("BL04I-RS-RDMON-01:SETREC.LNK2","BL04I-RS-RDMON-01:OUTREC.VAL")
#! Record("BL04I-RS-RDMON-01:OUTREC",740,1972,0,0,"BL04I-RS-RDMON-01:OUTREC")
#! Field("BL04I-RS-RDMON-01:OUTREC.VAL",16777215,0,"BL04I-RS-RDMON-01:OUTREC.VAL")
#! Record("BL04I-RS-RDMON-01:RESET",460,1708,0,0,"BL04I-RS-RDMON-01:RESET")
#! Field("BL04I-RS-RDMON-01:RESET.LNK1",16777215,1,"BL04I-RS-RDMON-01:RESET.LNK1")
#! Link("BL04I-RS-RDMON-01:RESET.LNK1","BL04I-RS-RDMON-01:OUTRESET.VAL")
#! Field("BL04I-RS-RDMON-01:RESET.LNK2",16777215,1,"BL04I-RS-RDMON-01:RESET.LNK2")
#! Link("BL04I-RS-RDMON-01:RESET.LNK2","BL04I-RS-RDMON-01:OUTRESET.VAL")
#! Record("BL04I-RS-RDMON-01:OUTRESET",740,1752,0,0,"BL04I-RS-RDMON-01:OUTRESET")
#! Field("BL04I-RS-RDMON-01:OUTRESET.VAL",16777215,0,"BL04I-RS-RDMON-01:OUTRESET.VAL")
#! Record("BL04I-RS-RDMON-01:DATE",980,940,0,0,"BL04I-RS-RDMON-01:DATE")
#! Record("BL04I-RS-RDMON-01:TIM",1200,960,0,0,"BL04I-RS-RDMON-01:TIM")
#! Record("BL04I-RS-RDMON-01:RESETTIM",1420,960,0,0,"BL04I-RS-RDMON-01:RESETTIM")
#! Record("BL04I-RS-RDMON-01:RATE",2720,1248,0,0,"BL04I-RS-RDMON-01:RATE")
#! Field("BL04I-RS-RDMON-01:RATE.VAL",16777215,0,"BL04I-RS-RDMON-01:RATE.VAL")
#! Field("BL04I-RS-RDMON-01:RATE.FLNK",16777215,1,"BL04I-RS-RDMON-01:RATE.FLNK")
#! Link("BL04I-RS-RDMON-01:RATE.FLNK","BL04I-RS-RDMON-01:RATELOG")
#! Record("BL04I-RS-RDMON-01:RATELOG",2760,1590,0,1,"BL04I-RS-RDMON-01:RATELOG")
#! Field("BL04I-RS-RDMON-01:RATELOG.INPA",16777215,0,"BL04I-RS-RDMON-01:RATELOG.INPA")
#! Link("BL04I-RS-RDMON-01:RATELOG.INPA","BL04I-RS-RDMON-01:RATE.VAL")
#! Record("BL04I-RS-RDMON-01:DOSE",1640,870,0,0,"BL04I-RS-RDMON-01:DOSE")
#! Record("BL04I-RS-RDMON-01:PRSHRDOSE",1860,963,0,0,"BL04I-RS-RDMON-01:PRSHRDOSE")
#! Record("BL04I-RS-RDMON-01:PRSDAYDOSE",2060,1003,0,0,"BL04I-RS-RDMON-01:PRSDAYDOSE")
#! Record("BL04I-RS-RDMON-01:PRSMONDOSE",1460,1183,0,0,"BL04I-RS-RDMON-01:PRSMONDOSE")
#! Record("BL04I-RS-RDMON-01:PRVHRDOSE",1000,1158,0,0,"BL04I-RS-RDMON-01:PRVHRDOSE")
#! Record("BL04I-RS-RDMON-01:PRVDAYDOSE",1220,1163,0,0,"BL04I-RS-RDMON-01:PRVDAYDOSE")
#! Record("BL04I-RS-RDMON-01:PRVMONDOSE",1660,1183,0,0,"BL04I-RS-RDMON-01:PRVMONDOSE")
#! Record("BL04I-RS-RDMON-01:ALMSTA",1060,1666,0,0,"BL04I-RS-RDMON-01:ALMSTA")
#! Field("BL04I-RS-RDMON-01:ALMSTA.FLNK",16777215,1,"BL04I-RS-RDMON-01:ALMSTA.FLNK")
#! Link("BL04I-RS-RDMON-01:ALMSTA.FLNK","BL04I-RS-RDMON-01:RATEALM")
#! Field("BL04I-RS-RDMON-01:ALMSTA.B0",16777215,1,"BL04I-RS-RDMON-01:ALMSTA.B0")
#! Field("BL04I-RS-RDMON-01:ALMSTA.B1",16777215,1,"BL04I-RS-RDMON-01:ALMSTA.B1")
#! Field("BL04I-RS-RDMON-01:ALMSTA.B4",16777215,1,"BL04I-RS-RDMON-01:ALMSTA.B4")
#! Record("BL04I-RS-RDMON-01:RATEALM",1340,1652,0,0,"BL04I-RS-RDMON-01:RATEALM")
#! Field("BL04I-RS-RDMON-01:RATEALM.VAL",16777215,1,"BL04I-RS-RDMON-01:RATEALM.VAL")
#! Field("BL04I-RS-RDMON-01:RATEALM.INP",16777215,0,"BL04I-RS-RDMON-01:RATEALM.INP")
#! Link("BL04I-RS-RDMON-01:RATEALM.INP","BL04I-RS-RDMON-01:ALMSTA.B0")
#! Field("BL04I-RS-RDMON-01:RATEALM.FLNK",16777215,1,"BL04I-RS-RDMON-01:RATEALM.FLNK")
#! Link("BL04I-RS-RDMON-01:RATEALM.FLNK","BL04I-RS-RDMON-01:RATEALT")
#! Record("BL04I-RS-RDMON-01:RATEALT",1600,1712,0,0,"BL04I-RS-RDMON-01:RATEALT")
#! Field("BL04I-RS-RDMON-01:RATEALT.INP",16777215,0,"BL04I-RS-RDMON-01:RATEALT.INP")
#! Link("BL04I-RS-RDMON-01:RATEALT.INP","BL04I-RS-RDMON-01:RATEALT/INP")
#! Field("BL04I-RS-RDMON-01:RATEALT.VAL",16777215,1,"BL04I-RS-RDMON-01:RATEALT.VAL")
#! Field("BL04I-RS-RDMON-01:RATEALT.FLNK",16777215,1,"BL04I-RS-RDMON-01:RATEALT.FLNK")
#! Link("BL04I-RS-RDMON-01:RATEALT.FLNK","BL04I-RS-RDMON-01:DOSEALM")
#! Connector("BL04I-RS-RDMON-01:RATEALT/INP","BL04I-RS-RDMON-01:ALMSTA.B1",1320,1840,16777215,"",0)
#! Record("BL04I-RS-RDMON-01:DOSEALM",1860,1766,0,0,"BL04I-RS-RDMON-01:DOSEALM")
#! Field("BL04I-RS-RDMON-01:DOSEALM.VAL",16777215,1,"BL04I-RS-RDMON-01:DOSEALM.VAL")
#! Field("BL04I-RS-RDMON-01:DOSEALM.INP",16777215,0,"BL04I-RS-RDMON-01:DOSEALM.INP")
#! Link("BL04I-RS-RDMON-01:DOSEALM.INP","BL04I-RS-RDMON-01:DOSEALM/INP")
#! Connector("BL04I-RS-RDMON-01:DOSEALM/INP","BL04I-RS-RDMON-01:ALMSTA.B4",1300,1880,16777215,"",0)
#! Record("BL04I-RS-RDMON-01:EQPSTA",1040,1946,0,0,"BL04I-RS-RDMON-01:EQPSTA")
#! Field("BL04I-RS-RDMON-01:EQPSTA.FLNK",16777215,1,"BL04I-RS-RDMON-01:EQPSTA.FLNK")
#! Link("BL04I-RS-RDMON-01:EQPSTA.FLNK","BL04I-RS-RDMON-01:EQPSTA/FLNK")
#! Field("BL04I-RS-RDMON-01:EQPSTA.B0",16777215,1,"BL04I-RS-RDMON-01:EQPSTA.B0")
#! Field("BL04I-RS-RDMON-01:EQPSTA.B1",16777215,1,"BL04I-RS-RDMON-01:EQPSTA.B1")
#! Field("BL04I-RS-RDMON-01:EQPSTA.B4",16777215,1,"BL04I-RS-RDMON-01:EQPSTA.B4")
#! Field("BL04I-RS-RDMON-01:EQPSTA.B5",16777215,1,"BL04I-RS-RDMON-01:EQPSTA.B5")
#! Field("BL04I-RS-RDMON-01:EQPSTA.VAL",16777215,1,"BL04I-RS-RDMON-01:EQPSTA.VAL")
#! Connector("BL04I-RS-RDMON-01:EQPSTA/FLNK","BL04I-RS-RDMON-01:DETFAIL",1260,2033,16777215,"",0)
#! Record("BL04I-RS-RDMON-01:DETFAIL",1340,1932,0,0,"BL04I-RS-RDMON-01:DETFAIL")
#! Field("BL04I-RS-RDMON-01:DETFAIL.INP",16777215,0,"BL04I-RS-RDMON-01:DETFAIL.INP")
#! Link("BL04I-RS-RDMON-01:DETFAIL.INP","BL04I-RS-RDMON-01:DETFAIL/INP")
#! Field("BL04I-RS-RDMON-01:DETFAIL.FLNK",16777215,1,"BL04I-RS-RDMON-01:DETFAIL.FLNK")
#! Link("BL04I-RS-RDMON-01:DETFAIL.FLNK","BL04I-RS-RDMON-01:OVRRNG")
#! Connector("BL04I-RS-RDMON-01:DETFAIL/INP","BL04I-RS-RDMON-01:EQPSTA.B0",1280,2080,16777215,"",0)
#! Record("BL04I-RS-RDMON-01:OVRRNG",1620,1952,0,0,"BL04I-RS-RDMON-01:OVRRNG")
#! Field("BL04I-RS-RDMON-01:OVRRNG.FLNK",16777215,1,"BL04I-RS-RDMON-01:OVRRNG.FLNK")
#! Link("BL04I-RS-RDMON-01:OVRRNG.FLNK","BL04I-RS-RDMON-01:EHTOUT")
#! Field("BL04I-RS-RDMON-01:OVRRNG.INP",16777215,0,"BL04I-RS-RDMON-01:OVRRNG.INP")
#! Link("BL04I-RS-RDMON-01:OVRRNG.INP","BL04I-RS-RDMON-01:OVRRNG/INP")
#! Connector("BL04I-RS-RDMON-01:OVRRNG/INP","BL04I-RS-RDMON-01:EQPSTA.B1",1300,2110,16777215,"",0)
#! Record("BL04I-RS-RDMON-01:EHTOUT",1880,1972,0,0,"BL04I-RS-RDMON-01:EHTOUT")
#! Field("BL04I-RS-RDMON-01:EHTOUT.FLNK",16777215,1,"BL04I-RS-RDMON-01:EHTOUT.FLNK")
#! Link("BL04I-RS-RDMON-01:EHTOUT.FLNK","BL04I-RS-RDMON-01:TERR")
#! Field("BL04I-RS-RDMON-01:EHTOUT.INP",16777215,0,"BL04I-RS-RDMON-01:EHTOUT.INP")
#! Link("BL04I-RS-RDMON-01:EHTOUT.INP","BL04I-RS-RDMON-01:EHTOUT/INP")
#! Connector("BL04I-RS-RDMON-01:EHTOUT/INP","BL04I-RS-RDMON-01:EQPSTA.B4",1320,2130,16777215,"",0)
#! Record("BL04I-RS-RDMON-01:TERR",2140,2026,0,0,"BL04I-RS-RDMON-01:TERR")
#! Field("BL04I-RS-RDMON-01:TERR.INP",16777215,0,"BL04I-RS-RDMON-01:TERR.INP")
#! Link("BL04I-RS-RDMON-01:TERR.INP","BL04I-RS-RDMON-01:EQPSTA.B5")
#! Record("BL04I-RS-RDMON-01:MODE",1040,1426,0,0,"BL04I-RS-RDMON-01:MODE")
#! Field("BL04I-RS-RDMON-01:MODE.FLNK",16777215,1,"BL04I-RS-RDMON-01:MODE.FLNK")
#! Link("BL04I-RS-RDMON-01:MODE.FLNK","BL04I-RS-RDMON-01:MODE/FLNK")
#! Field("BL04I-RS-RDMON-01:MODE.B0",16777215,1,"BL04I-RS-RDMON-01:MODE.B0")
#! Field("BL04I-RS-RDMON-01:MODE.B4",16777215,1,"BL04I-RS-RDMON-01:MODE.B4")
#! Field("BL04I-RS-RDMON-01:MODE.B5",16777215,1,"BL04I-RS-RDMON-01:MODE.B5")
#! Field("BL04I-RS-RDMON-01:MODE.B6",16777215,1,"BL04I-RS-RDMON-01:MODE.B6")
#! Connector("BL04I-RS-RDMON-01:MODE/FLNK","BL04I-RS-RDMON-01:ALMINH",1260,1513,16777215,"",0)
#! Record("BL04I-RS-RDMON-01:ALMINH",1340,1412,0,0,"BL04I-RS-RDMON-01:ALMINH")
#! Field("BL04I-RS-RDMON-01:ALMINH.FLNK",16777215,1,"BL04I-RS-RDMON-01:ALMINH.FLNK")
#! Link("BL04I-RS-RDMON-01:ALMINH.FLNK","BL04I-RS-RDMON-01:EHTDIS")
#! Field("BL04I-RS-RDMON-01:ALMINH.INP",16777215,0,"BL04I-RS-RDMON-01:ALMINH.INP")
#! Link("BL04I-RS-RDMON-01:ALMINH.INP","BL04I-RS-RDMON-01:MODE.B0")
#! Record("BL04I-RS-RDMON-01:EHTDIS",1600,1432,0,0,"BL04I-RS-RDMON-01:EHTDIS")
#! Field("BL04I-RS-RDMON-01:EHTDIS.FLNK",16777215,1,"BL04I-RS-RDMON-01:EHTDIS.FLNK")
#! Link("BL04I-RS-RDMON-01:EHTDIS.FLNK","BL04I-RS-RDMON-01:RECENA")
#! Field("BL04I-RS-RDMON-01:EHTDIS.INP",16777215,0,"BL04I-RS-RDMON-01:EHTDIS.INP")
#! Link("BL04I-RS-RDMON-01:EHTDIS.INP","BL04I-RS-RDMON-01:MODE.B4")
#! Record("BL04I-RS-RDMON-01:RECENA",1860,1452,0,0,"BL04I-RS-RDMON-01:RECENA")
#! Field("BL04I-RS-RDMON-01:RECENA.FLNK",16777215,1,"BL04I-RS-RDMON-01:RECENA.FLNK")
#! Link("BL04I-RS-RDMON-01:RECENA.FLNK","BL04I-RS-RDMON-01:REC")
#! Field("BL04I-RS-RDMON-01:RECENA.INP",16777215,0,"BL04I-RS-RDMON-01:RECENA.INP")
#! Link("BL04I-RS-RDMON-01:RECENA.INP","BL04I-RS-RDMON-01:MODE.B5")
#! Record("BL04I-RS-RDMON-01:REC",2120,1506,0,0,"BL04I-RS-RDMON-01:REC")
#! Field("BL04I-RS-RDMON-01:REC.INP",16777215,0,"BL04I-RS-RDMON-01:REC.INP")
#! Link("BL04I-RS-RDMON-01:REC.INP","BL04I-RS-RDMON-01:MODE.B6")
#! Record("BL04I-RS-RDMON-01:STACALC",2440,1508,0,0,"BL04I-RS-RDMON-01:STACALC")
#! Field("BL04I-RS-RDMON-01:STACALC.INPA",16777215,0,"BL04I-RS-RDMON-01:STACALC.INPA")
#! Link("BL04I-RS-RDMON-01:STACALC.INPA","BL04I-RS-RDMON-01:RATEALM.VAL")
#! Field("BL04I-RS-RDMON-01:STACALC.INPB",16777215,0,"BL04I-RS-RDMON-01:STACALC.INPB")
#! Link("BL04I-RS-RDMON-01:STACALC.INPB","BL04I-RS-RDMON-01:RATEALT.VAL")
#! Field("BL04I-RS-RDMON-01:STACALC.INPC",16777215,0,"BL04I-RS-RDMON-01:STACALC.INPC")
#! Link("BL04I-RS-RDMON-01:STACALC.INPC","BL04I-RS-RDMON-01:DOSEALM.VAL")
#! Field("BL04I-RS-RDMON-01:STACALC.INPD",16777215,0,"BL04I-RS-RDMON-01:STACALC.INPD")
#! Link("BL04I-RS-RDMON-01:STACALC.INPD","BL04I-RS-RDMON-01:STACALC/INPD")
#! Field("BL04I-RS-RDMON-01:STACALC.INPE",16777215,0,"BL04I-RS-RDMON-01:STACALC.INPE")
#! Link("BL04I-RS-RDMON-01:STACALC.INPE","BL04I-RS-RDMON-01:STACALC/INPE")
#! Field("BL04I-RS-RDMON-01:STACALC.INPF",16777215,1,"BL04I-RS-RDMON-01:STACALC.INPF")
#! Field("BL04I-RS-RDMON-01:STACALC.VAL",16777215,0,"BL04I-RS-RDMON-01:STACALC.VAL")
#! Connector("BL04I-RS-RDMON-01:STACALC/INPD","BL04I-RS-RDMON-01:EQPSTA.VAL",2320,1960,16777215,"",0)
#! Connector("BL04I-RS-RDMON-01:STACALC/INPE","BL04I-RS-RDMON-01:COMSTA.VAL",2340,2080,16777215,"",0)
#! Record("BL04I-RS-RDMON-01:STA",2420,1845,0,0,"BL04I-RS-RDMON-01:STA")
#! Field("BL04I-RS-RDMON-01:STA.INP",16777215,0,"BL04I-RS-RDMON-01:STA.INP")
#! Link("BL04I-RS-RDMON-01:STA.INP","BL04I-RS-RDMON-01:STACALC.VAL")
#! Record("BL04I-RS-RDMON-01:MESSAGE",460,872,0,1,"BL04I-RS-RDMON-01:MESSAGE")
#! Field("BL04I-RS-RDMON-01:MESSAGE.FLNK",16777215,1,"BL04I-RS-RDMON-01:MESSAGE.FLNK")
#! Link("BL04I-RS-RDMON-01:MESSAGE.FLNK","BL04I-RS-RDMON-01:FANPROC")
#! Record("BL04I-RS-RDMON-01:FANPROC",720,863,0,0,"BL04I-RS-RDMON-01:FANPROC")
#! Field("BL04I-RS-RDMON-01:FANPROC.LNK1",16777215,1,"BL04I-RS-RDMON-01:FANPROC.LNK1")
#! Link("BL04I-RS-RDMON-01:FANPROC.LNK1","BL04I-RS-RDMON-01:DATE")
#! Field("BL04I-RS-RDMON-01:FANPROC.LNK2",16777215,1,"BL04I-RS-RDMON-01:FANPROC.LNK2")
#! Link("BL04I-RS-RDMON-01:FANPROC.LNK2","BL04I-RS-RDMON-01:TIM")
#! Field("BL04I-RS-RDMON-01:FANPROC.LNK3",16777215,1,"BL04I-RS-RDMON-01:FANPROC.LNK3")
#! Link("BL04I-RS-RDMON-01:FANPROC.LNK3","BL04I-RS-RDMON-01:RESETTIM")
#! Field("BL04I-RS-RDMON-01:FANPROC.LNK4",16777215,1,"BL04I-RS-RDMON-01:FANPROC.LNK4")
#! Link("BL04I-RS-RDMON-01:FANPROC.LNK4","BL04I-RS-RDMON-01:DOSE")
#! Field("BL04I-RS-RDMON-01:FANPROC.LNK5",16777215,1,"BL04I-RS-RDMON-01:FANPROC.LNK5")
#! Link("BL04I-RS-RDMON-01:FANPROC.LNK5","BL04I-RS-RDMON-01:PRSHRDOSE")
#! Field("BL04I-RS-RDMON-01:FANPROC.LNK6",16777215,1,"BL04I-RS-RDMON-01:FANPROC.LNK6")
#! Link("BL04I-RS-RDMON-01:FANPROC.LNK6","BL04I-RS-RDMON-01:PRSDAYDOSE")
#! Field("BL04I-RS-RDMON-01:FANPROC.FLNK",16777215,0,"BL04I-RS-RDMON-01:FANPROC.FLNK")
#! Link("BL04I-RS-RDMON-01:FANPROC.FLNK","BL04I-RS-RDMON-01:FANPROC/FLNK")
#! Connector("BL04I-RS-RDMON-01:FANPROC/FLNK","BL04I-RS-RDMON-01:FANPROC2",640,1193,16777215,"",0)
#! Record("BL04I-RS-RDMON-01:FANPROC2",720,1172,0,0,"BL04I-RS-RDMON-01:FANPROC2")
#! Field("BL04I-RS-RDMON-01:FANPROC2.LNK1",16777215,1,"BL04I-RS-RDMON-01:FANPROC2.LNK1")
#! Link("BL04I-RS-RDMON-01:FANPROC2.LNK1","BL04I-RS-RDMON-01:PRVHRDOSE")
#! Field("BL04I-RS-RDMON-01:FANPROC2.LNK2",16777215,1,"BL04I-RS-RDMON-01:FANPROC2.LNK2")
#! Link("BL04I-RS-RDMON-01:FANPROC2.LNK2","BL04I-RS-RDMON-01:PRVDAYDOSE")
#! Field("BL04I-RS-RDMON-01:FANPROC2.LNK3",16777215,1,"BL04I-RS-RDMON-01:FANPROC2.LNK3")
#! Link("BL04I-RS-RDMON-01:FANPROC2.LNK3","BL04I-RS-RDMON-01:PRSMONDOSE")
#! Field("BL04I-RS-RDMON-01:FANPROC2.LNK4",16777215,1,"BL04I-RS-RDMON-01:FANPROC2.LNK4")
#! Link("BL04I-RS-RDMON-01:FANPROC2.LNK4","BL04I-RS-RDMON-01:PRVMONDOSE")
#! Field("BL04I-RS-RDMON-01:FANPROC2.LNK5",16777215,1,"BL04I-RS-RDMON-01:FANPROC2.LNK5")
#! Link("BL04I-RS-RDMON-01:FANPROC2.LNK5","BL04I-RS-RDMON-01:RATE")
#! Field("BL04I-RS-RDMON-01:FANPROC2.FLNK",16777215,0,"BL04I-RS-RDMON-01:FANPROC2.FLNK")
#! Link("BL04I-RS-RDMON-01:FANPROC2.FLNK","BL04I-RS-RDMON-01:FANPROC2/FLNK")
#! Connector("BL04I-RS-RDMON-01:FANPROC2/FLNK","BL04I-RS-RDMON-01:FANPROC3",640,1453,16777215,"",0)
#! Visibility("BL04I-RS-RDMON-01:FANPROC2.FLNK",2)
#! Record("BL04I-RS-RDMON-01:FANPROC3",720,1432,0,0,"BL04I-RS-RDMON-01:FANPROC3")
#! Field("BL04I-RS-RDMON-01:FANPROC3.LNK1",16777215,1,"BL04I-RS-RDMON-01:FANPROC3.LNK1")
#! Link("BL04I-RS-RDMON-01:FANPROC3.LNK1","BL04I-RS-RDMON-01:MODE")
#! Field("BL04I-RS-RDMON-01:FANPROC3.LNK2",16777215,1,"BL04I-RS-RDMON-01:FANPROC3.LNK2")
#! Link("BL04I-RS-RDMON-01:FANPROC3.LNK2","BL04I-RS-RDMON-01:ALMSTA")
#! Field("BL04I-RS-RDMON-01:FANPROC3.LNK3",16777215,1,"BL04I-RS-RDMON-01:FANPROC3.LNK3")
#! Link("BL04I-RS-RDMON-01:FANPROC3.LNK3","BL04I-RS-RDMON-01:EQPSTA")
#! Field("BL04I-RS-RDMON-01:FANPROC3.LNK4",16777215,1,"BL04I-RS-RDMON-01:FANPROC3.LNK4")
#! Link("BL04I-RS-RDMON-01:FANPROC3.LNK4","BL04I-RS-RDMON-01:COMSTA:RESET")
#! Field("BL04I-RS-RDMON-01:FANPROC3.LNK5",16777215,1,"BL04I-RS-RDMON-01:FANPROC3.LNK5")
#! Link("BL04I-RS-RDMON-01:FANPROC3.LNK5","BL04I-RS-RDMON-01:PRSMANDOSE")
#! Record("BL04I-RS-RDMON-01:COMSTA:RESET",1020,2189,0,0,"BL04I-RS-RDMON-01:COMSTA:RESET")
#! Field("BL04I-RS-RDMON-01:COMSTA:RESET.OUT",16777215,1,"BL04I-RS-RDMON-01:COMSTA:RESET.OUT")
#! Link("BL04I-RS-RDMON-01:COMSTA:RESET.OUT","BL04I-RS-RDMON-01:COM:COUNT.VAL")
#! Record("BL04I-RS-RDMON-01:CHECK:DIS",1880,2260,0,0,"BL04I-RS-RDMON-01:CHECK:DIS")
#! Field("BL04I-RS-RDMON-01:CHECK:DIS.INPA",16777215,0,"BL04I-RS-RDMON-01:CHECK:DIS.INPA")
#! Link("BL04I-RS-RDMON-01:CHECK:DIS.INPA","BL04I-RS-RDMON-01:COMSTA.VAL")
#! Record("BL04I-RS-RDMON-01:PRSMANDOSE",1000,2303,0,0,"BL04I-RS-RDMON-01:PRSMANDOSE")
#! Field("BL04I-RS-RDMON-01:PRSMANDOSE.INPB",16777215,1,"BL04I-RS-RDMON-01:PRSMANDOSE.INPB")
#! Link("BL04I-RS-RDMON-01:PRSMANDOSE.INPB","BL04I-RS-RDMON-01:RATE.VAL")
#! Field("BL04I-RS-RDMON-01:PRSMANDOSE.INPA",16777215,0,"BL04I-RS-RDMON-01:PRSMANDOSE.INPA")
#! Link("BL04I-RS-RDMON-01:PRSMANDOSE.INPA","BL04I-RS-RDMON-01:PRSMANDOSE.VAL")
#! Field("BL04I-RS-RDMON-01:PRSMANDOSE.VAL",16777215,1,"BL04I-RS-RDMON-01:PRSMANDOSE.VAL")
#! Field("BL04I-RS-RDMON-01:PRSMANDOSE.FLNK",16777215,1,"BL04I-RS-RDMON-01:PRSMANDOSE.FLNK")
#! Link("BL04I-RS-RDMON-01:PRSMANDOSE.FLNK","BL04I-RS-RDMON-01:PRSWEEKDOSE")
#! Record("BL04I-RS-RDMON-01:MANDOSERESET",1300,2492,0,0,"BL04I-RS-RDMON-01:MANDOSERESET")
#! Field("BL04I-RS-RDMON-01:MANDOSERESET.OUTA",16777215,0,"BL04I-RS-RDMON-01:MANDOSERESET.OUTA")
#! Link("BL04I-RS-RDMON-01:MANDOSERESET.OUTA","BL04I-RS-RDMON-01:MANDOSERESET/OUTA")
#! Field("BL04I-RS-RDMON-01:MANDOSERESET.OUTT",16777215,1,"BL04I-RS-RDMON-01:MANDOSERESET.OUTT")
#! Link("BL04I-RS-RDMON-01:MANDOSERESET.OUTT","BL04I-RS-RDMON-01:MANRESETTIME.VAL")
#! Connector("BL04I-RS-RDMON-01:MANDOSERESET/OUTA","BL04I-RS-RDMON-01:PRSMANDOSE.VAL",1240,2570,16777215,"",0)
#! Record("BL04I-RS-RDMON-01:MANRESETTIME",1580,2495,0,0,"BL04I-RS-RDMON-01:MANRESETTIME")
#! Field("BL04I-RS-RDMON-01:MANRESETTIME.VAL",16777215,0,"BL04I-RS-RDMON-01:MANRESETTIME.VAL")
#! Record("BL04I-RS-RDMON-01:PRVWEEKDOSE",1880,2740,0,0,"BL04I-RS-RDMON-01:PRVWEEKDOSE")
#! Field("BL04I-RS-RDMON-01:PRVWEEKDOSE.VAL",16777215,0,"BL04I-RS-RDMON-01:PRVWEEKDOSE.VAL")
#! Record("BL04I-RS-RDMON-01:PRSWEEKDOSE",1260,2763,0,0,"BL04I-RS-RDMON-01:PRSWEEKDOSE")
#! Field("BL04I-RS-RDMON-01:PRSWEEKDOSE.FLNK",16777215,1,"BL04I-RS-RDMON-01:PRSWEEKDOSE.FLNK")
#! Link("BL04I-RS-RDMON-01:PRSWEEKDOSE.FLNK","BL04I-RS-RDMON-01:CHECKWEEKEND")
#! Field("BL04I-RS-RDMON-01:PRSWEEKDOSE.INPA",16777215,0,"BL04I-RS-RDMON-01:PRSWEEKDOSE.INPA")
#! Link("BL04I-RS-RDMON-01:PRSWEEKDOSE.INPA","BL04I-RS-RDMON-01:PRSWEEKDOSE.VAL")
#! Field("BL04I-RS-RDMON-01:PRSWEEKDOSE.VAL",16777215,1,"BL04I-RS-RDMON-01:PRSWEEKDOSE.VAL")
#! Field("BL04I-RS-RDMON-01:PRSWEEKDOSE.INPB",16777215,1,"BL04I-RS-RDMON-01:PRSWEEKDOSE.INPB")
#! Link("BL04I-RS-RDMON-01:PRSWEEKDOSE.INPB","BL04I-RS-RDMON-01:RATE.VAL")
#! Record("BL04I-RS-RDMON-01:CHECKWEEKEND",1580,2645,0,0,"BL04I-RS-RDMON-01:CHECKWEEKEND")
#! Field("BL04I-RS-RDMON-01:CHECKWEEKEND.FLNK",16777215,1,"BL04I-RS-RDMON-01:CHECKWEEKEND.FLNK")
#! Link("BL04I-RS-RDMON-01:CHECKWEEKEND.FLNK","BL04I-RS-RDMON-01:RUNMODE")
#! Field("BL04I-RS-RDMON-01:CHECKWEEKEND.INPB",16777215,1,"BL04I-RS-RDMON-01:CHECKWEEKEND.INPB")
#! Link("BL04I-RS-RDMON-01:CHECKWEEKEND.INPB","BL04I-RS-RDMON-01:PRVWEEKDOSE.VAL")
#! Field("BL04I-RS-RDMON-01:CHECKWEEKEND.OUTB",16777215,1,"BL04I-RS-RDMON-01:CHECKWEEKEND.OUTB")
#! Link("BL04I-RS-RDMON-01:CHECKWEEKEND.OUTB","BL04I-RS-RDMON-01:PRVWEEKDOSE.VAL")
#! Field("BL04I-RS-RDMON-01:CHECKWEEKEND.OUTT",16777215,1,"BL04I-RS-RDMON-01:CHECKWEEKEND.OUTT")
#! Link("BL04I-RS-RDMON-01:CHECKWEEKEND.OUTT","BL04I-RS-RDMON-01:NEXTWEEKENDTIME.VAL")
#! Field("BL04I-RS-RDMON-01:CHECKWEEKEND.INPA",16777215,0,"BL04I-RS-RDMON-01:CHECKWEEKEND.INPA")
#! Link("BL04I-RS-RDMON-01:CHECKWEEKEND.INPA","BL04I-RS-RDMON-01:PRSWEEKDOSE.VAL")
#! Field("BL04I-RS-RDMON-01:CHECKWEEKEND.OUTA",16777215,0,"BL04I-RS-RDMON-01:CHECKWEEKEND.OUTA")
#! Link("BL04I-RS-RDMON-01:CHECKWEEKEND.OUTA","BL04I-RS-RDMON-01:PRSWEEKDOSE.VAL")
#! Record("BL04I-RS-RDMON-01:NEXTWEEKENDTIME",1880,2889,0,0,"BL04I-RS-RDMON-01:NEXTWEEKENDTIME")
#! Field("BL04I-RS-RDMON-01:NEXTWEEKENDTIME.VAL",16777215,0,"BL04I-RS-RDMON-01:NEXTWEEKENDTIME.VAL")
#! Record("BL04I-RS-RDMON-01:RUNMODE",1840,2483,0,0,"BL04I-RS-RDMON-01:RUNMODE")
#! Field("BL04I-RS-RDMON-01:RUNMODE.OUT",16777215,1,"BL04I-RS-RDMON-01:RUNMODE.OUT")
#! Link("BL04I-RS-RDMON-01:RUNMODE.OUT","BL04I-RS-RDMON-01:RUNENDRESET.PROC")
#! Field("BL04I-RS-RDMON-01:RUNMODE.INPA",16777215,1,"BL04I-RS-RDMON-01:RUNMODE.INPA")
#! Field("BL04I-RS-RDMON-01:RUNMODE.FLNK",16777215,1,"BL04I-RS-RDMON-01:RUNMODE.FLNK")
#! Link("BL04I-RS-RDMON-01:RUNMODE.FLNK","BL04I-RS-RDMON-01:PRSRUNDOSE")
#! Record("BL04I-RS-RDMON-01:PRVRUNDOSE",2440,2826,0,0,"BL04I-RS-RDMON-01:PRVRUNDOSE")
#! Field("BL04I-RS-RDMON-01:PRVRUNDOSE.VAL",16777215,1,"BL04I-RS-RDMON-01:PRVRUNDOSE.VAL")
#! Record("BL04I-RS-RDMON-01:PRSRUNDOSE",2120,2778,0,0,"BL04I-RS-RDMON-01:PRSRUNDOSE")
#! Field("BL04I-RS-RDMON-01:PRSRUNDOSE.INPA",16777215,0,"BL04I-RS-RDMON-01:PRSRUNDOSE.INPA")
#! Link("BL04I-RS-RDMON-01:PRSRUNDOSE.INPA","BL04I-RS-RDMON-01:PRSRUNDOSE.VAL")
#! Field("BL04I-RS-RDMON-01:PRSRUNDOSE.VAL",16777215,1,"BL04I-RS-RDMON-01:PRSRUNDOSE.VAL")
#! Field("BL04I-RS-RDMON-01:PRSRUNDOSE.INPB",16777215,1,"BL04I-RS-RDMON-01:PRSRUNDOSE.INPB")
#! Link("BL04I-RS-RDMON-01:PRSRUNDOSE.INPB","BL04I-RS-RDMON-01:RATE.VAL")
#! Record("BL04I-RS-RDMON-01:RUNENDRESET",2420,2493,0,0,"BL04I-RS-RDMON-01:RUNENDRESET")
#! Field("BL04I-RS-RDMON-01:RUNENDRESET.PROC",16777215,0,"BL04I-RS-RDMON-01:RUNENDRESET.PROC")
#! Field("BL04I-RS-RDMON-01:RUNENDRESET.INPB",16777215,1,"BL04I-RS-RDMON-01:RUNENDRESET.INPB")
#! Link("BL04I-RS-RDMON-01:RUNENDRESET.INPB","BL04I-RS-RDMON-01:PRVRUNDOSE.VAL")
#! Field("BL04I-RS-RDMON-01:RUNENDRESET.OUTB",16777215,1,"BL04I-RS-RDMON-01:RUNENDRESET.OUTB")
#! Link("BL04I-RS-RDMON-01:RUNENDRESET.OUTB","BL04I-RS-RDMON-01:PRVRUNDOSE.VAL")
#! Field("BL04I-RS-RDMON-01:RUNENDRESET.OUTT",16777215,0,"BL04I-RS-RDMON-01:RUNENDRESET.OUTT")
#! Link("BL04I-RS-RDMON-01:RUNENDRESET.OUTT","BL04I-RS-RDMON-01:LASTRUNENDTIME.VAL")
#! Field("BL04I-RS-RDMON-01:RUNENDRESET.INPA",16777215,0,"BL04I-RS-RDMON-01:RUNENDRESET.INPA")
#! Link("BL04I-RS-RDMON-01:RUNENDRESET.INPA","BL04I-RS-RDMON-01:PRSRUNDOSE.VAL")
#! Field("BL04I-RS-RDMON-01:RUNENDRESET.OUTA",16777215,0,"BL04I-RS-RDMON-01:RUNENDRESET.OUTA")
#! Link("BL04I-RS-RDMON-01:RUNENDRESET.OUTA","BL04I-RS-RDMON-01:PRSRUNDOSE.VAL")
#! Record("BL04I-RS-RDMON-01:LASTRUNENDTIME",2160,2655,0,0,"BL04I-RS-RDMON-01:LASTRUNENDTIME")
#! Field("BL04I-RS-RDMON-01:LASTRUNENDTIME.VAL",16777215,0,"BL04I-RS-RDMON-01:LASTRUNENDTIME.VAL")
#! TextBox(TB0,460,1640,740,1680,0,"Dialog",18,1,16777215,"Commands sent to the monitor",null)
#! Record("BL04I-RS-RDMON-01:COM:COUNT",1320,2206,0,0,"BL04I-RS-RDMON-01:COM:COUNT")
#! Field("BL04I-RS-RDMON-01:COM:COUNT.FLNK",16777215,1,"BL04I-RS-RDMON-01:COM:COUNT.FLNK")
#! Link("BL04I-RS-RDMON-01:COM:COUNT.FLNK","BL04I-RS-RDMON-01:COMSTA")
#! Field("BL04I-RS-RDMON-01:COM:COUNT.INPA",16777215,0,"BL04I-RS-RDMON-01:COM:COUNT.INPA")
#! Link("BL04I-RS-RDMON-01:COM:COUNT.INPA","BL04I-RS-RDMON-01:COM:COUNT.VAL")
#! Field("BL04I-RS-RDMON-01:COM:COUNT.VAL",16777215,1,"BL04I-RS-RDMON-01:COM:COUNT.VAL")
#! Record("BL04I-RS-RDMON-01:COMSTA",1600,2183,0,0,"BL04I-RS-RDMON-01:COMSTA")
#! Field("BL04I-RS-RDMON-01:COMSTA.FLNK",16777215,1,"BL04I-RS-RDMON-01:COMSTA.FLNK")
#! Link("BL04I-RS-RDMON-01:COMSTA.FLNK","BL04I-RS-RDMON-01:CHECK:DIS")
#! Field("BL04I-RS-RDMON-01:COMSTA.INPA",16777215,0,"BL04I-RS-RDMON-01:COMSTA.INPA")
#! Link("BL04I-RS-RDMON-01:COMSTA.INPA","BL04I-RS-RDMON-01:COM:COUNT.VAL")
#! Field("BL04I-RS-RDMON-01:COMSTA.VAL",16777215,1,"BL04I-RS-RDMON-01:COMSTA.VAL")
#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBD("/dls_sw/epics/R3.14.12.7/base/dbd/base.dbd")
#! DBDEND


# cmsIon_CheckReset.template
# Template database for an LIS CMS-ION radiation monitor
#
# substitutions:
#% macro, device, Radiation Monitor Device Name
#% macro, evr,    IOCs EVR Device Name
################################################################################
record(aSub, "BL04I-RS-RDMON-01:RESET:CHECK") {
  field(DESC, "Check reset done in last 4 hrs.")
  field(SCAN, "5 second")
  field(EFLG, "ALWAYS")
  field(SNAM, "Check4hrReset")
  field(INAM, "ResetTime")
  field(SDIS, "BL04I-RS-RDMON-01:CHECK:DIS")
  field(INPR, "BL04I-RS-RDMON-01:RESETTIM")
  field(FTR,  "STRING")
  field(INPT, "BL04I-RS-RDMON-01:TIM")
  field(FTT,  "STRING")
  field(INPD, "BL04I-RS-RDMON-01:DOSE")
  field(INPE, "BL04I-VA-EVR-01:CMS:RESET:TS")
  field(FTE,  "STRING")
  field(INPF, "BL04I-RS-RDMON-01:EVRRESETTIME")
  field(FTF,  "STRING")
  field(INPG, "BL04I-VA-EVR-01:CMS:INPUT:TS")
  field(FTG,  "STRING")
  field(INPH, "BL04I-RS-RDMON-01:EVRINPUTTIME")
  field(FTH,  "STRING")
  field(INPM, "BL04I-RS-RDMON-01:CLEAR:RESET")
  field(FTM,  "ENUM")
  field(OUTR, "BL04I-RS-RDMON-01:RESET:OK PP")
  field(FTVR, "ENUM")
  field(OUTM, "BL04I-RS-RDMON-01:CLEAR:RESET PP")
  field(FTVM, "ENUM")
  field(FTVS, "ULONG")
  field(OUTT, "BL04I-RS-RDMON-01:EVRRESETTIME PP")
  field(FTVT, "STRING")
  field(OUTU, "BL04I-RS-RDMON-01:EVRINPUTTIME PP")
  field(FTVU, "STRING")
}

#% archiver 1000 Monitor
record(bi, "BL04I-RS-RDMON-01:RESET:OK") {
  field(DESC, "Status of 4hr reset.")
  field(ZNAM, "Reset Failed")
  field(ZSV, "MAJOR")
  field(ONAM, "Reset OK")
  field(OSV, "NO_ALARM")
}

# Force RESET:OK to 1 in case aSub gets confused.
record(bi, "BL04I-RS-RDMON-01:CLEAR:RESET") {
  field(DESC, "Force RESET state to OK.")
  field(ZNAM, "Reset Failed")
  field(ONAM, "Reset OK")
}

# Truncated copy of HW reset time for display.
#% autosave 0 VAL
record(stringin, "BL04I-RS-RDMON-01:EVRRESETTIME") {
  field(DESC, "HW reset time from EVR event.")
}

# Truncated copy of HW reset time for display.
#% autosave 0 VAL
record(stringin, "BL04I-RS-RDMON-01:EVRINPUTTIME") {
  field(DESC, "HW reset time fed back to EVR input.")
}

# Dose at reset time.
#% autosave 0 VAL
#% archiver 1000 Monitor
record(ai, "BL04I-RS-RDMON-01:PRV4HRDOSE") {
  field(DESC, "Dose at end of last HW reset period.")
  field(INP, "BL04I-RS-RDMON-01:RESET:CHECK.VALO CA")
  field(PREC, "3")
  field(EGU, "uSv")
  field(SCAN, "Event")
  field(EVNT, "118")
  field(TSE,  "118")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.1)
#! Record("BL04I-RS-RDMON-01:RESET:CHECK",20,24,0,0,"BL04I-RS-RDMON-01:RESET:CHECK")
#! Field("BL04I-RS-RDMON-01:RESET:CHECK.SDIS",16777215,1,"BL04I-RS-RDMON-01:RESET:CHECK.SDIS")
#! Field("BL04I-RS-RDMON-01:RESET:CHECK.INPR",16777215,1,"BL04I-RS-RDMON-01:RESET:CHECK.INPR")
#! Field("BL04I-RS-RDMON-01:RESET:CHECK.INPT",16777215,1,"BL04I-RS-RDMON-01:RESET:CHECK.INPT")
#! Field("BL04I-RS-RDMON-01:RESET:CHECK.INPD",16777215,1,"BL04I-RS-RDMON-01:RESET:CHECK.INPD")
#! Field("BL04I-RS-RDMON-01:RESET:CHECK.INPE",16777215,1,"BL04I-RS-RDMON-01:RESET:CHECK.INPE")
#! Field("BL04I-RS-RDMON-01:RESET:CHECK.INPF",16777215,1,"BL04I-RS-RDMON-01:RESET:CHECK.INPF")
#! Link("BL04I-RS-RDMON-01:RESET:CHECK.INPF","BL04I-RS-RDMON-01:EVRRESETTIME.VAL")
#! Field("BL04I-RS-RDMON-01:RESET:CHECK.OUTT",16777215,1,"BL04I-RS-RDMON-01:RESET:CHECK.OUTT")
#! Link("BL04I-RS-RDMON-01:RESET:CHECK.OUTT","BL04I-RS-RDMON-01:EVRRESETTIME.VAL")
#! Field("BL04I-RS-RDMON-01:RESET:CHECK.OUTR",16777215,1,"BL04I-RS-RDMON-01:RESET:CHECK.OUTR")
#! Link("BL04I-RS-RDMON-01:RESET:CHECK.OUTR","BL04I-RS-RDMON-01:RESET:OK.VAL")
#! Field("BL04I-RS-RDMON-01:RESET:CHECK.VALO",16777215,1,"BL04I-RS-RDMON-01:RESET:CHECK.VALO")
#! Record("BL04I-RS-RDMON-01:RESET:OK",380,154,0,0,"BL04I-RS-RDMON-01:RESET:OK")
#! Field("BL04I-RS-RDMON-01:RESET:OK.VAL",16777215,0,"BL04I-RS-RDMON-01:RESET:OK.VAL")
#! Record("BL04I-RS-RDMON-01:EVRRESETTIME",320,50,0,0,"BL04I-RS-RDMON-01:EVRRESETTIME")
#! Field("BL04I-RS-RDMON-01:EVRRESETTIME.VAL",16777215,0,"BL04I-RS-RDMON-01:EVRRESETTIME.VAL")
#! Record("BL04I-RS-RDMON-01:PRV4HRDOSE",380,380,0,0,"BL04I-RS-RDMON-01:PRV4HRDOSE")
#! Field("BL04I-RS-RDMON-01:PRV4HRDOSE.INP",16777215,0,"BL04I-RS-RDMON-01:PRV4HRDOSE.INP")
#! Link("BL04I-RS-RDMON-01:PRV4HRDOSE.INP","BL04I-RS-RDMON-01:RESET:CHECK.VALO")
# vacuumValveGroup.template
#% macro, __doc__, Template database for a group of up to 8 vacuum valves
# Pete Owens - 3/5/05
#
# substitutions:
#% macro, device, device name
#% macro, delay, delay between opening valves
#% macro, valve1, Valve 1 device name
#% macro, valve2, Valve 2 device name
#% macro, valve3, Valve 3 device name
#% macro, valve4, Valve 4 device name
#% macro, valve5, Valve 5 device name
#% macro, valve6, Valve 6 device name
#% macro, valve7, Valve 7 device name
#% macro, valve8, Valve 8 device name

################################################################################
# Control
#
record(mbbo, "BL04I-VA-GVALV-98:CON")
{
    field(DESC, "Control")
    field(FLNK, "BL04I-VA-GVALV-98:CON1")
    field(ZRST, "Open")
    field(ONST, "Close")
    field(TWST, "Reset")
}
record(bi,"BL04I-VA-GVALV-98:OPENING")
{
    field(DESC, "Opening Valves")
    field(PINI, "YES")
    field(INP,  "0")
    field(ZNAM, "")
    field(ONAM, "Opening")
}
record(calc,"BL04I-VA-GVALV-98:CON0")
{
    field(DESC, "CON + 1")
    field(CALC, "A+1")
    field(INPA, "BL04I-VA-GVALV-98:CON")
}
record(seq, "BL04I-VA-GVALV-98:CON1")
{
    field(DESC, "Control Valves")
    field(SELM, "Specified")
    field(SELL, "BL04I-VA-GVALV-98:CON0 PP")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-GVALV-98:SEQOPEN  PP")
    field(LNK2, "BL04I-VA-GVALV-98:SEQCLOSE PP")
    field(LNK3, "BL04I-VA-GVALV-98:SEQRESET PP")
}
record(seq, "BL04I-VA-GVALV-98:SEQOPEN")
{
    field(DESC, "Open Valves")
    field(SELM, "All")
    field(DOL1, "1")
    field(DOL2, "BL04I-VA-GVALV-98:CON")
    field(DOL3, "BL04I-VA-GVALV-98:CON")
    field(DOL4, "BL04I-VA-GVALV-98:CON")
    field(DOL5, "BL04I-VA-GVALV-98:CON")
    field(DOL6, "BL04I-VA-GVALV-98:CON")
    field(DOL7, "BL04I-VA-GVALV-98:CON")
    field(DOL8, "BL04I-VA-GVALV-98:CON")
    field(DOL9, "BL04I-VA-GVALV-98:CON")
    field(DOLA, "0")
    field(DLY1, "0")
    field(DLY2, "0")
    field(DLY3, "10")
    field(DLY4, "10")
    field(DLY5, "10")
    field(DLY6, "10")
    field(DLY7, "10")
    field(DLY8, "10")
    field(DLY9, "10")
    field(DLYA, "0")
    field(LNK1, "BL04I-VA-GVALV-98:OPENING PP")
    field(LNK2, "FE02I-VA-VALVE-02:CON CA")
    field(LNK3, "BL04I-VA-VALVE-11:CON CA")
    field(LNK4, "BL04I-VA-VALVE-01:CON CA")
    field(LNK5, "BL04I-VA-VALVE-02:CON CA")
    field(LNK6, "BL04I-VA-VALVE-02:CON CA")
    field(LNK7, "BL04I-VA-VALVE-02:CON CA")
    field(LNK8, "BL04I-VA-VALVE-02:CON CA")
    field(LNK9, "BL04I-VA-VALVE-02:CON CA")
    field(LNKA, "BL04I-VA-GVALV-98:OPENING PP")
}
record(seq, "BL04I-VA-GVALV-98:SEQCLOSE")
{
    field(DESC, "Close Valves")
    field(SELM, "All")
    field(DOL1, "1")
    field(DOL2, "1")
    field(DOL3, "1")
    field(DOL4, "1")
    field(DOL5, "1")
    field(DOL6, "1")
    field(DOL7, "1")
    field(DOL8, "1")
    field(LNK1, "FE02I-VA-VALVE-02:CON CA")
    field(LNK2, "BL04I-VA-VALVE-11:CON CA")
    field(LNK3, "BL04I-VA-VALVE-01:CON CA")
    field(LNK4, "BL04I-VA-VALVE-02:CON CA")
    field(LNK5, "BL04I-VA-VALVE-02:CON CA")
    field(LNK6, "BL04I-VA-VALVE-02:CON CA")
    field(LNK7, "BL04I-VA-VALVE-02:CON CA")
    field(LNK8, "BL04I-VA-VALVE-02:CON CA")
    field(DLY2, "10")
    field(DLY3, "10")
    field(DLY4, "10")
    field(DLY5, "10")
    field(DLY6, "10")
    field(DLY7, "10")
    field(DLY8, "10")
}
record(seq, "BL04I-VA-GVALV-98:SEQRESET")
{
    field(DESC, "Reset Valves")
    field(SELM, "All")
    field(DOL1, "2")
    field(DOL2, "2")
    field(DOL3, "2")
    field(DOL4, "2")
    field(DOL5, "2")
    field(DOL6, "2")
    field(DOL7, "2")
    field(DOL8, "2")
    field(LNK1, "FE02I-VA-VALVE-02:CON CA")
    field(LNK2, "BL04I-VA-VALVE-11:CON CA")
    field(LNK3, "BL04I-VA-VALVE-01:CON CA")
    field(LNK4, "BL04I-VA-VALVE-02:CON CA")
    field(LNK5, "BL04I-VA-VALVE-02:CON CA")
    field(LNK6, "BL04I-VA-VALVE-02:CON CA")
    field(LNK7, "BL04I-VA-VALVE-02:CON CA")
    field(LNK8, "BL04I-VA-VALVE-02:CON CA")
}

record(mbbi, "BL04I-VA-GVALV-98:LASTCON")
{
    field(DESC, "Control Readback")
    field(INP, "FE02I-VA-VALVE-02:LASTCON")
    field(SCAN, "1 second")
    field(ZRST, "Open")
    field(ONST, "Close")
    field(TWST, "Reset")
}

################################################################################
# Interlock Status
#
record(mbbi, "BL04I-VA-GVALV-98:ILKSTA")
{
    field(DESC, "Interlock Status")
    field(INP,  "BL04I-VA-GVALV-98:SELILKSTA MS PP")
    field(SCAN, "1 second")
    field(ZRST, "Failed")
    field(ONST, "Run Ilks OK")
    field(TWST, "OK")
    field(THST, "Disarmed")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
}
record(sel, "BL04I-VA-GVALV-98:SELILKSTA") 
{
    field(SELM, "Low Signal")
    field(INPA, "FE02I-VA-VALVE-02:ILKSTA MS")
    field(INPB, "BL04I-VA-VALVE-11:ILKSTA MS")
    field(INPC, "BL04I-VA-VALVE-01:ILKSTA MS")
    field(INPD, "BL04I-VA-VALVE-02:ILKSTA MS")
    field(INPE, "BL04I-VA-VALVE-02:ILKSTA MS")
    field(INPF, "BL04I-VA-VALVE-02:ILKSTA MS")
    field(INPG, "BL04I-VA-VALVE-02:ILKSTA MS")
    field(INPH, "BL04I-VA-VALVE-02:ILKSTA MS")
}
################################################################################
# Status
#
record(mbbi, "BL04I-VA-GVALV-98:STA")
{
    field(DESC, "Status")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-GVALV-98:CALSTA PP MS")
    field(ZRST, "Fault")
    field(ONST, "Open")
    field(TWST, "Opening")
    field(THST, "Closed")
    field(FRST, "Closing")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "NO_ALARM")
}
record(calc, "BL04I-VA-GVALV-98:CALSTA")
{
    field(DESC, "Calculate Status")
    field(CALC, "A<C?A:(B>C?(B>D?A:B):C)")
    field(INPA, "BL04I-VA-GVALV-98:MINSTA PP MS")
    field(INPB, "BL04I-VA-GVALV-98:MAXSTA PP MS")
    field(INPC, "1")
    field(INPD, "4")
}
record(sel, "BL04I-VA-GVALV-98:MINSTA") 
{
    field(SELM, "Low Signal")
    field(INPA, "FE02I-VA-VALVE-02:STA MS")
    field(INPB, "BL04I-VA-VALVE-11:STA MS")
    field(INPC, "BL04I-VA-VALVE-01:STA MS")
    field(INPD, "BL04I-VA-VALVE-02:STA MS")
    field(INPE, "BL04I-VA-VALVE-02:STA MS")
    field(INPF, "BL04I-VA-VALVE-02:STA MS")
    field(INPG, "BL04I-VA-VALVE-02:STA MS")
    field(INPH, "BL04I-VA-VALVE-02:STA MS")
}
record(sel, "BL04I-VA-GVALV-98:MAXSTA") 
{
    field(SELM, "High Signal")
    field(INPA, "FE02I-VA-VALVE-02:STA MS")
    field(INPB, "BL04I-VA-VALVE-11:STA MS")
    field(INPC, "BL04I-VA-VALVE-01:STA MS")
    field(INPD, "BL04I-VA-VALVE-02:STA MS")
    field(INPE, "BL04I-VA-VALVE-02:STA MS")
    field(INPF, "BL04I-VA-VALVE-02:STA MS")
    field(INPG, "BL04I-VA-VALVE-02:STA MS")
    field(INPH, "BL04I-VA-VALVE-02:STA MS")
}
################################################################################
# Number of Operations
#
record(longin, "BL04I-VA-GVALV-98:OPS")
{
    field(DESC, "Operations")
    field(INP,  "BL04I-VA-GVALV-98:SELOPS MS PP")
    field(SCAN, "1 second")
    field(HOPR, "10000")
    field(LOPR, "0")
    field(HIHI, "10000")
    field(HIGH, "9000")
    field(LOW,  "0")
    field(LOLO, "-1")
    field(HHSV, "MAJOR")
    field(HSV,  "MINOR")
    field(LSV,  "MINOR")
    field(LLSV, "MAJOR")
}
record(sel, "BL04I-VA-GVALV-98:SELOPS") 
{
    field(SELM, "High Signal")
    field(INPA, "FE02I-VA-VALVE-02:OPS MS")
    field(INPB, "BL04I-VA-VALVE-11:OPS MS")
    field(INPC, "BL04I-VA-VALVE-01:OPS MS")
    field(INPD, "BL04I-VA-VALVE-02:OPS MS")
    field(INPE, "BL04I-VA-VALVE-02:OPS MS")
    field(INPF, "BL04I-VA-VALVE-02:OPS MS")
    field(INPG, "BL04I-VA-VALVE-02:OPS MS")
    field(INPH, "BL04I-VA-VALVE-02:OPS MS")
}
################################################################################
# Operational/Service Mode
#
record(bi, "BL04I-VA-GVALV-98:MODE")
{
    field(DESC, "Mode")
    field(INP,  "BL04I-VA-GVALV-98:SELMODE MS PP")
    field(SCAN, "1 second")
    field(ZNAM, "Operational")
    field(ONAM, "Service")
}
record(sel, "BL04I-VA-GVALV-98:SELMODE") 
{
    field(SELM, "High Signal")
    field(INPA, "FE02I-VA-VALVE-02:MODE MS")
    field(INPB, "BL04I-VA-VALVE-11:MODE MS")
    field(INPC, "BL04I-VA-VALVE-01:MODE MS")
    field(INPD, "BL04I-VA-VALVE-02:MODE MS")
    field(INPE, "BL04I-VA-VALVE-02:MODE MS")
    field(INPF, "BL04I-VA-VALVE-02:MODE MS")
    field(INPG, "BL04I-VA-VALVE-02:MODE MS")
    field(INPH, "BL04I-VA-VALVE-02:MODE MS")
}

#
# Raw Air Pressure Status, not debounced
#
record(bi,"BL04I-VA-GVALV-98:RAWAIRSTA") 
{
    field(DESC,"Raw Air Pressure Status")
    field(INP,"BL04I-VA-GVALV-98:SELRAWAIRSTA MS PP")
    field(SCAN,"1 second")
    field(PHAS,"1")
	field(ZNAM, "Low")
  	field(ONAM, "Good")
}
record(sel, "BL04I-VA-GVALV-98:SELRAWAIRSTA") 
{
    field(SELM, "High Signal")
    field(INPA, "FE02I-VA-VALVE-02:RAWAIRSTA MS")
    field(INPB, "BL04I-VA-VALVE-11:RAWAIRSTA MS")
    field(INPC, "BL04I-VA-VALVE-01:RAWAIRSTA MS")
    field(INPD, "BL04I-VA-VALVE-02:RAWAIRSTA MS")
    field(INPE, "BL04I-VA-VALVE-02:RAWAIRSTA MS")
    field(INPF, "BL04I-VA-VALVE-02:RAWAIRSTA MS")
    field(INPG, "BL04I-VA-VALVE-02:RAWAIRSTA MS")
    field(INPH, "BL04I-VA-VALVE-02:RAWAIRSTA MS")
}

#
# SR Valve Controller
#
record(bi,"BL04I-VA-GVALV-98:SRVC") 
{
    field(DESC,"SR Valve Controller")
    field(INP,"BL04I-VA-GVALV-98:SELSRVC MS PP")
    field(SCAN,"1 second")
    field(ZNAM,"No")
    field(ONAM,"Yes")
}
record(sel, "BL04I-VA-GVALV-98:SELSRVC") 
{
    field(SELM, "High Signal")
    field(INPA, "FE02I-VA-VALVE-02:SRVC MS")
    field(INPB, "BL04I-VA-VALVE-11:SRVC MS")
    field(INPC, "BL04I-VA-VALVE-01:SRVC MS")
    field(INPD, "BL04I-VA-VALVE-02:SRVC MS")
    field(INPE, "BL04I-VA-VALVE-02:SRVC MS")
    field(INPF, "BL04I-VA-VALVE-02:SRVC MS")
    field(INPG, "BL04I-VA-VALVE-02:SRVC MS")
    field(INPH, "BL04I-VA-VALVE-02:SRVC MS")
}
################################################################################
# Air Pressure De-bounce Time
#
record(ao,"BL04I-VA-GVALV-98:SETADB") 
{
    field(DESC, "De-bounce Time")
    field(FLNK, "BL04I-VA-GVALV-98:SEQADB PP") 
    field(EGU,  "s")
    field(PREC, "1")
    field(DOL , "10.0")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GVALV-98:SEQADB")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GVALV-98:SETADB")
    field(DOL2, "BL04I-VA-GVALV-98:SETADB")
    field(DOL3, "BL04I-VA-GVALV-98:SETADB")
    field(DOL4, "BL04I-VA-GVALV-98:SETADB")
    field(DOL5, "BL04I-VA-GVALV-98:SETADB")
    field(DOL6, "BL04I-VA-GVALV-98:SETADB")
    field(DOL7, "BL04I-VA-GVALV-98:SETADB")
    field(DOL8, "BL04I-VA-GVALV-98:SETADB")
    field(LNK1, "FE02I-VA-VALVE-02:SETADB CA")
    field(LNK2, "BL04I-VA-VALVE-11:SETADB CA")
    field(LNK3, "BL04I-VA-VALVE-01:SETADB CA")
    field(LNK4, "BL04I-VA-VALVE-02:SETADB CA")
    field(LNK5, "BL04I-VA-VALVE-02:SETADB CA")
    field(LNK6, "BL04I-VA-VALVE-02:SETADB CA")
    field(LNK7, "BL04I-VA-VALVE-02:SETADB CA")
    field(LNK8, "BL04I-VA-VALVE-02:SETADB CA")
}
record(ai,"BL04I-VA-GVALV-98:ADB") 
{
    field(DESC, "De-bounce Time")
    field(INP,  "BL04I-VA-GVALV-98:SELADB MS PP")
    field(EGU,  "s")
    field(PREC, "1")
    field(SCAN, "1 second")
}
record(sel, "BL04I-VA-GVALV-98:SELADB") 
{
    field(SELM, "Low Signal")
    field(INPA, "FE02I-VA-VALVE-02:ADB MS")
    field(INPB, "BL04I-VA-VALVE-11:ADB MS")
    field(INPC, "BL04I-VA-VALVE-01:ADB MS")
    field(INPD, "BL04I-VA-VALVE-02:ADB MS")
    field(INPE, "BL04I-VA-VALVE-02:ADB MS")
    field(INPF, "BL04I-VA-VALVE-02:ADB MS")
    field(INPG, "BL04I-VA-VALVE-02:ADB MS")
    field(INPH, "BL04I-VA-VALVE-02:ADB MS")
}
################################################################################
# Interlocks
#
record(mbbiDirect, "BL04I-VA-GVALV-98:ILK")
{
    field(DESC, "Latched Interlocks")
    field(INP,  "BL04I-VA-GVALV-98:CALILK PP")
    field(SCAN, "1 second")
}
record(calc, "BL04I-VA-GVALV-98:CALILK")
{
    field(CALC, "A|B|C|D|E|F|G|H")
    field(INPA, "FE02I-VA-VALVE-02:ILK")
    field(INPB, "BL04I-VA-VALVE-11:ILK")
    field(INPC, "BL04I-VA-VALVE-01:ILK")
    field(INPD, "BL04I-VA-VALVE-02:ILK")
    field(INPE, "BL04I-VA-VALVE-02:ILK")
    field(INPF, "BL04I-VA-VALVE-02:ILK")
    field(INPG, "BL04I-VA-VALVE-02:ILK") 
    field(INPH, "BL04I-VA-VALVE-02:ILK")
}

record(mbbiDirect, "BL04I-VA-GVALV-98:INIILK")
{
    field(DESC, "Raw Interlock Status")
    field(INP,  "BL04I-VA-GVALV-98:CALINIILK PP")
    field(SCAN, "1 second")
}
record(calc, "BL04I-VA-GVALV-98:CALINIILK")
{
    field(CALC, "A|B|C|D|E|F|G|H")
    field(INPA, "FE02I-VA-VALVE-02:INIILK")
    field(INPB, "BL04I-VA-VALVE-11:INIILK")
    field(INPC, "BL04I-VA-VALVE-01:INIILK")
    field(INPD, "BL04I-VA-VALVE-02:INIILK")
    field(INPE, "BL04I-VA-VALVE-02:INIILK")
    field(INPF, "BL04I-VA-VALVE-02:INIILK")
    field(INPG, "BL04I-VA-VALVE-02:INIILK") 
    field(INPH, "BL04I-VA-VALVE-02:INIILK")
}

record(mbbiDirect, "BL04I-VA-GVALV-98:RAWILK")
{
    field(DESC, "Raw Interlock Status")
    field(INP,  "BL04I-VA-GVALV-98:CALRAWILK PP")
    field(SCAN, "1 second")
}
record(calc, "BL04I-VA-GVALV-98:CALRAWILK")
{
    field(CALC, "A&B&C&D&E&F&G&H")
    field(INPA, "FE02I-VA-VALVE-02:RAWILK")
    field(INPB, "BL04I-VA-VALVE-11:RAWILK")
    field(INPC, "BL04I-VA-VALVE-01:RAWILK")
    field(INPD, "BL04I-VA-VALVE-02:RAWILK")
    field(INPE, "BL04I-VA-VALVE-02:RAWILK")
    field(INPF, "BL04I-VA-VALVE-02:RAWILK")
    field(INPG, "BL04I-VA-VALVE-02:RAWILK") 
    field(INPH, "BL04I-VA-VALVE-02:RAWILK")
}

record(mbbiDirect, "BL04I-VA-GVALV-98:GILK")
{
    field(DESC, "Gauge Interlock Status")
    field(INP,  "BL04I-VA-GVALV-98:CALGILK PP")
    field(SCAN, "1 second")
}
record(calc, "BL04I-VA-GVALV-98:CALGILK")
{
    field(CALC, "A|B|C|D|E|F|G|H")
    field(INPA, "FE02I-VA-VALVE-02:GILK")
    field(INPB, "BL04I-VA-VALVE-11:GILK")
    field(INPC, "BL04I-VA-VALVE-01:GILK")
    field(INPD, "BL04I-VA-VALVE-02:GILK")
    field(INPE, "BL04I-VA-VALVE-02:GILK")
    field(INPF, "BL04I-VA-VALVE-02:GILK")
    field(INPG, "BL04I-VA-VALVE-02:GILK") 
    field(INPH, "BL04I-VA-VALVE-02:GILK")
}

record(mbbiDirect, "BL04I-VA-GVALV-98:IMGILK")
{
    field(DESC, "IMG Interlock Status")
    field(INP,  "BL04I-VA-GVALV-98:CALIMGILK PP")
    field(SCAN, "1 second")
}
record(calc, "BL04I-VA-GVALV-98:CALIMGILK")
{
    field(CALC, "A&B&C&D&E&F&G&H")
    field(INPA, "FE02I-VA-VALVE-02:IMGILK")
    field(INPB, "BL04I-VA-VALVE-11:IMGILK")
    field(INPC, "BL04I-VA-VALVE-01:IMGILK")
    field(INPD, "BL04I-VA-VALVE-02:IMGILK")
    field(INPE, "BL04I-VA-VALVE-02:IMGILK")
    field(INPF, "BL04I-VA-VALVE-02:IMGILK")
    field(INPG, "BL04I-VA-VALVE-02:IMGILK") 
    field(INPH, "BL04I-VA-VALVE-02:IMGILK")
}

record(mbbiDirect, "BL04I-VA-GVALV-98:PIRGILK")
{
    field(DESC, "Pirani Interlock Status")
    field(INP,  "BL04I-VA-GVALV-98:CALPIRGILK PP")
    field(SCAN, "1 second")
}
record(calc, "BL04I-VA-GVALV-98:CALPIRGILK")
{
    field(CALC, "A&B&C&D&E&F&G&H")
    field(INPA, "FE02I-VA-VALVE-02:PIRGILK")
    field(INPB, "BL04I-VA-VALVE-11:PIRGILK")
    field(INPC, "BL04I-VA-VALVE-01:PIRGILK")
    field(INPD, "BL04I-VA-VALVE-02:PIRGILK")
    field(INPE, "BL04I-VA-VALVE-02:PIRGILK")
    field(INPF, "BL04I-VA-VALVE-02:PIRGILK")
    field(INPG, "BL04I-VA-VALVE-02:PIRGILK") 
    field(INPH, "BL04I-VA-VALVE-02:PIRGILK")
}

################################################################################
# Individual Interlocks
#
record(bi, "BL04I-VA-GVALV-98:ILK0")
{
    field(DESC, "Interlock 0")
    field(INP,  "BL04I-VA-GVALV-98:ILK.B0")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 0")
    field(ONAM, "Interlock 0")
}
record(bi, "BL04I-VA-GVALV-98:ILK1")
{
    field(DESC, "Interlock 1")
    field(INP,  "BL04I-VA-GVALV-98:ILK.B1")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 1")
    field(ONAM, "Interlock 1")
}

record(bi, "BL04I-VA-GVALV-98:ILK2")
{
    field(DESC, "Interlock 2")
    field(INP,  "BL04I-VA-GVALV-98:ILK.B2")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 2")
    field(ONAM, "Interlock 2")
}
record(bi, "BL04I-VA-GVALV-98:ILK3")
{
    field(DESC, "Interlock 3")
    field(INP,  "BL04I-VA-GVALV-98:ILK.B3")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 3")
    field(ONAM, "Interlock 3")
}
record(bi, "BL04I-VA-GVALV-98:ILK4")
{
    field(DESC, "Interlock 4")
    field(INP,  "BL04I-VA-GVALV-98:ILK.B4")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 4")
    field(ONAM, "Interlock 4")
}
record(bi, "BL04I-VA-GVALV-98:ILK5")
{
    field(DESC, "Interlock 5")
    field(INP,  "BL04I-VA-GVALV-98:ILK.B5")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 5")
    field(ONAM, "Interlock 5")
}
record(bi, "BL04I-VA-GVALV-98:ILK6")
{
    field(DESC, "Interlock 6")
    field(INP,  "BL04I-VA-GVALV-98:ILK.B6")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 6")
    field(ONAM, "Interlock 6")
}
record(bi, "BL04I-VA-GVALV-98:ILK7")
{
    field(DESC, "Interlock 7")
    field(INP,  "BL04I-VA-GVALV-98:ILK.B7")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 7")
    field(ONAM, "Interlock 7")
}
record(bi, "BL04I-VA-GVALV-98:ILK8")
{
    field(DESC, "Interlock 8")
    field(INP,  "BL04I-VA-GVALV-98:ILK.B8")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 8")
    field(ONAM, "Interlock 8")
}
record(bi, "BL04I-VA-GVALV-98:ILK9")
{
    field(DESC, "Interlock 9")
    field(INP,  "BL04I-VA-GVALV-98:ILK.B9")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 9")
    field(ONAM, "Interlock 9")
}
record(bi, "BL04I-VA-GVALV-98:ILK10")
{
    field(DESC, "Interlock 10")
    field(INP,  "BL04I-VA-GVALV-98:ILK.BA")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 10")
    field(ONAM, "Interlock 10")
}
record(bi, "BL04I-VA-GVALV-98:ILK11")
{
    field(DESC, "Interlock 11")
    field(INP,  "BL04I-VA-GVALV-98:ILK.BB")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 11")
    field(ONAM, "Interlock 11")
}
record(bi, "BL04I-VA-GVALV-98:ILK12")
{
    field(DESC, "Interlock 12")
    field(INP,  "BL04I-VA-GVALV-98:ILK.BC")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 12")
    field(ONAM, "Interlock 12")
}
record(bi, "BL04I-VA-GVALV-98:ILK13")
{
    field(DESC, "Interlock 13")
    field(INP,  "BL04I-VA-GVALV-98:ILK.BD")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 13")
    field(ONAM, "Interlock 13")
}
record(bi, "BL04I-VA-GVALV-98:ILK14")
{
    field(DESC, "Interlock 14")
    field(INP,  "BL04I-VA-GVALV-98:ILK.BE")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 14")
    field(ONAM, "Interlock 14")
}
record(bi, "BL04I-VA-GVALV-98:ILK15")
{
    field(DESC, "Interlock 15")
    field(INP,  "BL04I-VA-GVALV-98:ILK.BF")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 15")
    field(ONAM, "Interlock 15")
}
record(sel, "BL04I-VA-GVALV-98:TCLOSE")
{
    field(DESC, "Time to close")
    field(EGU,  "s")
    field(SELM, "High Signal")
    field(INPA, "FE02I-VA-VALVE-02:TCLOSE")
    field(INPB, "BL04I-VA-VALVE-11:TCLOSE")
    field(INPC, "BL04I-VA-VALVE-01:TCLOSE")
    field(INPD, "BL04I-VA-VALVE-02:TCLOSE")
    field(INPE, "BL04I-VA-VALVE-02:TCLOSE")
    field(INPF, "BL04I-VA-VALVE-02:TCLOSE")
    field(INPG, "BL04I-VA-VALVE-02:TCLOSE")
    field(INPH, "BL04I-VA-VALVE-02:TCLOSE")
    field(SCAN, "1 second")
    field(PREC, "1")
}

################################################################################
# Individual Gauge Interlocks
#
record(mbbiDirect, "BL04I-VA-GVALV-98:GAUGEILK")
{
  field(DESC, "Combined Gauge Interlock")
  field(INP,  "BL04I-VA-GVALV-98:CALGILK PP MS")
}
record(calc, "BL04I-VA-GVALV-98:CALGILK")
{
  field(CALC, "A&B")
  field(FLNK, "BL04I-VA-GVALV-98:GAUGEILK")
  field(INPA, "BL04I-VA-GVALV-98:IMGILK CP MS")
  field(INPB, "BL04I-VA-GVALV-98:PIRGILK CP MS")
}
record(bi, "BL04I-VA-GVALV-98:GILK0")
{
  field(DESC, "Gauge ILK 0")
  field(INP, "BL04I-VA-GVALV-98:GAUGEILK.B0 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 0")
  field(ONAM, "Gauge ILK 0")
}
record(bi, "BL04I-VA-GVALV-98:GILK1")
{
  field(DESC, "Gauge ILK 1")
  field(INP, "BL04I-VA-GVALV-98:GAUGEILK.B1 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 1")
  field(ONAM, "Gauge ILK 1")
}
record(bi, "BL04I-VA-GVALV-98:GILK2")
{
  field(DESC, "Gauge ILK 2")
  field(INP, "BL04I-VA-GVALV-98:GAUGEILK.B2 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 2")
  field(ONAM, "Gauge ILK 2")
}
record(bi, "BL04I-VA-GVALV-98:GILK3")
{
  field(DESC, "Gauge ILK 3")
  field(INP, "BL04I-VA-GVALV-98:GAUGEILK.B3 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 3")
  field(ONAM, "Gauge ILK 3")
}
record(bi, "BL04I-VA-GVALV-98:GILK4")
{
  field(DESC, "Gauge ILK 4")
  field(INP, "BL04I-VA-GVALV-98:GAUGEILK.B4 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 4")
  field(ONAM, "Gauge ILK 4")
}
record(bi, "BL04I-VA-GVALV-98:GILK5")
{
  field(DESC, "Gauge ILK 5")
  field(INP, "BL04I-VA-GVALV-98:GAUGEILK.B5 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 5")
  field(ONAM, "Gauge ILK 5")
}
record(bi, "BL04I-VA-GVALV-98:GILK6")
{
  field(DESC, "Gauge ILK 6")
  field(INP, "BL04I-VA-GVALV-98:GAUGEILK.B6 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 6")
  field(ONAM, "Gauge ILK 6")
}
record(bi, "BL04I-VA-GVALV-98:GILK7")
{
  field(DESC, "Gauge ILK 7")
  field(INP, "BL04I-VA-GVALV-98:GAUGEILK.B7 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 7")
  field(ONAM, "Gauge ILK 7")
}
record(bi, "BL04I-VA-GVALV-98:GILK8")
{
  field(DESC, "Gauge ILK 8")
  field(INP, "BL04I-VA-GVALV-98:GAUGEILK.B8 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 8")
  field(ONAM, "Gauge ILK 8")
}
record(bi, "BL04I-VA-GVALV-98:GILK9")
{
  field(DESC, "Gauge ILK 9")
  field(INP, "BL04I-VA-GVALV-98:GAUGEILK.B9 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 9")
  field(ONAM, "Gauge ILK 9")
}
record(bi, "BL04I-VA-GVALV-98:GILK10")
{
  field(DESC, "Gauge ILK 10")
  field(INP, "BL04I-VA-GVALV-98:GAUGEILK.BA CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 10")
  field(ONAM, "Gauge ILK 10")
}
record(bi, "BL04I-VA-GVALV-98:GILK11")
{
  field(DESC, "Gauge ILK 11")
  field(INP, "BL04I-VA-GVALV-98:GAUGEILK.BB CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 11")
  field(ONAM, "Gauge ILK 11")
}
record(bi, "BL04I-VA-GVALV-98:GILK12")
{
  field(DESC, "Gauge ILK 12")
  field(INP, "BL04I-VA-GVALV-98:GAUGEILK.BC CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 12")
  field(ONAM, "Gauge ILK 12")
}
record(bi, "BL04I-VA-GVALV-98:GILK13")
{
  field(DESC, "Gauge ILK 13")
  field(INP, "BL04I-VA-GVALV-98:GAUGEILK.BD CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 13")
  field(ONAM, "Gauge ILK 13")
}
record(bi, "BL04I-VA-GVALV-98:GILK14")
{
  field(DESC, "Gauge ILK 14")
  field(INP, "BL04I-VA-GVALV-98:GAUGEILK.BE CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 14")
  field(ONAM, "Gauge ILK 14")
}
record(bi, "BL04I-VA-GVALV-98:GILK15")
{
  field(DESC, "Gauge ILK 15")
  field(INP, "BL04I-VA-GVALV-98:GAUGEILK.BF CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 15")
  field(ONAM, "Gauge ILK 15")
}
################################################################################
# vacuumValveGroup.template
#% macro, __doc__, Template database for a group of up to 8 vacuum valves
# Pete Owens - 3/5/05
#
# substitutions:
#% macro, device, device name
#% macro, delay, delay between opening valves
#% macro, valve1, Valve 1 device name
#% macro, valve2, Valve 2 device name
#% macro, valve3, Valve 3 device name
#% macro, valve4, Valve 4 device name
#% macro, valve5, Valve 5 device name
#% macro, valve6, Valve 6 device name
#% macro, valve7, Valve 7 device name
#% macro, valve8, Valve 8 device name

################################################################################
# Control
#
record(mbbo, "BL04I-VA-GVALV-99:CON")
{
    field(DESC, "Control")
    field(FLNK, "BL04I-VA-GVALV-99:CON1")
    field(ZRST, "Open")
    field(ONST, "Close")
    field(TWST, "Reset")
}
record(bi,"BL04I-VA-GVALV-99:OPENING")
{
    field(DESC, "Opening Valves")
    field(PINI, "YES")
    field(INP,  "0")
    field(ZNAM, "")
    field(ONAM, "Opening")
}
record(calc,"BL04I-VA-GVALV-99:CON0")
{
    field(DESC, "CON + 1")
    field(CALC, "A+1")
    field(INPA, "BL04I-VA-GVALV-99:CON")
}
record(seq, "BL04I-VA-GVALV-99:CON1")
{
    field(DESC, "Control Valves")
    field(SELM, "Specified")
    field(SELL, "BL04I-VA-GVALV-99:CON0 PP")
    field(DOL1, "0")
    field(LNK1, "BL04I-VA-GVALV-99:SEQOPEN  PP")
    field(LNK2, "BL04I-VA-GVALV-99:SEQCLOSE PP")
    field(LNK3, "BL04I-VA-GVALV-99:SEQRESET PP")
}
record(seq, "BL04I-VA-GVALV-99:SEQOPEN")
{
    field(DESC, "Open Valves")
    field(SELM, "All")
    field(DOL1, "1")
    field(DOL2, "BL04I-VA-GVALV-99:CON")
    field(DOL3, "BL04I-VA-GVALV-99:CON")
    field(DOL4, "BL04I-VA-GVALV-99:CON")
    field(DOL5, "BL04I-VA-GVALV-99:CON")
    field(DOL6, "BL04I-VA-GVALV-99:CON")
    field(DOL7, "BL04I-VA-GVALV-99:CON")
    field(DOL8, "BL04I-VA-GVALV-99:CON")
    field(DOL9, "BL04I-VA-GVALV-99:CON")
    field(DOLA, "0")
    field(DLY1, "0")
    field(DLY2, "0")
    field(DLY3, "10")
    field(DLY4, "10")
    field(DLY5, "10")
    field(DLY6, "10")
    field(DLY7, "10")
    field(DLY8, "10")
    field(DLY9, "10")
    field(DLYA, "0")
    field(LNK1, "BL04I-VA-GVALV-99:OPENING PP")
    field(LNK2, "BL04I-VA-VALVE-03:CON CA")
    field(LNK3, "BL04I-VA-VALVE-03:CON CA")
    field(LNK4, "BL04I-VA-VALVE-03:CON CA")
    field(LNK5, "BL04I-VA-VALVE-03:CON CA")
    field(LNK6, "BL04I-VA-VALVE-03:CON CA")
    field(LNK7, "BL04I-VA-VALVE-03:CON CA")
    field(LNK8, "BL04I-VA-VALVE-03:CON CA")
    field(LNK9, "BL04I-VA-VALVE-03:CON CA")
    field(LNKA, "BL04I-VA-GVALV-99:OPENING PP")
}
record(seq, "BL04I-VA-GVALV-99:SEQCLOSE")
{
    field(DESC, "Close Valves")
    field(SELM, "All")
    field(DOL1, "1")
    field(DOL2, "1")
    field(DOL3, "1")
    field(DOL4, "1")
    field(DOL5, "1")
    field(DOL6, "1")
    field(DOL7, "1")
    field(DOL8, "1")
    field(LNK1, "BL04I-VA-VALVE-03:CON CA")
    field(LNK2, "BL04I-VA-VALVE-03:CON CA")
    field(LNK3, "BL04I-VA-VALVE-03:CON CA")
    field(LNK4, "BL04I-VA-VALVE-03:CON CA")
    field(LNK5, "BL04I-VA-VALVE-03:CON CA")
    field(LNK6, "BL04I-VA-VALVE-03:CON CA")
    field(LNK7, "BL04I-VA-VALVE-03:CON CA")
    field(LNK8, "BL04I-VA-VALVE-03:CON CA")
    field(DLY2, "10")
    field(DLY3, "10")
    field(DLY4, "10")
    field(DLY5, "10")
    field(DLY6, "10")
    field(DLY7, "10")
    field(DLY8, "10")
}
record(seq, "BL04I-VA-GVALV-99:SEQRESET")
{
    field(DESC, "Reset Valves")
    field(SELM, "All")
    field(DOL1, "2")
    field(DOL2, "2")
    field(DOL3, "2")
    field(DOL4, "2")
    field(DOL5, "2")
    field(DOL6, "2")
    field(DOL7, "2")
    field(DOL8, "2")
    field(LNK1, "BL04I-VA-VALVE-03:CON CA")
    field(LNK2, "BL04I-VA-VALVE-03:CON CA")
    field(LNK3, "BL04I-VA-VALVE-03:CON CA")
    field(LNK4, "BL04I-VA-VALVE-03:CON CA")
    field(LNK5, "BL04I-VA-VALVE-03:CON CA")
    field(LNK6, "BL04I-VA-VALVE-03:CON CA")
    field(LNK7, "BL04I-VA-VALVE-03:CON CA")
    field(LNK8, "BL04I-VA-VALVE-03:CON CA")
}

record(mbbi, "BL04I-VA-GVALV-99:LASTCON")
{
    field(DESC, "Control Readback")
    field(INP, "BL04I-VA-VALVE-03:LASTCON")
    field(SCAN, "1 second")
    field(ZRST, "Open")
    field(ONST, "Close")
    field(TWST, "Reset")
}

################################################################################
# Interlock Status
#
record(mbbi, "BL04I-VA-GVALV-99:ILKSTA")
{
    field(DESC, "Interlock Status")
    field(INP,  "BL04I-VA-GVALV-99:SELILKSTA MS PP")
    field(SCAN, "1 second")
    field(ZRST, "Failed")
    field(ONST, "Run Ilks OK")
    field(TWST, "OK")
    field(THST, "Disarmed")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
}
record(sel, "BL04I-VA-GVALV-99:SELILKSTA") 
{
    field(SELM, "Low Signal")
    field(INPA, "BL04I-VA-VALVE-03:ILKSTA MS")
    field(INPB, "BL04I-VA-VALVE-03:ILKSTA MS")
    field(INPC, "BL04I-VA-VALVE-03:ILKSTA MS")
    field(INPD, "BL04I-VA-VALVE-03:ILKSTA MS")
    field(INPE, "BL04I-VA-VALVE-03:ILKSTA MS")
    field(INPF, "BL04I-VA-VALVE-03:ILKSTA MS")
    field(INPG, "BL04I-VA-VALVE-03:ILKSTA MS")
    field(INPH, "BL04I-VA-VALVE-03:ILKSTA MS")
}
################################################################################
# Status
#
record(mbbi, "BL04I-VA-GVALV-99:STA")
{
    field(DESC, "Status")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-GVALV-99:CALSTA PP MS")
    field(ZRST, "Fault")
    field(ONST, "Open")
    field(TWST, "Opening")
    field(THST, "Closed")
    field(FRST, "Closing")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "NO_ALARM")
}
record(calc, "BL04I-VA-GVALV-99:CALSTA")
{
    field(DESC, "Calculate Status")
    field(CALC, "A<C?A:(B>C?(B>D?A:B):C)")
    field(INPA, "BL04I-VA-GVALV-99:MINSTA PP MS")
    field(INPB, "BL04I-VA-GVALV-99:MAXSTA PP MS")
    field(INPC, "1")
    field(INPD, "4")
}
record(sel, "BL04I-VA-GVALV-99:MINSTA") 
{
    field(SELM, "Low Signal")
    field(INPA, "BL04I-VA-VALVE-03:STA MS")
    field(INPB, "BL04I-VA-VALVE-03:STA MS")
    field(INPC, "BL04I-VA-VALVE-03:STA MS")
    field(INPD, "BL04I-VA-VALVE-03:STA MS")
    field(INPE, "BL04I-VA-VALVE-03:STA MS")
    field(INPF, "BL04I-VA-VALVE-03:STA MS")
    field(INPG, "BL04I-VA-VALVE-03:STA MS")
    field(INPH, "BL04I-VA-VALVE-03:STA MS")
}
record(sel, "BL04I-VA-GVALV-99:MAXSTA") 
{
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-VALVE-03:STA MS")
    field(INPB, "BL04I-VA-VALVE-03:STA MS")
    field(INPC, "BL04I-VA-VALVE-03:STA MS")
    field(INPD, "BL04I-VA-VALVE-03:STA MS")
    field(INPE, "BL04I-VA-VALVE-03:STA MS")
    field(INPF, "BL04I-VA-VALVE-03:STA MS")
    field(INPG, "BL04I-VA-VALVE-03:STA MS")
    field(INPH, "BL04I-VA-VALVE-03:STA MS")
}
################################################################################
# Number of Operations
#
record(longin, "BL04I-VA-GVALV-99:OPS")
{
    field(DESC, "Operations")
    field(INP,  "BL04I-VA-GVALV-99:SELOPS MS PP")
    field(SCAN, "1 second")
    field(HOPR, "10000")
    field(LOPR, "0")
    field(HIHI, "10000")
    field(HIGH, "9000")
    field(LOW,  "0")
    field(LOLO, "-1")
    field(HHSV, "MAJOR")
    field(HSV,  "MINOR")
    field(LSV,  "MINOR")
    field(LLSV, "MAJOR")
}
record(sel, "BL04I-VA-GVALV-99:SELOPS") 
{
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-VALVE-03:OPS MS")
    field(INPB, "BL04I-VA-VALVE-03:OPS MS")
    field(INPC, "BL04I-VA-VALVE-03:OPS MS")
    field(INPD, "BL04I-VA-VALVE-03:OPS MS")
    field(INPE, "BL04I-VA-VALVE-03:OPS MS")
    field(INPF, "BL04I-VA-VALVE-03:OPS MS")
    field(INPG, "BL04I-VA-VALVE-03:OPS MS")
    field(INPH, "BL04I-VA-VALVE-03:OPS MS")
}
################################################################################
# Operational/Service Mode
#
record(bi, "BL04I-VA-GVALV-99:MODE")
{
    field(DESC, "Mode")
    field(INP,  "BL04I-VA-GVALV-99:SELMODE MS PP")
    field(SCAN, "1 second")
    field(ZNAM, "Operational")
    field(ONAM, "Service")
}
record(sel, "BL04I-VA-GVALV-99:SELMODE") 
{
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-VALVE-03:MODE MS")
    field(INPB, "BL04I-VA-VALVE-03:MODE MS")
    field(INPC, "BL04I-VA-VALVE-03:MODE MS")
    field(INPD, "BL04I-VA-VALVE-03:MODE MS")
    field(INPE, "BL04I-VA-VALVE-03:MODE MS")
    field(INPF, "BL04I-VA-VALVE-03:MODE MS")
    field(INPG, "BL04I-VA-VALVE-03:MODE MS")
    field(INPH, "BL04I-VA-VALVE-03:MODE MS")
}

#
# Raw Air Pressure Status, not debounced
#
record(bi,"BL04I-VA-GVALV-99:RAWAIRSTA") 
{
    field(DESC,"Raw Air Pressure Status")
    field(INP,"BL04I-VA-GVALV-99:SELRAWAIRSTA MS PP")
    field(SCAN,"1 second")
    field(PHAS,"1")
	field(ZNAM, "Low")
  	field(ONAM, "Good")
}
record(sel, "BL04I-VA-GVALV-99:SELRAWAIRSTA") 
{
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-VALVE-03:RAWAIRSTA MS")
    field(INPB, "BL04I-VA-VALVE-03:RAWAIRSTA MS")
    field(INPC, "BL04I-VA-VALVE-03:RAWAIRSTA MS")
    field(INPD, "BL04I-VA-VALVE-03:RAWAIRSTA MS")
    field(INPE, "BL04I-VA-VALVE-03:RAWAIRSTA MS")
    field(INPF, "BL04I-VA-VALVE-03:RAWAIRSTA MS")
    field(INPG, "BL04I-VA-VALVE-03:RAWAIRSTA MS")
    field(INPH, "BL04I-VA-VALVE-03:RAWAIRSTA MS")
}

#
# SR Valve Controller
#
record(bi,"BL04I-VA-GVALV-99:SRVC") 
{
    field(DESC,"SR Valve Controller")
    field(INP,"BL04I-VA-GVALV-99:SELSRVC MS PP")
    field(SCAN,"1 second")
    field(ZNAM,"No")
    field(ONAM,"Yes")
}
record(sel, "BL04I-VA-GVALV-99:SELSRVC") 
{
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-VALVE-03:SRVC MS")
    field(INPB, "BL04I-VA-VALVE-03:SRVC MS")
    field(INPC, "BL04I-VA-VALVE-03:SRVC MS")
    field(INPD, "BL04I-VA-VALVE-03:SRVC MS")
    field(INPE, "BL04I-VA-VALVE-03:SRVC MS")
    field(INPF, "BL04I-VA-VALVE-03:SRVC MS")
    field(INPG, "BL04I-VA-VALVE-03:SRVC MS")
    field(INPH, "BL04I-VA-VALVE-03:SRVC MS")
}
################################################################################
# Air Pressure De-bounce Time
#
record(ao,"BL04I-VA-GVALV-99:SETADB") 
{
    field(DESC, "De-bounce Time")
    field(FLNK, "BL04I-VA-GVALV-99:SEQADB PP") 
    field(EGU,  "s")
    field(PREC, "1")
    field(DOL , "10.0")
    field(PINI, "YES")
}
record(seq, "BL04I-VA-GVALV-99:SEQADB")
{
    field(SELM, "All")
    field(DOL1, "BL04I-VA-GVALV-99:SETADB")
    field(DOL2, "BL04I-VA-GVALV-99:SETADB")
    field(DOL3, "BL04I-VA-GVALV-99:SETADB")
    field(DOL4, "BL04I-VA-GVALV-99:SETADB")
    field(DOL5, "BL04I-VA-GVALV-99:SETADB")
    field(DOL6, "BL04I-VA-GVALV-99:SETADB")
    field(DOL7, "BL04I-VA-GVALV-99:SETADB")
    field(DOL8, "BL04I-VA-GVALV-99:SETADB")
    field(LNK1, "BL04I-VA-VALVE-03:SETADB CA")
    field(LNK2, "BL04I-VA-VALVE-03:SETADB CA")
    field(LNK3, "BL04I-VA-VALVE-03:SETADB CA")
    field(LNK4, "BL04I-VA-VALVE-03:SETADB CA")
    field(LNK5, "BL04I-VA-VALVE-03:SETADB CA")
    field(LNK6, "BL04I-VA-VALVE-03:SETADB CA")
    field(LNK7, "BL04I-VA-VALVE-03:SETADB CA")
    field(LNK8, "BL04I-VA-VALVE-03:SETADB CA")
}
record(ai,"BL04I-VA-GVALV-99:ADB") 
{
    field(DESC, "De-bounce Time")
    field(INP,  "BL04I-VA-GVALV-99:SELADB MS PP")
    field(EGU,  "s")
    field(PREC, "1")
    field(SCAN, "1 second")
}
record(sel, "BL04I-VA-GVALV-99:SELADB") 
{
    field(SELM, "Low Signal")
    field(INPA, "BL04I-VA-VALVE-03:ADB MS")
    field(INPB, "BL04I-VA-VALVE-03:ADB MS")
    field(INPC, "BL04I-VA-VALVE-03:ADB MS")
    field(INPD, "BL04I-VA-VALVE-03:ADB MS")
    field(INPE, "BL04I-VA-VALVE-03:ADB MS")
    field(INPF, "BL04I-VA-VALVE-03:ADB MS")
    field(INPG, "BL04I-VA-VALVE-03:ADB MS")
    field(INPH, "BL04I-VA-VALVE-03:ADB MS")
}
################################################################################
# Interlocks
#
record(mbbiDirect, "BL04I-VA-GVALV-99:ILK")
{
    field(DESC, "Latched Interlocks")
    field(INP,  "BL04I-VA-GVALV-99:CALILK PP")
    field(SCAN, "1 second")
}
record(calc, "BL04I-VA-GVALV-99:CALILK")
{
    field(CALC, "A|B|C|D|E|F|G|H")
    field(INPA, "BL04I-VA-VALVE-03:ILK")
    field(INPB, "BL04I-VA-VALVE-03:ILK")
    field(INPC, "BL04I-VA-VALVE-03:ILK")
    field(INPD, "BL04I-VA-VALVE-03:ILK")
    field(INPE, "BL04I-VA-VALVE-03:ILK")
    field(INPF, "BL04I-VA-VALVE-03:ILK")
    field(INPG, "BL04I-VA-VALVE-03:ILK") 
    field(INPH, "BL04I-VA-VALVE-03:ILK")
}

record(mbbiDirect, "BL04I-VA-GVALV-99:INIILK")
{
    field(DESC, "Raw Interlock Status")
    field(INP,  "BL04I-VA-GVALV-99:CALINIILK PP")
    field(SCAN, "1 second")
}
record(calc, "BL04I-VA-GVALV-99:CALINIILK")
{
    field(CALC, "A|B|C|D|E|F|G|H")
    field(INPA, "BL04I-VA-VALVE-03:INIILK")
    field(INPB, "BL04I-VA-VALVE-03:INIILK")
    field(INPC, "BL04I-VA-VALVE-03:INIILK")
    field(INPD, "BL04I-VA-VALVE-03:INIILK")
    field(INPE, "BL04I-VA-VALVE-03:INIILK")
    field(INPF, "BL04I-VA-VALVE-03:INIILK")
    field(INPG, "BL04I-VA-VALVE-03:INIILK") 
    field(INPH, "BL04I-VA-VALVE-03:INIILK")
}

record(mbbiDirect, "BL04I-VA-GVALV-99:RAWILK")
{
    field(DESC, "Raw Interlock Status")
    field(INP,  "BL04I-VA-GVALV-99:CALRAWILK PP")
    field(SCAN, "1 second")
}
record(calc, "BL04I-VA-GVALV-99:CALRAWILK")
{
    field(CALC, "A&B&C&D&E&F&G&H")
    field(INPA, "BL04I-VA-VALVE-03:RAWILK")
    field(INPB, "BL04I-VA-VALVE-03:RAWILK")
    field(INPC, "BL04I-VA-VALVE-03:RAWILK")
    field(INPD, "BL04I-VA-VALVE-03:RAWILK")
    field(INPE, "BL04I-VA-VALVE-03:RAWILK")
    field(INPF, "BL04I-VA-VALVE-03:RAWILK")
    field(INPG, "BL04I-VA-VALVE-03:RAWILK") 
    field(INPH, "BL04I-VA-VALVE-03:RAWILK")
}

record(mbbiDirect, "BL04I-VA-GVALV-99:GILK")
{
    field(DESC, "Gauge Interlock Status")
    field(INP,  "BL04I-VA-GVALV-99:CALGILK PP")
    field(SCAN, "1 second")
}
record(calc, "BL04I-VA-GVALV-99:CALGILK")
{
    field(CALC, "A|B|C|D|E|F|G|H")
    field(INPA, "BL04I-VA-VALVE-03:GILK")
    field(INPB, "BL04I-VA-VALVE-03:GILK")
    field(INPC, "BL04I-VA-VALVE-03:GILK")
    field(INPD, "BL04I-VA-VALVE-03:GILK")
    field(INPE, "BL04I-VA-VALVE-03:GILK")
    field(INPF, "BL04I-VA-VALVE-03:GILK")
    field(INPG, "BL04I-VA-VALVE-03:GILK") 
    field(INPH, "BL04I-VA-VALVE-03:GILK")
}

record(mbbiDirect, "BL04I-VA-GVALV-99:IMGILK")
{
    field(DESC, "IMG Interlock Status")
    field(INP,  "BL04I-VA-GVALV-99:CALIMGILK PP")
    field(SCAN, "1 second")
}
record(calc, "BL04I-VA-GVALV-99:CALIMGILK")
{
    field(CALC, "A&B&C&D&E&F&G&H")
    field(INPA, "BL04I-VA-VALVE-03:IMGILK")
    field(INPB, "BL04I-VA-VALVE-03:IMGILK")
    field(INPC, "BL04I-VA-VALVE-03:IMGILK")
    field(INPD, "BL04I-VA-VALVE-03:IMGILK")
    field(INPE, "BL04I-VA-VALVE-03:IMGILK")
    field(INPF, "BL04I-VA-VALVE-03:IMGILK")
    field(INPG, "BL04I-VA-VALVE-03:IMGILK") 
    field(INPH, "BL04I-VA-VALVE-03:IMGILK")
}

record(mbbiDirect, "BL04I-VA-GVALV-99:PIRGILK")
{
    field(DESC, "Pirani Interlock Status")
    field(INP,  "BL04I-VA-GVALV-99:CALPIRGILK PP")
    field(SCAN, "1 second")
}
record(calc, "BL04I-VA-GVALV-99:CALPIRGILK")
{
    field(CALC, "A&B&C&D&E&F&G&H")
    field(INPA, "BL04I-VA-VALVE-03:PIRGILK")
    field(INPB, "BL04I-VA-VALVE-03:PIRGILK")
    field(INPC, "BL04I-VA-VALVE-03:PIRGILK")
    field(INPD, "BL04I-VA-VALVE-03:PIRGILK")
    field(INPE, "BL04I-VA-VALVE-03:PIRGILK")
    field(INPF, "BL04I-VA-VALVE-03:PIRGILK")
    field(INPG, "BL04I-VA-VALVE-03:PIRGILK") 
    field(INPH, "BL04I-VA-VALVE-03:PIRGILK")
}

################################################################################
# Individual Interlocks
#
record(bi, "BL04I-VA-GVALV-99:ILK0")
{
    field(DESC, "Interlock 0")
    field(INP,  "BL04I-VA-GVALV-99:ILK.B0")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 0")
    field(ONAM, "Interlock 0")
}
record(bi, "BL04I-VA-GVALV-99:ILK1")
{
    field(DESC, "Interlock 1")
    field(INP,  "BL04I-VA-GVALV-99:ILK.B1")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 1")
    field(ONAM, "Interlock 1")
}

record(bi, "BL04I-VA-GVALV-99:ILK2")
{
    field(DESC, "Interlock 2")
    field(INP,  "BL04I-VA-GVALV-99:ILK.B2")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 2")
    field(ONAM, "Interlock 2")
}
record(bi, "BL04I-VA-GVALV-99:ILK3")
{
    field(DESC, "Interlock 3")
    field(INP,  "BL04I-VA-GVALV-99:ILK.B3")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 3")
    field(ONAM, "Interlock 3")
}
record(bi, "BL04I-VA-GVALV-99:ILK4")
{
    field(DESC, "Interlock 4")
    field(INP,  "BL04I-VA-GVALV-99:ILK.B4")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 4")
    field(ONAM, "Interlock 4")
}
record(bi, "BL04I-VA-GVALV-99:ILK5")
{
    field(DESC, "Interlock 5")
    field(INP,  "BL04I-VA-GVALV-99:ILK.B5")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 5")
    field(ONAM, "Interlock 5")
}
record(bi, "BL04I-VA-GVALV-99:ILK6")
{
    field(DESC, "Interlock 6")
    field(INP,  "BL04I-VA-GVALV-99:ILK.B6")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 6")
    field(ONAM, "Interlock 6")
}
record(bi, "BL04I-VA-GVALV-99:ILK7")
{
    field(DESC, "Interlock 7")
    field(INP,  "BL04I-VA-GVALV-99:ILK.B7")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 7")
    field(ONAM, "Interlock 7")
}
record(bi, "BL04I-VA-GVALV-99:ILK8")
{
    field(DESC, "Interlock 8")
    field(INP,  "BL04I-VA-GVALV-99:ILK.B8")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 8")
    field(ONAM, "Interlock 8")
}
record(bi, "BL04I-VA-GVALV-99:ILK9")
{
    field(DESC, "Interlock 9")
    field(INP,  "BL04I-VA-GVALV-99:ILK.B9")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 9")
    field(ONAM, "Interlock 9")
}
record(bi, "BL04I-VA-GVALV-99:ILK10")
{
    field(DESC, "Interlock 10")
    field(INP,  "BL04I-VA-GVALV-99:ILK.BA")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 10")
    field(ONAM, "Interlock 10")
}
record(bi, "BL04I-VA-GVALV-99:ILK11")
{
    field(DESC, "Interlock 11")
    field(INP,  "BL04I-VA-GVALV-99:ILK.BB")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 11")
    field(ONAM, "Interlock 11")
}
record(bi, "BL04I-VA-GVALV-99:ILK12")
{
    field(DESC, "Interlock 12")
    field(INP,  "BL04I-VA-GVALV-99:ILK.BC")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 12")
    field(ONAM, "Interlock 12")
}
record(bi, "BL04I-VA-GVALV-99:ILK13")
{
    field(DESC, "Interlock 13")
    field(INP,  "BL04I-VA-GVALV-99:ILK.BD")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 13")
    field(ONAM, "Interlock 13")
}
record(bi, "BL04I-VA-GVALV-99:ILK14")
{
    field(DESC, "Interlock 14")
    field(INP,  "BL04I-VA-GVALV-99:ILK.BE")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 14")
    field(ONAM, "Interlock 14")
}
record(bi, "BL04I-VA-GVALV-99:ILK15")
{
    field(DESC, "Interlock 15")
    field(INP,  "BL04I-VA-GVALV-99:ILK.BF")
    field(SCAN, "1 second")
    field(PHAS, "1")
    field(ZSV,  "MAJOR")
    field(OSV,  "NO_ALARM")
    field(ZNAM, "Interlock 15")
    field(ONAM, "Interlock 15")
}
record(sel, "BL04I-VA-GVALV-99:TCLOSE")
{
    field(DESC, "Time to close")
    field(EGU,  "s")
    field(SELM, "High Signal")
    field(INPA, "BL04I-VA-VALVE-03:TCLOSE")
    field(INPB, "BL04I-VA-VALVE-03:TCLOSE")
    field(INPC, "BL04I-VA-VALVE-03:TCLOSE")
    field(INPD, "BL04I-VA-VALVE-03:TCLOSE")
    field(INPE, "BL04I-VA-VALVE-03:TCLOSE")
    field(INPF, "BL04I-VA-VALVE-03:TCLOSE")
    field(INPG, "BL04I-VA-VALVE-03:TCLOSE")
    field(INPH, "BL04I-VA-VALVE-03:TCLOSE")
    field(SCAN, "1 second")
    field(PREC, "1")
}

################################################################################
# Individual Gauge Interlocks
#
record(mbbiDirect, "BL04I-VA-GVALV-99:GAUGEILK")
{
  field(DESC, "Combined Gauge Interlock")
  field(INP,  "BL04I-VA-GVALV-99:CALGILK PP MS")
}
record(calc, "BL04I-VA-GVALV-99:CALGILK")
{
  field(CALC, "A&B")
  field(FLNK, "BL04I-VA-GVALV-99:GAUGEILK")
  field(INPA, "BL04I-VA-GVALV-99:IMGILK CP MS")
  field(INPB, "BL04I-VA-GVALV-99:PIRGILK CP MS")
}
record(bi, "BL04I-VA-GVALV-99:GILK0")
{
  field(DESC, "Gauge ILK 0")
  field(INP, "BL04I-VA-GVALV-99:GAUGEILK.B0 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 0")
  field(ONAM, "Gauge ILK 0")
}
record(bi, "BL04I-VA-GVALV-99:GILK1")
{
  field(DESC, "Gauge ILK 1")
  field(INP, "BL04I-VA-GVALV-99:GAUGEILK.B1 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 1")
  field(ONAM, "Gauge ILK 1")
}
record(bi, "BL04I-VA-GVALV-99:GILK2")
{
  field(DESC, "Gauge ILK 2")
  field(INP, "BL04I-VA-GVALV-99:GAUGEILK.B2 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 2")
  field(ONAM, "Gauge ILK 2")
}
record(bi, "BL04I-VA-GVALV-99:GILK3")
{
  field(DESC, "Gauge ILK 3")
  field(INP, "BL04I-VA-GVALV-99:GAUGEILK.B3 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 3")
  field(ONAM, "Gauge ILK 3")
}
record(bi, "BL04I-VA-GVALV-99:GILK4")
{
  field(DESC, "Gauge ILK 4")
  field(INP, "BL04I-VA-GVALV-99:GAUGEILK.B4 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 4")
  field(ONAM, "Gauge ILK 4")
}
record(bi, "BL04I-VA-GVALV-99:GILK5")
{
  field(DESC, "Gauge ILK 5")
  field(INP, "BL04I-VA-GVALV-99:GAUGEILK.B5 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 5")
  field(ONAM, "Gauge ILK 5")
}
record(bi, "BL04I-VA-GVALV-99:GILK6")
{
  field(DESC, "Gauge ILK 6")
  field(INP, "BL04I-VA-GVALV-99:GAUGEILK.B6 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 6")
  field(ONAM, "Gauge ILK 6")
}
record(bi, "BL04I-VA-GVALV-99:GILK7")
{
  field(DESC, "Gauge ILK 7")
  field(INP, "BL04I-VA-GVALV-99:GAUGEILK.B7 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 7")
  field(ONAM, "Gauge ILK 7")
}
record(bi, "BL04I-VA-GVALV-99:GILK8")
{
  field(DESC, "Gauge ILK 8")
  field(INP, "BL04I-VA-GVALV-99:GAUGEILK.B8 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 8")
  field(ONAM, "Gauge ILK 8")
}
record(bi, "BL04I-VA-GVALV-99:GILK9")
{
  field(DESC, "Gauge ILK 9")
  field(INP, "BL04I-VA-GVALV-99:GAUGEILK.B9 CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 9")
  field(ONAM, "Gauge ILK 9")
}
record(bi, "BL04I-VA-GVALV-99:GILK10")
{
  field(DESC, "Gauge ILK 10")
  field(INP, "BL04I-VA-GVALV-99:GAUGEILK.BA CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 10")
  field(ONAM, "Gauge ILK 10")
}
record(bi, "BL04I-VA-GVALV-99:GILK11")
{
  field(DESC, "Gauge ILK 11")
  field(INP, "BL04I-VA-GVALV-99:GAUGEILK.BB CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 11")
  field(ONAM, "Gauge ILK 11")
}
record(bi, "BL04I-VA-GVALV-99:GILK12")
{
  field(DESC, "Gauge ILK 12")
  field(INP, "BL04I-VA-GVALV-99:GAUGEILK.BC CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 12")
  field(ONAM, "Gauge ILK 12")
}
record(bi, "BL04I-VA-GVALV-99:GILK13")
{
  field(DESC, "Gauge ILK 13")
  field(INP, "BL04I-VA-GVALV-99:GAUGEILK.BD CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 13")
  field(ONAM, "Gauge ILK 13")
}
record(bi, "BL04I-VA-GVALV-99:GILK14")
{
  field(DESC, "Gauge ILK 14")
  field(INP, "BL04I-VA-GVALV-99:GAUGEILK.BE CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 14")
  field(ONAM, "Gauge ILK 14")
}
record(bi, "BL04I-VA-GVALV-99:GILK15")
{
  field(DESC, "Gauge ILK 15")
  field(INP, "BL04I-VA-GVALV-99:GAUGEILK.BF CP MS")
  field(ZSV, "MAJOR")
  field(OSV, "NO_ALARM")
  field(ZNAM, "Gauge ILK 15")
  field(ONAM, "Gauge ILK 15")
}
################################################################################
# space.template
#%, macro, __doc__, Template database for a vacuum space 
# Consists of just 1 pump, 1 gauge and 1 valve (or more likely groups of these)
# Pete Owens - 10/6/05
#
# substitutions:
#% macro, device, device name
#% macro, name, Object name and gui association name
#% macro, ionp, ion pump
#% macro, gauge, combination gauge
#% macro, img, IMG
#% macro, pirg, Pirani gauge
#% macro, valve, Vacuum valve  
################################################################################

# This associates an edm screen with the template
# % gui, SPACE2, edm, space.edl, device=BL04I-VA-SPACE-02

# This associates a BOY screen with the template
# % gui, SPACE2, boydetail, vacuumSpaceApp_opi/space_detail.opi, device=BL04I-VA-SPACE-02, desc=BL04I-VA-SPACE-02, name=SPACE2
# % gui, SPACE2, boyembed, vacuumSpaceApp_opi/space_embed_box.opi, device=BL04I-VA-SPACE-02, desc=BL04I-VA-SPACE-02, name=SPACE2
# % gui, SPACE2, boyembed, vacuumSpaceApp_opi/space_embed.opi, device=BL04I-VA-SPACE-02, desc=BL04I-VA-SPACE-02, name=SPACE2

# Pressure (maximum value from all spaces)
#
#% archiver 1 Monitor
#
record(ai, "BL04I-VA-SPACE-02:PLOG")
{
    field(DESC, "log Pressure")
    field(SCAN, "1 second")
    field(EGU,  "log")
    field(INP,  "BL04I-VA-GAUGE-03:PLOG")
    field(HOPR, "3")
    field(LOPR, "-11")
    field(HIGH, "-7")
    field(HSV,  "MINOR")
    field(ADEL, "0.025")
}
#
#% archiver 10
#% controldesk Pressure readback
#
record(ai, "BL04I-VA-SPACE-02:P")
{
    field(DESC, "Pressure")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GAUGE-03:P")
    field(HIGH, "1.0e-7")
    field(HSV,  "MINOR")
}
################################################################################
# Status
# B0 Gauge not OK
# B1 Ion Pump not swiched on
# B2 Valve not open
# B3 Pressure
#
#% archiver 10 Monitor
#% controldesk Status smon
#
record(mbbiDirect,"BL04I-VA-SPACE-02:STA") 
{
    field(DESC,"Status")
    field(SCAN,"1 second")
    field(INP, "BL04I-VA-SPACE-02:CALSTA PP MS")
}
record(calc, "BL04I-VA-SPACE-02:CALSTA")
{
    field(DESC, "Calculate Status")
    field(CALC, "A|B|C|D")
    field(INPA, "BL04I-VA-SPACE-02:IMGSTA PP MS")
    field(INPB, "BL04I-VA-SPACE-02:IONPSTA PP MS")
    field(INPC, "BL04I-VA-SPACE-02:VALVESTA PP MS")
    field(INPD, "BL04I-VA-SPACE-02:PSTA PP MS")
}
record(calc, "BL04I-VA-SPACE-02:IMGSTA")
{
    field(DESC, "IMGs Status")
    field(CALC, "(A<2||A=8)?0:1")
    field(INPA, "BL04I-VA-IMG-03:STA")
    field(HIGH, "1.5")
    field(HSV,  "MINOR")
#    field(INPA, "BL04I-VA-IMG-03:STA MS")
#    field(HIHI, "1.5")
#    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-02:IONPSTA")
{
    field(DESC, "Pumps Status")
    field(CALC, "(A=4)?0:2")
    field(INPA, "BL04I-VA-IONP-03:STA")
    field(HIGH, "0.5")
    field(HSV,  "MINOR")
#    field(INPA, "BL04I-VA-IONP-03:STA MS")
#    field(HIHI, "0.5")
#    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-02:VALVESTA")
{
    field(DESC, "Valves Status")
    field(CALC, "(A=1)?0:4")
    field(INPA, "BL04I-VA-VALVE-11:STA MS")
    field(HIHI, "3.5")
    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-02:PSTA")
{
    field(DESC, "Pressure Status")
    field(CALC, "(A<B)?0:8")
    field(INPA, "BL04I-VA-SPACE-02:P MS")
    field(INPB, "1.0e-7")
    field(HIGH, "7.5")
    field(HSV,  "MINOR")
}
#################################################################################
# Control Pumps
#
#% controldesk Pumps scon
#
record(bo,"BL04I-VA-SPACE-02:START") 
{
    field(DESC, "Control Pumps")
    field(OUT,  "BL04I-VA-IONP-03:START PP")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
#
#% controldesk Pumps smon
#
record(bi,"BL04I-VA-SPACE-02:STARTING")
{
    field(DESC, "Starting Pumps")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-IONP-03:STARTING")
    field(ZNAM, "")
    field(ONAM, "Starting")
}
#################################################################################
# Control Valves
#
#% controldesk Valves scon
#
record(mbbo,"BL04I-VA-SPACE-02:CON") 
{
    field(DESC, "Control Valves")
    field(OUT,  "BL04I-VA-VALVE-11:CON PP")
    field(ZRST, "Open")
    field(ONST, "Close")
    field(TWST, "Reset")
}
#
#% controldesk Valves smon
#
record(bi,"BL04I-VA-SPACE-02:OPENING")
{
    field(DESC, "Opening Valves")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-VALVE-11:OPENING")
    field(ZNAM, "")
    field(ONAM, "Opening")
}
#################################################################################
# Cold Cathode Enable
#
#% controldesk Gauges scon
#
record(bo, "BL04I-VA-SPACE-02:CCHV")
{
    field(DESC, "Cold Cathode Enable")
    field(OUT,  "BL04I-VA-IMG-03:CCHV PP")
    field(ZNAM, "Off")
    field(ONAM, "On")
}
#
#% controldesk Gauges smon
#
record(bi,"BL04I-VA-SPACE-02:SWITCHING")
{
    field(DESC, "Switching")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-IMG-03:SWITCHING")
    field(ZNAM, "")
    field(ONAM, "Switching")
}
#################################################################################
# PIRG Control Interlocks - IMG Enable
#
record(ao, "BL04I-VA-SPACE-02:CTL:SETSP")
{
    field(DESC, "IMG Enable")
    field(OUT,  "BL04I-VA-PIRG-03:CTL:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
    field(DRVH, "9.5e-1")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(mbbo, "BL04I-VA-SPACE-02:CTL:ENABLE")
{
    field(DESC, "Enable Control Setpoint")
    field(OUT,  "BL04I-VA-PIRG-03:CTL:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-02:CTL:SP")
{
    field(DESC, "IMG Enable")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-PIRG-03:CTL:SP MS")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
}
#################################################################################
# IMG Protection Interlocks - IMG Overpressure
#
record(ao, "BL04I-VA-SPACE-02:PRO:SETSP")
{
    field(DESC, "IMG Overpressure")
    field(OUT,  "BL04I-VA-IMG-03:PRO:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
    field(DRVH, "1.0e-2")
    field(DRVL, "1.3e-5")
    field(DOL , "5.0e-4")
}
record(mbbo, "BL04I-VA-SPACE-02:PRO:ENABLE")
{
    field(DESC, "Enable Protection Setpoint")
    field(OUT,  "BL04I-VA-IMG-03:PRO:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-02:PRO:SP")
{
    field(DESC, "IMG Overpressure")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-IMG-03:PRO:SP MS")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
}
#################################################################################
# IMG Relay Interlocks - Valve Interlock
#
record(ao, "BL04I-VA-SPACE-02:RLY:SETSP")
{
    field(DESC, "Valve I/L")
    field(OUT,  "BL04I-VA-IMG-03:RLY:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-6")
}
record(mbbo, "BL04I-VA-SPACE-02:RLY:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(OUT,  "BL04I-VA-IMG-03:RLY:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-02:RLY:SP")
{
    field(DESC, "Valve I/L")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-IMG-03:RLY:SP MS")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
#################################################################################
# IMG Relay 2 (Channel A) Interlocks - MPS Interlock
#
record(ao, "BL04I-VA-SPACE-02:RLA:SETSP")
{
    field(DESC, "MPS Interlock")
    field(OUT,  "BL04I-VA-IMG-03:RLA:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-7")
}
record(mbbo, "BL04I-VA-SPACE-02:RLA:ENABLE")
{
    field(DESC, "Enable Channel A Setpoint")
    field(OUT,  "BL04I-VA-IMG-03:RLA:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-02:RLA:SP")
{
    field(DESC, "MPS Interlock")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-IMG-03:RLA:SP MS")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
#################################################################################
# Pirani Guage  Relay Interlocks - Ion Pump Interlock
#
record(ao, "BL04I-VA-SPACE-02:RLB:SETSP")
{
    field(DESC, "Ion Pump I/L")
    field(OUT,  "BL04I-VA-PIRG-03:RLY:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
    field(DRVH, "1.2e2")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(mbbo, "BL04I-VA-SPACE-02:RLB:ENABLE")
{
    field(DESC, "Enable Pirani Setpoint")
    field(OUT,  "BL04I-VA-PIRG-03:RLY:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-02:RLB:SP")
{
    field(DESC, "Ion Pump I/L")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-PIRG-03:RLY:SP MS")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
}
#################################################################################
# space.template
#%, macro, __doc__, Template database for a vacuum space 
# Consists of just 1 pump, 1 gauge and 1 valve (or more likely groups of these)
# Pete Owens - 10/6/05
#
# substitutions:
#% macro, device, device name
#% macro, name, Object name and gui association name
#% macro, ionp, ion pump
#% macro, gauge, combination gauge
#% macro, img, IMG
#% macro, pirg, Pirani gauge
#% macro, valve, Vacuum valve  
################################################################################

# This associates an edm screen with the template
# % gui, SPACE3, edm, space.edl, device=BL04I-VA-SPACE-03

# This associates a BOY screen with the template
# % gui, SPACE3, boydetail, vacuumSpaceApp_opi/space_detail.opi, device=BL04I-VA-SPACE-03, desc=BL04I-VA-SPACE-03, name=SPACE3
# % gui, SPACE3, boyembed, vacuumSpaceApp_opi/space_embed_box.opi, device=BL04I-VA-SPACE-03, desc=BL04I-VA-SPACE-03, name=SPACE3
# % gui, SPACE3, boyembed, vacuumSpaceApp_opi/space_embed.opi, device=BL04I-VA-SPACE-03, desc=BL04I-VA-SPACE-03, name=SPACE3

# Pressure (maximum value from all spaces)
#
#% archiver 1 Monitor
#
record(ai, "BL04I-VA-SPACE-03:PLOG")
{
    field(DESC, "log Pressure")
    field(SCAN, "1 second")
    field(EGU,  "log")
    field(INP,  "BL04I-VA-GAUGE-04:PLOG")
    field(HOPR, "3")
    field(LOPR, "-11")
    field(HIGH, "-7")
    field(HSV,  "MINOR")
    field(ADEL, "0.025")
}
#
#% archiver 10
#% controldesk Pressure readback
#
record(ai, "BL04I-VA-SPACE-03:P")
{
    field(DESC, "Pressure")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GAUGE-04:P")
    field(HIGH, "1.0e-7")
    field(HSV,  "MINOR")
}
################################################################################
# Status
# B0 Gauge not OK
# B1 Ion Pump not swiched on
# B2 Valve not open
# B3 Pressure
#
#% archiver 10 Monitor
#% controldesk Status smon
#
record(mbbiDirect,"BL04I-VA-SPACE-03:STA") 
{
    field(DESC,"Status")
    field(SCAN,"1 second")
    field(INP, "BL04I-VA-SPACE-03:CALSTA PP MS")
}
record(calc, "BL04I-VA-SPACE-03:CALSTA")
{
    field(DESC, "Calculate Status")
    field(CALC, "A|B|C|D")
    field(INPA, "BL04I-VA-SPACE-03:IMGSTA PP MS")
    field(INPB, "BL04I-VA-SPACE-03:IONPSTA PP MS")
    field(INPC, "BL04I-VA-SPACE-03:VALVESTA PP MS")
    field(INPD, "BL04I-VA-SPACE-03:PSTA PP MS")
}
record(calc, "BL04I-VA-SPACE-03:IMGSTA")
{
    field(DESC, "IMGs Status")
    field(CALC, "(A<2||A=8)?0:1")
    field(INPA, "BL04I-VA-IMG-04:STA")
    field(HIGH, "1.5")
    field(HSV,  "MINOR")
#    field(INPA, "BL04I-VA-IMG-04:STA MS")
#    field(HIHI, "1.5")
#    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-03:IONPSTA")
{
    field(DESC, "Pumps Status")
    field(CALC, "(A=4)?0:2")
    field(INPA, "BL04I-VA-IONP-04:STA")
    field(HIGH, "0.5")
    field(HSV,  "MINOR")
#    field(INPA, "BL04I-VA-IONP-04:STA MS")
#    field(HIHI, "0.5")
#    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-03:VALVESTA")
{
    field(DESC, "Valves Status")
    field(CALC, "(A=1)?0:4")
    field(INPA, "BL04I-VA-VALVE-01:STA MS")
    field(HIHI, "3.5")
    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-03:PSTA")
{
    field(DESC, "Pressure Status")
    field(CALC, "(A<B)?0:8")
    field(INPA, "BL04I-VA-SPACE-03:P MS")
    field(INPB, "1.0e-7")
    field(HIGH, "7.5")
    field(HSV,  "MINOR")
}
#################################################################################
# Control Pumps
#
#% controldesk Pumps scon
#
record(bo,"BL04I-VA-SPACE-03:START") 
{
    field(DESC, "Control Pumps")
    field(OUT,  "BL04I-VA-IONP-04:START PP")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
#
#% controldesk Pumps smon
#
record(bi,"BL04I-VA-SPACE-03:STARTING")
{
    field(DESC, "Starting Pumps")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-IONP-04:STARTING")
    field(ZNAM, "")
    field(ONAM, "Starting")
}
#################################################################################
# Control Valves
#
#% controldesk Valves scon
#
record(mbbo,"BL04I-VA-SPACE-03:CON") 
{
    field(DESC, "Control Valves")
    field(OUT,  "BL04I-VA-VALVE-01:CON PP")
    field(ZRST, "Open")
    field(ONST, "Close")
    field(TWST, "Reset")
}
#
#% controldesk Valves smon
#
record(bi,"BL04I-VA-SPACE-03:OPENING")
{
    field(DESC, "Opening Valves")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-VALVE-01:OPENING")
    field(ZNAM, "")
    field(ONAM, "Opening")
}
#################################################################################
# Cold Cathode Enable
#
#% controldesk Gauges scon
#
record(bo, "BL04I-VA-SPACE-03:CCHV")
{
    field(DESC, "Cold Cathode Enable")
    field(OUT,  "BL04I-VA-IMG-04:CCHV PP")
    field(ZNAM, "Off")
    field(ONAM, "On")
}
#
#% controldesk Gauges smon
#
record(bi,"BL04I-VA-SPACE-03:SWITCHING")
{
    field(DESC, "Switching")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-IMG-04:SWITCHING")
    field(ZNAM, "")
    field(ONAM, "Switching")
}
#################################################################################
# PIRG Control Interlocks - IMG Enable
#
record(ao, "BL04I-VA-SPACE-03:CTL:SETSP")
{
    field(DESC, "IMG Enable")
    field(OUT,  "BL04I-VA-PIRG-04:CTL:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
    field(DRVH, "9.5e-1")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(mbbo, "BL04I-VA-SPACE-03:CTL:ENABLE")
{
    field(DESC, "Enable Control Setpoint")
    field(OUT,  "BL04I-VA-PIRG-04:CTL:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-03:CTL:SP")
{
    field(DESC, "IMG Enable")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-PIRG-04:CTL:SP MS")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
}
#################################################################################
# IMG Protection Interlocks - IMG Overpressure
#
record(ao, "BL04I-VA-SPACE-03:PRO:SETSP")
{
    field(DESC, "IMG Overpressure")
    field(OUT,  "BL04I-VA-IMG-04:PRO:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
    field(DRVH, "1.0e-2")
    field(DRVL, "1.3e-5")
    field(DOL , "5.0e-4")
}
record(mbbo, "BL04I-VA-SPACE-03:PRO:ENABLE")
{
    field(DESC, "Enable Protection Setpoint")
    field(OUT,  "BL04I-VA-IMG-04:PRO:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-03:PRO:SP")
{
    field(DESC, "IMG Overpressure")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-IMG-04:PRO:SP MS")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
}
#################################################################################
# IMG Relay Interlocks - Valve Interlock
#
record(ao, "BL04I-VA-SPACE-03:RLY:SETSP")
{
    field(DESC, "Valve I/L")
    field(OUT,  "BL04I-VA-IMG-04:RLY:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-6")
}
record(mbbo, "BL04I-VA-SPACE-03:RLY:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(OUT,  "BL04I-VA-IMG-04:RLY:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-03:RLY:SP")
{
    field(DESC, "Valve I/L")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-IMG-04:RLY:SP MS")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
#################################################################################
# IMG Relay 2 (Channel A) Interlocks - MPS Interlock
#
record(ao, "BL04I-VA-SPACE-03:RLA:SETSP")
{
    field(DESC, "MPS Interlock")
    field(OUT,  "BL04I-VA-IMG-04:RLA:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-7")
}
record(mbbo, "BL04I-VA-SPACE-03:RLA:ENABLE")
{
    field(DESC, "Enable Channel A Setpoint")
    field(OUT,  "BL04I-VA-IMG-04:RLA:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-03:RLA:SP")
{
    field(DESC, "MPS Interlock")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-IMG-04:RLA:SP MS")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
#################################################################################
# Pirani Guage  Relay Interlocks - Ion Pump Interlock
#
record(ao, "BL04I-VA-SPACE-03:RLB:SETSP")
{
    field(DESC, "Ion Pump I/L")
    field(OUT,  "BL04I-VA-PIRG-04:RLY:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
    field(DRVH, "1.2e2")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(mbbo, "BL04I-VA-SPACE-03:RLB:ENABLE")
{
    field(DESC, "Enable Pirani Setpoint")
    field(OUT,  "BL04I-VA-PIRG-04:RLY:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-03:RLB:SP")
{
    field(DESC, "Ion Pump I/L")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-PIRG-04:RLY:SP MS")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
}
#################################################################################
# space.template
#%, macro, __doc__, Template database for a vacuum space 
# Consists of just 1 pump, 1 gauge and 1 valve (or more likely groups of these)
# Pete Owens - 10/6/05
#
# substitutions:
#% macro, device, device name
#% macro, name, Object name and gui association name
#% macro, ionp, ion pump
#% macro, gauge, combination gauge
#% macro, img, IMG
#% macro, pirg, Pirani gauge
#% macro, valve, Vacuum valve  
################################################################################

# This associates an edm screen with the template
# % gui, SPACE4, edm, space.edl, device=BL04I-VA-SPACE-04

# This associates a BOY screen with the template
# % gui, SPACE4, boydetail, vacuumSpaceApp_opi/space_detail.opi, device=BL04I-VA-SPACE-04, desc=BL04I-VA-SPACE-04, name=SPACE4
# % gui, SPACE4, boyembed, vacuumSpaceApp_opi/space_embed_box.opi, device=BL04I-VA-SPACE-04, desc=BL04I-VA-SPACE-04, name=SPACE4
# % gui, SPACE4, boyembed, vacuumSpaceApp_opi/space_embed.opi, device=BL04I-VA-SPACE-04, desc=BL04I-VA-SPACE-04, name=SPACE4

# Pressure (maximum value from all spaces)
#
#% archiver 1 Monitor
#
record(ai, "BL04I-VA-SPACE-04:PLOG")
{
    field(DESC, "log Pressure")
    field(SCAN, "1 second")
    field(EGU,  "log")
    field(INP,  "BL04I-VA-GAUGE-05:PLOG")
    field(HOPR, "3")
    field(LOPR, "-11")
    field(HIGH, "-7")
    field(HSV,  "MINOR")
    field(ADEL, "0.025")
}
#
#% archiver 10
#% controldesk Pressure readback
#
record(ai, "BL04I-VA-SPACE-04:P")
{
    field(DESC, "Pressure")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GAUGE-05:P")
    field(HIGH, "1.0e-7")
    field(HSV,  "MINOR")
}
################################################################################
# Status
# B0 Gauge not OK
# B1 Ion Pump not swiched on
# B2 Valve not open
# B3 Pressure
#
#% archiver 10 Monitor
#% controldesk Status smon
#
record(mbbiDirect,"BL04I-VA-SPACE-04:STA") 
{
    field(DESC,"Status")
    field(SCAN,"1 second")
    field(INP, "BL04I-VA-SPACE-04:CALSTA PP MS")
}
record(calc, "BL04I-VA-SPACE-04:CALSTA")
{
    field(DESC, "Calculate Status")
    field(CALC, "A|B|C|D")
    field(INPA, "BL04I-VA-SPACE-04:IMGSTA PP MS")
    field(INPB, "BL04I-VA-SPACE-04:IONPSTA PP MS")
    field(INPC, "BL04I-VA-SPACE-04:VALVESTA PP MS")
    field(INPD, "BL04I-VA-SPACE-04:PSTA PP MS")
}
record(calc, "BL04I-VA-SPACE-04:IMGSTA")
{
    field(DESC, "IMGs Status")
    field(CALC, "(A<2||A=8)?0:1")
    field(INPA, "BL04I-VA-IMG-05:STA")
    field(HIGH, "1.5")
    field(HSV,  "MINOR")
#    field(INPA, "BL04I-VA-IMG-05:STA MS")
#    field(HIHI, "1.5")
#    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-04:IONPSTA")
{
    field(DESC, "Pumps Status")
    field(CALC, "(A=4)?0:2")
    field(INPA, "BL04I-VA-GIONP-04:STA")
    field(HIGH, "0.5")
    field(HSV,  "MINOR")
#    field(INPA, "BL04I-VA-GIONP-04:STA MS")
#    field(HIHI, "0.5")
#    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-04:VALVESTA")
{
    field(DESC, "Valves Status")
    field(CALC, "(A=1)?0:4")
    field(INPA, "BL04I-VA-VALVE-02:STA MS")
    field(HIHI, "3.5")
    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-04:PSTA")
{
    field(DESC, "Pressure Status")
    field(CALC, "(A<B)?0:8")
    field(INPA, "BL04I-VA-SPACE-04:P MS")
    field(INPB, "1.0e-7")
    field(HIGH, "7.5")
    field(HSV,  "MINOR")
}
#################################################################################
# Control Pumps
#
#% controldesk Pumps scon
#
record(bo,"BL04I-VA-SPACE-04:START") 
{
    field(DESC, "Control Pumps")
    field(OUT,  "BL04I-VA-GIONP-04:START PP")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
#
#% controldesk Pumps smon
#
record(bi,"BL04I-VA-SPACE-04:STARTING")
{
    field(DESC, "Starting Pumps")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-GIONP-04:STARTING")
    field(ZNAM, "")
    field(ONAM, "Starting")
}
#################################################################################
# Control Valves
#
#% controldesk Valves scon
#
record(mbbo,"BL04I-VA-SPACE-04:CON") 
{
    field(DESC, "Control Valves")
    field(OUT,  "BL04I-VA-VALVE-02:CON PP")
    field(ZRST, "Open")
    field(ONST, "Close")
    field(TWST, "Reset")
}
#
#% controldesk Valves smon
#
record(bi,"BL04I-VA-SPACE-04:OPENING")
{
    field(DESC, "Opening Valves")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-VALVE-02:OPENING")
    field(ZNAM, "")
    field(ONAM, "Opening")
}
#################################################################################
# Cold Cathode Enable
#
#% controldesk Gauges scon
#
record(bo, "BL04I-VA-SPACE-04:CCHV")
{
    field(DESC, "Cold Cathode Enable")
    field(OUT,  "BL04I-VA-IMG-05:CCHV PP")
    field(ZNAM, "Off")
    field(ONAM, "On")
}
#
#% controldesk Gauges smon
#
record(bi,"BL04I-VA-SPACE-04:SWITCHING")
{
    field(DESC, "Switching")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-IMG-05:SWITCHING")
    field(ZNAM, "")
    field(ONAM, "Switching")
}
#################################################################################
# PIRG Control Interlocks - IMG Enable
#
record(ao, "BL04I-VA-SPACE-04:CTL:SETSP")
{
    field(DESC, "IMG Enable")
    field(OUT,  "BL04I-VA-PIRG-05:CTL:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
    field(DRVH, "9.5e-1")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(mbbo, "BL04I-VA-SPACE-04:CTL:ENABLE")
{
    field(DESC, "Enable Control Setpoint")
    field(OUT,  "BL04I-VA-PIRG-05:CTL:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-04:CTL:SP")
{
    field(DESC, "IMG Enable")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-PIRG-05:CTL:SP MS")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
}
#################################################################################
# IMG Protection Interlocks - IMG Overpressure
#
record(ao, "BL04I-VA-SPACE-04:PRO:SETSP")
{
    field(DESC, "IMG Overpressure")
    field(OUT,  "BL04I-VA-IMG-05:PRO:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
    field(DRVH, "1.0e-2")
    field(DRVL, "1.3e-5")
    field(DOL , "5.0e-4")
}
record(mbbo, "BL04I-VA-SPACE-04:PRO:ENABLE")
{
    field(DESC, "Enable Protection Setpoint")
    field(OUT,  "BL04I-VA-IMG-05:PRO:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-04:PRO:SP")
{
    field(DESC, "IMG Overpressure")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-IMG-05:PRO:SP MS")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
}
#################################################################################
# IMG Relay Interlocks - Valve Interlock
#
record(ao, "BL04I-VA-SPACE-04:RLY:SETSP")
{
    field(DESC, "Valve I/L")
    field(OUT,  "BL04I-VA-IMG-05:RLY:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-6")
}
record(mbbo, "BL04I-VA-SPACE-04:RLY:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(OUT,  "BL04I-VA-IMG-05:RLY:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-04:RLY:SP")
{
    field(DESC, "Valve I/L")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-IMG-05:RLY:SP MS")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
#################################################################################
# IMG Relay 2 (Channel A) Interlocks - MPS Interlock
#
record(ao, "BL04I-VA-SPACE-04:RLA:SETSP")
{
    field(DESC, "MPS Interlock")
    field(OUT,  "BL04I-VA-IMG-05:RLA:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-7")
}
record(mbbo, "BL04I-VA-SPACE-04:RLA:ENABLE")
{
    field(DESC, "Enable Channel A Setpoint")
    field(OUT,  "BL04I-VA-IMG-05:RLA:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-04:RLA:SP")
{
    field(DESC, "MPS Interlock")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-IMG-05:RLA:SP MS")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
#################################################################################
# Pirani Guage  Relay Interlocks - Ion Pump Interlock
#
record(ao, "BL04I-VA-SPACE-04:RLB:SETSP")
{
    field(DESC, "Ion Pump I/L")
    field(OUT,  "BL04I-VA-PIRG-05:RLY:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
    field(DRVH, "1.2e2")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(mbbo, "BL04I-VA-SPACE-04:RLB:ENABLE")
{
    field(DESC, "Enable Pirani Setpoint")
    field(OUT,  "BL04I-VA-PIRG-05:RLY:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-04:RLB:SP")
{
    field(DESC, "Ion Pump I/L")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-PIRG-05:RLY:SP MS")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
}
#################################################################################
# space.template
#%, macro, __doc__, Template database for a vacuum space 
# Consists of just 1 pump, 1 gauge and 1 valve (or more likely groups of these)
# Pete Owens - 10/6/05
#
# substitutions:
#% macro, device, device name
#% macro, name, Object name and gui association name
#% macro, ionp, ion pump
#% macro, gauge, combination gauge
#% macro, img, IMG
#% macro, pirg, Pirani gauge
#% macro, valve, Vacuum valve  
################################################################################

# This associates an edm screen with the template
# % gui, SPACE5, edm, space.edl, device=BL04I-VA-SPACE-05

# This associates a BOY screen with the template
# % gui, SPACE5, boydetail, vacuumSpaceApp_opi/space_detail.opi, device=BL04I-VA-SPACE-05, desc=BL04I-VA-SPACE-05, name=SPACE5
# % gui, SPACE5, boyembed, vacuumSpaceApp_opi/space_embed_box.opi, device=BL04I-VA-SPACE-05, desc=BL04I-VA-SPACE-05, name=SPACE5
# % gui, SPACE5, boyembed, vacuumSpaceApp_opi/space_embed.opi, device=BL04I-VA-SPACE-05, desc=BL04I-VA-SPACE-05, name=SPACE5

# Pressure (maximum value from all spaces)
#
#% archiver 1 Monitor
#
record(ai, "BL04I-VA-SPACE-05:PLOG")
{
    field(DESC, "log Pressure")
    field(SCAN, "1 second")
    field(EGU,  "log")
    field(INP,  "BL04I-VA-GAUGE-06:PLOG")
    field(HOPR, "3")
    field(LOPR, "-11")
    field(HIGH, "-7")
    field(HSV,  "MINOR")
    field(ADEL, "0.025")
}
#
#% archiver 10
#% controldesk Pressure readback
#
record(ai, "BL04I-VA-SPACE-05:P")
{
    field(DESC, "Pressure")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GAUGE-06:P")
    field(HIGH, "1.0e-7")
    field(HSV,  "MINOR")
}
################################################################################
# Status
# B0 Gauge not OK
# B1 Ion Pump not swiched on
# B2 Valve not open
# B3 Pressure
#
#% archiver 10 Monitor
#% controldesk Status smon
#
record(mbbiDirect,"BL04I-VA-SPACE-05:STA") 
{
    field(DESC,"Status")
    field(SCAN,"1 second")
    field(INP, "BL04I-VA-SPACE-05:CALSTA PP MS")
}
record(calc, "BL04I-VA-SPACE-05:CALSTA")
{
    field(DESC, "Calculate Status")
    field(CALC, "A|B|C|D")
    field(INPA, "BL04I-VA-SPACE-05:IMGSTA PP MS")
    field(INPB, "BL04I-VA-SPACE-05:IONPSTA PP MS")
    field(INPC, "BL04I-VA-SPACE-05:VALVESTA PP MS")
    field(INPD, "BL04I-VA-SPACE-05:PSTA PP MS")
}
record(calc, "BL04I-VA-SPACE-05:IMGSTA")
{
    field(DESC, "IMGs Status")
    field(CALC, "(A<2||A=8)?0:1")
    field(INPA, "BL04I-VA-IMG-06:STA")
    field(HIGH, "1.5")
    field(HSV,  "MINOR")
#    field(INPA, "BL04I-VA-IMG-06:STA MS")
#    field(HIHI, "1.5")
#    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-05:IONPSTA")
{
    field(DESC, "Pumps Status")
    field(CALC, "(A=4)?0:2")
    field(INPA, "BL04I-VA-IONP-07:STA")
    field(HIGH, "0.5")
    field(HSV,  "MINOR")
#    field(INPA, "BL04I-VA-IONP-07:STA MS")
#    field(HIHI, "0.5")
#    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-05:VALVESTA")
{
    field(DESC, "Valves Status")
    field(CALC, "(A=1)?0:4")
    field(INPA, "BL04I-VA-VALVE-03:STA MS")
    field(HIHI, "3.5")
    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-05:PSTA")
{
    field(DESC, "Pressure Status")
    field(CALC, "(A<B)?0:8")
    field(INPA, "BL04I-VA-SPACE-05:P MS")
    field(INPB, "1.0e-7")
    field(HIGH, "7.5")
    field(HSV,  "MINOR")
}
#################################################################################
# Control Pumps
#
#% controldesk Pumps scon
#
record(bo,"BL04I-VA-SPACE-05:START") 
{
    field(DESC, "Control Pumps")
    field(OUT,  "BL04I-VA-IONP-07:START PP")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
#
#% controldesk Pumps smon
#
record(bi,"BL04I-VA-SPACE-05:STARTING")
{
    field(DESC, "Starting Pumps")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-IONP-07:STARTING")
    field(ZNAM, "")
    field(ONAM, "Starting")
}
#################################################################################
# Control Valves
#
#% controldesk Valves scon
#
record(mbbo,"BL04I-VA-SPACE-05:CON") 
{
    field(DESC, "Control Valves")
    field(OUT,  "BL04I-VA-VALVE-03:CON PP")
    field(ZRST, "Open")
    field(ONST, "Close")
    field(TWST, "Reset")
}
#
#% controldesk Valves smon
#
record(bi,"BL04I-VA-SPACE-05:OPENING")
{
    field(DESC, "Opening Valves")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-VALVE-03:OPENING")
    field(ZNAM, "")
    field(ONAM, "Opening")
}
#################################################################################
# Cold Cathode Enable
#
#% controldesk Gauges scon
#
record(bo, "BL04I-VA-SPACE-05:CCHV")
{
    field(DESC, "Cold Cathode Enable")
    field(OUT,  "BL04I-VA-IMG-06:CCHV PP")
    field(ZNAM, "Off")
    field(ONAM, "On")
}
#
#% controldesk Gauges smon
#
record(bi,"BL04I-VA-SPACE-05:SWITCHING")
{
    field(DESC, "Switching")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-IMG-06:SWITCHING")
    field(ZNAM, "")
    field(ONAM, "Switching")
}
#################################################################################
# PIRG Control Interlocks - IMG Enable
#
record(ao, "BL04I-VA-SPACE-05:CTL:SETSP")
{
    field(DESC, "IMG Enable")
    field(OUT,  "BL04I-VA-PIRG-06:CTL:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
    field(DRVH, "9.5e-1")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(mbbo, "BL04I-VA-SPACE-05:CTL:ENABLE")
{
    field(DESC, "Enable Control Setpoint")
    field(OUT,  "BL04I-VA-PIRG-06:CTL:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-05:CTL:SP")
{
    field(DESC, "IMG Enable")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-PIRG-06:CTL:SP MS")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
}
#################################################################################
# IMG Protection Interlocks - IMG Overpressure
#
record(ao, "BL04I-VA-SPACE-05:PRO:SETSP")
{
    field(DESC, "IMG Overpressure")
    field(OUT,  "BL04I-VA-IMG-06:PRO:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
    field(DRVH, "1.0e-2")
    field(DRVL, "1.3e-5")
    field(DOL , "5.0e-4")
}
record(mbbo, "BL04I-VA-SPACE-05:PRO:ENABLE")
{
    field(DESC, "Enable Protection Setpoint")
    field(OUT,  "BL04I-VA-IMG-06:PRO:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-05:PRO:SP")
{
    field(DESC, "IMG Overpressure")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-IMG-06:PRO:SP MS")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
}
#################################################################################
# IMG Relay Interlocks - Valve Interlock
#
record(ao, "BL04I-VA-SPACE-05:RLY:SETSP")
{
    field(DESC, "Valve I/L")
    field(OUT,  "BL04I-VA-IMG-06:RLY:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-6")
}
record(mbbo, "BL04I-VA-SPACE-05:RLY:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(OUT,  "BL04I-VA-IMG-06:RLY:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-05:RLY:SP")
{
    field(DESC, "Valve I/L")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-IMG-06:RLY:SP MS")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
#################################################################################
# IMG Relay 2 (Channel A) Interlocks - MPS Interlock
#
record(ao, "BL04I-VA-SPACE-05:RLA:SETSP")
{
    field(DESC, "MPS Interlock")
    field(OUT,  "BL04I-VA-IMG-06:RLA:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-7")
}
record(mbbo, "BL04I-VA-SPACE-05:RLA:ENABLE")
{
    field(DESC, "Enable Channel A Setpoint")
    field(OUT,  "BL04I-VA-IMG-06:RLA:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-05:RLA:SP")
{
    field(DESC, "MPS Interlock")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-IMG-06:RLA:SP MS")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
#################################################################################
# Pirani Guage  Relay Interlocks - Ion Pump Interlock
#
record(ao, "BL04I-VA-SPACE-05:RLB:SETSP")
{
    field(DESC, "Ion Pump I/L")
    field(OUT,  "BL04I-VA-PIRG-06:RLY:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
    field(DRVH, "1.2e2")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(mbbo, "BL04I-VA-SPACE-05:RLB:ENABLE")
{
    field(DESC, "Enable Pirani Setpoint")
    field(OUT,  "BL04I-VA-PIRG-06:RLY:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-05:RLB:SP")
{
    field(DESC, "Ion Pump I/L")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-PIRG-06:RLY:SP MS")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
}
#################################################################################
# space.template
#%, macro, __doc__, Template database for a vacuum space 
# Consists of just 1 pump, 1 gauge and 1 valve (or more likely groups of these)
# Pete Owens - 10/6/05
#
# substitutions:
#% macro, device, device name
#% macro, name, Object name and gui association name
#% macro, ionp, ion pump
#% macro, gauge, combination gauge
#% macro, img, IMG
#% macro, pirg, Pirani gauge
#% macro, valve, Vacuum valve  
################################################################################

# This associates an edm screen with the template
# % gui, SPACE98, edm, space.edl, device=BL04I-VA-SPACE-98

# This associates a BOY screen with the template
# % gui, SPACE98, boydetail, vacuumSpaceApp_opi/space_detail.opi, device=BL04I-VA-SPACE-98, desc=BL04I-VA-SPACE-98, name=SPACE98
# % gui, SPACE98, boyembed, vacuumSpaceApp_opi/space_embed_box.opi, device=BL04I-VA-SPACE-98, desc=BL04I-VA-SPACE-98, name=SPACE98
# % gui, SPACE98, boyembed, vacuumSpaceApp_opi/space_embed.opi, device=BL04I-VA-SPACE-98, desc=BL04I-VA-SPACE-98, name=SPACE98

# Pressure (maximum value from all spaces)
#
#% archiver 1 Monitor
#
record(ai, "BL04I-VA-SPACE-98:PLOG")
{
    field(DESC, "log Pressure")
    field(SCAN, "1 second")
    field(EGU,  "log")
    field(INP,  "BL04I-VA-GGAUG-98:PLOG")
    field(HOPR, "3")
    field(LOPR, "-11")
    field(HIGH, "-7")
    field(HSV,  "MINOR")
    field(ADEL, "0.025")
}
#
#% archiver 10
#% controldesk Pressure readback
#
record(ai, "BL04I-VA-SPACE-98:P")
{
    field(DESC, "Pressure")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GGAUG-98:P")
    field(HIGH, "1.0e-7")
    field(HSV,  "MINOR")
}
################################################################################
# Status
# B0 Gauge not OK
# B1 Ion Pump not swiched on
# B2 Valve not open
# B3 Pressure
#
#% archiver 10 Monitor
#% controldesk Status smon
#
record(mbbiDirect,"BL04I-VA-SPACE-98:STA") 
{
    field(DESC,"Status")
    field(SCAN,"1 second")
    field(INP, "BL04I-VA-SPACE-98:CALSTA PP MS")
}
record(calc, "BL04I-VA-SPACE-98:CALSTA")
{
    field(DESC, "Calculate Status")
    field(CALC, "A|B|C|D")
    field(INPA, "BL04I-VA-SPACE-98:IMGSTA PP MS")
    field(INPB, "BL04I-VA-SPACE-98:IONPSTA PP MS")
    field(INPC, "BL04I-VA-SPACE-98:VALVESTA PP MS")
    field(INPD, "BL04I-VA-SPACE-98:PSTA PP MS")
}
record(calc, "BL04I-VA-SPACE-98:IMGSTA")
{
    field(DESC, "IMGs Status")
    field(CALC, "(A<2||A=8)?0:1")
    field(INPA, "BL04I-VA-GIMG-98:STA")
    field(HIGH, "1.5")
    field(HSV,  "MINOR")
#    field(INPA, "BL04I-VA-GIMG-98:STA MS")
#    field(HIHI, "1.5")
#    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-98:IONPSTA")
{
    field(DESC, "Pumps Status")
    field(CALC, "(A=4)?0:2")
    field(INPA, "BL04I-VA-GIONP-98:STA")
    field(HIGH, "0.5")
    field(HSV,  "MINOR")
#    field(INPA, "BL04I-VA-GIONP-98:STA MS")
#    field(HIHI, "0.5")
#    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-98:VALVESTA")
{
    field(DESC, "Valves Status")
    field(CALC, "(A=1)?0:4")
    field(INPA, "BL04I-VA-GVALV-98:STA MS")
    field(HIHI, "3.5")
    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-98:PSTA")
{
    field(DESC, "Pressure Status")
    field(CALC, "(A<B)?0:8")
    field(INPA, "BL04I-VA-SPACE-98:P MS")
    field(INPB, "1.0e-7")
    field(HIGH, "7.5")
    field(HSV,  "MINOR")
}
#################################################################################
# Control Pumps
#
#% controldesk Pumps scon
#
record(bo,"BL04I-VA-SPACE-98:START") 
{
    field(DESC, "Control Pumps")
    field(OUT,  "BL04I-VA-GIONP-98:START PP")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
#
#% controldesk Pumps smon
#
record(bi,"BL04I-VA-SPACE-98:STARTING")
{
    field(DESC, "Starting Pumps")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-GIONP-98:STARTING")
    field(ZNAM, "")
    field(ONAM, "Starting")
}
#################################################################################
# Control Valves
#
#% controldesk Valves scon
#
record(mbbo,"BL04I-VA-SPACE-98:CON") 
{
    field(DESC, "Control Valves")
    field(OUT,  "BL04I-VA-GVALV-98:CON PP")
    field(ZRST, "Open")
    field(ONST, "Close")
    field(TWST, "Reset")
}
#
#% controldesk Valves smon
#
record(bi,"BL04I-VA-SPACE-98:OPENING")
{
    field(DESC, "Opening Valves")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-GVALV-98:OPENING")
    field(ZNAM, "")
    field(ONAM, "Opening")
}
#################################################################################
# Cold Cathode Enable
#
#% controldesk Gauges scon
#
record(bo, "BL04I-VA-SPACE-98:CCHV")
{
    field(DESC, "Cold Cathode Enable")
    field(OUT,  "BL04I-VA-GIMG-98:CCHV PP")
    field(ZNAM, "Off")
    field(ONAM, "On")
}
#
#% controldesk Gauges smon
#
record(bi,"BL04I-VA-SPACE-98:SWITCHING")
{
    field(DESC, "Switching")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-GIMG-98:SWITCHING")
    field(ZNAM, "")
    field(ONAM, "Switching")
}
#################################################################################
# PIRG Control Interlocks - IMG Enable
#
record(ao, "BL04I-VA-SPACE-98:CTL:SETSP")
{
    field(DESC, "IMG Enable")
    field(OUT,  "BL04I-VA-GPIRG-98:CTL:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
    field(DRVH, "9.5e-1")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(mbbo, "BL04I-VA-SPACE-98:CTL:ENABLE")
{
    field(DESC, "Enable Control Setpoint")
    field(OUT,  "BL04I-VA-GPIRG-98:CTL:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-98:CTL:SP")
{
    field(DESC, "IMG Enable")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GPIRG-98:CTL:SP MS")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
}
#################################################################################
# IMG Protection Interlocks - IMG Overpressure
#
record(ao, "BL04I-VA-SPACE-98:PRO:SETSP")
{
    field(DESC, "IMG Overpressure")
    field(OUT,  "BL04I-VA-GIMG-98:PRO:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
    field(DRVH, "1.0e-2")
    field(DRVL, "1.3e-5")
    field(DOL , "5.0e-4")
}
record(mbbo, "BL04I-VA-SPACE-98:PRO:ENABLE")
{
    field(DESC, "Enable Protection Setpoint")
    field(OUT,  "BL04I-VA-GIMG-98:PRO:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-98:PRO:SP")
{
    field(DESC, "IMG Overpressure")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GIMG-98:PRO:SP MS")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
}
#################################################################################
# IMG Relay Interlocks - Valve Interlock
#
record(ao, "BL04I-VA-SPACE-98:RLY:SETSP")
{
    field(DESC, "Valve I/L")
    field(OUT,  "BL04I-VA-GIMG-98:RLY:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-6")
}
record(mbbo, "BL04I-VA-SPACE-98:RLY:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(OUT,  "BL04I-VA-GIMG-98:RLY:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-98:RLY:SP")
{
    field(DESC, "Valve I/L")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GIMG-98:RLY:SP MS")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
#################################################################################
# IMG Relay 2 (Channel A) Interlocks - MPS Interlock
#
record(ao, "BL04I-VA-SPACE-98:RLA:SETSP")
{
    field(DESC, "MPS Interlock")
    field(OUT,  "BL04I-VA-GIMG-98:RLA:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-7")
}
record(mbbo, "BL04I-VA-SPACE-98:RLA:ENABLE")
{
    field(DESC, "Enable Channel A Setpoint")
    field(OUT,  "BL04I-VA-GIMG-98:RLA:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-98:RLA:SP")
{
    field(DESC, "MPS Interlock")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GIMG-98:RLA:SP MS")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
#################################################################################
# Pirani Guage  Relay Interlocks - Ion Pump Interlock
#
record(ao, "BL04I-VA-SPACE-98:RLB:SETSP")
{
    field(DESC, "Ion Pump I/L")
    field(OUT,  "BL04I-VA-GPIRG-98:RLY:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
    field(DRVH, "1.2e2")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(mbbo, "BL04I-VA-SPACE-98:RLB:ENABLE")
{
    field(DESC, "Enable Pirani Setpoint")
    field(OUT,  "BL04I-VA-GPIRG-98:RLY:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-98:RLB:SP")
{
    field(DESC, "Ion Pump I/L")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GPIRG-98:RLY:SP MS")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
}
#################################################################################
# space.template
#%, macro, __doc__, Template database for a vacuum space 
# Consists of just 1 pump, 1 gauge and 1 valve (or more likely groups of these)
# Pete Owens - 10/6/05
#
# substitutions:
#% macro, device, device name
#% macro, name, Object name and gui association name
#% macro, ionp, ion pump
#% macro, gauge, combination gauge
#% macro, img, IMG
#% macro, pirg, Pirani gauge
#% macro, valve, Vacuum valve  
################################################################################

# This associates an edm screen with the template
# % gui, SPACE99, edm, space.edl, device=BL04I-VA-SPACE-99

# This associates a BOY screen with the template
# % gui, SPACE99, boydetail, vacuumSpaceApp_opi/space_detail.opi, device=BL04I-VA-SPACE-99, desc=BL04I-VA-SPACE-99, name=SPACE99
# % gui, SPACE99, boyembed, vacuumSpaceApp_opi/space_embed_box.opi, device=BL04I-VA-SPACE-99, desc=BL04I-VA-SPACE-99, name=SPACE99
# % gui, SPACE99, boyembed, vacuumSpaceApp_opi/space_embed.opi, device=BL04I-VA-SPACE-99, desc=BL04I-VA-SPACE-99, name=SPACE99

# Pressure (maximum value from all spaces)
#
#% archiver 1 Monitor
#
record(ai, "BL04I-VA-SPACE-99:PLOG")
{
    field(DESC, "log Pressure")
    field(SCAN, "1 second")
    field(EGU,  "log")
    field(INP,  "BL04I-VA-GGAUG-99:PLOG")
    field(HOPR, "3")
    field(LOPR, "-11")
    field(HIGH, "-7")
    field(HSV,  "MINOR")
    field(ADEL, "0.025")
}
#
#% archiver 10
#% controldesk Pressure readback
#
record(ai, "BL04I-VA-SPACE-99:P")
{
    field(DESC, "Pressure")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GGAUG-99:P")
    field(HIGH, "1.0e-7")
    field(HSV,  "MINOR")
}
################################################################################
# Status
# B0 Gauge not OK
# B1 Ion Pump not swiched on
# B2 Valve not open
# B3 Pressure
#
#% archiver 10 Monitor
#% controldesk Status smon
#
record(mbbiDirect,"BL04I-VA-SPACE-99:STA") 
{
    field(DESC,"Status")
    field(SCAN,"1 second")
    field(INP, "BL04I-VA-SPACE-99:CALSTA PP MS")
}
record(calc, "BL04I-VA-SPACE-99:CALSTA")
{
    field(DESC, "Calculate Status")
    field(CALC, "A|B|C|D")
    field(INPA, "BL04I-VA-SPACE-99:IMGSTA PP MS")
    field(INPB, "BL04I-VA-SPACE-99:IONPSTA PP MS")
    field(INPC, "BL04I-VA-SPACE-99:VALVESTA PP MS")
    field(INPD, "BL04I-VA-SPACE-99:PSTA PP MS")
}
record(calc, "BL04I-VA-SPACE-99:IMGSTA")
{
    field(DESC, "IMGs Status")
    field(CALC, "(A<2||A=8)?0:1")
    field(INPA, "BL04I-VA-GIMG-99:STA")
    field(HIGH, "1.5")
    field(HSV,  "MINOR")
#    field(INPA, "BL04I-VA-GIMG-99:STA MS")
#    field(HIHI, "1.5")
#    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-99:IONPSTA")
{
    field(DESC, "Pumps Status")
    field(CALC, "(A=4)?0:2")
    field(INPA, "BL04I-VA-GIONP-99:STA")
    field(HIGH, "0.5")
    field(HSV,  "MINOR")
#    field(INPA, "BL04I-VA-GIONP-99:STA MS")
#    field(HIHI, "0.5")
#    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-99:VALVESTA")
{
    field(DESC, "Valves Status")
    field(CALC, "(A=1)?0:4")
    field(INPA, "BL04I-VA-GVALV-99:STA MS")
    field(HIHI, "3.5")
    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-99:PSTA")
{
    field(DESC, "Pressure Status")
    field(CALC, "(A<B)?0:8")
    field(INPA, "BL04I-VA-SPACE-99:P MS")
    field(INPB, "1.0e-7")
    field(HIGH, "7.5")
    field(HSV,  "MINOR")
}
#################################################################################
# Control Pumps
#
#% controldesk Pumps scon
#
record(bo,"BL04I-VA-SPACE-99:START") 
{
    field(DESC, "Control Pumps")
    field(OUT,  "BL04I-VA-GIONP-99:START PP")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
#
#% controldesk Pumps smon
#
record(bi,"BL04I-VA-SPACE-99:STARTING")
{
    field(DESC, "Starting Pumps")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-GIONP-99:STARTING")
    field(ZNAM, "")
    field(ONAM, "Starting")
}
#################################################################################
# Control Valves
#
#% controldesk Valves scon
#
record(mbbo,"BL04I-VA-SPACE-99:CON") 
{
    field(DESC, "Control Valves")
    field(OUT,  "BL04I-VA-GVALV-99:CON PP")
    field(ZRST, "Open")
    field(ONST, "Close")
    field(TWST, "Reset")
}
#
#% controldesk Valves smon
#
record(bi,"BL04I-VA-SPACE-99:OPENING")
{
    field(DESC, "Opening Valves")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-GVALV-99:OPENING")
    field(ZNAM, "")
    field(ONAM, "Opening")
}
#################################################################################
# Cold Cathode Enable
#
#% controldesk Gauges scon
#
record(bo, "BL04I-VA-SPACE-99:CCHV")
{
    field(DESC, "Cold Cathode Enable")
    field(OUT,  "BL04I-VA-GIMG-99:CCHV PP")
    field(ZNAM, "Off")
    field(ONAM, "On")
}
#
#% controldesk Gauges smon
#
record(bi,"BL04I-VA-SPACE-99:SWITCHING")
{
    field(DESC, "Switching")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-GIMG-99:SWITCHING")
    field(ZNAM, "")
    field(ONAM, "Switching")
}
#################################################################################
# PIRG Control Interlocks - IMG Enable
#
record(ao, "BL04I-VA-SPACE-99:CTL:SETSP")
{
    field(DESC, "IMG Enable")
    field(OUT,  "BL04I-VA-GPIRG-99:CTL:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
    field(DRVH, "9.5e-1")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(mbbo, "BL04I-VA-SPACE-99:CTL:ENABLE")
{
    field(DESC, "Enable Control Setpoint")
    field(OUT,  "BL04I-VA-GPIRG-99:CTL:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-99:CTL:SP")
{
    field(DESC, "IMG Enable")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GPIRG-99:CTL:SP MS")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
}
#################################################################################
# IMG Protection Interlocks - IMG Overpressure
#
record(ao, "BL04I-VA-SPACE-99:PRO:SETSP")
{
    field(DESC, "IMG Overpressure")
    field(OUT,  "BL04I-VA-GIMG-99:PRO:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
    field(DRVH, "1.0e-2")
    field(DRVL, "1.3e-5")
    field(DOL , "5.0e-4")
}
record(mbbo, "BL04I-VA-SPACE-99:PRO:ENABLE")
{
    field(DESC, "Enable Protection Setpoint")
    field(OUT,  "BL04I-VA-GIMG-99:PRO:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-99:PRO:SP")
{
    field(DESC, "IMG Overpressure")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GIMG-99:PRO:SP MS")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
}
#################################################################################
# IMG Relay Interlocks - Valve Interlock
#
record(ao, "BL04I-VA-SPACE-99:RLY:SETSP")
{
    field(DESC, "Valve I/L")
    field(OUT,  "BL04I-VA-GIMG-99:RLY:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-6")
}
record(mbbo, "BL04I-VA-SPACE-99:RLY:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(OUT,  "BL04I-VA-GIMG-99:RLY:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-99:RLY:SP")
{
    field(DESC, "Valve I/L")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GIMG-99:RLY:SP MS")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
#################################################################################
# IMG Relay 2 (Channel A) Interlocks - MPS Interlock
#
record(ao, "BL04I-VA-SPACE-99:RLA:SETSP")
{
    field(DESC, "MPS Interlock")
    field(OUT,  "BL04I-VA-GIMG-99:RLA:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-7")
}
record(mbbo, "BL04I-VA-SPACE-99:RLA:ENABLE")
{
    field(DESC, "Enable Channel A Setpoint")
    field(OUT,  "BL04I-VA-GIMG-99:RLA:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-99:RLA:SP")
{
    field(DESC, "MPS Interlock")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GIMG-99:RLA:SP MS")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
#################################################################################
# Pirani Guage  Relay Interlocks - Ion Pump Interlock
#
record(ao, "BL04I-VA-SPACE-99:RLB:SETSP")
{
    field(DESC, "Ion Pump I/L")
    field(OUT,  "BL04I-VA-GPIRG-99:RLY:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
    field(DRVH, "1.2e2")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(mbbo, "BL04I-VA-SPACE-99:RLB:ENABLE")
{
    field(DESC, "Enable Pirani Setpoint")
    field(OUT,  "BL04I-VA-GPIRG-99:RLY:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-99:RLB:SP")
{
    field(DESC, "Ion Pump I/L")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GPIRG-99:RLY:SP MS")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
}
#################################################################################
# space_b.template
#%, macro, __doc__, Template database for a vacuum space 
# Consists of just 1 pump, 1 gauge and 1 valve (or more likely groups of these)
# Pete Owens - 10/6/05
#
# Modified for mks937b
# Jonathan Thompson November 2010
#
# substitutions:
#% macro, device, device name
#% macro, name, Object name and gui association name
#% macro, ionp, ion pump
#% macro, gauge, combination gauge
#% macro, img, IMG
#% macro, pirg, Pirani gauge
#% macro, valve, Vacuum valve
# Note: The following relay numbers are mapped to the IMG or PIRG device number, not the absolute controller relay number.  
#% macro, valveIlRelay   , Valve interlock IMG relay
#% macro, mpsIlRelay1    , Machine protection system interlock IMG relay
#% macro, mpsIlRelay2    , Machine protection system interlock IMG relay
#% macro, rgaIlRelay     , RGA interlock IMG relay
#% macro, ionPumpIlRelay , Ion pump interlock PIRG relay
################################################################################



# This associates an edm screen with the template
# % gui, SPACE1, edm, space_b.edl, device=BL04I-VA-SPACE-01


# This associates a BOY screen with the template
# % gui, SPACE1, boydetail, vacuumSpaceApp_opi/space_detail_b.opi, device=BL04I-VA-SPACE-01, desc=BL04I-VA-SPACE-01, name=SPACE1
# % gui, SPACE1, boyembed, vacuumSpaceApp_opi/space_embed_box_b.opi, device=BL04I-VA-SPACE-01, desc=BL04I-VA-SPACE-01, name=SPACE1
# % gui, SPACE1, boyembed, vacuumSpaceApp_opi/space_embed_b.opi, device=BL04I-VA-SPACE-01, desc=BL04I-VA-SPACE-01, name=SPACE1

# These define what PVs a valve detail screen should contain
# % gui, SPACE1, readback, CTL SP Interlock,   BL04I-VA-SPACE-01:CTL:SP, =pv("BL04I-VA-SPACE-01:CTL:SP.DESC")
# % gui, SPACE1, readback, PRO Interlock,  BL04I-VA-SPACE-01:PRO:SP, =pv("BL04I-VA-SPACE-01:PRO:SP.DESC")
# % gui, SPACE1, readback, RLY Interlock,  BL04I-VA-SPACE-01:RLY:SP, =pv("BL04I-VA-SPACE-01:RLY:SP.DESC")
# % gui, SPACE1, readback, RLA Interlock,  BL04I-VA-SPACE-01:RLA:SP, =pv("BL04I-VA-SPACE-01:RLA:SP.DESC")
# % gui, SPACE1, readback, RGA RLY Interlock,  BL04I-VA-SPACE-01:RGARLY:SP, =pv("BL04I-VA-SPACE-01:RGARLY:SP.DESC")
# % gui, SPACE1, readback, Fast Valve RLY Interlock,  BL04I-VA-SPACE-01:FVALVRLY:SP, =pv("BL04I-VA-SPACE-01:FVALVRLY:SP.DESC")
# % gui, SPACE1, readback, RLB Interlock,  BL04I-VA-SPACE-01:RLB:SP, =pv("BL04I-VA-SPACE-01:RLB:SP.DESC")
# % gui, SPACE1, statusbits, Status,  BL04I-VA-SPACE-01:STA.VAL, IMGs, Pumps, Valves, Pressure
# % gui, SPACE1, demand, Set CTL SP Interlock,   BL04I-VA-SPACE-01:CTL:SETSP, =pv("BL04I-VA-SPACE-01:CTL:SETSP.DESC")
# % gui, SPACE1, enum, IMG Enable Ctrl, BL04I-VA-SPACE-01:CTL:ENABLE, concat(=pv("BL04I-VA-SPACE-01:CTL:SETSP.DESC"), " Ctrl")
# % gui, SPACE1, demand, Set PRO Interlock,  BL04I-VA-SPACE-01:PRO:SETSP, =pv("BL04I-VA-SPACE-01:PRO:SP.DESC")
# % gui, SPACE1, demand, Set RLY Interlock,  BL04I-VA-SPACE-01:RLY:SETSP, =pv("BL04I-VA-SPACE-01:RLY:SP.DESC")
# % gui, SPACE1, demand, Set RLA Interlock,  BL04I-VA-SPACE-01:RLA:SETSP, =pv("BL04I-VA-SPACE-01:RLA:SP.DESC")
# % gui, SPACE1, demand, Set RGA RLY Interlock,  BL04I-VA-SPACE-01:RGARLY:SETSP, =pv("BL04I-VA-SPACE-01:RGARLY:SP.DESC")
# % gui, SPACE1, demand, Set Fast Valve RLY Interlock,  BL04I-VA-SPACE-01:FVALVRLY:SETSP, =pv("BL04I-VA-SPACE-01:FVALVRLY:SP.DESC")
# % gui, SPACE1, demand, Set RLB Interlock,  BL04I-VA-SPACE-01:RLB:SETSP, =pv("BL04I-VA-SPACE-01:RLB:SETSP.DESC")

# Pressure (maximum value from all spaces)
#
#% archiver 1 Monitor
#
record(ai, "BL04I-VA-SPACE-01:PLOG")
{
    field(DESC, "log Pressure")
    field(SCAN, "1 second")
    field(EGU,  "log")
    field(INP,  "BL04I-VA-GGAUG-01:PLOG")
    field(HOPR, "3")
    field(LOPR, "-11")
    field(HIGH, "-7")
    field(HSV,  "MINOR")
    field(ADEL, "0.025")
}
#
#% archiver 10
#% controldesk Pressure readback
#
record(ai, "BL04I-VA-SPACE-01:P")
{
    field(DESC, "Pressure")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GGAUG-01:P")
    field(HIGH, "1.0e-7")
    field(HSV,  "MINOR")
}
################################################################################
# Status
# B0 Gauge not OK
# B1 Ion Pump not swiched on
# B2 Valve not open
# B3 Pressure
#
#% archiver 10 Monitor
#% controldesk Status smon
#
record(mbbiDirect,"BL04I-VA-SPACE-01:STA") 
{
    field(DESC,"Status")
    field(SCAN,"1 second")
    field(INP, "BL04I-VA-SPACE-01:CALSTA PP MS")
}
record(calc, "BL04I-VA-SPACE-01:CALSTA")
{
    field(DESC, "Calculate Status")
    field(CALC, "A|B|C|D")
    field(INPA, "BL04I-VA-SPACE-01:IMGSTA PP MS")
    field(INPB, "BL04I-VA-SPACE-01:IONPSTA PP MS")
    field(INPC, "BL04I-VA-SPACE-01:VALVESTA PP MS")
    field(INPD, "BL04I-VA-SPACE-01:PSTA PP MS")
}
record(calc, "BL04I-VA-SPACE-01:IMGSTA")
{
    field(DESC, "IMGs Status")
    field(CALC, "(A<2||A=8)?0:1")
    field(INPA, "BL04I-VA-GIMG-01:STA")
    field(HIGH, "1.5")
    field(HSV,  "MINOR")
#    field(INPA, "BL04I-VA-GIMG-01:STA MS")
#    field(HIHI, "1.5")
#    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-01:IONPSTA")
{
    field(DESC, "Pumps Status")
    field(CALC, "(A=4)?0:2")
    field(INPA, "BL04I-VA-GIONP-01:STA")
    field(HIGH, "0.5")
    field(HSV,  "MINOR")
#    field(INPA, "BL04I-VA-GIONP-01:STA MS")
#    field(HIHI, "0.5")
#    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-01:VALVESTA")
{
    field(DESC, "Valves Status")
    field(CALC, "(A=1)?0:4")
    field(INPA, "FE04I-VA-VALVE-02:STA MS")
    field(HIHI, "3.5")
    field(HHSV, "MAJOR")
}
record(calc, "BL04I-VA-SPACE-01:PSTA")
{
    field(DESC, "Pressure Status")
    field(CALC, "(A<B)?0:8")
    field(INPA, "BL04I-VA-SPACE-01:P MS")
    field(INPB, "1.0e-7")
    field(HIGH, "7.5")
    field(HSV,  "MINOR")
}
#################################################################################
# Control Pumps
#
#% controldesk Pumps scon
#
record(bo,"BL04I-VA-SPACE-01:START") 
{
    field(DESC, "Control Pumps")
    field(OUT,  "BL04I-VA-GIONP-01:START PP")
    field(ZNAM, "Stop")
    field(ONAM, "Start")
}
#
#% controldesk Pumps smon
#
record(bi,"BL04I-VA-SPACE-01:STARTING")
{
    field(DESC, "Starting Pumps")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-GIONP-01:STARTING")
    field(ZNAM, "")
    field(ONAM, "Starting")
}
#################################################################################
# Control Valves
#
#% controldesk Valves scon
#
record(mbbo,"BL04I-VA-SPACE-01:CON") 
{
    field(DESC, "Control Valves")
    field(OUT,  "FE04I-VA-VALVE-02:CON PP")
    field(ZRST, "Open")
    field(ONST, "Close")
    field(TWST, "Reset")
}
#
#% controldesk Valves smon
#
record(bi,"BL04I-VA-SPACE-01:OPENING")
{
    field(DESC, "Opening Valves")
    field(SCAN, "1 second")
    field(INP,  "FE04I-VA-VALVE-02:OPENING")
    field(ZNAM, "")
    field(ONAM, "Opening")
}
#################################################################################
# Cold Cathode Enable
#
#% controldesk Gauges scon
#
record(bo, "BL04I-VA-SPACE-01:CCHV")
{
    field(DESC, "Cold Cathode Enable")
    field(OUT,  "BL04I-VA-GIMG-01:CCHV PP")
    field(ZNAM, "Off")
    field(ONAM, "On")
}
#
#% controldesk Gauges smon
#
record(bi,"BL04I-VA-SPACE-01:SWITCHING")
{
    field(DESC, "Switching")
    field(SCAN, "1 second")
    field(INP,  "BL04I-VA-GIMG-01:SWITCHING")
    field(ZNAM, "")
    field(ONAM, "Switching")
}
#################################################################################
# PIRG Control Interlocks - IMG Enable
#
record(ao, "BL04I-VA-SPACE-01:CTL:SETSP")
{
    field(DESC, "IMG Enable")
    field(OUT,  "BL04I-VA-GPIRG-01:CTL:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
    field(DRVH, "9.5e-1")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(mbbo, "BL04I-VA-SPACE-01:CTL:ENABLE")
{
    field(DESC, "Enable Control Setpoint")
    field(OUT,  "BL04I-VA-GPIRG-01:CTL:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-01:CTL:SP")
{
    field(DESC, "IMG Enable")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GPIRG-01:CTL:SP MS")
    field(HOPR, "9.5e-1")
    field(LOPR, "2.7e-3")
}
#################################################################################
# IMG Protection Interlocks - IMG Overpressure
#
record(ao, "BL04I-VA-SPACE-01:PRO:SETSP")
{
    field(DESC, "IMG Overpressure")
    field(OUT,  "BL04I-VA-GIMG-01:PRO:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
    field(DRVH, "1.0e-2")
    field(DRVL, "1.3e-5")
    field(DOL , "5.0e-4")
}
record(mbbo, "BL04I-VA-SPACE-01:PRO:ENABLE")
{
    field(DESC, "Enable Protection Setpoint")
    field(OUT,  "BL04I-VA-GIMG-01:PRO:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-01:PRO:SP")
{
    field(DESC, "IMG Overpressure")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GIMG-01:PRO:SP MS")
    field(HOPR, "1.0e-2")
    field(LOPR, "1.3e-5")
}
#################################################################################
# IMG Relay Interlocks - Valve Interlock
#
record(ao, "BL04I-VA-SPACE-01:RLY:SETSP")
{
    field(DESC, "Valve I/L")
    field(OUT,  "BL04I-VA-GIMG-01:RLY1:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-6")
}
record(mbbo, "BL04I-VA-SPACE-01:RLY:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(OUT,  "BL04I-VA-GIMG-01:RLY1:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-01:RLY:SP")
{
    field(DESC, "Valve I/L")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GIMG-01:RLY1:SP MS")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
#################################################################################
# IMG Relay 2 (Channel A) Interlocks - MPS Interlock 1
#
record(ao, "BL04I-VA-SPACE-01:RLA:SETSP")
{
    field(DESC, "MPS Interlock 1")
    field(OUT,  "BL04I-VA-GIMG-01:RLY2:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-7")
}
record(mbbo, "BL04I-VA-SPACE-01:RLA:ENABLE")
{
    field(DESC, "Enable Channel A Setpoint")
    field(OUT,  "BL04I-VA-GIMG-01:RLY2:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-01:RLA:SP")
{
    field(DESC, "MPS Interlock 1")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GIMG-01:RLY2:SP MS")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
#################################################################################
# IMG Relay 3 (Channel A) Interlocks - MPS Interlock 2
#
record(ao, "BL04I-VA-SPACE-01:RLA2:SETSP")
{
    field(DESC, "MPS Interlock 2")
    field(OUT,  "BL04I-VA-GIMG-01:RLY3:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-7")
}
record(mbbo, "BL04I-VA-SPACE-01:RLA2:ENABLE")
{
    field(DESC, "Enable Channel A Setpoint")
    field(OUT,  "BL04I-VA-GIMG-01:RLY3:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-01:RLA2:SP")
{
    field(DESC, "MPS Interlock 2")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GIMG-01:RLY3:SP MS")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
#################################################################################
# Pirani Gauge  Relay Interlocks - Ion Pump Interlock
#
record(ao, "BL04I-VA-SPACE-01:RLB:SETSP")
{
    field(DESC, "Ion Pump I/L")
    field(OUT,  "BL04I-VA-GPIRG-01:RLY1:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
    field(DRVH, "1.2e2")
    field(DRVL, "2.7e-3")
    field(DOL , "1.0e-2")
}
record(mbbo, "BL04I-VA-SPACE-01:RLB:ENABLE")
{
    field(DESC, "Enable Pirani Setpoint")
    field(OUT,  "BL04I-VA-GPIRG-01:RLY1:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-01:RLB:SP")
{
    field(DESC, "Ion Pump I/L")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GPIRG-01:RLY1:SP MS")
    field(HOPR, "1.2e2")
    field(LOPR, "2.7e-3")
}
#################################################################################

#################################################################################
# IMG Relay Interlocks - RGA Interlock
#
record(ao, "BL04I-VA-SPACE-01:RGARLY:SETSP")
{
    field(DESC, "RGA I/L")
    field(OUT,  "BL04I-VA-GIMG-01:RLY4:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-4")
}
record(mbbo, "BL04I-VA-SPACE-01:RGARLY:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(OUT,  "BL04I-VA-GIMG-01:RLY4:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-01:RGARLY:SP")
{
    field(DESC, "RGA I/L")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GIMG-01:RLY4:SP MS")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}

#################################################################################
# IMG Relay Interlocks - Fast Valve Interlock
#
record(ao, "BL04I-VA-SPACE-01:FVALVRLY:SETSP")
{
    field(DESC, "Fast Valve I/L")
    field(OUT,  "BL04I-VA-GIMG-01:FRLY:SETSP PP")
    field(EGU,  "mbar")
    field(PREC, "1")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
    field(DRVH, "1.2e-2")
    field(DRVL, "2.7e-10")
    field(DOL , "1.0e-5")
}
record(mbbo, "BL04I-VA-SPACE-01:FVALVRLY:ENABLE")
{
    field(DESC, "Enable Relay Setpoint")
    field(OUT,  "BL04I-VA-GIMG-01:FRLY:ENABLE PP")
    field(ZRST, "Force On I/L")
    field(ONST, "I/L Operating")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRSV, "MAJOR")
    field(ONSV, "NO_ALARM")
    field(DOL , "1")
    field(PINI, "YES")
}
record(ai, "BL04I-VA-SPACE-01:FVALVRLY:SP")
{
    field(DESC, "Fast Valve I/L")
    field(SCAN, "1 second")
    field(EGU,  "mbar")
    field(INP,  "BL04I-VA-GIMG-01:FRLY:SP MS")
    field(HOPR, "1.2e-2")
    field(LOPR, "2.7e-10")
}
# % macro, P, Prefix
# % gui, CEN_ONE.STAT, edm, centerOne.edl, P=BL04I-VA-ESVG-01

# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:FIRMWAREVER_REQUEST") {
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_string(BL04I-VA-ESVG-01:FIRMWAREVER,PNR,_RBV) LPORT")
  field(PINI, "YES")
}

record(stringin, "BL04I-VA-ESVG-01:FIRMWAREVER_RBV") {
}
# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:SENSORTYPE1_REQUEST") {
  field(SCAN, "5 second")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_string(BL04I-VA-ESVG-01:SENSORTYPE1,TID,_RBV) LPORT")
  field(PINI, "YES")
}

record(stringin, "BL04I-VA-ESVG-01:SENSORTYPE1_RBV") {
}
# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:SWITCHFN_REQUEST") {
  field(SCAN, "5 second")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_int(BL04I-VA-ESVG-01:SWITCHFN,SPS,_RBV) LPORT")
  field(PINI, "YES")
}

record(ai, "BL04I-VA-ESVG-01:SWITCHFN_RBV") {
}


# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:MRANGE_REQUEST") {
  field(SCAN, "5 second")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_int(BL04I-VA-ESVG-01:MRANGE,FSR,_RBV) LPORT")
  field(PINI, "YES")
}

record(ai, "BL04I-VA-ESVG-01:MRANGE_RBV") {
}


# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name
# % macro, DEFAULT_VAL, Asyn port name
# % macro, DRVH, Asyn port name
# % macro, DRVL, Asyn port name


# Send query to the controller
record(ao, "BL04I-VA-ESVG-01:SAVE") {
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto set_int(SAV) LPORT")
  field(PINI, "NO")
  field(DRVH, "1")
  field(DRVL, "0")
  field(VAL, "1")
}


# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name
# % macro, DEFAULT_VAL, Asyn port name
# % macro, DRVH, Asyn port name
# % macro, DRVL, Asyn port name


# Send query to the controller
record(ao, "BL04I-VA-ESVG-01:FACTORYDEFAULT") {
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto set_int(SAV) LPORT")
  field(PINI, "NO")
  field(DRVH, "1")
  field(DRVL, "0")
  field(VAL, "0")
}


# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name
# % macro, PINIR, Asyn port name
# % macro, PINIW, Asyn port name
# % macro, DEFAULT_VAL, Asyn port name
# % macro, DRVH, Asyn port name
# % macro, DRVL, Asyn port name
# % macro, ZRSTI, Asyn port name
# % macro, ONSTI, Asyn port name
# % macro, TWSTI, Asyn port name
# % macro, THSTI, Asyn port name
# % macro, FRSTI, Asyn port name
# % macro, FVSTI, Asyn port name
# % macro, SXSTI, Asyn port name
# % macro, SVSTI, Asyn port name
# % macro, EISTI, Asyn port name
# % macro, NISTI, Asyn port name
# % macro, TESTI, Asyn port name
# % macro, ELSTI, Asyn port name
# % macro, TVSTI, Asyn port name
# % macro, TTSTI, Asyn port name
# % macro, FTSTI, Asyn port name
# % macro, FFSTI, Asyn port name
# % macro, ZRVLI, Asyn port name
# % macro, ONVLI, Asyn port name
# % macro, TWVLI, Asyn port name
# % macro, THVLI, Asyn port name
# % macro, FRVLI, Asyn port name
# % macro, FVVLI, Asyn port name
# % macro, SXVLI, Asyn port name
# % macro, SVVLI, Asyn port name
# % macro, EIVLI, Asyn port name
# % macro, NIVLI, Asyn port name
# % macro, TEVLI, Asyn port name
# % macro, ELVLI, Asyn port name
# % macro, TVVLI, Asyn port name
# % macro, TTVLI, Asyn port name
# % macro, FTVLI, Asyn port name
# % macro, FFVLI, Asyn port name
# % macro, ZRSTO, Asyn port name
# % macro, ONSTO, Asyn port name
# % macro, TWSTO, Asyn port name
# % macro, THSTO, Asyn port name
# % macro, FRSTO, Asyn port name
# % macro, FVSTO, Asyn port name
# % macro, SXSTO, Asyn port name
# % macro, SVSTO, Asyn port name
# % macro, EISTO, Asyn port name
# % macro, NISTO, Asyn port name
# % macro, TESTO, Asyn port name
# % macro, ELSTO, Asyn port name
# % macro, TVSTO, Asyn port name
# % macro, TTSTO, Asyn port name
# % macro, FTSTO, Asyn port name
# % macro, FFSTO, Asyn port name
# % macro, ZRVLO, Asyn port name
# % macro, ONVLO, Asyn port name
# % macro, TWVLO, Asyn port name
# % macro, THVLO, Asyn port name
# % macro, FRVLO, Asyn port name
# % macro, FVVLO, Asyn port name
# % macro, SXVLO, Asyn port name
# % macro, SVVLO, Asyn port name
# % macro, EIVLO, Asyn port name
# % macro, NIVLO, Asyn port name
# % macro, TEVLO, Asyn port name
# % macro, ELVLO, Asyn port name
# % macro, TVVLO, Asyn port name
# % macro, TTVLO, Asyn port name
# % macro, FTVLO, Asyn port name
# % macro, FFVLO, Asyn port name

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:UNITS_REQUEST") {
  field(SCAN, "5 second")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_int(BL04I-VA-ESVG-01:UNITS,UNI,_RBV) LPORT")
  field(PINI, "NO")
}

record(mbbi, "BL04I-VA-ESVG-01:UNITS_RBV") {
  field(ZRST, "mbar")
  field(ONST, "Torr")
  field(TWST, "Pascal")
  field(THST, "Micron")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
}

# % autosave 1 VAL
record(mbbo, "BL04I-VA-ESVG-01:UNITS") {
  field(ZRST, "mbar")
  field(ONST, "Torr")
  field(TWST, "Pascal")
  field(THST, "Micron")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
  field(OUT, "BL04I-VA-ESVG-01:UNITS_SEND PP NMS")
  field(PINI, "YES")
  field(VAL, "0")
}

# Send query to the controller
record(ao, "BL04I-VA-ESVG-01:UNITS_SEND") {
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto set_int(UNI) LPORT")
  field(PINI, "NO")
  field(FLNK, "BL04I-VA-ESVG-01:UNITS_FORCE_READ")
  field(DRVH, "3")
  field(DRVL, "0")
}

# Record to force BL04I-VA-ESVG-01:UNITS_REQUEST to process when a parameter is written to
# to verify the controller has taken the new value.
record(bo, "BL04I-VA-ESVG-01:UNITS_FORCE_READ") {
  field(SCAN, "Passive")
  field(OUT, "BL04I-VA-ESVG-01:UNITS_REQUEST.PROC PP")
  field(VAL, "1")
}
# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name
# % macro, PINIR, Asyn port name
# % macro, PINIW, Asyn port name
# % macro, DEFAULT_VAL, Asyn port name
# % macro, DRVH, Asyn port name
# % macro, DRVL, Asyn port name
# % macro, ZRSTI, Asyn port name
# % macro, ONSTI, Asyn port name
# % macro, TWSTI, Asyn port name
# % macro, THSTI, Asyn port name
# % macro, FRSTI, Asyn port name
# % macro, FVSTI, Asyn port name
# % macro, SXSTI, Asyn port name
# % macro, SVSTI, Asyn port name
# % macro, EISTI, Asyn port name
# % macro, NISTI, Asyn port name
# % macro, TESTI, Asyn port name
# % macro, ELSTI, Asyn port name
# % macro, TVSTI, Asyn port name
# % macro, TTSTI, Asyn port name
# % macro, FTSTI, Asyn port name
# % macro, FFSTI, Asyn port name
# % macro, ZRVLI, Asyn port name
# % macro, ONVLI, Asyn port name
# % macro, TWVLI, Asyn port name
# % macro, THVLI, Asyn port name
# % macro, FRVLI, Asyn port name
# % macro, FVVLI, Asyn port name
# % macro, SXVLI, Asyn port name
# % macro, SVVLI, Asyn port name
# % macro, EIVLI, Asyn port name
# % macro, NIVLI, Asyn port name
# % macro, TEVLI, Asyn port name
# % macro, ELVLI, Asyn port name
# % macro, TVVLI, Asyn port name
# % macro, TTVLI, Asyn port name
# % macro, FTVLI, Asyn port name
# % macro, FFVLI, Asyn port name
# % macro, ZRSTO, Asyn port name
# % macro, ONSTO, Asyn port name
# % macro, TWSTO, Asyn port name
# % macro, THSTO, Asyn port name
# % macro, FRSTO, Asyn port name
# % macro, FVSTO, Asyn port name
# % macro, SXSTO, Asyn port name
# % macro, SVSTO, Asyn port name
# % macro, EISTO, Asyn port name
# % macro, NISTO, Asyn port name
# % macro, TESTO, Asyn port name
# % macro, ELSTO, Asyn port name
# % macro, TVSTO, Asyn port name
# % macro, TTSTO, Asyn port name
# % macro, FTSTO, Asyn port name
# % macro, FFSTO, Asyn port name
# % macro, ZRVLO, Asyn port name
# % macro, ONVLO, Asyn port name
# % macro, TWVLO, Asyn port name
# % macro, THVLO, Asyn port name
# % macro, FRVLO, Asyn port name
# % macro, FVVLO, Asyn port name
# % macro, SXVLO, Asyn port name
# % macro, SVVLO, Asyn port name
# % macro, EIVLO, Asyn port name
# % macro, NIVLO, Asyn port name
# % macro, TEVLO, Asyn port name
# % macro, ELVLO, Asyn port name
# % macro, TVVLO, Asyn port name
# % macro, TTVLO, Asyn port name
# % macro, FTVLO, Asyn port name
# % macro, FFVLO, Asyn port name

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:BAUD_REQUEST") {
  field(SCAN, "5 second")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_int(BL04I-VA-ESVG-01:BAUD,BAU,_RBV) LPORT")
  field(PINI, "YES")
}

record(mbbi, "BL04I-VA-ESVG-01:BAUD_RBV") {
  field(ZRST, "9600")
  field(ONST, "19200")
  field(TWST, "38400")
  field(THST, "")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
}

# % autosave 1 VAL
record(mbbo, "BL04I-VA-ESVG-01:BAUD") {
  field(ZRST, "9600")
  field(ONST, "19200")
  field(TWST, "38400")
  field(THST, "")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
  field(OUT, "BL04I-VA-ESVG-01:BAUD_SEND PP NMS")
  field(PINI, "NO")
  field(VAL, "0")
}

# Send query to the controller
record(ao, "BL04I-VA-ESVG-01:BAUD_SEND") {
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto set_int(BAU) LPORT")
  field(PINI, "NO")
  field(FLNK, "BL04I-VA-ESVG-01:BAUD_FORCE_READ")
  field(DRVH, "2")
  field(DRVL, "0")
}

# Record to force BL04I-VA-ESVG-01:BAUD_REQUEST to process when a parameter is written to
# to verify the controller has taken the new value.
record(bo, "BL04I-VA-ESVG-01:BAUD_FORCE_READ") {
  field(SCAN, "Passive")
  field(OUT, "BL04I-VA-ESVG-01:BAUD_REQUEST.PROC PP")
  field(VAL, "1")
}
# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name
# % macro, PINIR, Asyn port name
# % macro, PINIW, Asyn port name
# % macro, DEFAULT_VAL, Asyn port name
# % macro, DRVH, Asyn port name
# % macro, DRVL, Asyn port name
# % macro, ZRSTI, Asyn port name
# % macro, ONSTI, Asyn port name
# % macro, TWSTI, Asyn port name
# % macro, THSTI, Asyn port name
# % macro, FRSTI, Asyn port name
# % macro, FVSTI, Asyn port name
# % macro, SXSTI, Asyn port name
# % macro, SVSTI, Asyn port name
# % macro, EISTI, Asyn port name
# % macro, NISTI, Asyn port name
# % macro, TESTI, Asyn port name
# % macro, ELSTI, Asyn port name
# % macro, TVSTI, Asyn port name
# % macro, TTSTI, Asyn port name
# % macro, FTSTI, Asyn port name
# % macro, FFSTI, Asyn port name
# % macro, ZRVLI, Asyn port name
# % macro, ONVLI, Asyn port name
# % macro, TWVLI, Asyn port name
# % macro, THVLI, Asyn port name
# % macro, FRVLI, Asyn port name
# % macro, FVVLI, Asyn port name
# % macro, SXVLI, Asyn port name
# % macro, SVVLI, Asyn port name
# % macro, EIVLI, Asyn port name
# % macro, NIVLI, Asyn port name
# % macro, TEVLI, Asyn port name
# % macro, ELVLI, Asyn port name
# % macro, TVVLI, Asyn port name
# % macro, TTVLI, Asyn port name
# % macro, FTVLI, Asyn port name
# % macro, FFVLI, Asyn port name
# % macro, ZRSTO, Asyn port name
# % macro, ONSTO, Asyn port name
# % macro, TWSTO, Asyn port name
# % macro, THSTO, Asyn port name
# % macro, FRSTO, Asyn port name
# % macro, FVSTO, Asyn port name
# % macro, SXSTO, Asyn port name
# % macro, SVSTO, Asyn port name
# % macro, EISTO, Asyn port name
# % macro, NISTO, Asyn port name
# % macro, TESTO, Asyn port name
# % macro, ELSTO, Asyn port name
# % macro, TVSTO, Asyn port name
# % macro, TTSTO, Asyn port name
# % macro, FTSTO, Asyn port name
# % macro, FFSTO, Asyn port name
# % macro, ZRVLO, Asyn port name
# % macro, ONVLO, Asyn port name
# % macro, TWVLO, Asyn port name
# % macro, THVLO, Asyn port name
# % macro, FRVLO, Asyn port name
# % macro, FVVLO, Asyn port name
# % macro, SXVLO, Asyn port name
# % macro, SVVLO, Asyn port name
# % macro, EIVLO, Asyn port name
# % macro, NIVLO, Asyn port name
# % macro, TEVLO, Asyn port name
# % macro, ELVLO, Asyn port name
# % macro, TVVLO, Asyn port name
# % macro, TTVLO, Asyn port name
# % macro, FTVLO, Asyn port name
# % macro, FFVLO, Asyn port name

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:HIGHVACUUM1_REQUEST") {
  field(SCAN, "5 second")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_int(BL04I-VA-ESVG-01:HIGHVACUUM1,HVC,_RBV) LPORT")
  field(PINI, "YES")
}

record(mbbi, "BL04I-VA-ESVG-01:HIGHVACUUM1_RBV") {
  field(ZRST, "Off")
  field(ONST, "On")
  field(TWST, "")
  field(THST, "")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
}

# % autosave 1 VAL
record(mbbo, "BL04I-VA-ESVG-01:HIGHVACUUM1") {
  field(ZRST, "Off")
  field(ONST, "On")
  field(TWST, "")
  field(THST, "")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
  field(OUT, "BL04I-VA-ESVG-01:HIGHVACUUM1_SEND PP NMS")
  field(PINI, "NO")
  field(VAL, "0")
}

# Send query to the controller
record(ao, "BL04I-VA-ESVG-01:HIGHVACUUM1_SEND") {
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto set_int(HVC) LPORT")
  field(PINI, "NO")
  field(FLNK, "BL04I-VA-ESVG-01:HIGHVACUUM1_FORCE_READ")
  field(DRVH, "1")
  field(DRVL, "0")
}

# Record to force BL04I-VA-ESVG-01:HIGHVACUUM1_REQUEST to process when a parameter is written to
# to verify the controller has taken the new value.
record(bo, "BL04I-VA-ESVG-01:HIGHVACUUM1_FORCE_READ") {
  field(SCAN, "Passive")
  field(OUT, "BL04I-VA-ESVG-01:HIGHVACUUM1_REQUEST.PROC PP")
  field(VAL, "1")
}
# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name
# % macro, PINIR, Asyn port name
# % macro, PINIW, Asyn port name
# % macro, DEFAULT_VAL, Asyn port name
# % macro, DRVH, Asyn port name
# % macro, DRVL, Asyn port name
# % macro, ZRSTI, Asyn port name
# % macro, ONSTI, Asyn port name
# % macro, TWSTI, Asyn port name
# % macro, THSTI, Asyn port name
# % macro, FRSTI, Asyn port name
# % macro, FVSTI, Asyn port name
# % macro, SXSTI, Asyn port name
# % macro, SVSTI, Asyn port name
# % macro, EISTI, Asyn port name
# % macro, NISTI, Asyn port name
# % macro, TESTI, Asyn port name
# % macro, ELSTI, Asyn port name
# % macro, TVSTI, Asyn port name
# % macro, TTSTI, Asyn port name
# % macro, FTSTI, Asyn port name
# % macro, FFSTI, Asyn port name
# % macro, ZRVLI, Asyn port name
# % macro, ONVLI, Asyn port name
# % macro, TWVLI, Asyn port name
# % macro, THVLI, Asyn port name
# % macro, FRVLI, Asyn port name
# % macro, FVVLI, Asyn port name
# % macro, SXVLI, Asyn port name
# % macro, SVVLI, Asyn port name
# % macro, EIVLI, Asyn port name
# % macro, NIVLI, Asyn port name
# % macro, TEVLI, Asyn port name
# % macro, ELVLI, Asyn port name
# % macro, TVVLI, Asyn port name
# % macro, TTVLI, Asyn port name
# % macro, FTVLI, Asyn port name
# % macro, FFVLI, Asyn port name
# % macro, ZRSTO, Asyn port name
# % macro, ONSTO, Asyn port name
# % macro, TWSTO, Asyn port name
# % macro, THSTO, Asyn port name
# % macro, FRSTO, Asyn port name
# % macro, FVSTO, Asyn port name
# % macro, SXSTO, Asyn port name
# % macro, SVSTO, Asyn port name
# % macro, EISTO, Asyn port name
# % macro, NISTO, Asyn port name
# % macro, TESTO, Asyn port name
# % macro, ELSTO, Asyn port name
# % macro, TVSTO, Asyn port name
# % macro, TTSTO, Asyn port name
# % macro, FTSTO, Asyn port name
# % macro, FFSTO, Asyn port name
# % macro, ZRVLO, Asyn port name
# % macro, ONVLO, Asyn port name
# % macro, TWVLO, Asyn port name
# % macro, THVLO, Asyn port name
# % macro, FRVLO, Asyn port name
# % macro, FVVLO, Asyn port name
# % macro, SXVLO, Asyn port name
# % macro, SVVLO, Asyn port name
# % macro, EIVLO, Asyn port name
# % macro, NIVLO, Asyn port name
# % macro, TEVLO, Asyn port name
# % macro, ELVLO, Asyn port name
# % macro, TVVLO, Asyn port name
# % macro, TTVLO, Asyn port name
# % macro, FTVLO, Asyn port name
# % macro, FFVLO, Asyn port name

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:DEGAS1_REQUEST") {
  field(SCAN, "5 second")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_int(BL04I-VA-ESVG-01:DEGAS1,DGS,_RBV) LPORT")
  field(PINI, "YES")
}

record(mbbi, "BL04I-VA-ESVG-01:DEGAS1_RBV") {
  field(ZRST, "Off")
  field(ONST, "On")
  field(TWST, "")
  field(THST, "")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
}

# % autosave 1 VAL
record(mbbo, "BL04I-VA-ESVG-01:DEGAS1") {
  field(ZRST, "Off")
  field(ONST, "On")
  field(TWST, "")
  field(THST, "")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
  field(OUT, "BL04I-VA-ESVG-01:DEGAS1_SEND PP NMS")
  field(PINI, "NO")
  field(VAL, "0")
}

# Send query to the controller
record(ao, "BL04I-VA-ESVG-01:DEGAS1_SEND") {
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto set_int(DGS) LPORT")
  field(PINI, "NO")
  field(FLNK, "BL04I-VA-ESVG-01:DEGAS1_FORCE_READ")
  field(DRVH, "1")
  field(DRVL, "0")
}

# Record to force BL04I-VA-ESVG-01:DEGAS1_REQUEST to process when a parameter is written to
# to verify the controller has taken the new value.
record(bo, "BL04I-VA-ESVG-01:DEGAS1_FORCE_READ") {
  field(SCAN, "Passive")
  field(OUT, "BL04I-VA-ESVG-01:DEGAS1_REQUEST.PROC PP")
  field(VAL, "1")
}
# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name
# % macro, PINIR, Asyn port name
# % macro, PINIW, Asyn port name
# % macro, DEFAULT_VAL, Asyn port name
# % macro, DRVH, Asyn port name
# % macro, DRVL, Asyn port name
# % macro, ZRSTI, Asyn port name
# % macro, ONSTI, Asyn port name
# % macro, TWSTI, Asyn port name
# % macro, THSTI, Asyn port name
# % macro, FRSTI, Asyn port name
# % macro, FVSTI, Asyn port name
# % macro, SXSTI, Asyn port name
# % macro, SVSTI, Asyn port name
# % macro, EISTI, Asyn port name
# % macro, NISTI, Asyn port name
# % macro, TESTI, Asyn port name
# % macro, ELSTI, Asyn port name
# % macro, TVSTI, Asyn port name
# % macro, TTSTI, Asyn port name
# % macro, FTSTI, Asyn port name
# % macro, FFSTI, Asyn port name
# % macro, ZRVLI, Asyn port name
# % macro, ONVLI, Asyn port name
# % macro, TWVLI, Asyn port name
# % macro, THVLI, Asyn port name
# % macro, FRVLI, Asyn port name
# % macro, FVVLI, Asyn port name
# % macro, SXVLI, Asyn port name
# % macro, SVVLI, Asyn port name
# % macro, EIVLI, Asyn port name
# % macro, NIVLI, Asyn port name
# % macro, TEVLI, Asyn port name
# % macro, ELVLI, Asyn port name
# % macro, TVVLI, Asyn port name
# % macro, TTVLI, Asyn port name
# % macro, FTVLI, Asyn port name
# % macro, FFVLI, Asyn port name
# % macro, ZRSTO, Asyn port name
# % macro, ONSTO, Asyn port name
# % macro, TWSTO, Asyn port name
# % macro, THSTO, Asyn port name
# % macro, FRSTO, Asyn port name
# % macro, FVSTO, Asyn port name
# % macro, SXSTO, Asyn port name
# % macro, SVSTO, Asyn port name
# % macro, EISTO, Asyn port name
# % macro, NISTO, Asyn port name
# % macro, TESTO, Asyn port name
# % macro, ELSTO, Asyn port name
# % macro, TVSTO, Asyn port name
# % macro, TTSTO, Asyn port name
# % macro, FTSTO, Asyn port name
# % macro, FFSTO, Asyn port name
# % macro, ZRVLO, Asyn port name
# % macro, ONVLO, Asyn port name
# % macro, TWVLO, Asyn port name
# % macro, THVLO, Asyn port name
# % macro, FRVLO, Asyn port name
# % macro, FVVLO, Asyn port name
# % macro, SXVLO, Asyn port name
# % macro, SVVLO, Asyn port name
# % macro, EIVLO, Asyn port name
# % macro, NIVLO, Asyn port name
# % macro, TEVLO, Asyn port name
# % macro, ELVLO, Asyn port name
# % macro, TVVLO, Asyn port name
# % macro, TTVLO, Asyn port name
# % macro, FTVLO, Asyn port name
# % macro, FFVLO, Asyn port name

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:FILTER1_REQUEST") {
  field(SCAN, "5 second")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_int(BL04I-VA-ESVG-01:FILTER1,FIL,_RBV) LPORT")
  field(PINI, "NO")
}

record(mbbi, "BL04I-VA-ESVG-01:FILTER1_RBV") {
  field(ZRST, "Fast")
  field(ONST, "Medium")
  field(TWST, "Slow")
  field(THST, "")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
}

# % autosave 1 VAL
record(mbbo, "BL04I-VA-ESVG-01:FILTER1") {
  field(ZRST, "Fast")
  field(ONST, "Medium")
  field(TWST, "Slow")
  field(THST, "")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
  field(OUT, "BL04I-VA-ESVG-01:FILTER1_SEND PP NMS")
  field(PINI, "YES")
  field(VAL, "1")
}

# Send query to the controller
record(ao, "BL04I-VA-ESVG-01:FILTER1_SEND") {
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto set_int(FIL) LPORT")
  field(PINI, "NO")
  field(FLNK, "BL04I-VA-ESVG-01:FILTER1_FORCE_READ")
  field(DRVH, "2")
  field(DRVL, "0")
}

# Record to force BL04I-VA-ESVG-01:FILTER1_REQUEST to process when a parameter is written to
# to verify the controller has taken the new value.
record(bo, "BL04I-VA-ESVG-01:FILTER1_FORCE_READ") {
  field(SCAN, "Passive")
  field(OUT, "BL04I-VA-ESVG-01:FILTER1_REQUEST.PROC PP")
  field(VAL, "1")
}
# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name
# % macro, PINIR, Asyn port name
# % macro, PINIW, Asyn port name
# % macro, DEFAULT_VAL, Asyn port name
# % macro, DRVH, Asyn port name
# % macro, DRVL, Asyn port name
# % macro, ZRSTI, Asyn port name
# % macro, ONSTI, Asyn port name
# % macro, TWSTI, Asyn port name
# % macro, THSTI, Asyn port name
# % macro, FRSTI, Asyn port name
# % macro, FVSTI, Asyn port name
# % macro, SXSTI, Asyn port name
# % macro, SVSTI, Asyn port name
# % macro, EISTI, Asyn port name
# % macro, NISTI, Asyn port name
# % macro, TESTI, Asyn port name
# % macro, ELSTI, Asyn port name
# % macro, TVSTI, Asyn port name
# % macro, TTSTI, Asyn port name
# % macro, FTSTI, Asyn port name
# % macro, FFSTI, Asyn port name
# % macro, ZRVLI, Asyn port name
# % macro, ONVLI, Asyn port name
# % macro, TWVLI, Asyn port name
# % macro, THVLI, Asyn port name
# % macro, FRVLI, Asyn port name
# % macro, FVVLI, Asyn port name
# % macro, SXVLI, Asyn port name
# % macro, SVVLI, Asyn port name
# % macro, EIVLI, Asyn port name
# % macro, NIVLI, Asyn port name
# % macro, TEVLI, Asyn port name
# % macro, ELVLI, Asyn port name
# % macro, TVVLI, Asyn port name
# % macro, TTVLI, Asyn port name
# % macro, FTVLI, Asyn port name
# % macro, FFVLI, Asyn port name
# % macro, ZRSTO, Asyn port name
# % macro, ONSTO, Asyn port name
# % macro, TWSTO, Asyn port name
# % macro, THSTO, Asyn port name
# % macro, FRSTO, Asyn port name
# % macro, FVSTO, Asyn port name
# % macro, SXSTO, Asyn port name
# % macro, SVSTO, Asyn port name
# % macro, EISTO, Asyn port name
# % macro, NISTO, Asyn port name
# % macro, TESTO, Asyn port name
# % macro, ELSTO, Asyn port name
# % macro, TVSTO, Asyn port name
# % macro, TTSTO, Asyn port name
# % macro, FTSTO, Asyn port name
# % macro, FFSTO, Asyn port name
# % macro, ZRVLO, Asyn port name
# % macro, ONVLO, Asyn port name
# % macro, TWVLO, Asyn port name
# % macro, THVLO, Asyn port name
# % macro, FRVLO, Asyn port name
# % macro, FVVLO, Asyn port name
# % macro, SXVLO, Asyn port name
# % macro, SVVLO, Asyn port name
# % macro, EIVLO, Asyn port name
# % macro, NIVLO, Asyn port name
# % macro, TEVLO, Asyn port name
# % macro, ELVLO, Asyn port name
# % macro, TVVLO, Asyn port name
# % macro, TTVLO, Asyn port name
# % macro, FTVLO, Asyn port name
# % macro, FFVLO, Asyn port name

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:DIGITS_REQUEST") {
  field(SCAN, "5 second")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_int(BL04I-VA-ESVG-01:DIGITS,DCD,_RBV) LPORT")
  field(PINI, "NO")
}

record(mbbi, "BL04I-VA-ESVG-01:DIGITS_RBV") {
  field(ZRST, "")
  field(ONST, "")
  field(TWST, "2 Digits")
  field(THST, "3 Digits")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
}

# % autosave 1 VAL
record(mbbo, "BL04I-VA-ESVG-01:DIGITS") {
  field(ZRST, "")
  field(ONST, "")
  field(TWST, "2 Digits")
  field(THST, "3 Digits")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
  field(OUT, "BL04I-VA-ESVG-01:DIGITS_SEND PP NMS")
  field(PINI, "YES")
  field(VAL, "2")
}

# Send query to the controller
record(ao, "BL04I-VA-ESVG-01:DIGITS_SEND") {
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto set_int(DCD) LPORT")
  field(PINI, "NO")
  field(FLNK, "BL04I-VA-ESVG-01:DIGITS_FORCE_READ")
  field(DRVH, "3")
  field(DRVL, "2")
}

# Record to force BL04I-VA-ESVG-01:DIGITS_REQUEST to process when a parameter is written to
# to verify the controller has taken the new value.
record(bo, "BL04I-VA-ESVG-01:DIGITS_FORCE_READ") {
  field(SCAN, "Passive")
  field(OUT, "BL04I-VA-ESVG-01:DIGITS_REQUEST.PROC PP")
  field(VAL, "1")
}
# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name
# % macro, PINIR, Asyn port name
# % macro, PINIW, Asyn port name
# % macro, DEFAULT_VAL, Asyn port name
# % macro, DRVH, Asyn port name
# % macro, DRVL, Asyn port name
# % macro, ZRSTI, Asyn port name
# % macro, ONSTI, Asyn port name
# % macro, TWSTI, Asyn port name
# % macro, THSTI, Asyn port name
# % macro, FRSTI, Asyn port name
# % macro, FVSTI, Asyn port name
# % macro, SXSTI, Asyn port name
# % macro, SVSTI, Asyn port name
# % macro, EISTI, Asyn port name
# % macro, NISTI, Asyn port name
# % macro, TESTI, Asyn port name
# % macro, ELSTI, Asyn port name
# % macro, TVSTI, Asyn port name
# % macro, TTSTI, Asyn port name
# % macro, FTSTI, Asyn port name
# % macro, FFSTI, Asyn port name
# % macro, ZRVLI, Asyn port name
# % macro, ONVLI, Asyn port name
# % macro, TWVLI, Asyn port name
# % macro, THVLI, Asyn port name
# % macro, FRVLI, Asyn port name
# % macro, FVVLI, Asyn port name
# % macro, SXVLI, Asyn port name
# % macro, SVVLI, Asyn port name
# % macro, EIVLI, Asyn port name
# % macro, NIVLI, Asyn port name
# % macro, TEVLI, Asyn port name
# % macro, ELVLI, Asyn port name
# % macro, TVVLI, Asyn port name
# % macro, TTVLI, Asyn port name
# % macro, FTVLI, Asyn port name
# % macro, FFVLI, Asyn port name
# % macro, ZRSTO, Asyn port name
# % macro, ONSTO, Asyn port name
# % macro, TWSTO, Asyn port name
# % macro, THSTO, Asyn port name
# % macro, FRSTO, Asyn port name
# % macro, FVSTO, Asyn port name
# % macro, SXSTO, Asyn port name
# % macro, SVSTO, Asyn port name
# % macro, EISTO, Asyn port name
# % macro, NISTO, Asyn port name
# % macro, TESTO, Asyn port name
# % macro, ELSTO, Asyn port name
# % macro, TVSTO, Asyn port name
# % macro, TTSTO, Asyn port name
# % macro, FTSTO, Asyn port name
# % macro, FFSTO, Asyn port name
# % macro, ZRVLO, Asyn port name
# % macro, ONVLO, Asyn port name
# % macro, TWVLO, Asyn port name
# % macro, THVLO, Asyn port name
# % macro, FRVLO, Asyn port name
# % macro, FVVLO, Asyn port name
# % macro, SXVLO, Asyn port name
# % macro, SVVLO, Asyn port name
# % macro, EIVLO, Asyn port name
# % macro, NIVLO, Asyn port name
# % macro, TEVLO, Asyn port name
# % macro, ELVLO, Asyn port name
# % macro, TVVLO, Asyn port name
# % macro, TTVLO, Asyn port name
# % macro, FTVLO, Asyn port name
# % macro, FFVLO, Asyn port name

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:WDOG_CONT_REQUEST") {
  field(SCAN, "5 second")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_int(BL04I-VA-ESVG-01:WDOG_CONT,WDT,_RBV) LPORT")
  field(PINI, "NO")
}

record(mbbi, "BL04I-VA-ESVG-01:WDOG_CONT_RBV") {
  field(ZRST, "Man Ack")
  field(ONST, "Auto Ack")
  field(TWST, "")
  field(THST, "")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
}

# % autosave 1 VAL
record(mbbo, "BL04I-VA-ESVG-01:WDOG_CONT") {
  field(ZRST, "Man Ack")
  field(ONST, "Auto Ack")
  field(TWST, "")
  field(THST, "")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
  field(OUT, "BL04I-VA-ESVG-01:WDOG_CONT_SEND PP NMS")
  field(PINI, "YES")
  field(VAL, "1")
}

# Send query to the controller
record(ao, "BL04I-VA-ESVG-01:WDOG_CONT_SEND") {
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto set_int(WDT) LPORT")
  field(PINI, "NO")
  field(FLNK, "BL04I-VA-ESVG-01:WDOG_CONT_FORCE_READ")
  field(DRVH, "1")
  field(DRVL, "0")
}

# Record to force BL04I-VA-ESVG-01:WDOG_CONT_REQUEST to process when a parameter is written to
# to verify the controller has taken the new value.
record(bo, "BL04I-VA-ESVG-01:WDOG_CONT_FORCE_READ") {
  field(SCAN, "Passive")
  field(OUT, "BL04I-VA-ESVG-01:WDOG_CONT_REQUEST.PROC PP")
  field(VAL, "1")
}
# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name
# % macro, PINIR, Asyn port name
# % macro, PINIW, Asyn port name
# % macro, DEFAULT_VAL, Asyn port name
# % macro, DRVH, Asyn port name
# % macro, DRVL, Asyn port name
# % macro, ZRSTI, Asyn port name
# % macro, ONSTI, Asyn port name
# % macro, TWSTI, Asyn port name
# % macro, THSTI, Asyn port name
# % macro, FRSTI, Asyn port name
# % macro, FVSTI, Asyn port name
# % macro, SXSTI, Asyn port name
# % macro, SVSTI, Asyn port name
# % macro, EISTI, Asyn port name
# % macro, NISTI, Asyn port name
# % macro, TESTI, Asyn port name
# % macro, ELSTI, Asyn port name
# % macro, TVSTI, Asyn port name
# % macro, TTSTI, Asyn port name
# % macro, FTSTI, Asyn port name
# % macro, FFSTI, Asyn port name
# % macro, ZRVLI, Asyn port name
# % macro, ONVLI, Asyn port name
# % macro, TWVLI, Asyn port name
# % macro, THVLI, Asyn port name
# % macro, FRVLI, Asyn port name
# % macro, FVVLI, Asyn port name
# % macro, SXVLI, Asyn port name
# % macro, SVVLI, Asyn port name
# % macro, EIVLI, Asyn port name
# % macro, NIVLI, Asyn port name
# % macro, TEVLI, Asyn port name
# % macro, ELVLI, Asyn port name
# % macro, TVVLI, Asyn port name
# % macro, TTVLI, Asyn port name
# % macro, FTVLI, Asyn port name
# % macro, FFVLI, Asyn port name
# % macro, ZRSTO, Asyn port name
# % macro, ONSTO, Asyn port name
# % macro, TWSTO, Asyn port name
# % macro, THSTO, Asyn port name
# % macro, FRSTO, Asyn port name
# % macro, FVSTO, Asyn port name
# % macro, SXSTO, Asyn port name
# % macro, SVSTO, Asyn port name
# % macro, EISTO, Asyn port name
# % macro, NISTO, Asyn port name
# % macro, TESTO, Asyn port name
# % macro, ELSTO, Asyn port name
# % macro, TVSTO, Asyn port name
# % macro, TTSTO, Asyn port name
# % macro, FTSTO, Asyn port name
# % macro, FFSTO, Asyn port name
# % macro, ZRVLO, Asyn port name
# % macro, ONVLO, Asyn port name
# % macro, TWVLO, Asyn port name
# % macro, THVLO, Asyn port name
# % macro, FRVLO, Asyn port name
# % macro, FVVLO, Asyn port name
# % macro, SXVLO, Asyn port name
# % macro, SVVLO, Asyn port name
# % macro, EIVLO, Asyn port name
# % macro, NIVLO, Asyn port name
# % macro, TEVLO, Asyn port name
# % macro, ELVLO, Asyn port name
# % macro, TVVLO, Asyn port name
# % macro, TTVLO, Asyn port name
# % macro, FTVLO, Asyn port name
# % macro, FFVLO, Asyn port name

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:TORRLOCK_REQUEST") {
  field(SCAN, "5 second")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_int(BL04I-VA-ESVG-01:TORRLOCK,TLC,_RBV) LPORT")
  field(PINI, "NO")
}

record(mbbi, "BL04I-VA-ESVG-01:TORRLOCK_RBV") {
  field(ZRST, "Off")
  field(ONST, "On")
  field(TWST, "")
  field(THST, "")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
}

# % autosave 1 VAL
record(mbbo, "BL04I-VA-ESVG-01:TORRLOCK") {
  field(ZRST, "Off")
  field(ONST, "On")
  field(TWST, "")
  field(THST, "")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
  field(OUT, "BL04I-VA-ESVG-01:TORRLOCK_SEND PP NMS")
  field(PINI, "YES")
  field(VAL, "0")
}

# Send query to the controller
record(ao, "BL04I-VA-ESVG-01:TORRLOCK_SEND") {
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto set_int(TLC) LPORT")
  field(PINI, "NO")
  field(FLNK, "BL04I-VA-ESVG-01:TORRLOCK_FORCE_READ")
  field(DRVH, "1")
  field(DRVL, "0")
}

# Record to force BL04I-VA-ESVG-01:TORRLOCK_REQUEST to process when a parameter is written to
# to verify the controller has taken the new value.
record(bo, "BL04I-VA-ESVG-01:TORRLOCK_FORCE_READ") {
  field(SCAN, "Passive")
  field(OUT, "BL04I-VA-ESVG-01:TORRLOCK_REQUEST.PROC PP")
  field(VAL, "1")
}
# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name
# % macro, PINIR, Asyn port name
# % macro, PINIW, Asyn port name
# % macro, DEFAULT_VAL, Asyn port name
# % macro, DRVH, Asyn port name
# % macro, DRVL, Asyn port name
# % macro, ZRSTI, Asyn port name
# % macro, ONSTI, Asyn port name
# % macro, TWSTI, Asyn port name
# % macro, THSTI, Asyn port name
# % macro, FRSTI, Asyn port name
# % macro, FVSTI, Asyn port name
# % macro, SXSTI, Asyn port name
# % macro, SVSTI, Asyn port name
# % macro, EISTI, Asyn port name
# % macro, NISTI, Asyn port name
# % macro, TESTI, Asyn port name
# % macro, ELSTI, Asyn port name
# % macro, TVSTI, Asyn port name
# % macro, TTSTI, Asyn port name
# % macro, FTSTI, Asyn port name
# % macro, FFSTI, Asyn port name
# % macro, ZRVLI, Asyn port name
# % macro, ONVLI, Asyn port name
# % macro, TWVLI, Asyn port name
# % macro, THVLI, Asyn port name
# % macro, FRVLI, Asyn port name
# % macro, FVVLI, Asyn port name
# % macro, SXVLI, Asyn port name
# % macro, SVVLI, Asyn port name
# % macro, EIVLI, Asyn port name
# % macro, NIVLI, Asyn port name
# % macro, TEVLI, Asyn port name
# % macro, ELVLI, Asyn port name
# % macro, TVVLI, Asyn port name
# % macro, TTVLI, Asyn port name
# % macro, FTVLI, Asyn port name
# % macro, FFVLI, Asyn port name
# % macro, ZRSTO, Asyn port name
# % macro, ONSTO, Asyn port name
# % macro, TWSTO, Asyn port name
# % macro, THSTO, Asyn port name
# % macro, FRSTO, Asyn port name
# % macro, FVSTO, Asyn port name
# % macro, SXSTO, Asyn port name
# % macro, SVSTO, Asyn port name
# % macro, EISTO, Asyn port name
# % macro, NISTO, Asyn port name
# % macro, TESTO, Asyn port name
# % macro, ELSTO, Asyn port name
# % macro, TVSTO, Asyn port name
# % macro, TTSTO, Asyn port name
# % macro, FTSTO, Asyn port name
# % macro, FFSTO, Asyn port name
# % macro, ZRVLO, Asyn port name
# % macro, ONVLO, Asyn port name
# % macro, TWVLO, Asyn port name
# % macro, THVLO, Asyn port name
# % macro, FRVLO, Asyn port name
# % macro, FVVLO, Asyn port name
# % macro, SXVLO, Asyn port name
# % macro, SVVLO, Asyn port name
# % macro, EIVLO, Asyn port name
# % macro, NIVLO, Asyn port name
# % macro, TEVLO, Asyn port name
# % macro, ELVLO, Asyn port name
# % macro, TVVLO, Asyn port name
# % macro, TTVLO, Asyn port name
# % macro, FTVLO, Asyn port name
# % macro, FFVLO, Asyn port name

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:PARAMETERLOCK_REQUEST") {
  field(SCAN, "5 second")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_int(BL04I-VA-ESVG-01:PARAMETERLOCK,LOC,_RBV) LPORT")
  field(PINI, "NO")
}

record(mbbi, "BL04I-VA-ESVG-01:PARAMETERLOCK_RBV") {
  field(ZRST, "Off")
  field(ONST, "On")
  field(TWST, "")
  field(THST, "")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
}

# % autosave 1 VAL
record(mbbo, "BL04I-VA-ESVG-01:PARAMETERLOCK") {
  field(ZRST, "Off")
  field(ONST, "On")
  field(TWST, "")
  field(THST, "")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
  field(OUT, "BL04I-VA-ESVG-01:PARAMETERLOCK_SEND PP NMS")
  field(PINI, "YES")
  field(VAL, "0")
}

# Send query to the controller
record(ao, "BL04I-VA-ESVG-01:PARAMETERLOCK_SEND") {
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto set_int(LOC) LPORT")
  field(PINI, "NO")
  field(FLNK, "BL04I-VA-ESVG-01:PARAMETERLOCK_FORCE_READ")
  field(DRVH, "1")
  field(DRVL, "0")
}

# Record to force BL04I-VA-ESVG-01:PARAMETERLOCK_REQUEST to process when a parameter is written to
# to verify the controller has taken the new value.
record(bo, "BL04I-VA-ESVG-01:PARAMETERLOCK_FORCE_READ") {
  field(SCAN, "Passive")
  field(OUT, "BL04I-VA-ESVG-01:PARAMETERLOCK_REQUEST.PROC PP")
  field(VAL, "1")
}
# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name
# % macro, PINIR, Asyn port name
# % macro, PINIW, Asyn port name
# % macro, DEFAULT_VAL, Asyn port name
# % macro, DRVH, Asyn port name
# % macro, DRVL, Asyn port name
# % macro, ZRSTI, Asyn port name
# % macro, ONSTI, Asyn port name
# % macro, TWSTI, Asyn port name
# % macro, THSTI, Asyn port name
# % macro, FRSTI, Asyn port name
# % macro, FVSTI, Asyn port name
# % macro, SXSTI, Asyn port name
# % macro, SVSTI, Asyn port name
# % macro, EISTI, Asyn port name
# % macro, NISTI, Asyn port name
# % macro, TESTI, Asyn port name
# % macro, ELSTI, Asyn port name
# % macro, TVSTI, Asyn port name
# % macro, TTSTI, Asyn port name
# % macro, FTSTI, Asyn port name
# % macro, FFSTI, Asyn port name
# % macro, ZRVLI, Asyn port name
# % macro, ONVLI, Asyn port name
# % macro, TWVLI, Asyn port name
# % macro, THVLI, Asyn port name
# % macro, FRVLI, Asyn port name
# % macro, FVVLI, Asyn port name
# % macro, SXVLI, Asyn port name
# % macro, SVVLI, Asyn port name
# % macro, EIVLI, Asyn port name
# % macro, NIVLI, Asyn port name
# % macro, TEVLI, Asyn port name
# % macro, ELVLI, Asyn port name
# % macro, TVVLI, Asyn port name
# % macro, TTVLI, Asyn port name
# % macro, FTVLI, Asyn port name
# % macro, FFVLI, Asyn port name
# % macro, ZRSTO, Asyn port name
# % macro, ONSTO, Asyn port name
# % macro, TWSTO, Asyn port name
# % macro, THSTO, Asyn port name
# % macro, FRSTO, Asyn port name
# % macro, FVSTO, Asyn port name
# % macro, SXSTO, Asyn port name
# % macro, SVSTO, Asyn port name
# % macro, EISTO, Asyn port name
# % macro, NISTO, Asyn port name
# % macro, TESTO, Asyn port name
# % macro, ELSTO, Asyn port name
# % macro, TVSTO, Asyn port name
# % macro, TTSTO, Asyn port name
# % macro, FTSTO, Asyn port name
# % macro, FFSTO, Asyn port name
# % macro, ZRVLO, Asyn port name
# % macro, ONVLO, Asyn port name
# % macro, TWVLO, Asyn port name
# % macro, THVLO, Asyn port name
# % macro, FRVLO, Asyn port name
# % macro, FVVLO, Asyn port name
# % macro, SXVLO, Asyn port name
# % macro, SVVLO, Asyn port name
# % macro, EIVLO, Asyn port name
# % macro, NIVLO, Asyn port name
# % macro, TEVLO, Asyn port name
# % macro, ELVLO, Asyn port name
# % macro, TVVLO, Asyn port name
# % macro, TTVLO, Asyn port name
# % macro, FTVLO, Asyn port name
# % macro, FFVLO, Asyn port name

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:DTEST_REQUEST") {
  field(SCAN, "5 second")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_int(BL04I-VA-ESVG-01:DTEST,TDI,_RBV) LPORT")
  field(PINI, "NO")
}

record(mbbi, "BL04I-VA-ESVG-01:DTEST_RBV") {
  field(ZRST, "Off")
  field(ONST, "On")
  field(TWST, "")
  field(THST, "")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
}

# % autosave 1 VAL
record(mbbo, "BL04I-VA-ESVG-01:DTEST") {
  field(ZRST, "Off")
  field(ONST, "On")
  field(TWST, "")
  field(THST, "")
  field(FRST, "")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
  field(OUT, "BL04I-VA-ESVG-01:DTEST_SEND PP NMS")
  field(PINI, "YES")
  field(VAL, "0")
}

# Send query to the controller
record(ao, "BL04I-VA-ESVG-01:DTEST_SEND") {
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto set_int(TDI) LPORT")
  field(PINI, "NO")
  field(FLNK, "BL04I-VA-ESVG-01:DTEST_FORCE_READ")
  field(DRVH, "1")
  field(DRVL, "0")
}

# Record to force BL04I-VA-ESVG-01:DTEST_REQUEST to process when a parameter is written to
# to verify the controller has taken the new value.
record(bo, "BL04I-VA-ESVG-01:DTEST_FORCE_READ") {
  field(SCAN, "Passive")
  field(OUT, "BL04I-VA-ESVG-01:DTEST_REQUEST.PROC PP")
  field(VAL, "1")
}
# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name
# % macro, PINIR, Asyn port name
# % macro, PINIW, Asyn port name
# % macro, DEFAULT_VAL, Asyn port name
# % macro, DRVH, Asyn port name
# % macro, DRVL, Asyn port name
# % macro, ZRSTI, Asyn port name
# % macro, ONSTI, Asyn port name
# % macro, TWSTI, Asyn port name
# % macro, THSTI, Asyn port name
# % macro, FRSTI, Asyn port name
# % macro, FVSTI, Asyn port name
# % macro, SXSTI, Asyn port name
# % macro, SVSTI, Asyn port name
# % macro, EISTI, Asyn port name
# % macro, NISTI, Asyn port name
# % macro, TESTI, Asyn port name
# % macro, ELSTI, Asyn port name
# % macro, TVSTI, Asyn port name
# % macro, TTSTI, Asyn port name
# % macro, FTSTI, Asyn port name
# % macro, FFSTI, Asyn port name
# % macro, ZRVLI, Asyn port name
# % macro, ONVLI, Asyn port name
# % macro, TWVLI, Asyn port name
# % macro, THVLI, Asyn port name
# % macro, FRVLI, Asyn port name
# % macro, FVVLI, Asyn port name
# % macro, SXVLI, Asyn port name
# % macro, SVVLI, Asyn port name
# % macro, EIVLI, Asyn port name
# % macro, NIVLI, Asyn port name
# % macro, TEVLI, Asyn port name
# % macro, ELVLI, Asyn port name
# % macro, TVVLI, Asyn port name
# % macro, TTVLI, Asyn port name
# % macro, FTVLI, Asyn port name
# % macro, FFVLI, Asyn port name
# % macro, ZRSTO, Asyn port name
# % macro, ONSTO, Asyn port name
# % macro, TWSTO, Asyn port name
# % macro, THSTO, Asyn port name
# % macro, FRSTO, Asyn port name
# % macro, FVSTO, Asyn port name
# % macro, SXSTO, Asyn port name
# % macro, SVSTO, Asyn port name
# % macro, EISTO, Asyn port name
# % macro, NISTO, Asyn port name
# % macro, TESTO, Asyn port name
# % macro, ELSTO, Asyn port name
# % macro, TVSTO, Asyn port name
# % macro, TTSTO, Asyn port name
# % macro, FTSTO, Asyn port name
# % macro, FFSTO, Asyn port name
# % macro, ZRVLO, Asyn port name
# % macro, ONVLO, Asyn port name
# % macro, TWVLO, Asyn port name
# % macro, THVLO, Asyn port name
# % macro, FRVLO, Asyn port name
# % macro, FVVLO, Asyn port name
# % macro, SXVLO, Asyn port name
# % macro, SVVLO, Asyn port name
# % macro, EIVLO, Asyn port name
# % macro, NIVLO, Asyn port name
# % macro, TEVLO, Asyn port name
# % macro, ELVLO, Asyn port name
# % macro, TVVLO, Asyn port name
# % macro, TTVLO, Asyn port name
# % macro, FTVLO, Asyn port name
# % macro, FFVLO, Asyn port name

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:IOTEST_REQUEST") {
  field(SCAN, "5 second")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_int(BL04I-VA-ESVG-01:IOTEST,TIO,_RBV) LPORT")
  field(PINI, "NO")
}

record(mbbi, "BL04I-VA-ESVG-01:IOTEST_RBV") {
  field(ZRST, "Off")
  field(ONST, "SP0 ER0")
  field(TWST, "SP1 ER0")
  field(THST, "SP0 ER1")
  field(FRST, "SP1 ER1")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
}

# % autosave 1 VAL
record(mbbo, "BL04I-VA-ESVG-01:IOTEST") {
  field(ZRST, "Off")
  field(ONST, "SP0 ER0")
  field(TWST, "SP1 ER0")
  field(THST, "SP0 ER1")
  field(FRST, "SP1 ER1")
  field(FVST, "")
  field(SXST, "")
  field(SVST, "")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
  field(OUT, "BL04I-VA-ESVG-01:IOTEST_SEND PP NMS")
  field(PINI, "YES")
  field(VAL, "0")
}

# Send query to the controller
record(ao, "BL04I-VA-ESVG-01:IOTEST_SEND") {
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto set_int(TIO) LPORT")
  field(PINI, "NO")
  field(FLNK, "BL04I-VA-ESVG-01:IOTEST_FORCE_READ")
  field(DRVH, "4")
  field(DRVL, "0")
}

# Record to force BL04I-VA-ESVG-01:IOTEST_REQUEST to process when a parameter is written to
# to verify the controller has taken the new value.
record(bo, "BL04I-VA-ESVG-01:IOTEST_FORCE_READ") {
  field(SCAN, "Passive")
  field(OUT, "BL04I-VA-ESVG-01:IOTEST_REQUEST.PROC PP")
  field(VAL, "1")
}# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, IPARAM, Asyn port name
# % macro, FPARAM, Asyn port name
# % macro, CMD, Asyn port name
# % macro, HIGH, Minor alarm high threshold
# % macro, LOW, Minor alarm low threshold
# % macro, HIHI, Major alarm high threshold
# % macro, HIHI,Major alarm low threshold
# % macro, ZRSTI, Asyn port name
# % macro, ONSTI, Asyn port name
# % macro, TWSTI, Asyn port name
# % macro, THSTI, Asyn port name
# % macro, FRSTI, Asyn port name
# % macro, FVSTI, Asyn port name
# % macro, SXSTI, Asyn port name
# % macro, SVSTI, Asyn port name
# % macro, EISTI, Asyn port name
# % macro, NISTI, Asyn port name
# % macro, TESTI, Asyn port name
# % macro, ELSTI, Asyn port name
# % macro, TVSTI, Asyn port name
# % macro, TTSTI, Asyn port name
# % macro, FTSTI, Asyn port name
# % macro, FFSTI, Asyn port name
# % macro, ZRVLI, Asyn port name
# % macro, ONVLI, Asyn port name
# % macro, TWVLI, Asyn port name
# % macro, THVLI, Asyn port name
# % macro, FRVLI, Asyn port name
# % macro, FVVLI, Asyn port name
# % macro, SXVLI, Asyn port name
# % macro, SVVLI, Asyn port name
# % macro, EIVLI, Asyn port name
# % macro, NIVLI, Asyn port name
# % macro, TEVLI, Asyn port name
# % macro, ELVLI, Asyn port name
# % macro, TVVLI, Asyn port name
# % macro, TTVLI, Asyn port name
# % macro, FTVLI, Asyn port name
# % macro, FFVLI, Asyn port name


# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:PRESSURE1_REQUEST") {
  field(SCAN, "5 second")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_int_floatE(BL04I-VA-ESVG-01:,STATUS1,PRESSURE1,PR1) LPORT")
  field(PINI, "YES")
}


# % archiver 10
#% autosave 1 HIHI
#% autosave 1 LOLO
#% autosave 1 HIGH
#% autosave 1 LOW
record(ai, "BL04I-VA-ESVG-01:PRESSURE1_RBV") {
  field(PREC, "5")
  field(HIGH, "0.0005")
  field(LOW, "0.000002")
  field(HIHI, "0.0008")
  field(LOLO, "0.000001")
  field(HSV, "MINOR")
  field(LSV, "MINOR")
  field(HHSV, "MAJOR")
  field(LLSV, "MAJOR")
}

record(mbbi, "BL04I-VA-ESVG-01:STATUS1_RBV") {
  field(ZRST, "OK")
  field(ONST, "Under")
  field(TWST, "Over")
  field(THST, "Sensor Err")
  field(FRST, "Sensor Off")
  field(FVST, "No Sensor")
  field(SXST, "ID Err")
  field(SVST, "Err ITR")
  field(EIST, "")
  field(NIST, "")
  field(TEST, "")
  field(ELST, "")
  field(TVST, "")
  field(TTST, "")
  field(FTST, "")
  field(FFST, "")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
}# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, SUF1, Asyn port name
# % macro, SUF2, Asyn port name
# % macro, CMD, Asyn port name
# % macro, DRVH, Asyn port name
# % macro, DRVL, Asyn port name

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:THRESHOLD_REQUEST") {
  field(SCAN, "5 second")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_2floatE(BL04I-VA-ESVG-01:THRESHOLD,SP1,LO,HI) LPORT")
  field(PINI, "YES")
}

record(ai, "BL04I-VA-ESVG-01:THRESHOLD_LO_RBV") {
  field(PREC, "5")
}

record(ai, "BL04I-VA-ESVG-01:THRESHOLD_HI_RBV") {
  field(PREC, "5")
}

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:THRESHOLD_LO_SEND") {
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto set_2floatE(BL04I-VA-ESVG-01:THRESHOLD,SP1,_LO,_HI_RBV) LPORT")
  field(PINI, "NO")
  field(FLNK, "BL04I-VA-ESVG-01:THRESHOLD_FORCE_READ")
}

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:THRESHOLD_HI_SEND") {
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto set_2floatE(BL04I-VA-ESVG-01:THRESHOLD,SP1,_LO_RBV,_HI) LPORT")
  field(PINI, "NO")
  field(FLNK, "BL04I-VA-ESVG-01:THRESHOLD_FORCE_READ")
}

record(ao, "BL04I-VA-ESVG-01:THRESHOLD_LO") {
  field(PREC, "5")
  field(FLNK, "BL04I-VA-ESVG-01:THRESHOLD_LO_SEND")
  field(DRVH, "")
  field(DRVL, "")
}

record(ao, "BL04I-VA-ESVG-01:THRESHOLD_HI") {
  field(PREC, "5")
  field(FLNK, "BL04I-VA-ESVG-01:THRESHOLD_HI_SEND")
  field(DRVH, "")
  field(DRVL, "")
}

# Record to force BL04I-VA-ESVG-01:THRESHOLD_REQUEST to process when a parameter is written to
# to verify the controller has taken the new value.
record(bo, "BL04I-VA-ESVG-01:THRESHOLD_FORCE_READ") {
  field(SCAN, "Passive")
  field(OUT, "BL04I-VA-ESVG-01:THRESHOLD_REQUEST.PROC PP")
  field(VAL, "1")
}# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:ADC_TST_REQUEST") {
  field(SCAN, "5 second")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_3float(BL04I-VA-ESVG-01:ADC_TST,TAD) LPORT")
  field(PINI, "YES")
}

record(ai, "BL04I-VA-ESVG-01:ADC_TST_1_RBV") {
  field(PREC, "5")
}

record(ai, "BL04I-VA-ESVG-01:ADC_TST_2_RBV") {
  field(PREC, "5")
}

record(ai, "BL04I-VA-ESVG-01:ADC_TST_3_RBV") {
  field(PREC, "5")
}
# % macro, P, PV Prefix
# % macro, PORT, Asyn port name
# % macro, SCAN, Asyn port name
# % macro, PARAM, Asyn port name
# % macro, CMD, Asyn port name
# % macro, PINIR, Asyn port name
# % macro, PINIW, Asyn port name
# % macro, DEFAULT_VAL, Asyn port name
# % macro, DRVH, Asyn port name
# % macro, DRVL, Asyn port name

# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:CORRFACTOR1_REQUEST") {
  field(SCAN, "5 second")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto get_float(BL04I-VA-ESVG-01:CORRFACTOR1,COR,_RBV) LPORT")
  field(PINI, "NO")
}

record(ai, "BL04I-VA-ESVG-01:CORRFACTOR1_RBV") {
  field(PREC, "5")
}


# Send query to the controller
record(stringout, "BL04I-VA-ESVG-01:CORRFACTOR1_SEND") {
  field(SCAN, "Passive")
  field(DTYP, "stream")
  field(OUT, "@leybold.proto set_float(BL04I-VA-ESVG-01:CORRFACTOR1,COR) LPORT")
  field(PINI, "YES")
  field(FLNK, "BL04I-VA-ESVG-01:CORRFACTOR1_FORCE_READ")
}


record(ao, "BL04I-VA-ESVG-01:CORRFACTOR1") {
  field(PREC, "5")
  field(FLNK, "BL04I-VA-ESVG-01:CORRFACTOR1_SEND")
  field(VAL, "1.000")
  field(DRVH, "10.000")
  field(DRVL, "0.100")
}

# Record to force BL04I-VA-ESVG-01:CORRFACTOR1_REQUEST to process when a parameter is written to
# to verify the controller has taken the new value.
record(bo, "BL04I-VA-ESVG-01:CORRFACTOR1_FORCE_READ") {
  field(SCAN, "Passive")
  field(OUT, "BL04I-VA-ESVG-01:CORRFACTOR1_REQUEST.PROC PP")
  field(VAL, "1")
}
