#! Generated by VisualDCT v2.7.1-SNAPSHOT

# Template with general purpose calc record. 
# For userinterface see\nthe corresponding calc.edl EDM screen.
#
# Macros:
# P: Device base PV name (prefix)
# S: Device instance PV name
# ADEL: Archiver deadband for the calc record
#%autosave 0 SCAN PREC EGU CALC INPA INPB INPC INPD INPE INPF A B C D E F
#% archiver 0.1 Monitor
record(calc, "$(P)$(S)") {
  field(DESC, "Calculation record")
  field(SCAN, "Passive")
  field(PREC, "4")
  field(PINI, "YES")
  field(ADEL, "$(ADEL)")
}

#%autosave 0 VAL
record(bo, "$(P)$(S):DISA") {
  field(DESC, "disable calculation")
  field(PINI, "YES")
  field(DTYP, "Soft Channel")
  field(VAL, "0")
  field(OUT, "$(P)$(S).DISA PP")
  field(ZNAM, "enable")
  field(ONAM, "disable")
}

#% autosave 0 VAL
record(bo, "$(P)$(S):INPA:MON") {
  field(DESC, "select to monitor input")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(DTYP, "Soft Channel")
  field(VAL, "0")
  field(ZNAM, "off")
  field(ONAM, "on")
  field(IVOA, "Don't drive outputs")
  field(OUT, "$(P)$(S):INPA:FIELD.D PP")
}

record(scalcout, "$(P)$(S):INPA:FIELD") {
  field(DESC, "Generate INPA field")
  field(SCAN, "Passive")
  field(PINI, "NO")
  field(DTYP, "Soft Channel")
  field(CALC, "AA!=''")
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "D?$P('%s CPP',AA):$P('%s CA',AA)")
  field(IVOA, "Don't drive outputs")
  field(OUT, "$(P)$(S).INPA CA")
}

#%autosave 0 VAL
record(stringout, "$(P)$(S):INPA:PV") {
  field(DESC, "PV name for calculation")
  field(PINI, "YES")
  field(DTYP, "Soft Channel")
  field(OUT, "$(P)$(S):INPA:FIELD.AA PP MS")
  field(MPST, "Always")
  field(APST, "Always")
  field(IVOA, "Set output to IVOV")
  field(IVOV, "''")
}

#%autosave 0 VAL
record(stringout, "$(P)$(S):INPB:PV") {
  field(DESC, "PV name for calculation")
  field(PINI, "YES")
  field(DTYP, "Soft Channel")
  field(MPST, "Always")
  field(APST, "Always")
  field(IVOA, "Set output to IVOV")
  field(IVOV, "''")
  field(OUT, "$(P)$(S):INPB:FIELD.AA PP")
}

#%autosave 0 VAL
record(bo, "$(P)$(S):INPB:MON") {
  field(DESC, "select to monitor input")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(DTYP, "Soft Channel")
  field(VAL, "0")
  field(ZNAM, "off")
  field(ONAM, "on")
  field(IVOA, "Don't drive outputs")
  field(OUT, "$(P)$(S):INPB:FIELD.D PP")
}

record(scalcout, "$(P)$(S):INPB:FIELD") {
  field(DESC, "Generate INPA field")
  field(SCAN, "Passive")
  field(PINI, "NO")
  field(DTYP, "Soft Channel")
  field(CALC, "AA!=''")
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "D?$P('%s CPP',AA):$P('%s CA',AA)")
  field(IVOA, "Don't drive outputs")
  field(OUT, "$(P)$(S).INPB CA")
}

#%autosave 0 VAL
record(stringout, "$(P)$(S):INPC:PV") {
  field(DESC, "PV name for calculation")
  field(PINI, "YES")
  field(DTYP, "Soft Channel")
  field(MPST, "Always")
  field(APST, "Always")
  field(IVOA, "Set output to IVOV")
  field(IVOV, "''")
  field(OUT, "$(P)$(S):INPC:FIELD.AA PP")
}

#%autosave 0 VAL
record(bo, "$(P)$(S):INPC:MON") {
  field(DESC, "select to monitor input")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(DTYP, "Soft Channel")
  field(VAL, "0")
  field(ZNAM, "off")
  field(ONAM, "on")
  field(IVOA, "Don't drive outputs")
  field(OUT, "$(P)$(S):INPC:FIELD.D PP")
}

record(scalcout, "$(P)$(S):INPC:FIELD") {
  field(DESC, "Generate INPA field")
  field(SCAN, "Passive")
  field(PINI, "NO")
  field(DTYP, "Soft Channel")
  field(CALC, "AA!=''")
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "D?$P('%s CPP',AA):$P('%s CA',AA)")
  field(IVOA, "Don't drive outputs")
  field(OUT, "$(P)$(S).INPC CA")
}

record(scalcout, "$(P)$(S):INPD:FIELD") {
  field(DESC, "Generate INPA field")
  field(SCAN, "Passive")
  field(PINI, "NO")
  field(DTYP, "Soft Channel")
  field(CALC, "AA!=''")
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "D?$P('%s CPP',AA):$P('%s CA',AA)")
  field(IVOA, "Don't drive outputs")
  field(OUT, "$(P)$(S).INPD CA")
}

#%autosave 0 VAL
record(bo, "$(P)$(S):INPD:MON") {
  field(DESC, "select to monitor input")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(DTYP, "Soft Channel")
  field(VAL, "0")
  field(ZNAM, "off")
  field(ONAM, "on")
  field(IVOA, "Don't drive outputs")
  field(OUT, "$(P)$(S):INPD:FIELD.D PP")
}

#%autosave 0 VAL
record(stringout, "$(P)$(S):INPD:PV") {
  field(DESC, "PV name for calculation")
  field(PINI, "YES")
  field(DTYP, "Soft Channel")
  field(MPST, "Always")
  field(APST, "Always")
  field(IVOA, "Set output to IVOV")
  field(IVOV, "''")
  field(OUT, "$(P)$(S):INPD:FIELD.AA PP")
}

record(scalcout, "$(P)$(S):INPE:FIELD") {
  field(DESC, "Generate INPA field")
  field(SCAN, "Passive")
  field(PINI, "NO")
  field(DTYP, "Soft Channel")
  field(CALC, "AA!=''")
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "D?$P('%s CPP',AA):$P('%s CA',AA)")
  field(IVOA, "Don't drive outputs")
  field(OUT, "$(P)$(S).INPE CA")
}

#%autosave 0 VAL
record(stringout, "$(P)$(S):INPE:PV") {
  field(DESC, "PV name for calculation")
  field(PINI, "YES")
  field(DTYP, "Soft Channel")
  field(MPST, "Always")
  field(APST, "Always")
  field(IVOA, "Set output to IVOV")
  field(IVOV, "''")
  field(OUT, "$(P)$(S):INPE:FIELD.AA PP")
}

#%autosave 0 VAL
record(bo, "$(P)$(S):INPE:MON") {
  field(DESC, "select to monitor input")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(DTYP, "Soft Channel")
  field(VAL, "0")
  field(ZNAM, "off")
  field(ONAM, "on")
  field(IVOA, "Don't drive outputs")
  field(OUT, "$(P)$(S):INPE:FIELD.D PP")
}

record(scalcout, "$(P)$(S):INPF:FIELD") {
  field(DESC, "Generate INPA field")
  field(SCAN, "Passive")
  field(PINI, "NO")
  field(DTYP, "Soft Channel")
  field(CALC, "AA!=''")
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "D?$P('%s CPP',AA):$P('%s CA',AA)")
  field(IVOA, "Don't drive outputs")
  field(OUT, "$(P)$(S).INPF CA")
}

#%autosave 0 VAL
record(bo, "$(P)$(S):INPF:MON") {
  field(DESC, "select to monitor input")
  field(SCAN, "Passive")
  field(PINI, "YES")
  field(DTYP, "Soft Channel")
  field(VAL, "0")
  field(ZNAM, "off")
  field(ONAM, "on")
  field(IVOA, "Don't drive outputs")
  field(OUT, "$(P)$(S):INPF:FIELD.D PP")
}

#%autosave 0 VAL
record(stringout, "$(P)$(S):INPF:PV") {
  field(DESC, "PV name for calculation")
  field(PINI, "YES")
  field(DTYP, "Soft Channel")
  field(MPST, "Always")
  field(APST, "Always")
  field(IVOA, "Set output to IVOV")
  field(IVOV, "''")
  field(OUT, "$(P)$(S):INPF:FIELD.AA PP")
}

record(scalcout, "$(P)$(S):INPA:CLEAR") {
  field(DESC, "Clear INPA field")
  field(SCAN, "Passive")
  field(PINI, "NO")
  field(DTYP, "Soft Channel")
  field(CALC, "(' ')")
  field(OUT, "$(P)$(S).INPA CA")
  field(OOPT, "Every Time")
  field(DOPT, "Use CALC")
}

record(scalcout, "$(P)$(S):INPB:CLEAR") {
  field(DESC, "Clear INPA field")
  field(SCAN, "Passive")
  field(PINI, "NO")
  field(DTYP, "Soft Channel")
  field(CALC, "(' ')")
  field(OUT, "$(P)$(S).INPB CA")
  field(OOPT, "Every Time")
  field(DOPT, "Use CALC")
}

record(scalcout, "$(P)$(S):INPC:CLEAR") {
  field(DESC, "Clear INPA field")
  field(SCAN, "Passive")
  field(PINI, "NO")
  field(DTYP, "Soft Channel")
  field(CALC, "(' ')")
  field(OUT, "$(P)$(S).INPC CA")
  field(OOPT, "Every Time")
  field(DOPT, "Use CALC")
}

record(scalcout, "$(P)$(S):INPD:CLEAR") {
  field(DESC, "Clear INPA field")
  field(SCAN, "Passive")
  field(PINI, "NO")
  field(DTYP, "Soft Channel")
  field(CALC, "(' ')")
  field(OUT, "$(P)$(S).INPD CA")
  field(OOPT, "Every Time")
  field(DOPT, "Use CALC")
}

record(scalcout, "$(P)$(S):INPE:CLEAR") {
  field(DESC, "Clear INPA field")
  field(SCAN, "Passive")
  field(PINI, "NO")
  field(DTYP, "Soft Channel")
  field(CALC, "(' ')")
  field(OUT, "$(P)$(S).INPE CA")
  field(OOPT, "Every Time")
  field(DOPT, "Use CALC")
}

record(scalcout, "$(P)$(S):INPF:CLEAR") {
  field(DESC, "Clear INPA field")
  field(SCAN, "Passive")
  field(PINI, "NO")
  field(DTYP, "Soft Channel")
  field(CALC, "(' ')")
  field(OUT, "$(P)$(S).INPF CA")
  field(OOPT, "Every Time")
  field(DOPT, "Use CALC")
}

#% autosave 0 VAL
record(stringin, "$(P)$(S):DESC") {
  field(PINI, "YES")
  field(VAL, "Calculation Output")
}
